[{"shortname": "FA12", "longname": "FA12", "scenario": [{"action": "html", "tag": "h1", "inner": "FA1.2 template - Fungible assets", "line_no": 125}, {"action": "html", "tag": "p", "inner": "[[TABLEOFCONTENTS]]", "line_no": 127}, {"action": "html", "tag": "h1", "inner": "Accounts", "line_no": 135}, {"action": "show", "html": true, "stripStrings": false, "expression": "(list 136 (account_of_seed \"Administrator\" 130) (account_of_seed \"Alice\" 131) (account_of_seed \"Robert\" 132))", "compile": false, "line_no": 136}, {"action": "html", "tag": "h1", "inner": "Contract", "line_no": 138}, {"action": "html", "tag": "h1", "inner": "Entry points", "line_no": 141}, {"action": "newContract", "id": "(static_id 0 20)", "export": "(storage (record 20 (administrator (reduce (attr (account_of_seed \"Administrator\" 130) \"address\" 130) 130)) (balances (type_annotation (big_map 23 ) (bigmap (unknown 2) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 23)) (paused (literal (bool False) 20)) (totalSupply (literal (intOrNat 0) 20)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (getAdministrator True ((bind \"__s1\" ((set_type (first (params 108) 142) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 142) (contract \"address\") 142) (set (operations 142) (cons (transfer (getLocal \"__s1\" 142) (literal (mutez 0) 142) (second (params 108) 142) 108) (operations 142) 142) 142))) (getAllowance True ((bind \"__s2\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 142) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 142) \"spender\" 69) 69) 69))) (set_type (second (params 68) 142) (contract \"nat\") 142) (set (operations 142) (cons (transfer (getLocal \"__s2\" 142) (literal (mutez 0) 142) (second (params 68) 142) 68) (operations 142) 142) 142))) (getBalance True ((bind \"__s3\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 142) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 142) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 142) 65) \"balance\" 65) 65))) (set_type (second (params 60) 142) (contract \"nat\") 142) (set (operations 142) (cons (transfer (getLocal \"__s3\" 142) (literal (mutez 0) 142) (second (params 60) 142) 60) (operations 142) 142) 142))) (getTotalSupply True ((bind \"__s4\" ((set_type (first (params 72) 142) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 142) (contract \"nat\") 142) (set (operations 142) (cons (transfer (getLocal \"__s4\" 142) (literal (mutez 0) 142) (second (params 72) 142) 72) (operations 142) 142) 142))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 142, "show": true, "accept_unknown_types": false}, {"action": "html", "tag": "h2", "inner": "Admin mints a few coins", "line_no": 143}, {"action": "message", "id": "(static_id 0 20)", "dynamic": false, "message": "mint", "params": "(record 144 (address (reduce (attr (account_of_seed \"Alice\" 131) \"address\" 131) 131)) (value (literal (intOrNat 12) 144)))", "line_no": 144, "title": "", "messageClass": "", "source": "none", "sender": "seed:Administrator", "chain_id": "", "time": "(literal (timestamp 0) 20)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 144)", "show": true, "valid": "(literal (bool True) 144)", "voting_powers": "(map 144 )", "export": true}, {"action": "message", "id": "(static_id 0 20)", "dynamic": false, "message": "mint", "params": "(record 145 (address (reduce (attr (account_of_seed \"Alice\" 131) \"address\" 131) 131)) (value (literal (intOrNat 3) 145)))", "line_no": 145, "title": "", "messageClass": "", "source": "none", "sender": "seed:Administrator", "chain_id": "", "time": "(literal (timestamp 0) 20)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 145)", "show": true, "valid": "(literal (bool True) 145)", "voting_powers": "(map 145 )", "export": true}, {"action": "message", "id": "(static_id 0 20)", "dynamic": false, "message": "mint", "params": "(record 146 (address (reduce (attr (account_of_seed \"Alice\" 131) \"address\" 131) 131)) (value (literal (intOrNat 3) 146)))", "line_no": 146, "title": "", "messageClass": "", "source": "none", "sender": "seed:Administrator", "chain_id": "", "time": "(literal (timestamp 0) 20)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 146)", "show": true, "valid": "(literal (bool True) 146)", "voting_powers": "(map 146 )", "export": true}, {"action": "html", "tag": "h2", "inner": "Alice transfers to Bob", "line_no": 147}, {"action": "message", "id": "(static_id 0 20)", "dynamic": false, "message": "transfer", "params": "(record 148 (from_ (reduce (attr (account_of_seed \"Alice\" 131) \"address\" 131) 131)) (to_ (reduce (attr (account_of_seed \"Robert\" 132) \"address\" 132) 132)) (value (literal (intOrNat 4) 148)))", "line_no": 148, "title": "", "messageClass": "", "source": "none", "sender": "seed:Alice", "chain_id": "", "time": "(literal (timestamp 0) 20)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 148)", "show": true, "valid": "(literal (bool True) 148)", "voting_powers": "(map 148 )", "export": true}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 20) 148) \"balances\" 149) (reduce (attr (account_of_seed \"Alice\" 131) \"address\" 131) 131) 149) \"balance\" 149) (literal (intOrNat 14) 149) 149)", "line_no": 149}, {"action": "html", "tag": "h2", "inner": "Bob tries to transfer from Alice but he doesn't have her approval", "line_no": 150}, {"action": "message", "id": "(static_id 0 20)", "dynamic": false, "message": "transfer", "params": "(record 151 (from_ (reduce (attr (account_of_seed \"Alice\" 131) \"address\" 131) 131)) (to_ (reduce (attr (account_of_seed \"Robert\" 132) \"address\" 132) 132)) (value (literal (intOrNat 4) 151)))", "line_no": 151, "title": "", "messageClass": "", "source": "none", "sender": "seed:Robert", "chain_id": "", "time": "(literal (timestamp 0) 20)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 151)", "show": true, "valid": "(literal (bool False) 151)", "voting_powers": "(map 151 )", "export": true}, {"action": "html", "tag": "h2", "inner": "Alice approves Bob and Bob transfers", "line_no": 152}, {"action": "message", "id": "(static_id 0 20)", "dynamic": false, "message": "approve", "params": "(record 153 (spender (reduce (attr (account_of_seed \"Robert\" 132) \"address\" 132) 132)) (value (literal (intOrNat 5) 153)))", "line_no": 153, "title": "", "messageClass": "", "source": "none", "sender": "seed:Alice", "chain_id": "", "time": "(literal (timestamp 0) 20)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 153)", "show": true, "valid": "(literal (bool True) 153)", "voting_powers": "(map 153 )", "export": true}, {"action": "message", "id": "(static_id 0 20)", "dynamic": false, "message": "transfer", "params": "(record 154 (from_ (reduce (attr (account_of_seed \"Alice\" 131) \"address\" 131) 131)) (to_ (reduce (attr (account_of_seed \"Robert\" 132) \"address\" 132) 132)) (value (literal (intOrNat 4) 154)))", "line_no": 154, "title": "", "messageClass": "", "source": "none", "sender": "seed:Robert", "chain_id": "", "time": "(literal (timestamp 0) 20)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 154)", "show": true, "valid": "(literal (bool True) 154)", "voting_powers": "(map 154 )", "export": true}, {"action": "html", "tag": "h2", "inner": "Bob tries to over-transfer from Alice", "line_no": 155}, {"action": "message", "id": "(static_id 0 20)", "dynamic": false, "message": "transfer", "params": "(record 156 (from_ (reduce (attr (account_of_seed \"Alice\" 131) \"address\" 131) 131)) (to_ (reduce (attr (account_of_seed \"Robert\" 132) \"address\" 132) 132)) (value (literal (intOrNat 4) 156)))", "line_no": 156, "title": "", "messageClass": "", "source": "none", "sender": "seed:Robert", "chain_id": "", "time": "(literal (timestamp 0) 20)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 156)", "show": true, "valid": "(literal (bool False) 156)", "voting_powers": "(map 156 )", "export": true}, {"action": "html", "tag": "h2", "inner": "Admin burns Bob token", "line_no": 157}, {"action": "message", "id": "(static_id 0 20)", "dynamic": false, "message": "burn", "params": "(record 158 (address (reduce (attr (account_of_seed \"Robert\" 132) \"address\" 132) 132)) (value (literal (intOrNat 1) 158)))", "line_no": 158, "title": "", "messageClass": "", "source": "none", "sender": "seed:Administrator", "chain_id": "", "time": "(literal (timestamp 0) 20)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 158)", "show": true, "valid": "(literal (bool True) 158)", "voting_powers": "(map 158 )", "export": true}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 20) 158) \"balances\" 159) (reduce (attr (account_of_seed \"Alice\" 131) \"address\" 131) 131) 159) \"balance\" 159) (literal (intOrNat 10) 159) 159)", "line_no": 159}, {"action": "html", "tag": "h2", "inner": "Alice tries to burn Bob token", "line_no": 160}, {"action": "message", "id": "(static_id 0 20)", "dynamic": false, "message": "burn", "params": "(record 161 (address (reduce (attr (account_of_seed \"Robert\" 132) \"address\" 132) 132)) (value (literal (intOrNat 1) 161)))", "line_no": 161, "title": "", "messageClass": "", "source": "none", "sender": "seed:Alice", "chain_id": "", "time": "(literal (timestamp 0) 20)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 161)", "show": true, "valid": "(literal (bool False) 161)", "voting_powers": "(map 161 )", "export": true}, {"action": "html", "tag": "h2", "inner": "Admin pauses the contract and Alice cannot transfer anymore", "line_no": 162}, {"action": "message", "id": "(static_id 0 20)", "dynamic": false, "message": "setPause", "params": "(literal (bool True) 163)", "line_no": 163, "title": "", "messageClass": "", "source": "none", "sender": "seed:Administrator", "chain_id": "", "time": "(literal (timestamp 0) 20)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 163)", "show": true, "valid": "(literal (bool True) 163)", "voting_powers": "(map 163 )", "export": true}, {"action": "message", "id": "(static_id 0 20)", "dynamic": false, "message": "transfer", "params": "(record 164 (from_ (reduce (attr (account_of_seed \"Alice\" 131) \"address\" 131) 131)) (to_ (reduce (attr (account_of_seed \"Robert\" 132) \"address\" 132) 132)) (value (literal (intOrNat 4) 164)))", "line_no": 164, "title": "", "messageClass": "", "source": "none", "sender": "seed:Alice", "chain_id": "", "time": "(literal (timestamp 0) 20)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 164)", "show": true, "valid": "(literal (bool False) 164)", "voting_powers": "(map 164 )", "export": true}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 20) 164) \"balances\" 165) (reduce (attr (account_of_seed \"Alice\" 131) \"address\" 131) 131) 165) \"balance\" 165) (literal (intOrNat 10) 165) 165)", "line_no": 165}, {"action": "html", "tag": "h2", "inner": "Admin transfers while on pause", "line_no": 166}, {"action": "message", "id": "(static_id 0 20)", "dynamic": false, "message": "transfer", "params": "(record 167 (from_ (reduce (attr (account_of_seed \"Alice\" 131) \"address\" 131) 131)) (to_ (reduce (attr (account_of_seed \"Robert\" 132) \"address\" 132) 132)) (value (literal (intOrNat 1) 167)))", "line_no": 167, "title": "", "messageClass": "", "source": "none", "sender": "seed:Administrator", "chain_id": "", "time": "(literal (timestamp 0) 20)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 167)", "show": true, "valid": "(literal (bool True) 167)", "voting_powers": "(map 167 )", "export": true}, {"action": "html", "tag": "h2", "inner": "Admin unpauses the contract and transferts are allowed", "line_no": 168}, {"action": "message", "id": "(static_id 0 20)", "dynamic": false, "message": "setPause", "params": "(literal (bool False) 169)", "line_no": 169, "title": "", "messageClass": "", "source": "none", "sender": "seed:Administrator", "chain_id": "", "time": "(literal (timestamp 0) 20)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 169)", "show": true, "valid": "(literal (bool True) 169)", "voting_powers": "(map 169 )", "export": true}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 20) 169) \"balances\" 170) (reduce (attr (account_of_seed \"Alice\" 131) \"address\" 131) 131) 170) \"balance\" 170) (literal (intOrNat 9) 170) 170)", "line_no": 170}, {"action": "message", "id": "(static_id 0 20)", "dynamic": false, "message": "transfer", "params": "(record 171 (from_ (reduce (attr (account_of_seed \"Alice\" 131) \"address\" 131) 131)) (to_ (reduce (attr (account_of_seed \"Robert\" 132) \"address\" 132) 132)) (value (literal (intOrNat 1) 171)))", "line_no": 171, "title": "", "messageClass": "", "source": "none", "sender": "seed:Alice", "chain_id": "", "time": "(literal (timestamp 0) 20)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 171)", "show": true, "valid": "(literal (bool True) 171)", "voting_powers": "(map 171 )", "export": true}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 0 20) 171) \"totalSupply\" 173) (literal (intOrNat 17) 173) 173)", "line_no": 173}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 20) 171) \"balances\" 174) (reduce (attr (account_of_seed \"Alice\" 131) \"address\" 131) 131) 174) \"balance\" 174) (literal (intOrNat 8) 174) 174)", "line_no": 174}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 20) 171) \"balances\" 174) (reduce (attr (account_of_seed \"Robert\" 132) \"address\" 132) 132) 175) \"balance\" 175) (literal (intOrNat 9) 175) 175)", "line_no": 175}], "decompile": false, "kind": "test"}, {"shortname": "updateContractMetadata_-_succeeds_when_called_by_governor", "longname": "updateContractMetadata - succeeds when called by governor", "scenario": [{"action": "newContract", "id": "(static_id 0 98)", "export": "(storage (record 98 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 102 ) (bigmap (unknown 3) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 102)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 89 ((literal (string \"\") 464) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 91)) ((literal (string \"data\") 464) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 88))) (bigmap \"string\" \"bytes\") 89)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 98)) (rewardPercent (literal (nat 1) 54)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 98)) (tokenAddress (literal (address \"tz1aJS7Pk9uWR3wWyFf1i3RwhYxN84G7stom\") 17)) (token_metadata (type_annotation (big_map 78 ((literal (nat 0) 65) (tuple 464 (literal (nat 0) 65) (type_annotation (map 67 ((literal (string \"name\") 464) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 69)) ((literal (string \"decimals\") 464) (literal (bytes \"0x3138\") 70)) ((literal (string \"symbol\") 464) (literal (bytes \"0x6465787465724c6b555344\") 71)) ((literal (string \"icon\") 464) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 72))) (map \"string\" \"bytes\") 67)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 78)) (totalSupply (literal (intOrNat 0) 98)) (underlyingBalance (literal (nat 0) 119)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 135) \"unit\" 136) (set (operations 140) (cons (transfer (unit) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) (openVariant (contract \"\" \"unit\" (source) 140) \"Some\" \"None\" 140) 140) (operations 140) 140) 140) (set (operations 156) (cons (transfer (tuple 156 (to_address (self) \"None\") (tuple 156 (literal (intOrNat 1) 156) (add_seconds (now) (literal (int 3600) 148) 148))) (sub (balance) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) 143) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 153) 151) \"Some\" \"None\" 151) 156) (operations 156) 156) 156) (set (operations 166) (cons (transfer (unit) (literal (mutez 0) 166) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 161) \"Some\" \"None\" 161) 166) (operations 166) 166) 166))) (deposit True ((set_type (params 195) \"nat\" 196) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 199) 199) (literal (string \"bad state\") 199) 199) (set (attr (data) \"state\" 199) (literal (intOrNat 3) 202) 202) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"Some\" (params 195) 203) 203) (set (attr (data) \"savedState_depositor\" 204) (variant \"Some\" (sender) 204) 204) (set (operations 213) (cons (transfer (tuple 213 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 207)) (literal (mutez 0) 213) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 208) \"Some\" \"None\" 208) 213) (operations 213) 213) 213))) (deposit_callback True ((set_type (params 217) \"nat\" 218) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 221) (literal (string \"bad sender\") 221) 221) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 3) 224) 224) (literal (string \"bad state\") 224) 224) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 203) \"Some\" \"None\" 227) 227) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 228) (literal (intOrNat 1000000000000000000) 228) 228) 228) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 229) 229) ((defineLocal \"newUnderlyingBalance\" (add (params 217) (getLocal \"tokensToDeposit\" 230) 230) 230) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 231) (literal (intOrNat 1000000000000000000) 231) 231) (getLocal \"newUnderlyingBalance\" 231) 231) 231) (set (getLocal \"newTokens\" 464) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 232) (attr (data) \"totalSupply\" 96) 232) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 232) (getLocal \"fractionOfPoolOwnership\" 232) 232) 232) \"Some\" \"None\" 232) 232) 232)) 229) (set (attr (data) \"underlyingBalance\" 235) (add (params 217) (getLocal \"tokensToDeposit\" 235) 235) 235) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 204) \"Some\" \"None\" 238) 238) (set (operations 249) (cons (transfer (record 239 (from_ (getLocal \"depositor\" 240)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 242))) (literal (mutez 0) 249) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 244) \"Some\" \"None\" 244) 249) (operations 249) 249) 249) (set (operations 261) (cons (transfer (record 252 (address (getLocal \"depositor\" 253)) (value (getLocal \"newTokens\" 254))) (literal (mutez 0) 261) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 256) \"Some\" \"None\" 256) 261) (operations 261) 261) 261) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 264) 264) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"None\" (unit) -1) 265) (set (attr (data) \"savedState_depositor\" 204) (variant \"None\" (unit) -1) 266))) (getAdministrator True ((bind \"__s5\" ((set_type (first (params 108) 464) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 464) (contract \"address\") 464) (set (operations 464) (cons (transfer (getLocal \"__s5\" 464) (literal (mutez 0) 464) (second (params 108) 464) 108) (operations 464) 464) 464))) (getAllowance True ((bind \"__s6\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 464) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 464) \"spender\" 69) 69) 69))) (set_type (second (params 68) 464) (contract \"nat\") 464) (set (operations 464) (cons (transfer (getLocal \"__s6\" 464) (literal (mutez 0) 464) (second (params 68) 464) 68) (operations 464) 464) 464))) (getBalance True ((bind \"__s7\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 464) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 464) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 464) 65) \"balance\" 65) 65))) (set_type (second (params 60) 464) (contract \"nat\") 464) (set (operations 464) (cons (transfer (getLocal \"__s7\" 464) (literal (mutez 0) 464) (second (params 60) 464) 60) (operations 464) 464) 464))) (getTotalSupply True ((bind \"__s8\" ((set_type (first (params 72) 464) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 464) (contract \"nat\") 464) (set (operations 464) (cons (transfer (getLocal \"__s8\" 464) (literal (mutez 0) 464) (second (params 72) 464) 72) (operations 464) 464) 464))) (liquidate True ((set_type (params 170) \"address\" 171) (set (operations 179) (cons (transfer (params 170) (literal (mutez 0) 179) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 176) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179) (set (operations 187) (cons (transfer (unit) (literal (mutez 0) 187) (openVariant (contract \"liquidate\" \"unit\" (params 170) 182) \"Some\" \"None\" 182) 187) (operations 187) 187) 187))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 270) \"nat\" 271) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 274) 274) (literal (string \"bad state\") 274) 274) (set (attr (data) \"state\" 199) (literal (intOrNat 2) 277) 277) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"Some\" (params 270) 278) 278) (set (attr (data) \"savedState_redeemer\" 279) (variant \"Some\" (sender) 279) 279) (set (operations 288) (cons (transfer (tuple 288 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 282)) (literal (mutez 0) 288) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 283) \"Some\" \"None\" 283) 288) (operations 288) 288) 288))) (redeem_callback True ((set_type (params 292) \"nat\" 293) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 296) (literal (string \"bad sender\") 296) 296) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 2) 299) 299) (literal (string \"bad state\") 299) 299) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 278) \"Some\" \"None\" 302) 302) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 303) (literal (intOrNat 1000000000000000000) 303) 303) (attr (data) \"totalSupply\" 96) 303) 303) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 304) (params 292) 304) (literal (intOrNat 1000000000000000000) 304) 304) 304) (set (attr (data) \"underlyingBalance\" 235) (openVariant (isNat (sub (params 292) (getLocal \"tokensToReceive\" 307) 307) 307) \"Some\" \"None\" 307) 307) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 279) \"Some\" \"None\" 310) 310) (set (operations 320) (cons (transfer (record 311 (address (getLocal \"redeemer\" 312)) (value (getLocal \"tokensToRedeem\" 313))) (literal (mutez 0) 320) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 315) \"Some\" \"None\" 315) 320) (operations 320) 320) 320) (set (operations 333) (cons (transfer (record 323 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 325)) (value (getLocal \"tokensToReceive\" 326))) (literal (mutez 0) 333) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 328) \"Some\" \"None\" 328) 333) (operations 333) 333) 333) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 336) 336) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"None\" (unit) -1) 337) (set (attr (data) \"savedState_redeemer\" 279) (variant \"None\" (unit) -1) 338))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 346) \"unit\" 347) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 350) 350) (literal (string \"bad state\") 350) 350) (set (attr (data) \"state\" 199) (literal (intOrNat 1) 353) 353) (set (operations 362) (cons (transfer (tuple 362 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 356)) (literal (mutez 0) 362) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 357) \"Some\" \"None\" 357) 362) (operations 362) 362) 362))) (updateBalance_callback True ((set_type (params 366) \"nat\" 367) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 370) (literal (string \"bad sender\") 370) 370) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 1) 373) 373) (literal (string \"bad state\") 373) 373) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 376) 376) (set (attr (data) \"underlyingBalance\" 235) (params 366) 379))) (updateContractMetadata True ((set_type (params 419) (tuple \"string\" \"bytes\") 420) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 422) (literal (string \"not governor\") 422) 422) (set (getItem (attr (data) \"metadata\" 426) (first (params 419) 424) 426) (second (params 419) 425) 426))) (updateDexterAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"dexterAddress\" 153) (params 403) 407))) (updateGovernorAddress True ((set_type (params 387) \"address\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"governorAddress\" 422) (params 387) 391))) (updateOvenRegistryAddress True ((set_type (params 411) \"address\" 412) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 414) (literal (string \"not governor\") 414) 414) (set (attr (data) \"ovenRegistryAddress\" 176) (params 411) 415))) (updateRewardPercent True ((set_type (params 395) \"nat\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"rewardPercent\" 139) (params 395) 399))) (updateTokenMetadata True ((set_type (params 430) (tuple \"nat\" (map \"string\" \"bytes\")) 431) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 433) (literal (string \"not governor\") 433) 433) (set (getItem (attr (data) \"token_metadata\" 434) (literal (intOrNat 0) 434) 434) (params 430) 434))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 464, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 98)", "dynamic": false, "message": "updateContractMetadata", "params": "(tuple 469 (literal (string \"\") 469) (literal (bytes \"0x1234567890\") 468))", "line_no": 469, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 469)", "show": true, "valid": "(literal (bool True) 469)", "voting_powers": "(map 469 )", "export": true}, {"action": "verify", "condition": "(eq (getItem (attr (contractData (static_id 0 98) 469) \"metadata\" 474) (literal (string \"\") 474) 474) (literal (bytes \"0x1234567890\") 468) 474)", "line_no": 474}], "decompile": false, "kind": "test"}, {"shortname": "updateContractMetadata_-_fails_when_not_called_by_governor", "longname": "updateContractMetadata - fails when not called by governor", "scenario": [{"action": "newContract", "id": "(static_id 0 98)", "export": "(storage (record 98 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 102 ) (bigmap (unknown 13) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 102)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 89 ((literal (string \"\") 484) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 91)) ((literal (string \"data\") 484) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 88))) (bigmap \"string\" \"bytes\") 89)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 98)) (rewardPercent (literal (nat 1) 54)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 98)) (tokenAddress (literal (address \"tz1aJS7Pk9uWR3wWyFf1i3RwhYxN84G7stom\") 17)) (token_metadata (type_annotation (big_map 78 ((literal (nat 0) 65) (tuple 484 (literal (nat 0) 65) (type_annotation (map 67 ((literal (string \"name\") 484) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 69)) ((literal (string \"decimals\") 484) (literal (bytes \"0x3138\") 70)) ((literal (string \"symbol\") 484) (literal (bytes \"0x6465787465724c6b555344\") 71)) ((literal (string \"icon\") 484) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 72))) (map \"string\" \"bytes\") 67)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 78)) (totalSupply (literal (intOrNat 0) 98)) (underlyingBalance (literal (nat 0) 119)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 135) \"unit\" 136) (set (operations 140) (cons (transfer (unit) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) (openVariant (contract \"\" \"unit\" (source) 140) \"Some\" \"None\" 140) 140) (operations 140) 140) 140) (set (operations 156) (cons (transfer (tuple 156 (to_address (self) \"None\") (tuple 156 (literal (intOrNat 1) 156) (add_seconds (now) (literal (int 3600) 148) 148))) (sub (balance) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) 143) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 153) 151) \"Some\" \"None\" 151) 156) (operations 156) 156) 156) (set (operations 166) (cons (transfer (unit) (literal (mutez 0) 166) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 161) \"Some\" \"None\" 161) 166) (operations 166) 166) 166))) (deposit True ((set_type (params 195) \"nat\" 196) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 199) 199) (literal (string \"bad state\") 199) 199) (set (attr (data) \"state\" 199) (literal (intOrNat 3) 202) 202) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"Some\" (params 195) 203) 203) (set (attr (data) \"savedState_depositor\" 204) (variant \"Some\" (sender) 204) 204) (set (operations 213) (cons (transfer (tuple 213 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 207)) (literal (mutez 0) 213) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 208) \"Some\" \"None\" 208) 213) (operations 213) 213) 213))) (deposit_callback True ((set_type (params 217) \"nat\" 218) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 221) (literal (string \"bad sender\") 221) 221) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 3) 224) 224) (literal (string \"bad state\") 224) 224) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 203) \"Some\" \"None\" 227) 227) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 228) (literal (intOrNat 1000000000000000000) 228) 228) 228) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 229) 229) ((defineLocal \"newUnderlyingBalance\" (add (params 217) (getLocal \"tokensToDeposit\" 230) 230) 230) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 231) (literal (intOrNat 1000000000000000000) 231) 231) (getLocal \"newUnderlyingBalance\" 231) 231) 231) (set (getLocal \"newTokens\" 484) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 232) (attr (data) \"totalSupply\" 96) 232) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 232) (getLocal \"fractionOfPoolOwnership\" 232) 232) 232) \"Some\" \"None\" 232) 232) 232)) 229) (set (attr (data) \"underlyingBalance\" 235) (add (params 217) (getLocal \"tokensToDeposit\" 235) 235) 235) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 204) \"Some\" \"None\" 238) 238) (set (operations 249) (cons (transfer (record 239 (from_ (getLocal \"depositor\" 240)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 242))) (literal (mutez 0) 249) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 244) \"Some\" \"None\" 244) 249) (operations 249) 249) 249) (set (operations 261) (cons (transfer (record 252 (address (getLocal \"depositor\" 253)) (value (getLocal \"newTokens\" 254))) (literal (mutez 0) 261) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 256) \"Some\" \"None\" 256) 261) (operations 261) 261) 261) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 264) 264) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"None\" (unit) -1) 265) (set (attr (data) \"savedState_depositor\" 204) (variant \"None\" (unit) -1) 266))) (getAdministrator True ((bind \"__s9\" ((set_type (first (params 108) 484) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 484) (contract \"address\") 484) (set (operations 484) (cons (transfer (getLocal \"__s9\" 484) (literal (mutez 0) 484) (second (params 108) 484) 108) (operations 484) 484) 484))) (getAllowance True ((bind \"__s10\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 484) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 484) \"spender\" 69) 69) 69))) (set_type (second (params 68) 484) (contract \"nat\") 484) (set (operations 484) (cons (transfer (getLocal \"__s10\" 484) (literal (mutez 0) 484) (second (params 68) 484) 68) (operations 484) 484) 484))) (getBalance True ((bind \"__s11\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 484) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 484) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 484) 65) \"balance\" 65) 65))) (set_type (second (params 60) 484) (contract \"nat\") 484) (set (operations 484) (cons (transfer (getLocal \"__s11\" 484) (literal (mutez 0) 484) (second (params 60) 484) 60) (operations 484) 484) 484))) (getTotalSupply True ((bind \"__s12\" ((set_type (first (params 72) 484) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 484) (contract \"nat\") 484) (set (operations 484) (cons (transfer (getLocal \"__s12\" 484) (literal (mutez 0) 484) (second (params 72) 484) 72) (operations 484) 484) 484))) (liquidate True ((set_type (params 170) \"address\" 171) (set (operations 179) (cons (transfer (params 170) (literal (mutez 0) 179) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 176) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179) (set (operations 187) (cons (transfer (unit) (literal (mutez 0) 187) (openVariant (contract \"liquidate\" \"unit\" (params 170) 182) \"Some\" \"None\" 182) 187) (operations 187) 187) 187))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 270) \"nat\" 271) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 274) 274) (literal (string \"bad state\") 274) 274) (set (attr (data) \"state\" 199) (literal (intOrNat 2) 277) 277) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"Some\" (params 270) 278) 278) (set (attr (data) \"savedState_redeemer\" 279) (variant \"Some\" (sender) 279) 279) (set (operations 288) (cons (transfer (tuple 288 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 282)) (literal (mutez 0) 288) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 283) \"Some\" \"None\" 283) 288) (operations 288) 288) 288))) (redeem_callback True ((set_type (params 292) \"nat\" 293) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 296) (literal (string \"bad sender\") 296) 296) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 2) 299) 299) (literal (string \"bad state\") 299) 299) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 278) \"Some\" \"None\" 302) 302) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 303) (literal (intOrNat 1000000000000000000) 303) 303) (attr (data) \"totalSupply\" 96) 303) 303) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 304) (params 292) 304) (literal (intOrNat 1000000000000000000) 304) 304) 304) (set (attr (data) \"underlyingBalance\" 235) (openVariant (isNat (sub (params 292) (getLocal \"tokensToReceive\" 307) 307) 307) \"Some\" \"None\" 307) 307) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 279) \"Some\" \"None\" 310) 310) (set (operations 320) (cons (transfer (record 311 (address (getLocal \"redeemer\" 312)) (value (getLocal \"tokensToRedeem\" 313))) (literal (mutez 0) 320) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 315) \"Some\" \"None\" 315) 320) (operations 320) 320) 320) (set (operations 333) (cons (transfer (record 323 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 325)) (value (getLocal \"tokensToReceive\" 326))) (literal (mutez 0) 333) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 328) \"Some\" \"None\" 328) 333) (operations 333) 333) 333) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 336) 336) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"None\" (unit) -1) 337) (set (attr (data) \"savedState_redeemer\" 279) (variant \"None\" (unit) -1) 338))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 346) \"unit\" 347) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 350) 350) (literal (string \"bad state\") 350) 350) (set (attr (data) \"state\" 199) (literal (intOrNat 1) 353) 353) (set (operations 362) (cons (transfer (tuple 362 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 356)) (literal (mutez 0) 362) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 357) \"Some\" \"None\" 357) 362) (operations 362) 362) 362))) (updateBalance_callback True ((set_type (params 366) \"nat\" 367) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 370) (literal (string \"bad sender\") 370) 370) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 1) 373) 373) (literal (string \"bad state\") 373) 373) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 376) 376) (set (attr (data) \"underlyingBalance\" 235) (params 366) 379))) (updateContractMetadata True ((set_type (params 419) (tuple \"string\" \"bytes\") 420) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 422) (literal (string \"not governor\") 422) 422) (set (getItem (attr (data) \"metadata\" 426) (first (params 419) 424) 426) (second (params 419) 425) 426))) (updateDexterAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"dexterAddress\" 153) (params 403) 407))) (updateGovernorAddress True ((set_type (params 387) \"address\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"governorAddress\" 422) (params 387) 391))) (updateOvenRegistryAddress True ((set_type (params 411) \"address\" 412) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 414) (literal (string \"not governor\") 414) 414) (set (attr (data) \"ovenRegistryAddress\" 176) (params 411) 415))) (updateRewardPercent True ((set_type (params 395) \"nat\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"rewardPercent\" 139) (params 395) 399))) (updateTokenMetadata True ((set_type (params 430) (tuple \"nat\" (map \"string\" \"bytes\")) 431) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 433) (literal (string \"not governor\") 433) 433) (set (getItem (attr (data) \"token_metadata\" 434) (literal (intOrNat 0) 434) 434) (params 430) 434))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 484, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 98)", "dynamic": false, "message": "updateContractMetadata", "params": "(tuple 489 (literal (string \"\") 489) (literal (bytes \"0x1234567890\") 488))", "line_no": 489, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1bTpviNnyx2PXsNmGpCQTMQsGoYordkUoA\") 26)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 489)", "show": true, "valid": "(literal (bool False) 489)", "voting_powers": "(map 489 )", "export": true}], "decompile": false, "kind": "test"}, {"shortname": "updateTokenMetadata_-_succeeds_when_called_by_governor", "longname": "updateTokenMetadata - succeeds when called by governor", "scenario": [{"action": "newContract", "id": "(static_id 0 98)", "export": "(storage (record 98 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 102 ) (bigmap (unknown 23) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 102)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 89 ((literal (string \"\") 506) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 91)) ((literal (string \"data\") 506) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 88))) (bigmap \"string\" \"bytes\") 89)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 98)) (rewardPercent (literal (nat 1) 54)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 98)) (tokenAddress (literal (address \"tz1aJS7Pk9uWR3wWyFf1i3RwhYxN84G7stom\") 17)) (token_metadata (type_annotation (big_map 78 ((literal (nat 0) 65) (tuple 506 (literal (nat 0) 65) (type_annotation (map 67 ((literal (string \"name\") 506) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 69)) ((literal (string \"decimals\") 506) (literal (bytes \"0x3138\") 70)) ((literal (string \"symbol\") 506) (literal (bytes \"0x6465787465724c6b555344\") 71)) ((literal (string \"icon\") 506) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 72))) (map \"string\" \"bytes\") 67)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 78)) (totalSupply (literal (intOrNat 0) 98)) (underlyingBalance (literal (nat 0) 119)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 135) \"unit\" 136) (set (operations 140) (cons (transfer (unit) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) (openVariant (contract \"\" \"unit\" (source) 140) \"Some\" \"None\" 140) 140) (operations 140) 140) 140) (set (operations 156) (cons (transfer (tuple 156 (to_address (self) \"None\") (tuple 156 (literal (intOrNat 1) 156) (add_seconds (now) (literal (int 3600) 148) 148))) (sub (balance) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) 143) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 153) 151) \"Some\" \"None\" 151) 156) (operations 156) 156) 156) (set (operations 166) (cons (transfer (unit) (literal (mutez 0) 166) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 161) \"Some\" \"None\" 161) 166) (operations 166) 166) 166))) (deposit True ((set_type (params 195) \"nat\" 196) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 199) 199) (literal (string \"bad state\") 199) 199) (set (attr (data) \"state\" 199) (literal (intOrNat 3) 202) 202) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"Some\" (params 195) 203) 203) (set (attr (data) \"savedState_depositor\" 204) (variant \"Some\" (sender) 204) 204) (set (operations 213) (cons (transfer (tuple 213 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 207)) (literal (mutez 0) 213) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 208) \"Some\" \"None\" 208) 213) (operations 213) 213) 213))) (deposit_callback True ((set_type (params 217) \"nat\" 218) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 221) (literal (string \"bad sender\") 221) 221) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 3) 224) 224) (literal (string \"bad state\") 224) 224) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 203) \"Some\" \"None\" 227) 227) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 228) (literal (intOrNat 1000000000000000000) 228) 228) 228) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 229) 229) ((defineLocal \"newUnderlyingBalance\" (add (params 217) (getLocal \"tokensToDeposit\" 230) 230) 230) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 231) (literal (intOrNat 1000000000000000000) 231) 231) (getLocal \"newUnderlyingBalance\" 231) 231) 231) (set (getLocal \"newTokens\" 506) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 232) (attr (data) \"totalSupply\" 96) 232) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 232) (getLocal \"fractionOfPoolOwnership\" 232) 232) 232) \"Some\" \"None\" 232) 232) 232)) 229) (set (attr (data) \"underlyingBalance\" 235) (add (params 217) (getLocal \"tokensToDeposit\" 235) 235) 235) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 204) \"Some\" \"None\" 238) 238) (set (operations 249) (cons (transfer (record 239 (from_ (getLocal \"depositor\" 240)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 242))) (literal (mutez 0) 249) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 244) \"Some\" \"None\" 244) 249) (operations 249) 249) 249) (set (operations 261) (cons (transfer (record 252 (address (getLocal \"depositor\" 253)) (value (getLocal \"newTokens\" 254))) (literal (mutez 0) 261) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 256) \"Some\" \"None\" 256) 261) (operations 261) 261) 261) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 264) 264) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"None\" (unit) -1) 265) (set (attr (data) \"savedState_depositor\" 204) (variant \"None\" (unit) -1) 266))) (getAdministrator True ((bind \"__s13\" ((set_type (first (params 108) 506) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 506) (contract \"address\") 506) (set (operations 506) (cons (transfer (getLocal \"__s13\" 506) (literal (mutez 0) 506) (second (params 108) 506) 108) (operations 506) 506) 506))) (getAllowance True ((bind \"__s14\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 506) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 506) \"spender\" 69) 69) 69))) (set_type (second (params 68) 506) (contract \"nat\") 506) (set (operations 506) (cons (transfer (getLocal \"__s14\" 506) (literal (mutez 0) 506) (second (params 68) 506) 68) (operations 506) 506) 506))) (getBalance True ((bind \"__s15\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 506) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 506) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 506) 65) \"balance\" 65) 65))) (set_type (second (params 60) 506) (contract \"nat\") 506) (set (operations 506) (cons (transfer (getLocal \"__s15\" 506) (literal (mutez 0) 506) (second (params 60) 506) 60) (operations 506) 506) 506))) (getTotalSupply True ((bind \"__s16\" ((set_type (first (params 72) 506) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 506) (contract \"nat\") 506) (set (operations 506) (cons (transfer (getLocal \"__s16\" 506) (literal (mutez 0) 506) (second (params 72) 506) 72) (operations 506) 506) 506))) (liquidate True ((set_type (params 170) \"address\" 171) (set (operations 179) (cons (transfer (params 170) (literal (mutez 0) 179) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 176) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179) (set (operations 187) (cons (transfer (unit) (literal (mutez 0) 187) (openVariant (contract \"liquidate\" \"unit\" (params 170) 182) \"Some\" \"None\" 182) 187) (operations 187) 187) 187))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 270) \"nat\" 271) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 274) 274) (literal (string \"bad state\") 274) 274) (set (attr (data) \"state\" 199) (literal (intOrNat 2) 277) 277) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"Some\" (params 270) 278) 278) (set (attr (data) \"savedState_redeemer\" 279) (variant \"Some\" (sender) 279) 279) (set (operations 288) (cons (transfer (tuple 288 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 282)) (literal (mutez 0) 288) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 283) \"Some\" \"None\" 283) 288) (operations 288) 288) 288))) (redeem_callback True ((set_type (params 292) \"nat\" 293) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 296) (literal (string \"bad sender\") 296) 296) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 2) 299) 299) (literal (string \"bad state\") 299) 299) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 278) \"Some\" \"None\" 302) 302) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 303) (literal (intOrNat 1000000000000000000) 303) 303) (attr (data) \"totalSupply\" 96) 303) 303) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 304) (params 292) 304) (literal (intOrNat 1000000000000000000) 304) 304) 304) (set (attr (data) \"underlyingBalance\" 235) (openVariant (isNat (sub (params 292) (getLocal \"tokensToReceive\" 307) 307) 307) \"Some\" \"None\" 307) 307) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 279) \"Some\" \"None\" 310) 310) (set (operations 320) (cons (transfer (record 311 (address (getLocal \"redeemer\" 312)) (value (getLocal \"tokensToRedeem\" 313))) (literal (mutez 0) 320) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 315) \"Some\" \"None\" 315) 320) (operations 320) 320) 320) (set (operations 333) (cons (transfer (record 323 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 325)) (value (getLocal \"tokensToReceive\" 326))) (literal (mutez 0) 333) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 328) \"Some\" \"None\" 328) 333) (operations 333) 333) 333) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 336) 336) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"None\" (unit) -1) 337) (set (attr (data) \"savedState_redeemer\" 279) (variant \"None\" (unit) -1) 338))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 346) \"unit\" 347) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 350) 350) (literal (string \"bad state\") 350) 350) (set (attr (data) \"state\" 199) (literal (intOrNat 1) 353) 353) (set (operations 362) (cons (transfer (tuple 362 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 356)) (literal (mutez 0) 362) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 357) \"Some\" \"None\" 357) 362) (operations 362) 362) 362))) (updateBalance_callback True ((set_type (params 366) \"nat\" 367) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 370) (literal (string \"bad sender\") 370) 370) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 1) 373) 373) (literal (string \"bad state\") 373) 373) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 376) 376) (set (attr (data) \"underlyingBalance\" 235) (params 366) 379))) (updateContractMetadata True ((set_type (params 419) (tuple \"string\" \"bytes\") 420) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 422) (literal (string \"not governor\") 422) 422) (set (getItem (attr (data) \"metadata\" 426) (first (params 419) 424) 426) (second (params 419) 425) 426))) (updateDexterAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"dexterAddress\" 153) (params 403) 407))) (updateGovernorAddress True ((set_type (params 387) \"address\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"governorAddress\" 422) (params 387) 391))) (updateOvenRegistryAddress True ((set_type (params 411) \"address\" 412) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 414) (literal (string \"not governor\") 414) 414) (set (attr (data) \"ovenRegistryAddress\" 176) (params 411) 415))) (updateRewardPercent True ((set_type (params 395) \"nat\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"rewardPercent\" 139) (params 395) 399))) (updateTokenMetadata True ((set_type (params 430) (tuple \"nat\" (map \"string\" \"bytes\")) 431) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 433) (literal (string \"not governor\") 433) 433) (set (getItem (attr (data) \"token_metadata\" 434) (literal (intOrNat 0) 434) 434) (params 430) 434))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 506, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 98)", "dynamic": false, "message": "updateTokenMetadata", "params": "(tuple 520 (literal (nat 0) 518) (type_annotation (map 511 ((literal (string \"new\") 520) (literal (bytes \"0x123456\") 510))) (map \"string\" \"bytes\") 511))", "line_no": 520, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 520)", "show": true, "valid": "(literal (bool True) 520)", "voting_powers": "(map 520 )", "export": true}, {"action": "verify", "condition": "(eq (first (getItem (attr (contractData (static_id 0 98) 520) \"token_metadata\" 525) (literal (intOrNat 0) 525) 525) 526) (literal (nat 0) 529) 529)", "line_no": 529}, {"action": "verify", "condition": "(eq (getItem (second (getItem (attr (contractData (static_id 0 98) 520) \"token_metadata\" 525) (literal (intOrNat 0) 525) 525) 527) (literal (string \"new\") 530) 530) (literal (bytes \"0x123456\") 510) 530)", "line_no": 530}], "decompile": false, "kind": "test"}, {"shortname": "updateTokenMetadata_-_fails_when_not_called_by_governor", "longname": "updateTokenMetadata - fails when not called by governor", "scenario": [{"action": "newContract", "id": "(static_id 0 98)", "export": "(storage (record 98 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 102 ) (bigmap (unknown 33) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 102)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 89 ((literal (string \"\") 540) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 91)) ((literal (string \"data\") 540) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 88))) (bigmap \"string\" \"bytes\") 89)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 98)) (rewardPercent (literal (nat 1) 54)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 98)) (tokenAddress (literal (address \"tz1aJS7Pk9uWR3wWyFf1i3RwhYxN84G7stom\") 17)) (token_metadata (type_annotation (big_map 78 ((literal (nat 0) 65) (tuple 540 (literal (nat 0) 65) (type_annotation (map 67 ((literal (string \"name\") 540) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 69)) ((literal (string \"decimals\") 540) (literal (bytes \"0x3138\") 70)) ((literal (string \"symbol\") 540) (literal (bytes \"0x6465787465724c6b555344\") 71)) ((literal (string \"icon\") 540) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 72))) (map \"string\" \"bytes\") 67)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 78)) (totalSupply (literal (intOrNat 0) 98)) (underlyingBalance (literal (nat 0) 119)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 135) \"unit\" 136) (set (operations 140) (cons (transfer (unit) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) (openVariant (contract \"\" \"unit\" (source) 140) \"Some\" \"None\" 140) 140) (operations 140) 140) 140) (set (operations 156) (cons (transfer (tuple 156 (to_address (self) \"None\") (tuple 156 (literal (intOrNat 1) 156) (add_seconds (now) (literal (int 3600) 148) 148))) (sub (balance) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) 143) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 153) 151) \"Some\" \"None\" 151) 156) (operations 156) 156) 156) (set (operations 166) (cons (transfer (unit) (literal (mutez 0) 166) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 161) \"Some\" \"None\" 161) 166) (operations 166) 166) 166))) (deposit True ((set_type (params 195) \"nat\" 196) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 199) 199) (literal (string \"bad state\") 199) 199) (set (attr (data) \"state\" 199) (literal (intOrNat 3) 202) 202) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"Some\" (params 195) 203) 203) (set (attr (data) \"savedState_depositor\" 204) (variant \"Some\" (sender) 204) 204) (set (operations 213) (cons (transfer (tuple 213 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 207)) (literal (mutez 0) 213) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 208) \"Some\" \"None\" 208) 213) (operations 213) 213) 213))) (deposit_callback True ((set_type (params 217) \"nat\" 218) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 221) (literal (string \"bad sender\") 221) 221) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 3) 224) 224) (literal (string \"bad state\") 224) 224) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 203) \"Some\" \"None\" 227) 227) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 228) (literal (intOrNat 1000000000000000000) 228) 228) 228) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 229) 229) ((defineLocal \"newUnderlyingBalance\" (add (params 217) (getLocal \"tokensToDeposit\" 230) 230) 230) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 231) (literal (intOrNat 1000000000000000000) 231) 231) (getLocal \"newUnderlyingBalance\" 231) 231) 231) (set (getLocal \"newTokens\" 540) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 232) (attr (data) \"totalSupply\" 96) 232) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 232) (getLocal \"fractionOfPoolOwnership\" 232) 232) 232) \"Some\" \"None\" 232) 232) 232)) 229) (set (attr (data) \"underlyingBalance\" 235) (add (params 217) (getLocal \"tokensToDeposit\" 235) 235) 235) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 204) \"Some\" \"None\" 238) 238) (set (operations 249) (cons (transfer (record 239 (from_ (getLocal \"depositor\" 240)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 242))) (literal (mutez 0) 249) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 244) \"Some\" \"None\" 244) 249) (operations 249) 249) 249) (set (operations 261) (cons (transfer (record 252 (address (getLocal \"depositor\" 253)) (value (getLocal \"newTokens\" 254))) (literal (mutez 0) 261) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 256) \"Some\" \"None\" 256) 261) (operations 261) 261) 261) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 264) 264) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"None\" (unit) -1) 265) (set (attr (data) \"savedState_depositor\" 204) (variant \"None\" (unit) -1) 266))) (getAdministrator True ((bind \"__s17\" ((set_type (first (params 108) 540) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 540) (contract \"address\") 540) (set (operations 540) (cons (transfer (getLocal \"__s17\" 540) (literal (mutez 0) 540) (second (params 108) 540) 108) (operations 540) 540) 540))) (getAllowance True ((bind \"__s18\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 540) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 540) \"spender\" 69) 69) 69))) (set_type (second (params 68) 540) (contract \"nat\") 540) (set (operations 540) (cons (transfer (getLocal \"__s18\" 540) (literal (mutez 0) 540) (second (params 68) 540) 68) (operations 540) 540) 540))) (getBalance True ((bind \"__s19\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 540) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 540) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 540) 65) \"balance\" 65) 65))) (set_type (second (params 60) 540) (contract \"nat\") 540) (set (operations 540) (cons (transfer (getLocal \"__s19\" 540) (literal (mutez 0) 540) (second (params 60) 540) 60) (operations 540) 540) 540))) (getTotalSupply True ((bind \"__s20\" ((set_type (first (params 72) 540) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 540) (contract \"nat\") 540) (set (operations 540) (cons (transfer (getLocal \"__s20\" 540) (literal (mutez 0) 540) (second (params 72) 540) 72) (operations 540) 540) 540))) (liquidate True ((set_type (params 170) \"address\" 171) (set (operations 179) (cons (transfer (params 170) (literal (mutez 0) 179) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 176) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179) (set (operations 187) (cons (transfer (unit) (literal (mutez 0) 187) (openVariant (contract \"liquidate\" \"unit\" (params 170) 182) \"Some\" \"None\" 182) 187) (operations 187) 187) 187))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 270) \"nat\" 271) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 274) 274) (literal (string \"bad state\") 274) 274) (set (attr (data) \"state\" 199) (literal (intOrNat 2) 277) 277) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"Some\" (params 270) 278) 278) (set (attr (data) \"savedState_redeemer\" 279) (variant \"Some\" (sender) 279) 279) (set (operations 288) (cons (transfer (tuple 288 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 282)) (literal (mutez 0) 288) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 283) \"Some\" \"None\" 283) 288) (operations 288) 288) 288))) (redeem_callback True ((set_type (params 292) \"nat\" 293) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 296) (literal (string \"bad sender\") 296) 296) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 2) 299) 299) (literal (string \"bad state\") 299) 299) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 278) \"Some\" \"None\" 302) 302) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 303) (literal (intOrNat 1000000000000000000) 303) 303) (attr (data) \"totalSupply\" 96) 303) 303) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 304) (params 292) 304) (literal (intOrNat 1000000000000000000) 304) 304) 304) (set (attr (data) \"underlyingBalance\" 235) (openVariant (isNat (sub (params 292) (getLocal \"tokensToReceive\" 307) 307) 307) \"Some\" \"None\" 307) 307) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 279) \"Some\" \"None\" 310) 310) (set (operations 320) (cons (transfer (record 311 (address (getLocal \"redeemer\" 312)) (value (getLocal \"tokensToRedeem\" 313))) (literal (mutez 0) 320) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 315) \"Some\" \"None\" 315) 320) (operations 320) 320) 320) (set (operations 333) (cons (transfer (record 323 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 325)) (value (getLocal \"tokensToReceive\" 326))) (literal (mutez 0) 333) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 328) \"Some\" \"None\" 328) 333) (operations 333) 333) 333) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 336) 336) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"None\" (unit) -1) 337) (set (attr (data) \"savedState_redeemer\" 279) (variant \"None\" (unit) -1) 338))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 346) \"unit\" 347) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 350) 350) (literal (string \"bad state\") 350) 350) (set (attr (data) \"state\" 199) (literal (intOrNat 1) 353) 353) (set (operations 362) (cons (transfer (tuple 362 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 356)) (literal (mutez 0) 362) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 357) \"Some\" \"None\" 357) 362) (operations 362) 362) 362))) (updateBalance_callback True ((set_type (params 366) \"nat\" 367) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 370) (literal (string \"bad sender\") 370) 370) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 1) 373) 373) (literal (string \"bad state\") 373) 373) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 376) 376) (set (attr (data) \"underlyingBalance\" 235) (params 366) 379))) (updateContractMetadata True ((set_type (params 419) (tuple \"string\" \"bytes\") 420) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 422) (literal (string \"not governor\") 422) 422) (set (getItem (attr (data) \"metadata\" 426) (first (params 419) 424) 426) (second (params 419) 425) 426))) (updateDexterAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"dexterAddress\" 153) (params 403) 407))) (updateGovernorAddress True ((set_type (params 387) \"address\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"governorAddress\" 422) (params 387) 391))) (updateOvenRegistryAddress True ((set_type (params 411) \"address\" 412) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 414) (literal (string \"not governor\") 414) 414) (set (attr (data) \"ovenRegistryAddress\" 176) (params 411) 415))) (updateRewardPercent True ((set_type (params 395) \"nat\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"rewardPercent\" 139) (params 395) 399))) (updateTokenMetadata True ((set_type (params 430) (tuple \"nat\" (map \"string\" \"bytes\")) 431) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 433) (literal (string \"not governor\") 433) 433) (set (getItem (attr (data) \"token_metadata\" 434) (literal (intOrNat 0) 434) 434) (params 430) 434))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 540, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 98)", "dynamic": false, "message": "updateTokenMetadata", "params": "(tuple 551 (literal (nat 0) 550) (type_annotation (map 543 ((literal (string \"new\") 551) (literal (bytes \"0x123456\") 545))) (map \"string\" \"bytes\") 543))", "line_no": 551, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1bTpviNnyx2PXsNmGpCQTMQsGoYordkUoA\") 26)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 551)", "show": true, "valid": "(literal (bool False) 551)", "voting_powers": "(map 551 )", "export": true}], "decompile": false, "kind": "test"}, {"shortname": "updateRewardPercent_-_fails_if_sender_is_not_governor", "longname": "updateRewardPercent - fails if sender is not governor", "scenario": [{"action": "newContract", "id": "(static_id 0 98)", "export": "(storage (record 98 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 102 ) (bigmap (unknown 43) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 102)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 89 ((literal (string \"\") 566) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 91)) ((literal (string \"data\") 566) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 88))) (bigmap \"string\" \"bytes\") 89)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 98)) (rewardPercent (literal (nat 1) 54)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 98)) (tokenAddress (literal (address \"tz1aJS7Pk9uWR3wWyFf1i3RwhYxN84G7stom\") 17)) (token_metadata (type_annotation (big_map 78 ((literal (nat 0) 65) (tuple 566 (literal (nat 0) 65) (type_annotation (map 67 ((literal (string \"name\") 566) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 69)) ((literal (string \"decimals\") 566) (literal (bytes \"0x3138\") 70)) ((literal (string \"symbol\") 566) (literal (bytes \"0x6465787465724c6b555344\") 71)) ((literal (string \"icon\") 566) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 72))) (map \"string\" \"bytes\") 67)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 78)) (totalSupply (literal (intOrNat 0) 98)) (underlyingBalance (literal (nat 0) 119)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 135) \"unit\" 136) (set (operations 140) (cons (transfer (unit) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) (openVariant (contract \"\" \"unit\" (source) 140) \"Some\" \"None\" 140) 140) (operations 140) 140) 140) (set (operations 156) (cons (transfer (tuple 156 (to_address (self) \"None\") (tuple 156 (literal (intOrNat 1) 156) (add_seconds (now) (literal (int 3600) 148) 148))) (sub (balance) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) 143) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 153) 151) \"Some\" \"None\" 151) 156) (operations 156) 156) 156) (set (operations 166) (cons (transfer (unit) (literal (mutez 0) 166) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 161) \"Some\" \"None\" 161) 166) (operations 166) 166) 166))) (deposit True ((set_type (params 195) \"nat\" 196) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 199) 199) (literal (string \"bad state\") 199) 199) (set (attr (data) \"state\" 199) (literal (intOrNat 3) 202) 202) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"Some\" (params 195) 203) 203) (set (attr (data) \"savedState_depositor\" 204) (variant \"Some\" (sender) 204) 204) (set (operations 213) (cons (transfer (tuple 213 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 207)) (literal (mutez 0) 213) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 208) \"Some\" \"None\" 208) 213) (operations 213) 213) 213))) (deposit_callback True ((set_type (params 217) \"nat\" 218) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 221) (literal (string \"bad sender\") 221) 221) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 3) 224) 224) (literal (string \"bad state\") 224) 224) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 203) \"Some\" \"None\" 227) 227) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 228) (literal (intOrNat 1000000000000000000) 228) 228) 228) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 229) 229) ((defineLocal \"newUnderlyingBalance\" (add (params 217) (getLocal \"tokensToDeposit\" 230) 230) 230) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 231) (literal (intOrNat 1000000000000000000) 231) 231) (getLocal \"newUnderlyingBalance\" 231) 231) 231) (set (getLocal \"newTokens\" 566) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 232) (attr (data) \"totalSupply\" 96) 232) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 232) (getLocal \"fractionOfPoolOwnership\" 232) 232) 232) \"Some\" \"None\" 232) 232) 232)) 229) (set (attr (data) \"underlyingBalance\" 235) (add (params 217) (getLocal \"tokensToDeposit\" 235) 235) 235) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 204) \"Some\" \"None\" 238) 238) (set (operations 249) (cons (transfer (record 239 (from_ (getLocal \"depositor\" 240)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 242))) (literal (mutez 0) 249) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 244) \"Some\" \"None\" 244) 249) (operations 249) 249) 249) (set (operations 261) (cons (transfer (record 252 (address (getLocal \"depositor\" 253)) (value (getLocal \"newTokens\" 254))) (literal (mutez 0) 261) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 256) \"Some\" \"None\" 256) 261) (operations 261) 261) 261) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 264) 264) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"None\" (unit) -1) 265) (set (attr (data) \"savedState_depositor\" 204) (variant \"None\" (unit) -1) 266))) (getAdministrator True ((bind \"__s21\" ((set_type (first (params 108) 566) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 566) (contract \"address\") 566) (set (operations 566) (cons (transfer (getLocal \"__s21\" 566) (literal (mutez 0) 566) (second (params 108) 566) 108) (operations 566) 566) 566))) (getAllowance True ((bind \"__s22\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 566) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 566) \"spender\" 69) 69) 69))) (set_type (second (params 68) 566) (contract \"nat\") 566) (set (operations 566) (cons (transfer (getLocal \"__s22\" 566) (literal (mutez 0) 566) (second (params 68) 566) 68) (operations 566) 566) 566))) (getBalance True ((bind \"__s23\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 566) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 566) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 566) 65) \"balance\" 65) 65))) (set_type (second (params 60) 566) (contract \"nat\") 566) (set (operations 566) (cons (transfer (getLocal \"__s23\" 566) (literal (mutez 0) 566) (second (params 60) 566) 60) (operations 566) 566) 566))) (getTotalSupply True ((bind \"__s24\" ((set_type (first (params 72) 566) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 566) (contract \"nat\") 566) (set (operations 566) (cons (transfer (getLocal \"__s24\" 566) (literal (mutez 0) 566) (second (params 72) 566) 72) (operations 566) 566) 566))) (liquidate True ((set_type (params 170) \"address\" 171) (set (operations 179) (cons (transfer (params 170) (literal (mutez 0) 179) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 176) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179) (set (operations 187) (cons (transfer (unit) (literal (mutez 0) 187) (openVariant (contract \"liquidate\" \"unit\" (params 170) 182) \"Some\" \"None\" 182) 187) (operations 187) 187) 187))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 270) \"nat\" 271) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 274) 274) (literal (string \"bad state\") 274) 274) (set (attr (data) \"state\" 199) (literal (intOrNat 2) 277) 277) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"Some\" (params 270) 278) 278) (set (attr (data) \"savedState_redeemer\" 279) (variant \"Some\" (sender) 279) 279) (set (operations 288) (cons (transfer (tuple 288 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 282)) (literal (mutez 0) 288) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 283) \"Some\" \"None\" 283) 288) (operations 288) 288) 288))) (redeem_callback True ((set_type (params 292) \"nat\" 293) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 296) (literal (string \"bad sender\") 296) 296) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 2) 299) 299) (literal (string \"bad state\") 299) 299) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 278) \"Some\" \"None\" 302) 302) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 303) (literal (intOrNat 1000000000000000000) 303) 303) (attr (data) \"totalSupply\" 96) 303) 303) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 304) (params 292) 304) (literal (intOrNat 1000000000000000000) 304) 304) 304) (set (attr (data) \"underlyingBalance\" 235) (openVariant (isNat (sub (params 292) (getLocal \"tokensToReceive\" 307) 307) 307) \"Some\" \"None\" 307) 307) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 279) \"Some\" \"None\" 310) 310) (set (operations 320) (cons (transfer (record 311 (address (getLocal \"redeemer\" 312)) (value (getLocal \"tokensToRedeem\" 313))) (literal (mutez 0) 320) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 315) \"Some\" \"None\" 315) 320) (operations 320) 320) 320) (set (operations 333) (cons (transfer (record 323 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 325)) (value (getLocal \"tokensToReceive\" 326))) (literal (mutez 0) 333) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 328) \"Some\" \"None\" 328) 333) (operations 333) 333) 333) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 336) 336) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"None\" (unit) -1) 337) (set (attr (data) \"savedState_redeemer\" 279) (variant \"None\" (unit) -1) 338))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 346) \"unit\" 347) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 350) 350) (literal (string \"bad state\") 350) 350) (set (attr (data) \"state\" 199) (literal (intOrNat 1) 353) 353) (set (operations 362) (cons (transfer (tuple 362 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 356)) (literal (mutez 0) 362) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 357) \"Some\" \"None\" 357) 362) (operations 362) 362) 362))) (updateBalance_callback True ((set_type (params 366) \"nat\" 367) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 370) (literal (string \"bad sender\") 370) 370) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 1) 373) 373) (literal (string \"bad state\") 373) 373) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 376) 376) (set (attr (data) \"underlyingBalance\" 235) (params 366) 379))) (updateContractMetadata True ((set_type (params 419) (tuple \"string\" \"bytes\") 420) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 422) (literal (string \"not governor\") 422) 422) (set (getItem (attr (data) \"metadata\" 426) (first (params 419) 424) 426) (second (params 419) 425) 426))) (updateDexterAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"dexterAddress\" 153) (params 403) 407))) (updateGovernorAddress True ((set_type (params 387) \"address\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"governorAddress\" 422) (params 387) 391))) (updateOvenRegistryAddress True ((set_type (params 411) \"address\" 412) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 414) (literal (string \"not governor\") 414) 414) (set (attr (data) \"ovenRegistryAddress\" 176) (params 411) 415))) (updateRewardPercent True ((set_type (params 395) \"nat\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"rewardPercent\" 139) (params 395) 399))) (updateTokenMetadata True ((set_type (params 430) (tuple \"nat\" (map \"string\" \"bytes\")) 431) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 433) (literal (string \"not governor\") 433) 433) (set (getItem (attr (data) \"token_metadata\" 434) (literal (intOrNat 0) 434) 434) (params 430) 434))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 566, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 98)", "dynamic": false, "message": "updateRewardPercent", "params": "(literal (nat 4) 571)", "line_no": 572, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1bTpviNnyx2PXsNmGpCQTMQsGoYordkUoA\") 26)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 572)", "show": true, "valid": "(literal (bool False) 572)", "voting_powers": "(map 572 )", "export": true}], "decompile": false, "kind": "test"}, {"shortname": "updateRewardPercent_-_can_update_reward_amount", "longname": "updateRewardPercent - can update reward amount", "scenario": [{"action": "newContract", "id": "(static_id 0 98)", "export": "(storage (record 98 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 102 ) (bigmap (unknown 53) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 102)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 89 ((literal (string \"\") 583) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 91)) ((literal (string \"data\") 583) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 88))) (bigmap \"string\" \"bytes\") 89)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 98)) (rewardPercent (literal (nat 1) 54)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 98)) (tokenAddress (literal (address \"tz1aJS7Pk9uWR3wWyFf1i3RwhYxN84G7stom\") 17)) (token_metadata (type_annotation (big_map 78 ((literal (nat 0) 65) (tuple 583 (literal (nat 0) 65) (type_annotation (map 67 ((literal (string \"name\") 583) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 69)) ((literal (string \"decimals\") 583) (literal (bytes \"0x3138\") 70)) ((literal (string \"symbol\") 583) (literal (bytes \"0x6465787465724c6b555344\") 71)) ((literal (string \"icon\") 583) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 72))) (map \"string\" \"bytes\") 67)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 78)) (totalSupply (literal (intOrNat 0) 98)) (underlyingBalance (literal (nat 0) 119)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 135) \"unit\" 136) (set (operations 140) (cons (transfer (unit) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) (openVariant (contract \"\" \"unit\" (source) 140) \"Some\" \"None\" 140) 140) (operations 140) 140) 140) (set (operations 156) (cons (transfer (tuple 156 (to_address (self) \"None\") (tuple 156 (literal (intOrNat 1) 156) (add_seconds (now) (literal (int 3600) 148) 148))) (sub (balance) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) 143) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 153) 151) \"Some\" \"None\" 151) 156) (operations 156) 156) 156) (set (operations 166) (cons (transfer (unit) (literal (mutez 0) 166) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 161) \"Some\" \"None\" 161) 166) (operations 166) 166) 166))) (deposit True ((set_type (params 195) \"nat\" 196) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 199) 199) (literal (string \"bad state\") 199) 199) (set (attr (data) \"state\" 199) (literal (intOrNat 3) 202) 202) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"Some\" (params 195) 203) 203) (set (attr (data) \"savedState_depositor\" 204) (variant \"Some\" (sender) 204) 204) (set (operations 213) (cons (transfer (tuple 213 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 207)) (literal (mutez 0) 213) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 208) \"Some\" \"None\" 208) 213) (operations 213) 213) 213))) (deposit_callback True ((set_type (params 217) \"nat\" 218) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 221) (literal (string \"bad sender\") 221) 221) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 3) 224) 224) (literal (string \"bad state\") 224) 224) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 203) \"Some\" \"None\" 227) 227) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 228) (literal (intOrNat 1000000000000000000) 228) 228) 228) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 229) 229) ((defineLocal \"newUnderlyingBalance\" (add (params 217) (getLocal \"tokensToDeposit\" 230) 230) 230) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 231) (literal (intOrNat 1000000000000000000) 231) 231) (getLocal \"newUnderlyingBalance\" 231) 231) 231) (set (getLocal \"newTokens\" 583) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 232) (attr (data) \"totalSupply\" 96) 232) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 232) (getLocal \"fractionOfPoolOwnership\" 232) 232) 232) \"Some\" \"None\" 232) 232) 232)) 229) (set (attr (data) \"underlyingBalance\" 235) (add (params 217) (getLocal \"tokensToDeposit\" 235) 235) 235) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 204) \"Some\" \"None\" 238) 238) (set (operations 249) (cons (transfer (record 239 (from_ (getLocal \"depositor\" 240)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 242))) (literal (mutez 0) 249) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 244) \"Some\" \"None\" 244) 249) (operations 249) 249) 249) (set (operations 261) (cons (transfer (record 252 (address (getLocal \"depositor\" 253)) (value (getLocal \"newTokens\" 254))) (literal (mutez 0) 261) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 256) \"Some\" \"None\" 256) 261) (operations 261) 261) 261) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 264) 264) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"None\" (unit) -1) 265) (set (attr (data) \"savedState_depositor\" 204) (variant \"None\" (unit) -1) 266))) (getAdministrator True ((bind \"__s25\" ((set_type (first (params 108) 583) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 583) (contract \"address\") 583) (set (operations 583) (cons (transfer (getLocal \"__s25\" 583) (literal (mutez 0) 583) (second (params 108) 583) 108) (operations 583) 583) 583))) (getAllowance True ((bind \"__s26\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 583) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 583) \"spender\" 69) 69) 69))) (set_type (second (params 68) 583) (contract \"nat\") 583) (set (operations 583) (cons (transfer (getLocal \"__s26\" 583) (literal (mutez 0) 583) (second (params 68) 583) 68) (operations 583) 583) 583))) (getBalance True ((bind \"__s27\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 583) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 583) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 583) 65) \"balance\" 65) 65))) (set_type (second (params 60) 583) (contract \"nat\") 583) (set (operations 583) (cons (transfer (getLocal \"__s27\" 583) (literal (mutez 0) 583) (second (params 60) 583) 60) (operations 583) 583) 583))) (getTotalSupply True ((bind \"__s28\" ((set_type (first (params 72) 583) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 583) (contract \"nat\") 583) (set (operations 583) (cons (transfer (getLocal \"__s28\" 583) (literal (mutez 0) 583) (second (params 72) 583) 72) (operations 583) 583) 583))) (liquidate True ((set_type (params 170) \"address\" 171) (set (operations 179) (cons (transfer (params 170) (literal (mutez 0) 179) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 176) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179) (set (operations 187) (cons (transfer (unit) (literal (mutez 0) 187) (openVariant (contract \"liquidate\" \"unit\" (params 170) 182) \"Some\" \"None\" 182) 187) (operations 187) 187) 187))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 270) \"nat\" 271) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 274) 274) (literal (string \"bad state\") 274) 274) (set (attr (data) \"state\" 199) (literal (intOrNat 2) 277) 277) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"Some\" (params 270) 278) 278) (set (attr (data) \"savedState_redeemer\" 279) (variant \"Some\" (sender) 279) 279) (set (operations 288) (cons (transfer (tuple 288 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 282)) (literal (mutez 0) 288) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 283) \"Some\" \"None\" 283) 288) (operations 288) 288) 288))) (redeem_callback True ((set_type (params 292) \"nat\" 293) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 296) (literal (string \"bad sender\") 296) 296) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 2) 299) 299) (literal (string \"bad state\") 299) 299) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 278) \"Some\" \"None\" 302) 302) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 303) (literal (intOrNat 1000000000000000000) 303) 303) (attr (data) \"totalSupply\" 96) 303) 303) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 304) (params 292) 304) (literal (intOrNat 1000000000000000000) 304) 304) 304) (set (attr (data) \"underlyingBalance\" 235) (openVariant (isNat (sub (params 292) (getLocal \"tokensToReceive\" 307) 307) 307) \"Some\" \"None\" 307) 307) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 279) \"Some\" \"None\" 310) 310) (set (operations 320) (cons (transfer (record 311 (address (getLocal \"redeemer\" 312)) (value (getLocal \"tokensToRedeem\" 313))) (literal (mutez 0) 320) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 315) \"Some\" \"None\" 315) 320) (operations 320) 320) 320) (set (operations 333) (cons (transfer (record 323 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 325)) (value (getLocal \"tokensToReceive\" 326))) (literal (mutez 0) 333) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 328) \"Some\" \"None\" 328) 333) (operations 333) 333) 333) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 336) 336) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"None\" (unit) -1) 337) (set (attr (data) \"savedState_redeemer\" 279) (variant \"None\" (unit) -1) 338))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 346) \"unit\" 347) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 350) 350) (literal (string \"bad state\") 350) 350) (set (attr (data) \"state\" 199) (literal (intOrNat 1) 353) 353) (set (operations 362) (cons (transfer (tuple 362 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 356)) (literal (mutez 0) 362) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 357) \"Some\" \"None\" 357) 362) (operations 362) 362) 362))) (updateBalance_callback True ((set_type (params 366) \"nat\" 367) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 370) (literal (string \"bad sender\") 370) 370) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 1) 373) 373) (literal (string \"bad state\") 373) 373) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 376) 376) (set (attr (data) \"underlyingBalance\" 235) (params 366) 379))) (updateContractMetadata True ((set_type (params 419) (tuple \"string\" \"bytes\") 420) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 422) (literal (string \"not governor\") 422) 422) (set (getItem (attr (data) \"metadata\" 426) (first (params 419) 424) 426) (second (params 419) 425) 426))) (updateDexterAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"dexterAddress\" 153) (params 403) 407))) (updateGovernorAddress True ((set_type (params 387) \"address\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"governorAddress\" 422) (params 387) 391))) (updateOvenRegistryAddress True ((set_type (params 411) \"address\" 412) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 414) (literal (string \"not governor\") 414) 414) (set (attr (data) \"ovenRegistryAddress\" 176) (params 411) 415))) (updateRewardPercent True ((set_type (params 395) \"nat\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"rewardPercent\" 139) (params 395) 399))) (updateTokenMetadata True ((set_type (params 430) (tuple \"nat\" (map \"string\" \"bytes\")) 431) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 433) (literal (string \"not governor\") 433) 433) (set (getItem (attr (data) \"token_metadata\" 434) (literal (intOrNat 0) 434) 434) (params 430) 434))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 583, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 98)", "dynamic": false, "message": "updateRewardPercent", "params": "(literal (nat 4) 586)", "line_no": 587, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 587)", "show": true, "valid": "(literal (bool True) 587)", "voting_powers": "(map 587 )", "export": true}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 0 98) 587) \"rewardPercent\" 592) (literal (nat 4) 586) 592)", "line_no": 592}], "decompile": false, "kind": "test"}, {"shortname": "updateDexterAddress_-_fails_if_sender_is_not_governor", "longname": "updateDexterAddress - fails if sender is not governor", "scenario": [{"action": "newContract", "id": "(static_id 0 98)", "export": "(storage (record 98 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 102 ) (bigmap (unknown 63) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 102)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 89 ((literal (string \"\") 604) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 91)) ((literal (string \"data\") 604) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 88))) (bigmap \"string\" \"bytes\") 89)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 98)) (rewardPercent (literal (nat 1) 54)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 98)) (tokenAddress (literal (address \"tz1aJS7Pk9uWR3wWyFf1i3RwhYxN84G7stom\") 17)) (token_metadata (type_annotation (big_map 78 ((literal (nat 0) 65) (tuple 604 (literal (nat 0) 65) (type_annotation (map 67 ((literal (string \"name\") 604) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 69)) ((literal (string \"decimals\") 604) (literal (bytes \"0x3138\") 70)) ((literal (string \"symbol\") 604) (literal (bytes \"0x6465787465724c6b555344\") 71)) ((literal (string \"icon\") 604) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 72))) (map \"string\" \"bytes\") 67)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 78)) (totalSupply (literal (intOrNat 0) 98)) (underlyingBalance (literal (nat 0) 119)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 135) \"unit\" 136) (set (operations 140) (cons (transfer (unit) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) (openVariant (contract \"\" \"unit\" (source) 140) \"Some\" \"None\" 140) 140) (operations 140) 140) 140) (set (operations 156) (cons (transfer (tuple 156 (to_address (self) \"None\") (tuple 156 (literal (intOrNat 1) 156) (add_seconds (now) (literal (int 3600) 148) 148))) (sub (balance) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) 143) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 153) 151) \"Some\" \"None\" 151) 156) (operations 156) 156) 156) (set (operations 166) (cons (transfer (unit) (literal (mutez 0) 166) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 161) \"Some\" \"None\" 161) 166) (operations 166) 166) 166))) (deposit True ((set_type (params 195) \"nat\" 196) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 199) 199) (literal (string \"bad state\") 199) 199) (set (attr (data) \"state\" 199) (literal (intOrNat 3) 202) 202) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"Some\" (params 195) 203) 203) (set (attr (data) \"savedState_depositor\" 204) (variant \"Some\" (sender) 204) 204) (set (operations 213) (cons (transfer (tuple 213 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 207)) (literal (mutez 0) 213) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 208) \"Some\" \"None\" 208) 213) (operations 213) 213) 213))) (deposit_callback True ((set_type (params 217) \"nat\" 218) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 221) (literal (string \"bad sender\") 221) 221) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 3) 224) 224) (literal (string \"bad state\") 224) 224) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 203) \"Some\" \"None\" 227) 227) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 228) (literal (intOrNat 1000000000000000000) 228) 228) 228) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 229) 229) ((defineLocal \"newUnderlyingBalance\" (add (params 217) (getLocal \"tokensToDeposit\" 230) 230) 230) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 231) (literal (intOrNat 1000000000000000000) 231) 231) (getLocal \"newUnderlyingBalance\" 231) 231) 231) (set (getLocal \"newTokens\" 604) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 232) (attr (data) \"totalSupply\" 96) 232) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 232) (getLocal \"fractionOfPoolOwnership\" 232) 232) 232) \"Some\" \"None\" 232) 232) 232)) 229) (set (attr (data) \"underlyingBalance\" 235) (add (params 217) (getLocal \"tokensToDeposit\" 235) 235) 235) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 204) \"Some\" \"None\" 238) 238) (set (operations 249) (cons (transfer (record 239 (from_ (getLocal \"depositor\" 240)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 242))) (literal (mutez 0) 249) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 244) \"Some\" \"None\" 244) 249) (operations 249) 249) 249) (set (operations 261) (cons (transfer (record 252 (address (getLocal \"depositor\" 253)) (value (getLocal \"newTokens\" 254))) (literal (mutez 0) 261) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 256) \"Some\" \"None\" 256) 261) (operations 261) 261) 261) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 264) 264) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"None\" (unit) -1) 265) (set (attr (data) \"savedState_depositor\" 204) (variant \"None\" (unit) -1) 266))) (getAdministrator True ((bind \"__s29\" ((set_type (first (params 108) 604) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 604) (contract \"address\") 604) (set (operations 604) (cons (transfer (getLocal \"__s29\" 604) (literal (mutez 0) 604) (second (params 108) 604) 108) (operations 604) 604) 604))) (getAllowance True ((bind \"__s30\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 604) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 604) \"spender\" 69) 69) 69))) (set_type (second (params 68) 604) (contract \"nat\") 604) (set (operations 604) (cons (transfer (getLocal \"__s30\" 604) (literal (mutez 0) 604) (second (params 68) 604) 68) (operations 604) 604) 604))) (getBalance True ((bind \"__s31\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 604) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 604) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 604) 65) \"balance\" 65) 65))) (set_type (second (params 60) 604) (contract \"nat\") 604) (set (operations 604) (cons (transfer (getLocal \"__s31\" 604) (literal (mutez 0) 604) (second (params 60) 604) 60) (operations 604) 604) 604))) (getTotalSupply True ((bind \"__s32\" ((set_type (first (params 72) 604) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 604) (contract \"nat\") 604) (set (operations 604) (cons (transfer (getLocal \"__s32\" 604) (literal (mutez 0) 604) (second (params 72) 604) 72) (operations 604) 604) 604))) (liquidate True ((set_type (params 170) \"address\" 171) (set (operations 179) (cons (transfer (params 170) (literal (mutez 0) 179) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 176) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179) (set (operations 187) (cons (transfer (unit) (literal (mutez 0) 187) (openVariant (contract \"liquidate\" \"unit\" (params 170) 182) \"Some\" \"None\" 182) 187) (operations 187) 187) 187))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 270) \"nat\" 271) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 274) 274) (literal (string \"bad state\") 274) 274) (set (attr (data) \"state\" 199) (literal (intOrNat 2) 277) 277) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"Some\" (params 270) 278) 278) (set (attr (data) \"savedState_redeemer\" 279) (variant \"Some\" (sender) 279) 279) (set (operations 288) (cons (transfer (tuple 288 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 282)) (literal (mutez 0) 288) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 283) \"Some\" \"None\" 283) 288) (operations 288) 288) 288))) (redeem_callback True ((set_type (params 292) \"nat\" 293) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 296) (literal (string \"bad sender\") 296) 296) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 2) 299) 299) (literal (string \"bad state\") 299) 299) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 278) \"Some\" \"None\" 302) 302) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 303) (literal (intOrNat 1000000000000000000) 303) 303) (attr (data) \"totalSupply\" 96) 303) 303) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 304) (params 292) 304) (literal (intOrNat 1000000000000000000) 304) 304) 304) (set (attr (data) \"underlyingBalance\" 235) (openVariant (isNat (sub (params 292) (getLocal \"tokensToReceive\" 307) 307) 307) \"Some\" \"None\" 307) 307) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 279) \"Some\" \"None\" 310) 310) (set (operations 320) (cons (transfer (record 311 (address (getLocal \"redeemer\" 312)) (value (getLocal \"tokensToRedeem\" 313))) (literal (mutez 0) 320) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 315) \"Some\" \"None\" 315) 320) (operations 320) 320) 320) (set (operations 333) (cons (transfer (record 323 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 325)) (value (getLocal \"tokensToReceive\" 326))) (literal (mutez 0) 333) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 328) \"Some\" \"None\" 328) 333) (operations 333) 333) 333) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 336) 336) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"None\" (unit) -1) 337) (set (attr (data) \"savedState_redeemer\" 279) (variant \"None\" (unit) -1) 338))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 346) \"unit\" 347) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 350) 350) (literal (string \"bad state\") 350) 350) (set (attr (data) \"state\" 199) (literal (intOrNat 1) 353) 353) (set (operations 362) (cons (transfer (tuple 362 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 356)) (literal (mutez 0) 362) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 357) \"Some\" \"None\" 357) 362) (operations 362) 362) 362))) (updateBalance_callback True ((set_type (params 366) \"nat\" 367) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 370) (literal (string \"bad sender\") 370) 370) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 1) 373) 373) (literal (string \"bad state\") 373) 373) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 376) 376) (set (attr (data) \"underlyingBalance\" 235) (params 366) 379))) (updateContractMetadata True ((set_type (params 419) (tuple \"string\" \"bytes\") 420) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 422) (literal (string \"not governor\") 422) 422) (set (getItem (attr (data) \"metadata\" 426) (first (params 419) 424) 426) (second (params 419) 425) 426))) (updateDexterAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"dexterAddress\" 153) (params 403) 407))) (updateGovernorAddress True ((set_type (params 387) \"address\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"governorAddress\" 422) (params 387) 391))) (updateOvenRegistryAddress True ((set_type (params 411) \"address\" 412) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 414) (literal (string \"not governor\") 414) 414) (set (attr (data) \"ovenRegistryAddress\" 176) (params 411) 415))) (updateRewardPercent True ((set_type (params 395) \"nat\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"rewardPercent\" 139) (params 395) 399))) (updateTokenMetadata True ((set_type (params 430) (tuple \"nat\" (map \"string\" \"bytes\")) 431) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 433) (literal (string \"not governor\") 433) 433) (set (getItem (attr (data) \"token_metadata\" 434) (literal (intOrNat 0) 434) 434) (params 430) 434))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 604, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 98)", "dynamic": false, "message": "updateDexterAddress", "params": "(literal (address \"tz1eibLoCDot2w2QWyR7kMoVDTto9fYs2mnJ\") 12)", "line_no": 609, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1bTpviNnyx2PXsNmGpCQTMQsGoYordkUoA\") 26)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 609)", "show": true, "valid": "(literal (bool False) 609)", "voting_powers": "(map 609 )", "export": true}], "decompile": false, "kind": "test"}, {"shortname": "updateDexterAddress_-_can_rotate_governor", "longname": "updateDexterAddress - can rotate governor", "scenario": [{"action": "newContract", "id": "(static_id 0 98)", "export": "(storage (record 98 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 102 ) (bigmap (unknown 73) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 102)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 89 ((literal (string \"\") 620) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 91)) ((literal (string \"data\") 620) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 88))) (bigmap \"string\" \"bytes\") 89)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 98)) (rewardPercent (literal (nat 1) 54)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 98)) (tokenAddress (literal (address \"tz1aJS7Pk9uWR3wWyFf1i3RwhYxN84G7stom\") 17)) (token_metadata (type_annotation (big_map 78 ((literal (nat 0) 65) (tuple 620 (literal (nat 0) 65) (type_annotation (map 67 ((literal (string \"name\") 620) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 69)) ((literal (string \"decimals\") 620) (literal (bytes \"0x3138\") 70)) ((literal (string \"symbol\") 620) (literal (bytes \"0x6465787465724c6b555344\") 71)) ((literal (string \"icon\") 620) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 72))) (map \"string\" \"bytes\") 67)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 78)) (totalSupply (literal (intOrNat 0) 98)) (underlyingBalance (literal (nat 0) 119)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 135) \"unit\" 136) (set (operations 140) (cons (transfer (unit) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) (openVariant (contract \"\" \"unit\" (source) 140) \"Some\" \"None\" 140) 140) (operations 140) 140) 140) (set (operations 156) (cons (transfer (tuple 156 (to_address (self) \"None\") (tuple 156 (literal (intOrNat 1) 156) (add_seconds (now) (literal (int 3600) 148) 148))) (sub (balance) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) 143) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 153) 151) \"Some\" \"None\" 151) 156) (operations 156) 156) 156) (set (operations 166) (cons (transfer (unit) (literal (mutez 0) 166) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 161) \"Some\" \"None\" 161) 166) (operations 166) 166) 166))) (deposit True ((set_type (params 195) \"nat\" 196) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 199) 199) (literal (string \"bad state\") 199) 199) (set (attr (data) \"state\" 199) (literal (intOrNat 3) 202) 202) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"Some\" (params 195) 203) 203) (set (attr (data) \"savedState_depositor\" 204) (variant \"Some\" (sender) 204) 204) (set (operations 213) (cons (transfer (tuple 213 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 207)) (literal (mutez 0) 213) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 208) \"Some\" \"None\" 208) 213) (operations 213) 213) 213))) (deposit_callback True ((set_type (params 217) \"nat\" 218) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 221) (literal (string \"bad sender\") 221) 221) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 3) 224) 224) (literal (string \"bad state\") 224) 224) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 203) \"Some\" \"None\" 227) 227) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 228) (literal (intOrNat 1000000000000000000) 228) 228) 228) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 229) 229) ((defineLocal \"newUnderlyingBalance\" (add (params 217) (getLocal \"tokensToDeposit\" 230) 230) 230) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 231) (literal (intOrNat 1000000000000000000) 231) 231) (getLocal \"newUnderlyingBalance\" 231) 231) 231) (set (getLocal \"newTokens\" 620) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 232) (attr (data) \"totalSupply\" 96) 232) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 232) (getLocal \"fractionOfPoolOwnership\" 232) 232) 232) \"Some\" \"None\" 232) 232) 232)) 229) (set (attr (data) \"underlyingBalance\" 235) (add (params 217) (getLocal \"tokensToDeposit\" 235) 235) 235) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 204) \"Some\" \"None\" 238) 238) (set (operations 249) (cons (transfer (record 239 (from_ (getLocal \"depositor\" 240)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 242))) (literal (mutez 0) 249) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 244) \"Some\" \"None\" 244) 249) (operations 249) 249) 249) (set (operations 261) (cons (transfer (record 252 (address (getLocal \"depositor\" 253)) (value (getLocal \"newTokens\" 254))) (literal (mutez 0) 261) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 256) \"Some\" \"None\" 256) 261) (operations 261) 261) 261) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 264) 264) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"None\" (unit) -1) 265) (set (attr (data) \"savedState_depositor\" 204) (variant \"None\" (unit) -1) 266))) (getAdministrator True ((bind \"__s33\" ((set_type (first (params 108) 620) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 620) (contract \"address\") 620) (set (operations 620) (cons (transfer (getLocal \"__s33\" 620) (literal (mutez 0) 620) (second (params 108) 620) 108) (operations 620) 620) 620))) (getAllowance True ((bind \"__s34\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 620) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 620) \"spender\" 69) 69) 69))) (set_type (second (params 68) 620) (contract \"nat\") 620) (set (operations 620) (cons (transfer (getLocal \"__s34\" 620) (literal (mutez 0) 620) (second (params 68) 620) 68) (operations 620) 620) 620))) (getBalance True ((bind \"__s35\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 620) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 620) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 620) 65) \"balance\" 65) 65))) (set_type (second (params 60) 620) (contract \"nat\") 620) (set (operations 620) (cons (transfer (getLocal \"__s35\" 620) (literal (mutez 0) 620) (second (params 60) 620) 60) (operations 620) 620) 620))) (getTotalSupply True ((bind \"__s36\" ((set_type (first (params 72) 620) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 620) (contract \"nat\") 620) (set (operations 620) (cons (transfer (getLocal \"__s36\" 620) (literal (mutez 0) 620) (second (params 72) 620) 72) (operations 620) 620) 620))) (liquidate True ((set_type (params 170) \"address\" 171) (set (operations 179) (cons (transfer (params 170) (literal (mutez 0) 179) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 176) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179) (set (operations 187) (cons (transfer (unit) (literal (mutez 0) 187) (openVariant (contract \"liquidate\" \"unit\" (params 170) 182) \"Some\" \"None\" 182) 187) (operations 187) 187) 187))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 270) \"nat\" 271) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 274) 274) (literal (string \"bad state\") 274) 274) (set (attr (data) \"state\" 199) (literal (intOrNat 2) 277) 277) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"Some\" (params 270) 278) 278) (set (attr (data) \"savedState_redeemer\" 279) (variant \"Some\" (sender) 279) 279) (set (operations 288) (cons (transfer (tuple 288 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 282)) (literal (mutez 0) 288) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 283) \"Some\" \"None\" 283) 288) (operations 288) 288) 288))) (redeem_callback True ((set_type (params 292) \"nat\" 293) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 296) (literal (string \"bad sender\") 296) 296) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 2) 299) 299) (literal (string \"bad state\") 299) 299) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 278) \"Some\" \"None\" 302) 302) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 303) (literal (intOrNat 1000000000000000000) 303) 303) (attr (data) \"totalSupply\" 96) 303) 303) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 304) (params 292) 304) (literal (intOrNat 1000000000000000000) 304) 304) 304) (set (attr (data) \"underlyingBalance\" 235) (openVariant (isNat (sub (params 292) (getLocal \"tokensToReceive\" 307) 307) 307) \"Some\" \"None\" 307) 307) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 279) \"Some\" \"None\" 310) 310) (set (operations 320) (cons (transfer (record 311 (address (getLocal \"redeemer\" 312)) (value (getLocal \"tokensToRedeem\" 313))) (literal (mutez 0) 320) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 315) \"Some\" \"None\" 315) 320) (operations 320) 320) 320) (set (operations 333) (cons (transfer (record 323 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 325)) (value (getLocal \"tokensToReceive\" 326))) (literal (mutez 0) 333) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 328) \"Some\" \"None\" 328) 333) (operations 333) 333) 333) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 336) 336) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"None\" (unit) -1) 337) (set (attr (data) \"savedState_redeemer\" 279) (variant \"None\" (unit) -1) 338))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 346) \"unit\" 347) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 350) 350) (literal (string \"bad state\") 350) 350) (set (attr (data) \"state\" 199) (literal (intOrNat 1) 353) 353) (set (operations 362) (cons (transfer (tuple 362 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 356)) (literal (mutez 0) 362) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 357) \"Some\" \"None\" 357) 362) (operations 362) 362) 362))) (updateBalance_callback True ((set_type (params 366) \"nat\" 367) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 370) (literal (string \"bad sender\") 370) 370) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 1) 373) 373) (literal (string \"bad state\") 373) 373) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 376) 376) (set (attr (data) \"underlyingBalance\" 235) (params 366) 379))) (updateContractMetadata True ((set_type (params 419) (tuple \"string\" \"bytes\") 420) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 422) (literal (string \"not governor\") 422) 422) (set (getItem (attr (data) \"metadata\" 426) (first (params 419) 424) 426) (second (params 419) 425) 426))) (updateDexterAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"dexterAddress\" 153) (params 403) 407))) (updateGovernorAddress True ((set_type (params 387) \"address\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"governorAddress\" 422) (params 387) 391))) (updateOvenRegistryAddress True ((set_type (params 411) \"address\" 412) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 414) (literal (string \"not governor\") 414) 414) (set (attr (data) \"ovenRegistryAddress\" 176) (params 411) 415))) (updateRewardPercent True ((set_type (params 395) \"nat\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"rewardPercent\" 139) (params 395) 399))) (updateTokenMetadata True ((set_type (params 430) (tuple \"nat\" (map \"string\" \"bytes\")) 431) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 433) (literal (string \"not governor\") 433) 433) (set (getItem (attr (data) \"token_metadata\" 434) (literal (intOrNat 0) 434) 434) (params 430) 434))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 620, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 98)", "dynamic": false, "message": "updateDexterAddress", "params": "(literal (address \"tz1eibLoCDot2w2QWyR7kMoVDTto9fYs2mnJ\") 12)", "line_no": 623, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 623)", "show": true, "valid": "(literal (bool True) 623)", "voting_powers": "(map 623 )", "export": true}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 0 98) 623) \"dexterAddress\" 628) (literal (address \"tz1eibLoCDot2w2QWyR7kMoVDTto9fYs2mnJ\") 12) 628)", "line_no": 628}], "decompile": false, "kind": "test"}, {"shortname": "updateOvenRegistryAddress_-_fails_if_sender_is_not_governor", "longname": "updateOvenRegistryAddress - fails if sender is not governor", "scenario": [{"action": "newContract", "id": "(static_id 0 98)", "export": "(storage (record 98 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 102 ) (bigmap (unknown 83) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 102)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 89 ((literal (string \"\") 640) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 91)) ((literal (string \"data\") 640) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 88))) (bigmap \"string\" \"bytes\") 89)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 98)) (rewardPercent (literal (nat 1) 54)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 98)) (tokenAddress (literal (address \"tz1aJS7Pk9uWR3wWyFf1i3RwhYxN84G7stom\") 17)) (token_metadata (type_annotation (big_map 78 ((literal (nat 0) 65) (tuple 640 (literal (nat 0) 65) (type_annotation (map 67 ((literal (string \"name\") 640) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 69)) ((literal (string \"decimals\") 640) (literal (bytes \"0x3138\") 70)) ((literal (string \"symbol\") 640) (literal (bytes \"0x6465787465724c6b555344\") 71)) ((literal (string \"icon\") 640) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 72))) (map \"string\" \"bytes\") 67)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 78)) (totalSupply (literal (intOrNat 0) 98)) (underlyingBalance (literal (nat 0) 119)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 135) \"unit\" 136) (set (operations 140) (cons (transfer (unit) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) (openVariant (contract \"\" \"unit\" (source) 140) \"Some\" \"None\" 140) 140) (operations 140) 140) 140) (set (operations 156) (cons (transfer (tuple 156 (to_address (self) \"None\") (tuple 156 (literal (intOrNat 1) 156) (add_seconds (now) (literal (int 3600) 148) 148))) (sub (balance) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) 143) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 153) 151) \"Some\" \"None\" 151) 156) (operations 156) 156) 156) (set (operations 166) (cons (transfer (unit) (literal (mutez 0) 166) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 161) \"Some\" \"None\" 161) 166) (operations 166) 166) 166))) (deposit True ((set_type (params 195) \"nat\" 196) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 199) 199) (literal (string \"bad state\") 199) 199) (set (attr (data) \"state\" 199) (literal (intOrNat 3) 202) 202) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"Some\" (params 195) 203) 203) (set (attr (data) \"savedState_depositor\" 204) (variant \"Some\" (sender) 204) 204) (set (operations 213) (cons (transfer (tuple 213 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 207)) (literal (mutez 0) 213) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 208) \"Some\" \"None\" 208) 213) (operations 213) 213) 213))) (deposit_callback True ((set_type (params 217) \"nat\" 218) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 221) (literal (string \"bad sender\") 221) 221) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 3) 224) 224) (literal (string \"bad state\") 224) 224) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 203) \"Some\" \"None\" 227) 227) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 228) (literal (intOrNat 1000000000000000000) 228) 228) 228) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 229) 229) ((defineLocal \"newUnderlyingBalance\" (add (params 217) (getLocal \"tokensToDeposit\" 230) 230) 230) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 231) (literal (intOrNat 1000000000000000000) 231) 231) (getLocal \"newUnderlyingBalance\" 231) 231) 231) (set (getLocal \"newTokens\" 640) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 232) (attr (data) \"totalSupply\" 96) 232) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 232) (getLocal \"fractionOfPoolOwnership\" 232) 232) 232) \"Some\" \"None\" 232) 232) 232)) 229) (set (attr (data) \"underlyingBalance\" 235) (add (params 217) (getLocal \"tokensToDeposit\" 235) 235) 235) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 204) \"Some\" \"None\" 238) 238) (set (operations 249) (cons (transfer (record 239 (from_ (getLocal \"depositor\" 240)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 242))) (literal (mutez 0) 249) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 244) \"Some\" \"None\" 244) 249) (operations 249) 249) 249) (set (operations 261) (cons (transfer (record 252 (address (getLocal \"depositor\" 253)) (value (getLocal \"newTokens\" 254))) (literal (mutez 0) 261) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 256) \"Some\" \"None\" 256) 261) (operations 261) 261) 261) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 264) 264) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"None\" (unit) -1) 265) (set (attr (data) \"savedState_depositor\" 204) (variant \"None\" (unit) -1) 266))) (getAdministrator True ((bind \"__s37\" ((set_type (first (params 108) 640) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 640) (contract \"address\") 640) (set (operations 640) (cons (transfer (getLocal \"__s37\" 640) (literal (mutez 0) 640) (second (params 108) 640) 108) (operations 640) 640) 640))) (getAllowance True ((bind \"__s38\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 640) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 640) \"spender\" 69) 69) 69))) (set_type (second (params 68) 640) (contract \"nat\") 640) (set (operations 640) (cons (transfer (getLocal \"__s38\" 640) (literal (mutez 0) 640) (second (params 68) 640) 68) (operations 640) 640) 640))) (getBalance True ((bind \"__s39\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 640) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 640) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 640) 65) \"balance\" 65) 65))) (set_type (second (params 60) 640) (contract \"nat\") 640) (set (operations 640) (cons (transfer (getLocal \"__s39\" 640) (literal (mutez 0) 640) (second (params 60) 640) 60) (operations 640) 640) 640))) (getTotalSupply True ((bind \"__s40\" ((set_type (first (params 72) 640) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 640) (contract \"nat\") 640) (set (operations 640) (cons (transfer (getLocal \"__s40\" 640) (literal (mutez 0) 640) (second (params 72) 640) 72) (operations 640) 640) 640))) (liquidate True ((set_type (params 170) \"address\" 171) (set (operations 179) (cons (transfer (params 170) (literal (mutez 0) 179) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 176) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179) (set (operations 187) (cons (transfer (unit) (literal (mutez 0) 187) (openVariant (contract \"liquidate\" \"unit\" (params 170) 182) \"Some\" \"None\" 182) 187) (operations 187) 187) 187))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 270) \"nat\" 271) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 274) 274) (literal (string \"bad state\") 274) 274) (set (attr (data) \"state\" 199) (literal (intOrNat 2) 277) 277) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"Some\" (params 270) 278) 278) (set (attr (data) \"savedState_redeemer\" 279) (variant \"Some\" (sender) 279) 279) (set (operations 288) (cons (transfer (tuple 288 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 282)) (literal (mutez 0) 288) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 283) \"Some\" \"None\" 283) 288) (operations 288) 288) 288))) (redeem_callback True ((set_type (params 292) \"nat\" 293) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 296) (literal (string \"bad sender\") 296) 296) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 2) 299) 299) (literal (string \"bad state\") 299) 299) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 278) \"Some\" \"None\" 302) 302) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 303) (literal (intOrNat 1000000000000000000) 303) 303) (attr (data) \"totalSupply\" 96) 303) 303) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 304) (params 292) 304) (literal (intOrNat 1000000000000000000) 304) 304) 304) (set (attr (data) \"underlyingBalance\" 235) (openVariant (isNat (sub (params 292) (getLocal \"tokensToReceive\" 307) 307) 307) \"Some\" \"None\" 307) 307) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 279) \"Some\" \"None\" 310) 310) (set (operations 320) (cons (transfer (record 311 (address (getLocal \"redeemer\" 312)) (value (getLocal \"tokensToRedeem\" 313))) (literal (mutez 0) 320) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 315) \"Some\" \"None\" 315) 320) (operations 320) 320) 320) (set (operations 333) (cons (transfer (record 323 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 325)) (value (getLocal \"tokensToReceive\" 326))) (literal (mutez 0) 333) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 328) \"Some\" \"None\" 328) 333) (operations 333) 333) 333) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 336) 336) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"None\" (unit) -1) 337) (set (attr (data) \"savedState_redeemer\" 279) (variant \"None\" (unit) -1) 338))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 346) \"unit\" 347) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 350) 350) (literal (string \"bad state\") 350) 350) (set (attr (data) \"state\" 199) (literal (intOrNat 1) 353) 353) (set (operations 362) (cons (transfer (tuple 362 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 356)) (literal (mutez 0) 362) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 357) \"Some\" \"None\" 357) 362) (operations 362) 362) 362))) (updateBalance_callback True ((set_type (params 366) \"nat\" 367) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 370) (literal (string \"bad sender\") 370) 370) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 1) 373) 373) (literal (string \"bad state\") 373) 373) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 376) 376) (set (attr (data) \"underlyingBalance\" 235) (params 366) 379))) (updateContractMetadata True ((set_type (params 419) (tuple \"string\" \"bytes\") 420) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 422) (literal (string \"not governor\") 422) 422) (set (getItem (attr (data) \"metadata\" 426) (first (params 419) 424) 426) (second (params 419) 425) 426))) (updateDexterAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"dexterAddress\" 153) (params 403) 407))) (updateGovernorAddress True ((set_type (params 387) \"address\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"governorAddress\" 422) (params 387) 391))) (updateOvenRegistryAddress True ((set_type (params 411) \"address\" 412) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 414) (literal (string \"not governor\") 414) 414) (set (attr (data) \"ovenRegistryAddress\" 176) (params 411) 415))) (updateRewardPercent True ((set_type (params 395) \"nat\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"rewardPercent\" 139) (params 395) 399))) (updateTokenMetadata True ((set_type (params 430) (tuple \"nat\" (map \"string\" \"bytes\")) 431) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 433) (literal (string \"not governor\") 433) 433) (set (getItem (attr (data) \"token_metadata\" 434) (literal (intOrNat 0) 434) 434) (params 430) 434))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 640, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 98)", "dynamic": false, "message": "updateOvenRegistryAddress", "params": "(literal (address \"tz1eibLoCDot2w2QWyR7kMoVDTto9fYs2mnJ\") 12)", "line_no": 645, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1bTpviNnyx2PXsNmGpCQTMQsGoYordkUoA\") 26)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 645)", "show": true, "valid": "(literal (bool False) 645)", "voting_powers": "(map 645 )", "export": true}], "decompile": false, "kind": "test"}, {"shortname": "updateOvenRegistryAddress_-_can_rotate_governor", "longname": "updateOvenRegistryAddress - can rotate governor", "scenario": [{"action": "newContract", "id": "(static_id 0 98)", "export": "(storage (record 98 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 102 ) (bigmap (unknown 93) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 102)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 89 ((literal (string \"\") 656) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 91)) ((literal (string \"data\") 656) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 88))) (bigmap \"string\" \"bytes\") 89)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 98)) (rewardPercent (literal (nat 1) 54)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 98)) (tokenAddress (literal (address \"tz1aJS7Pk9uWR3wWyFf1i3RwhYxN84G7stom\") 17)) (token_metadata (type_annotation (big_map 78 ((literal (nat 0) 65) (tuple 656 (literal (nat 0) 65) (type_annotation (map 67 ((literal (string \"name\") 656) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 69)) ((literal (string \"decimals\") 656) (literal (bytes \"0x3138\") 70)) ((literal (string \"symbol\") 656) (literal (bytes \"0x6465787465724c6b555344\") 71)) ((literal (string \"icon\") 656) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 72))) (map \"string\" \"bytes\") 67)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 78)) (totalSupply (literal (intOrNat 0) 98)) (underlyingBalance (literal (nat 0) 119)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 135) \"unit\" 136) (set (operations 140) (cons (transfer (unit) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) (openVariant (contract \"\" \"unit\" (source) 140) \"Some\" \"None\" 140) 140) (operations 140) 140) 140) (set (operations 156) (cons (transfer (tuple 156 (to_address (self) \"None\") (tuple 156 (literal (intOrNat 1) 156) (add_seconds (now) (literal (int 3600) 148) 148))) (sub (balance) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) 143) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 153) 151) \"Some\" \"None\" 151) 156) (operations 156) 156) 156) (set (operations 166) (cons (transfer (unit) (literal (mutez 0) 166) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 161) \"Some\" \"None\" 161) 166) (operations 166) 166) 166))) (deposit True ((set_type (params 195) \"nat\" 196) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 199) 199) (literal (string \"bad state\") 199) 199) (set (attr (data) \"state\" 199) (literal (intOrNat 3) 202) 202) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"Some\" (params 195) 203) 203) (set (attr (data) \"savedState_depositor\" 204) (variant \"Some\" (sender) 204) 204) (set (operations 213) (cons (transfer (tuple 213 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 207)) (literal (mutez 0) 213) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 208) \"Some\" \"None\" 208) 213) (operations 213) 213) 213))) (deposit_callback True ((set_type (params 217) \"nat\" 218) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 221) (literal (string \"bad sender\") 221) 221) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 3) 224) 224) (literal (string \"bad state\") 224) 224) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 203) \"Some\" \"None\" 227) 227) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 228) (literal (intOrNat 1000000000000000000) 228) 228) 228) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 229) 229) ((defineLocal \"newUnderlyingBalance\" (add (params 217) (getLocal \"tokensToDeposit\" 230) 230) 230) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 231) (literal (intOrNat 1000000000000000000) 231) 231) (getLocal \"newUnderlyingBalance\" 231) 231) 231) (set (getLocal \"newTokens\" 656) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 232) (attr (data) \"totalSupply\" 96) 232) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 232) (getLocal \"fractionOfPoolOwnership\" 232) 232) 232) \"Some\" \"None\" 232) 232) 232)) 229) (set (attr (data) \"underlyingBalance\" 235) (add (params 217) (getLocal \"tokensToDeposit\" 235) 235) 235) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 204) \"Some\" \"None\" 238) 238) (set (operations 249) (cons (transfer (record 239 (from_ (getLocal \"depositor\" 240)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 242))) (literal (mutez 0) 249) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 244) \"Some\" \"None\" 244) 249) (operations 249) 249) 249) (set (operations 261) (cons (transfer (record 252 (address (getLocal \"depositor\" 253)) (value (getLocal \"newTokens\" 254))) (literal (mutez 0) 261) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 256) \"Some\" \"None\" 256) 261) (operations 261) 261) 261) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 264) 264) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"None\" (unit) -1) 265) (set (attr (data) \"savedState_depositor\" 204) (variant \"None\" (unit) -1) 266))) (getAdministrator True ((bind \"__s41\" ((set_type (first (params 108) 656) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 656) (contract \"address\") 656) (set (operations 656) (cons (transfer (getLocal \"__s41\" 656) (literal (mutez 0) 656) (second (params 108) 656) 108) (operations 656) 656) 656))) (getAllowance True ((bind \"__s42\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 656) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 656) \"spender\" 69) 69) 69))) (set_type (second (params 68) 656) (contract \"nat\") 656) (set (operations 656) (cons (transfer (getLocal \"__s42\" 656) (literal (mutez 0) 656) (second (params 68) 656) 68) (operations 656) 656) 656))) (getBalance True ((bind \"__s43\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 656) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 656) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 656) 65) \"balance\" 65) 65))) (set_type (second (params 60) 656) (contract \"nat\") 656) (set (operations 656) (cons (transfer (getLocal \"__s43\" 656) (literal (mutez 0) 656) (second (params 60) 656) 60) (operations 656) 656) 656))) (getTotalSupply True ((bind \"__s44\" ((set_type (first (params 72) 656) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 656) (contract \"nat\") 656) (set (operations 656) (cons (transfer (getLocal \"__s44\" 656) (literal (mutez 0) 656) (second (params 72) 656) 72) (operations 656) 656) 656))) (liquidate True ((set_type (params 170) \"address\" 171) (set (operations 179) (cons (transfer (params 170) (literal (mutez 0) 179) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 176) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179) (set (operations 187) (cons (transfer (unit) (literal (mutez 0) 187) (openVariant (contract \"liquidate\" \"unit\" (params 170) 182) \"Some\" \"None\" 182) 187) (operations 187) 187) 187))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 270) \"nat\" 271) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 274) 274) (literal (string \"bad state\") 274) 274) (set (attr (data) \"state\" 199) (literal (intOrNat 2) 277) 277) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"Some\" (params 270) 278) 278) (set (attr (data) \"savedState_redeemer\" 279) (variant \"Some\" (sender) 279) 279) (set (operations 288) (cons (transfer (tuple 288 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 282)) (literal (mutez 0) 288) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 283) \"Some\" \"None\" 283) 288) (operations 288) 288) 288))) (redeem_callback True ((set_type (params 292) \"nat\" 293) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 296) (literal (string \"bad sender\") 296) 296) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 2) 299) 299) (literal (string \"bad state\") 299) 299) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 278) \"Some\" \"None\" 302) 302) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 303) (literal (intOrNat 1000000000000000000) 303) 303) (attr (data) \"totalSupply\" 96) 303) 303) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 304) (params 292) 304) (literal (intOrNat 1000000000000000000) 304) 304) 304) (set (attr (data) \"underlyingBalance\" 235) (openVariant (isNat (sub (params 292) (getLocal \"tokensToReceive\" 307) 307) 307) \"Some\" \"None\" 307) 307) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 279) \"Some\" \"None\" 310) 310) (set (operations 320) (cons (transfer (record 311 (address (getLocal \"redeemer\" 312)) (value (getLocal \"tokensToRedeem\" 313))) (literal (mutez 0) 320) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 315) \"Some\" \"None\" 315) 320) (operations 320) 320) 320) (set (operations 333) (cons (transfer (record 323 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 325)) (value (getLocal \"tokensToReceive\" 326))) (literal (mutez 0) 333) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 328) \"Some\" \"None\" 328) 333) (operations 333) 333) 333) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 336) 336) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"None\" (unit) -1) 337) (set (attr (data) \"savedState_redeemer\" 279) (variant \"None\" (unit) -1) 338))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 346) \"unit\" 347) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 350) 350) (literal (string \"bad state\") 350) 350) (set (attr (data) \"state\" 199) (literal (intOrNat 1) 353) 353) (set (operations 362) (cons (transfer (tuple 362 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 356)) (literal (mutez 0) 362) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 357) \"Some\" \"None\" 357) 362) (operations 362) 362) 362))) (updateBalance_callback True ((set_type (params 366) \"nat\" 367) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 370) (literal (string \"bad sender\") 370) 370) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 1) 373) 373) (literal (string \"bad state\") 373) 373) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 376) 376) (set (attr (data) \"underlyingBalance\" 235) (params 366) 379))) (updateContractMetadata True ((set_type (params 419) (tuple \"string\" \"bytes\") 420) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 422) (literal (string \"not governor\") 422) 422) (set (getItem (attr (data) \"metadata\" 426) (first (params 419) 424) 426) (second (params 419) 425) 426))) (updateDexterAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"dexterAddress\" 153) (params 403) 407))) (updateGovernorAddress True ((set_type (params 387) \"address\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"governorAddress\" 422) (params 387) 391))) (updateOvenRegistryAddress True ((set_type (params 411) \"address\" 412) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 414) (literal (string \"not governor\") 414) 414) (set (attr (data) \"ovenRegistryAddress\" 176) (params 411) 415))) (updateRewardPercent True ((set_type (params 395) \"nat\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"rewardPercent\" 139) (params 395) 399))) (updateTokenMetadata True ((set_type (params 430) (tuple \"nat\" (map \"string\" \"bytes\")) 431) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 433) (literal (string \"not governor\") 433) 433) (set (getItem (attr (data) \"token_metadata\" 434) (literal (intOrNat 0) 434) 434) (params 430) 434))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 656, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 98)", "dynamic": false, "message": "updateOvenRegistryAddress", "params": "(literal (address \"tz1eibLoCDot2w2QWyR7kMoVDTto9fYs2mnJ\") 12)", "line_no": 659, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 659)", "show": true, "valid": "(literal (bool True) 659)", "voting_powers": "(map 659 )", "export": true}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 0 98) 659) \"ovenRegistryAddress\" 664) (literal (address \"tz1eibLoCDot2w2QWyR7kMoVDTto9fYs2mnJ\") 12) 664)", "line_no": 664}], "decompile": false, "kind": "test"}, {"shortname": "updateGovernorAddress_-_fails_if_sender_is_not_governor", "longname": "updateGovernorAddress - fails if sender is not governor", "scenario": [{"action": "newContract", "id": "(static_id 0 98)", "export": "(storage (record 98 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 102 ) (bigmap (unknown 103) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 102)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 89 ((literal (string \"\") 676) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 91)) ((literal (string \"data\") 676) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 88))) (bigmap \"string\" \"bytes\") 89)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 98)) (rewardPercent (literal (nat 1) 54)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 98)) (tokenAddress (literal (address \"tz1aJS7Pk9uWR3wWyFf1i3RwhYxN84G7stom\") 17)) (token_metadata (type_annotation (big_map 78 ((literal (nat 0) 65) (tuple 676 (literal (nat 0) 65) (type_annotation (map 67 ((literal (string \"name\") 676) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 69)) ((literal (string \"decimals\") 676) (literal (bytes \"0x3138\") 70)) ((literal (string \"symbol\") 676) (literal (bytes \"0x6465787465724c6b555344\") 71)) ((literal (string \"icon\") 676) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 72))) (map \"string\" \"bytes\") 67)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 78)) (totalSupply (literal (intOrNat 0) 98)) (underlyingBalance (literal (nat 0) 119)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 135) \"unit\" 136) (set (operations 140) (cons (transfer (unit) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) (openVariant (contract \"\" \"unit\" (source) 140) \"Some\" \"None\" 140) 140) (operations 140) 140) 140) (set (operations 156) (cons (transfer (tuple 156 (to_address (self) \"None\") (tuple 156 (literal (intOrNat 1) 156) (add_seconds (now) (literal (int 3600) 148) 148))) (sub (balance) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) 143) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 153) 151) \"Some\" \"None\" 151) 156) (operations 156) 156) 156) (set (operations 166) (cons (transfer (unit) (literal (mutez 0) 166) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 161) \"Some\" \"None\" 161) 166) (operations 166) 166) 166))) (deposit True ((set_type (params 195) \"nat\" 196) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 199) 199) (literal (string \"bad state\") 199) 199) (set (attr (data) \"state\" 199) (literal (intOrNat 3) 202) 202) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"Some\" (params 195) 203) 203) (set (attr (data) \"savedState_depositor\" 204) (variant \"Some\" (sender) 204) 204) (set (operations 213) (cons (transfer (tuple 213 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 207)) (literal (mutez 0) 213) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 208) \"Some\" \"None\" 208) 213) (operations 213) 213) 213))) (deposit_callback True ((set_type (params 217) \"nat\" 218) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 221) (literal (string \"bad sender\") 221) 221) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 3) 224) 224) (literal (string \"bad state\") 224) 224) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 203) \"Some\" \"None\" 227) 227) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 228) (literal (intOrNat 1000000000000000000) 228) 228) 228) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 229) 229) ((defineLocal \"newUnderlyingBalance\" (add (params 217) (getLocal \"tokensToDeposit\" 230) 230) 230) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 231) (literal (intOrNat 1000000000000000000) 231) 231) (getLocal \"newUnderlyingBalance\" 231) 231) 231) (set (getLocal \"newTokens\" 676) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 232) (attr (data) \"totalSupply\" 96) 232) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 232) (getLocal \"fractionOfPoolOwnership\" 232) 232) 232) \"Some\" \"None\" 232) 232) 232)) 229) (set (attr (data) \"underlyingBalance\" 235) (add (params 217) (getLocal \"tokensToDeposit\" 235) 235) 235) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 204) \"Some\" \"None\" 238) 238) (set (operations 249) (cons (transfer (record 239 (from_ (getLocal \"depositor\" 240)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 242))) (literal (mutez 0) 249) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 244) \"Some\" \"None\" 244) 249) (operations 249) 249) 249) (set (operations 261) (cons (transfer (record 252 (address (getLocal \"depositor\" 253)) (value (getLocal \"newTokens\" 254))) (literal (mutez 0) 261) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 256) \"Some\" \"None\" 256) 261) (operations 261) 261) 261) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 264) 264) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"None\" (unit) -1) 265) (set (attr (data) \"savedState_depositor\" 204) (variant \"None\" (unit) -1) 266))) (getAdministrator True ((bind \"__s45\" ((set_type (first (params 108) 676) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 676) (contract \"address\") 676) (set (operations 676) (cons (transfer (getLocal \"__s45\" 676) (literal (mutez 0) 676) (second (params 108) 676) 108) (operations 676) 676) 676))) (getAllowance True ((bind \"__s46\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 676) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 676) \"spender\" 69) 69) 69))) (set_type (second (params 68) 676) (contract \"nat\") 676) (set (operations 676) (cons (transfer (getLocal \"__s46\" 676) (literal (mutez 0) 676) (second (params 68) 676) 68) (operations 676) 676) 676))) (getBalance True ((bind \"__s47\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 676) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 676) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 676) 65) \"balance\" 65) 65))) (set_type (second (params 60) 676) (contract \"nat\") 676) (set (operations 676) (cons (transfer (getLocal \"__s47\" 676) (literal (mutez 0) 676) (second (params 60) 676) 60) (operations 676) 676) 676))) (getTotalSupply True ((bind \"__s48\" ((set_type (first (params 72) 676) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 676) (contract \"nat\") 676) (set (operations 676) (cons (transfer (getLocal \"__s48\" 676) (literal (mutez 0) 676) (second (params 72) 676) 72) (operations 676) 676) 676))) (liquidate True ((set_type (params 170) \"address\" 171) (set (operations 179) (cons (transfer (params 170) (literal (mutez 0) 179) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 176) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179) (set (operations 187) (cons (transfer (unit) (literal (mutez 0) 187) (openVariant (contract \"liquidate\" \"unit\" (params 170) 182) \"Some\" \"None\" 182) 187) (operations 187) 187) 187))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 270) \"nat\" 271) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 274) 274) (literal (string \"bad state\") 274) 274) (set (attr (data) \"state\" 199) (literal (intOrNat 2) 277) 277) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"Some\" (params 270) 278) 278) (set (attr (data) \"savedState_redeemer\" 279) (variant \"Some\" (sender) 279) 279) (set (operations 288) (cons (transfer (tuple 288 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 282)) (literal (mutez 0) 288) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 283) \"Some\" \"None\" 283) 288) (operations 288) 288) 288))) (redeem_callback True ((set_type (params 292) \"nat\" 293) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 296) (literal (string \"bad sender\") 296) 296) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 2) 299) 299) (literal (string \"bad state\") 299) 299) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 278) \"Some\" \"None\" 302) 302) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 303) (literal (intOrNat 1000000000000000000) 303) 303) (attr (data) \"totalSupply\" 96) 303) 303) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 304) (params 292) 304) (literal (intOrNat 1000000000000000000) 304) 304) 304) (set (attr (data) \"underlyingBalance\" 235) (openVariant (isNat (sub (params 292) (getLocal \"tokensToReceive\" 307) 307) 307) \"Some\" \"None\" 307) 307) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 279) \"Some\" \"None\" 310) 310) (set (operations 320) (cons (transfer (record 311 (address (getLocal \"redeemer\" 312)) (value (getLocal \"tokensToRedeem\" 313))) (literal (mutez 0) 320) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 315) \"Some\" \"None\" 315) 320) (operations 320) 320) 320) (set (operations 333) (cons (transfer (record 323 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 325)) (value (getLocal \"tokensToReceive\" 326))) (literal (mutez 0) 333) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 328) \"Some\" \"None\" 328) 333) (operations 333) 333) 333) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 336) 336) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"None\" (unit) -1) 337) (set (attr (data) \"savedState_redeemer\" 279) (variant \"None\" (unit) -1) 338))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 346) \"unit\" 347) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 350) 350) (literal (string \"bad state\") 350) 350) (set (attr (data) \"state\" 199) (literal (intOrNat 1) 353) 353) (set (operations 362) (cons (transfer (tuple 362 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 356)) (literal (mutez 0) 362) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 357) \"Some\" \"None\" 357) 362) (operations 362) 362) 362))) (updateBalance_callback True ((set_type (params 366) \"nat\" 367) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 370) (literal (string \"bad sender\") 370) 370) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 1) 373) 373) (literal (string \"bad state\") 373) 373) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 376) 376) (set (attr (data) \"underlyingBalance\" 235) (params 366) 379))) (updateContractMetadata True ((set_type (params 419) (tuple \"string\" \"bytes\") 420) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 422) (literal (string \"not governor\") 422) 422) (set (getItem (attr (data) \"metadata\" 426) (first (params 419) 424) 426) (second (params 419) 425) 426))) (updateDexterAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"dexterAddress\" 153) (params 403) 407))) (updateGovernorAddress True ((set_type (params 387) \"address\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"governorAddress\" 422) (params 387) 391))) (updateOvenRegistryAddress True ((set_type (params 411) \"address\" 412) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 414) (literal (string \"not governor\") 414) 414) (set (attr (data) \"ovenRegistryAddress\" 176) (params 411) 415))) (updateRewardPercent True ((set_type (params 395) \"nat\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"rewardPercent\" 139) (params 395) 399))) (updateTokenMetadata True ((set_type (params 430) (tuple \"nat\" (map \"string\" \"bytes\")) 431) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 433) (literal (string \"not governor\") 433) 433) (set (getItem (attr (data) \"token_metadata\" 434) (literal (intOrNat 0) 434) 434) (params 430) 434))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 676, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 98)", "dynamic": false, "message": "updateGovernorAddress", "params": "(literal (address \"tz1eibLoCDot2w2QWyR7kMoVDTto9fYs2mnJ\") 12)", "line_no": 681, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1bTpviNnyx2PXsNmGpCQTMQsGoYordkUoA\") 26)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 681)", "show": true, "valid": "(literal (bool False) 681)", "voting_powers": "(map 681 )", "export": true}], "decompile": false, "kind": "test"}, {"shortname": "updateGovernorAddress_-_can_rotate_governor", "longname": "updateGovernorAddress - can rotate governor", "scenario": [{"action": "newContract", "id": "(static_id 0 98)", "export": "(storage (record 98 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 102 ) (bigmap (unknown 113) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 102)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 89 ((literal (string \"\") 692) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 91)) ((literal (string \"data\") 692) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 88))) (bigmap \"string\" \"bytes\") 89)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 98)) (rewardPercent (literal (nat 1) 54)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 98)) (tokenAddress (literal (address \"tz1aJS7Pk9uWR3wWyFf1i3RwhYxN84G7stom\") 17)) (token_metadata (type_annotation (big_map 78 ((literal (nat 0) 65) (tuple 692 (literal (nat 0) 65) (type_annotation (map 67 ((literal (string \"name\") 692) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 69)) ((literal (string \"decimals\") 692) (literal (bytes \"0x3138\") 70)) ((literal (string \"symbol\") 692) (literal (bytes \"0x6465787465724c6b555344\") 71)) ((literal (string \"icon\") 692) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 72))) (map \"string\" \"bytes\") 67)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 78)) (totalSupply (literal (intOrNat 0) 98)) (underlyingBalance (literal (nat 0) 119)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 135) \"unit\" 136) (set (operations 140) (cons (transfer (unit) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) (openVariant (contract \"\" \"unit\" (source) 140) \"Some\" \"None\" 140) 140) (operations 140) 140) 140) (set (operations 156) (cons (transfer (tuple 156 (to_address (self) \"None\") (tuple 156 (literal (intOrNat 1) 156) (add_seconds (now) (literal (int 3600) 148) 148))) (sub (balance) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) 143) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 153) 151) \"Some\" \"None\" 151) 156) (operations 156) 156) 156) (set (operations 166) (cons (transfer (unit) (literal (mutez 0) 166) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 161) \"Some\" \"None\" 161) 166) (operations 166) 166) 166))) (deposit True ((set_type (params 195) \"nat\" 196) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 199) 199) (literal (string \"bad state\") 199) 199) (set (attr (data) \"state\" 199) (literal (intOrNat 3) 202) 202) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"Some\" (params 195) 203) 203) (set (attr (data) \"savedState_depositor\" 204) (variant \"Some\" (sender) 204) 204) (set (operations 213) (cons (transfer (tuple 213 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 207)) (literal (mutez 0) 213) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 208) \"Some\" \"None\" 208) 213) (operations 213) 213) 213))) (deposit_callback True ((set_type (params 217) \"nat\" 218) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 221) (literal (string \"bad sender\") 221) 221) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 3) 224) 224) (literal (string \"bad state\") 224) 224) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 203) \"Some\" \"None\" 227) 227) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 228) (literal (intOrNat 1000000000000000000) 228) 228) 228) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 229) 229) ((defineLocal \"newUnderlyingBalance\" (add (params 217) (getLocal \"tokensToDeposit\" 230) 230) 230) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 231) (literal (intOrNat 1000000000000000000) 231) 231) (getLocal \"newUnderlyingBalance\" 231) 231) 231) (set (getLocal \"newTokens\" 692) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 232) (attr (data) \"totalSupply\" 96) 232) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 232) (getLocal \"fractionOfPoolOwnership\" 232) 232) 232) \"Some\" \"None\" 232) 232) 232)) 229) (set (attr (data) \"underlyingBalance\" 235) (add (params 217) (getLocal \"tokensToDeposit\" 235) 235) 235) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 204) \"Some\" \"None\" 238) 238) (set (operations 249) (cons (transfer (record 239 (from_ (getLocal \"depositor\" 240)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 242))) (literal (mutez 0) 249) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 244) \"Some\" \"None\" 244) 249) (operations 249) 249) 249) (set (operations 261) (cons (transfer (record 252 (address (getLocal \"depositor\" 253)) (value (getLocal \"newTokens\" 254))) (literal (mutez 0) 261) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 256) \"Some\" \"None\" 256) 261) (operations 261) 261) 261) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 264) 264) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"None\" (unit) -1) 265) (set (attr (data) \"savedState_depositor\" 204) (variant \"None\" (unit) -1) 266))) (getAdministrator True ((bind \"__s49\" ((set_type (first (params 108) 692) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 692) (contract \"address\") 692) (set (operations 692) (cons (transfer (getLocal \"__s49\" 692) (literal (mutez 0) 692) (second (params 108) 692) 108) (operations 692) 692) 692))) (getAllowance True ((bind \"__s50\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 692) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 692) \"spender\" 69) 69) 69))) (set_type (second (params 68) 692) (contract \"nat\") 692) (set (operations 692) (cons (transfer (getLocal \"__s50\" 692) (literal (mutez 0) 692) (second (params 68) 692) 68) (operations 692) 692) 692))) (getBalance True ((bind \"__s51\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 692) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 692) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 692) 65) \"balance\" 65) 65))) (set_type (second (params 60) 692) (contract \"nat\") 692) (set (operations 692) (cons (transfer (getLocal \"__s51\" 692) (literal (mutez 0) 692) (second (params 60) 692) 60) (operations 692) 692) 692))) (getTotalSupply True ((bind \"__s52\" ((set_type (first (params 72) 692) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 692) (contract \"nat\") 692) (set (operations 692) (cons (transfer (getLocal \"__s52\" 692) (literal (mutez 0) 692) (second (params 72) 692) 72) (operations 692) 692) 692))) (liquidate True ((set_type (params 170) \"address\" 171) (set (operations 179) (cons (transfer (params 170) (literal (mutez 0) 179) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 176) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179) (set (operations 187) (cons (transfer (unit) (literal (mutez 0) 187) (openVariant (contract \"liquidate\" \"unit\" (params 170) 182) \"Some\" \"None\" 182) 187) (operations 187) 187) 187))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 270) \"nat\" 271) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 274) 274) (literal (string \"bad state\") 274) 274) (set (attr (data) \"state\" 199) (literal (intOrNat 2) 277) 277) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"Some\" (params 270) 278) 278) (set (attr (data) \"savedState_redeemer\" 279) (variant \"Some\" (sender) 279) 279) (set (operations 288) (cons (transfer (tuple 288 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 282)) (literal (mutez 0) 288) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 283) \"Some\" \"None\" 283) 288) (operations 288) 288) 288))) (redeem_callback True ((set_type (params 292) \"nat\" 293) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 296) (literal (string \"bad sender\") 296) 296) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 2) 299) 299) (literal (string \"bad state\") 299) 299) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 278) \"Some\" \"None\" 302) 302) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 303) (literal (intOrNat 1000000000000000000) 303) 303) (attr (data) \"totalSupply\" 96) 303) 303) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 304) (params 292) 304) (literal (intOrNat 1000000000000000000) 304) 304) 304) (set (attr (data) \"underlyingBalance\" 235) (openVariant (isNat (sub (params 292) (getLocal \"tokensToReceive\" 307) 307) 307) \"Some\" \"None\" 307) 307) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 279) \"Some\" \"None\" 310) 310) (set (operations 320) (cons (transfer (record 311 (address (getLocal \"redeemer\" 312)) (value (getLocal \"tokensToRedeem\" 313))) (literal (mutez 0) 320) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 315) \"Some\" \"None\" 315) 320) (operations 320) 320) 320) (set (operations 333) (cons (transfer (record 323 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 325)) (value (getLocal \"tokensToReceive\" 326))) (literal (mutez 0) 333) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 328) \"Some\" \"None\" 328) 333) (operations 333) 333) 333) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 336) 336) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"None\" (unit) -1) 337) (set (attr (data) \"savedState_redeemer\" 279) (variant \"None\" (unit) -1) 338))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 346) \"unit\" 347) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 350) 350) (literal (string \"bad state\") 350) 350) (set (attr (data) \"state\" 199) (literal (intOrNat 1) 353) 353) (set (operations 362) (cons (transfer (tuple 362 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 356)) (literal (mutez 0) 362) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 357) \"Some\" \"None\" 357) 362) (operations 362) 362) 362))) (updateBalance_callback True ((set_type (params 366) \"nat\" 367) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 370) (literal (string \"bad sender\") 370) 370) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 1) 373) 373) (literal (string \"bad state\") 373) 373) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 376) 376) (set (attr (data) \"underlyingBalance\" 235) (params 366) 379))) (updateContractMetadata True ((set_type (params 419) (tuple \"string\" \"bytes\") 420) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 422) (literal (string \"not governor\") 422) 422) (set (getItem (attr (data) \"metadata\" 426) (first (params 419) 424) 426) (second (params 419) 425) 426))) (updateDexterAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"dexterAddress\" 153) (params 403) 407))) (updateGovernorAddress True ((set_type (params 387) \"address\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"governorAddress\" 422) (params 387) 391))) (updateOvenRegistryAddress True ((set_type (params 411) \"address\" 412) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 414) (literal (string \"not governor\") 414) 414) (set (attr (data) \"ovenRegistryAddress\" 176) (params 411) 415))) (updateRewardPercent True ((set_type (params 395) \"nat\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"rewardPercent\" 139) (params 395) 399))) (updateTokenMetadata True ((set_type (params 430) (tuple \"nat\" (map \"string\" \"bytes\")) 431) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 433) (literal (string \"not governor\") 433) 433) (set (getItem (attr (data) \"token_metadata\" 434) (literal (intOrNat 0) 434) 434) (params 430) 434))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 692, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 98)", "dynamic": false, "message": "updateGovernorAddress", "params": "(literal (address \"tz1eibLoCDot2w2QWyR7kMoVDTto9fYs2mnJ\") 12)", "line_no": 695, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 695)", "show": true, "valid": "(literal (bool True) 695)", "voting_powers": "(map 695 )", "export": true}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 0 98) 695) \"governorAddress\" 700) (literal (address \"tz1eibLoCDot2w2QWyR7kMoVDTto9fYs2mnJ\") 12) 700)", "line_no": 700}], "decompile": false, "kind": "test"}, {"shortname": "liquidate_-_fails_if_given_address_is_not_oven", "longname": "liquidate - fails if given address is not oven", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 123) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s53\" ((set_type (first (params 89) 714) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 714) (contract \"address\") 714) (set (operations 714) (cons (transfer (getLocal \"__s53\" 714) (literal (mutez 0) 714) (second (params 89) 714) 89) (operations 714) 714) 714))) (getAllowance True ((bind \"__s54\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 714) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 714) \"spender\" 46) 46) 46))) (set_type (second (params 45) 714) (contract \"nat\") 714) (set (operations 714) (cons (transfer (getLocal \"__s54\" 714) (literal (mutez 0) 714) (second (params 45) 714) 45) (operations 714) 714) 714))) (getBalance True ((bind \"__s55\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 714) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 714) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 714) 42) \"balance\" 42) 42))) (set_type (second (params 37) 714) (contract \"nat\") 714) (set (operations 714) (cons (transfer (getLocal \"__s55\" 714) (literal (mutez 0) 714) (second (params 37) 714) 37) (operations 714) 714) 714))) (getTotalSupply True ((bind \"__s56\" ((set_type (first (params 49) 714) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 714) (contract \"nat\") 714) (set (operations 714) (cons (transfer (getLocal \"__s56\" 714) (literal (mutez 0) 714) (second (params 49) 714) 49) (operations 714) 714) 714))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 714, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 9)", "export": "(storage (record 9 (isOvenValue (literal (bool False) 9)))\nstorage_type (())\nmessages ((default True ((set_type (params 14) \"unit\" 15))) (isOven True ((set_type (params 20) \"address\" 21) (verify (attr (data) \"isOvenValue\" 23) (literal (string \"NOT OVEN\") 23) 23))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 720, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 2 98)", "export": "(storage (record 98 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 102 ) (bigmap (unknown 124) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 102)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 89 ((literal (string \"\") 727) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 91)) ((literal (string \"data\") 727) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 88))) (bigmap \"string\" \"bytes\") 89)) (ovenRegistryAddress (literal (local-address (static_id 1 9)) 9)) (paused (literal (bool False) 98)) (rewardPercent (literal (nat 1) 54)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 98)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 78 ((literal (nat 0) 65) (tuple 727 (literal (nat 0) 65) (type_annotation (map 67 ((literal (string \"name\") 727) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 69)) ((literal (string \"decimals\") 727) (literal (bytes \"0x3138\") 70)) ((literal (string \"symbol\") 727) (literal (bytes \"0x6465787465724c6b555344\") 71)) ((literal (string \"icon\") 727) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 72))) (map \"string\" \"bytes\") 67)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 78)) (totalSupply (literal (intOrNat 0) 98)) (underlyingBalance (literal (nat 0) 119)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 135) \"unit\" 136) (set (operations 140) (cons (transfer (unit) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) (openVariant (contract \"\" \"unit\" (source) 140) \"Some\" \"None\" 140) 140) (operations 140) 140) 140) (set (operations 156) (cons (transfer (tuple 156 (to_address (self) \"None\") (tuple 156 (literal (intOrNat 1) 156) (add_seconds (now) (literal (int 3600) 148) 148))) (sub (balance) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) 143) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 153) 151) \"Some\" \"None\" 151) 156) (operations 156) 156) 156) (set (operations 166) (cons (transfer (unit) (literal (mutez 0) 166) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 161) \"Some\" \"None\" 161) 166) (operations 166) 166) 166))) (deposit True ((set_type (params 195) \"nat\" 196) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 199) 199) (literal (string \"bad state\") 199) 199) (set (attr (data) \"state\" 199) (literal (intOrNat 3) 202) 202) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"Some\" (params 195) 203) 203) (set (attr (data) \"savedState_depositor\" 204) (variant \"Some\" (sender) 204) 204) (set (operations 213) (cons (transfer (tuple 213 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 207)) (literal (mutez 0) 213) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 208) \"Some\" \"None\" 208) 213) (operations 213) 213) 213))) (deposit_callback True ((set_type (params 217) \"nat\" 218) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 221) (literal (string \"bad sender\") 221) 221) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 3) 224) 224) (literal (string \"bad state\") 224) 224) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 203) \"Some\" \"None\" 227) 227) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 228) (literal (intOrNat 1000000000000000000) 228) 228) 228) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 229) 229) ((defineLocal \"newUnderlyingBalance\" (add (params 217) (getLocal \"tokensToDeposit\" 230) 230) 230) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 231) (literal (intOrNat 1000000000000000000) 231) 231) (getLocal \"newUnderlyingBalance\" 231) 231) 231) (set (getLocal \"newTokens\" 727) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 232) (attr (data) \"totalSupply\" 96) 232) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 232) (getLocal \"fractionOfPoolOwnership\" 232) 232) 232) \"Some\" \"None\" 232) 232) 232)) 229) (set (attr (data) \"underlyingBalance\" 235) (add (params 217) (getLocal \"tokensToDeposit\" 235) 235) 235) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 204) \"Some\" \"None\" 238) 238) (set (operations 249) (cons (transfer (record 239 (from_ (getLocal \"depositor\" 240)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 242))) (literal (mutez 0) 249) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 244) \"Some\" \"None\" 244) 249) (operations 249) 249) 249) (set (operations 261) (cons (transfer (record 252 (address (getLocal \"depositor\" 253)) (value (getLocal \"newTokens\" 254))) (literal (mutez 0) 261) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 256) \"Some\" \"None\" 256) 261) (operations 261) 261) 261) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 264) 264) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"None\" (unit) -1) 265) (set (attr (data) \"savedState_depositor\" 204) (variant \"None\" (unit) -1) 266))) (getAdministrator True ((bind \"__s57\" ((set_type (first (params 108) 727) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 727) (contract \"address\") 727) (set (operations 727) (cons (transfer (getLocal \"__s57\" 727) (literal (mutez 0) 727) (second (params 108) 727) 108) (operations 727) 727) 727))) (getAllowance True ((bind \"__s58\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 727) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 727) \"spender\" 69) 69) 69))) (set_type (second (params 68) 727) (contract \"nat\") 727) (set (operations 727) (cons (transfer (getLocal \"__s58\" 727) (literal (mutez 0) 727) (second (params 68) 727) 68) (operations 727) 727) 727))) (getBalance True ((bind \"__s59\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 727) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 727) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 727) 65) \"balance\" 65) 65))) (set_type (second (params 60) 727) (contract \"nat\") 727) (set (operations 727) (cons (transfer (getLocal \"__s59\" 727) (literal (mutez 0) 727) (second (params 60) 727) 60) (operations 727) 727) 727))) (getTotalSupply True ((bind \"__s60\" ((set_type (first (params 72) 727) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 727) (contract \"nat\") 727) (set (operations 727) (cons (transfer (getLocal \"__s60\" 727) (literal (mutez 0) 727) (second (params 72) 727) 72) (operations 727) 727) 727))) (liquidate True ((set_type (params 170) \"address\" 171) (set (operations 179) (cons (transfer (params 170) (literal (mutez 0) 179) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 176) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179) (set (operations 187) (cons (transfer (unit) (literal (mutez 0) 187) (openVariant (contract \"liquidate\" \"unit\" (params 170) 182) \"Some\" \"None\" 182) 187) (operations 187) 187) 187))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 270) \"nat\" 271) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 274) 274) (literal (string \"bad state\") 274) 274) (set (attr (data) \"state\" 199) (literal (intOrNat 2) 277) 277) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"Some\" (params 270) 278) 278) (set (attr (data) \"savedState_redeemer\" 279) (variant \"Some\" (sender) 279) 279) (set (operations 288) (cons (transfer (tuple 288 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 282)) (literal (mutez 0) 288) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 283) \"Some\" \"None\" 283) 288) (operations 288) 288) 288))) (redeem_callback True ((set_type (params 292) \"nat\" 293) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 296) (literal (string \"bad sender\") 296) 296) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 2) 299) 299) (literal (string \"bad state\") 299) 299) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 278) \"Some\" \"None\" 302) 302) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 303) (literal (intOrNat 1000000000000000000) 303) 303) (attr (data) \"totalSupply\" 96) 303) 303) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 304) (params 292) 304) (literal (intOrNat 1000000000000000000) 304) 304) 304) (set (attr (data) \"underlyingBalance\" 235) (openVariant (isNat (sub (params 292) (getLocal \"tokensToReceive\" 307) 307) 307) \"Some\" \"None\" 307) 307) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 279) \"Some\" \"None\" 310) 310) (set (operations 320) (cons (transfer (record 311 (address (getLocal \"redeemer\" 312)) (value (getLocal \"tokensToRedeem\" 313))) (literal (mutez 0) 320) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 315) \"Some\" \"None\" 315) 320) (operations 320) 320) 320) (set (operations 333) (cons (transfer (record 323 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 325)) (value (getLocal \"tokensToReceive\" 326))) (literal (mutez 0) 333) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 328) \"Some\" \"None\" 328) 333) (operations 333) 333) 333) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 336) 336) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"None\" (unit) -1) 337) (set (attr (data) \"savedState_redeemer\" 279) (variant \"None\" (unit) -1) 338))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 346) \"unit\" 347) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 350) 350) (literal (string \"bad state\") 350) 350) (set (attr (data) \"state\" 199) (literal (intOrNat 1) 353) 353) (set (operations 362) (cons (transfer (tuple 362 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 356)) (literal (mutez 0) 362) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 357) \"Some\" \"None\" 357) 362) (operations 362) 362) 362))) (updateBalance_callback True ((set_type (params 366) \"nat\" 367) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 370) (literal (string \"bad sender\") 370) 370) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 1) 373) 373) (literal (string \"bad state\") 373) 373) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 376) 376) (set (attr (data) \"underlyingBalance\" 235) (params 366) 379))) (updateContractMetadata True ((set_type (params 419) (tuple \"string\" \"bytes\") 420) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 422) (literal (string \"not governor\") 422) 422) (set (getItem (attr (data) \"metadata\" 426) (first (params 419) 424) 426) (second (params 419) 425) 426))) (updateDexterAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"dexterAddress\" 153) (params 403) 407))) (updateGovernorAddress True ((set_type (params 387) \"address\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"governorAddress\" 422) (params 387) 391))) (updateOvenRegistryAddress True ((set_type (params 411) \"address\" 412) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 414) (literal (string \"not governor\") 414) 414) (set (attr (data) \"ovenRegistryAddress\" 176) (params 411) 415))) (updateRewardPercent True ((set_type (params 395) \"nat\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"rewardPercent\" 139) (params 395) 399))) (updateTokenMetadata True ((set_type (params 430) (tuple \"nat\" (map \"string\" \"bytes\")) 431) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 433) (literal (string \"not governor\") 433) 433) (set (getItem (attr (data) \"token_metadata\" 434) (literal (intOrNat 0) 434) 434) (params 430) 434))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 727, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 731 (address (literal (local-address (static_id 2 98)) 98)) (value (literal (nat 10000000000) 733)))", "line_no": 730, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 730)", "show": true, "valid": "(literal (bool True) 730)", "voting_powers": "(map 730 )", "export": true}, {"action": "newContract", "id": "(static_id 3 8)", "export": "(storage (record 8 (isLiquidated (literal (bool False) 8)))\nstorage_type (())\nmessages ((default True ((set_type (params 13) \"unit\" 14))) (liquidate True ((set_type (params 19) \"unit\" 20) (set (attr (data) \"isLiquidated\" 21) (literal (bool True) 21) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 741, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 2 98)", "dynamic": false, "message": "liquidate", "params": "(literal (local-address (static_id 3 8)) 8)", "line_no": 745, "title": "", "messageClass": "", "source": "none", "sender": "none", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 745)", "show": true, "valid": "(literal (bool False) 745)", "voting_powers": "(map 745 )", "export": true}], "decompile": false, "kind": "test"}, {"shortname": "liquidate_-_liqudates_oven", "longname": "liquidate - liqudates oven", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 134) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s61\" ((set_type (first (params 89) 757) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 757) (contract \"address\") 757) (set (operations 757) (cons (transfer (getLocal \"__s61\" 757) (literal (mutez 0) 757) (second (params 89) 757) 89) (operations 757) 757) 757))) (getAllowance True ((bind \"__s62\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 757) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 757) \"spender\" 46) 46) 46))) (set_type (second (params 45) 757) (contract \"nat\") 757) (set (operations 757) (cons (transfer (getLocal \"__s62\" 757) (literal (mutez 0) 757) (second (params 45) 757) 45) (operations 757) 757) 757))) (getBalance True ((bind \"__s63\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 757) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 757) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 757) 42) \"balance\" 42) 42))) (set_type (second (params 37) 757) (contract \"nat\") 757) (set (operations 757) (cons (transfer (getLocal \"__s63\" 757) (literal (mutez 0) 757) (second (params 37) 757) 37) (operations 757) 757) 757))) (getTotalSupply True ((bind \"__s64\" ((set_type (first (params 49) 757) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 757) (contract \"nat\") 757) (set (operations 757) (cons (transfer (getLocal \"__s64\" 757) (literal (mutez 0) 757) (second (params 49) 757) 49) (operations 757) 757) 757))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 757, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 9)", "export": "(storage (record 9 (isOvenValue (literal (bool True) 9)))\nstorage_type (())\nmessages ((default True ((set_type (params 14) \"unit\" 15))) (isOven True ((set_type (params 20) \"address\" 21) (verify (attr (data) \"isOvenValue\" 23) (literal (string \"NOT OVEN\") 23) 23))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 763, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 2 98)", "export": "(storage (record 98 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 102 ) (bigmap (unknown 135) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 102)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 89 ((literal (string \"\") 770) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 91)) ((literal (string \"data\") 770) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 88))) (bigmap \"string\" \"bytes\") 89)) (ovenRegistryAddress (literal (local-address (static_id 1 9)) 9)) (paused (literal (bool False) 98)) (rewardPercent (literal (nat 1) 54)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 98)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 78 ((literal (nat 0) 65) (tuple 770 (literal (nat 0) 65) (type_annotation (map 67 ((literal (string \"name\") 770) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 69)) ((literal (string \"decimals\") 770) (literal (bytes \"0x3138\") 70)) ((literal (string \"symbol\") 770) (literal (bytes \"0x6465787465724c6b555344\") 71)) ((literal (string \"icon\") 770) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 72))) (map \"string\" \"bytes\") 67)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 78)) (totalSupply (literal (intOrNat 0) 98)) (underlyingBalance (literal (nat 0) 119)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 135) \"unit\" 136) (set (operations 140) (cons (transfer (unit) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) (openVariant (contract \"\" \"unit\" (source) 140) \"Some\" \"None\" 140) 140) (operations 140) 140) 140) (set (operations 156) (cons (transfer (tuple 156 (to_address (self) \"None\") (tuple 156 (literal (intOrNat 1) 156) (add_seconds (now) (literal (int 3600) 148) 148))) (sub (balance) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) 143) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 153) 151) \"Some\" \"None\" 151) 156) (operations 156) 156) 156) (set (operations 166) (cons (transfer (unit) (literal (mutez 0) 166) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 161) \"Some\" \"None\" 161) 166) (operations 166) 166) 166))) (deposit True ((set_type (params 195) \"nat\" 196) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 199) 199) (literal (string \"bad state\") 199) 199) (set (attr (data) \"state\" 199) (literal (intOrNat 3) 202) 202) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"Some\" (params 195) 203) 203) (set (attr (data) \"savedState_depositor\" 204) (variant \"Some\" (sender) 204) 204) (set (operations 213) (cons (transfer (tuple 213 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 207)) (literal (mutez 0) 213) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 208) \"Some\" \"None\" 208) 213) (operations 213) 213) 213))) (deposit_callback True ((set_type (params 217) \"nat\" 218) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 221) (literal (string \"bad sender\") 221) 221) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 3) 224) 224) (literal (string \"bad state\") 224) 224) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 203) \"Some\" \"None\" 227) 227) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 228) (literal (intOrNat 1000000000000000000) 228) 228) 228) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 229) 229) ((defineLocal \"newUnderlyingBalance\" (add (params 217) (getLocal \"tokensToDeposit\" 230) 230) 230) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 231) (literal (intOrNat 1000000000000000000) 231) 231) (getLocal \"newUnderlyingBalance\" 231) 231) 231) (set (getLocal \"newTokens\" 770) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 232) (attr (data) \"totalSupply\" 96) 232) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 232) (getLocal \"fractionOfPoolOwnership\" 232) 232) 232) \"Some\" \"None\" 232) 232) 232)) 229) (set (attr (data) \"underlyingBalance\" 235) (add (params 217) (getLocal \"tokensToDeposit\" 235) 235) 235) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 204) \"Some\" \"None\" 238) 238) (set (operations 249) (cons (transfer (record 239 (from_ (getLocal \"depositor\" 240)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 242))) (literal (mutez 0) 249) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 244) \"Some\" \"None\" 244) 249) (operations 249) 249) 249) (set (operations 261) (cons (transfer (record 252 (address (getLocal \"depositor\" 253)) (value (getLocal \"newTokens\" 254))) (literal (mutez 0) 261) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 256) \"Some\" \"None\" 256) 261) (operations 261) 261) 261) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 264) 264) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"None\" (unit) -1) 265) (set (attr (data) \"savedState_depositor\" 204) (variant \"None\" (unit) -1) 266))) (getAdministrator True ((bind \"__s65\" ((set_type (first (params 108) 770) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 770) (contract \"address\") 770) (set (operations 770) (cons (transfer (getLocal \"__s65\" 770) (literal (mutez 0) 770) (second (params 108) 770) 108) (operations 770) 770) 770))) (getAllowance True ((bind \"__s66\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 770) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 770) \"spender\" 69) 69) 69))) (set_type (second (params 68) 770) (contract \"nat\") 770) (set (operations 770) (cons (transfer (getLocal \"__s66\" 770) (literal (mutez 0) 770) (second (params 68) 770) 68) (operations 770) 770) 770))) (getBalance True ((bind \"__s67\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 770) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 770) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 770) 65) \"balance\" 65) 65))) (set_type (second (params 60) 770) (contract \"nat\") 770) (set (operations 770) (cons (transfer (getLocal \"__s67\" 770) (literal (mutez 0) 770) (second (params 60) 770) 60) (operations 770) 770) 770))) (getTotalSupply True ((bind \"__s68\" ((set_type (first (params 72) 770) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 770) (contract \"nat\") 770) (set (operations 770) (cons (transfer (getLocal \"__s68\" 770) (literal (mutez 0) 770) (second (params 72) 770) 72) (operations 770) 770) 770))) (liquidate True ((set_type (params 170) \"address\" 171) (set (operations 179) (cons (transfer (params 170) (literal (mutez 0) 179) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 176) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179) (set (operations 187) (cons (transfer (unit) (literal (mutez 0) 187) (openVariant (contract \"liquidate\" \"unit\" (params 170) 182) \"Some\" \"None\" 182) 187) (operations 187) 187) 187))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 270) \"nat\" 271) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 274) 274) (literal (string \"bad state\") 274) 274) (set (attr (data) \"state\" 199) (literal (intOrNat 2) 277) 277) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"Some\" (params 270) 278) 278) (set (attr (data) \"savedState_redeemer\" 279) (variant \"Some\" (sender) 279) 279) (set (operations 288) (cons (transfer (tuple 288 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 282)) (literal (mutez 0) 288) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 283) \"Some\" \"None\" 283) 288) (operations 288) 288) 288))) (redeem_callback True ((set_type (params 292) \"nat\" 293) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 296) (literal (string \"bad sender\") 296) 296) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 2) 299) 299) (literal (string \"bad state\") 299) 299) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 278) \"Some\" \"None\" 302) 302) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 303) (literal (intOrNat 1000000000000000000) 303) 303) (attr (data) \"totalSupply\" 96) 303) 303) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 304) (params 292) 304) (literal (intOrNat 1000000000000000000) 304) 304) 304) (set (attr (data) \"underlyingBalance\" 235) (openVariant (isNat (sub (params 292) (getLocal \"tokensToReceive\" 307) 307) 307) \"Some\" \"None\" 307) 307) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 279) \"Some\" \"None\" 310) 310) (set (operations 320) (cons (transfer (record 311 (address (getLocal \"redeemer\" 312)) (value (getLocal \"tokensToRedeem\" 313))) (literal (mutez 0) 320) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 315) \"Some\" \"None\" 315) 320) (operations 320) 320) 320) (set (operations 333) (cons (transfer (record 323 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 325)) (value (getLocal \"tokensToReceive\" 326))) (literal (mutez 0) 333) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 328) \"Some\" \"None\" 328) 333) (operations 333) 333) 333) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 336) 336) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"None\" (unit) -1) 337) (set (attr (data) \"savedState_redeemer\" 279) (variant \"None\" (unit) -1) 338))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 346) \"unit\" 347) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 350) 350) (literal (string \"bad state\") 350) 350) (set (attr (data) \"state\" 199) (literal (intOrNat 1) 353) 353) (set (operations 362) (cons (transfer (tuple 362 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 356)) (literal (mutez 0) 362) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 357) \"Some\" \"None\" 357) 362) (operations 362) 362) 362))) (updateBalance_callback True ((set_type (params 366) \"nat\" 367) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 370) (literal (string \"bad sender\") 370) 370) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 1) 373) 373) (literal (string \"bad state\") 373) 373) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 376) 376) (set (attr (data) \"underlyingBalance\" 235) (params 366) 379))) (updateContractMetadata True ((set_type (params 419) (tuple \"string\" \"bytes\") 420) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 422) (literal (string \"not governor\") 422) 422) (set (getItem (attr (data) \"metadata\" 426) (first (params 419) 424) 426) (second (params 419) 425) 426))) (updateDexterAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"dexterAddress\" 153) (params 403) 407))) (updateGovernorAddress True ((set_type (params 387) \"address\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"governorAddress\" 422) (params 387) 391))) (updateOvenRegistryAddress True ((set_type (params 411) \"address\" 412) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 414) (literal (string \"not governor\") 414) 414) (set (attr (data) \"ovenRegistryAddress\" 176) (params 411) 415))) (updateRewardPercent True ((set_type (params 395) \"nat\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"rewardPercent\" 139) (params 395) 399))) (updateTokenMetadata True ((set_type (params 430) (tuple \"nat\" (map \"string\" \"bytes\")) 431) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 433) (literal (string \"not governor\") 433) 433) (set (getItem (attr (data) \"token_metadata\" 434) (literal (intOrNat 0) 434) 434) (params 430) 434))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 770, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 774 (address (literal (local-address (static_id 2 98)) 98)) (value (literal (nat 10000000000) 776)))", "line_no": 773, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 773)", "show": true, "valid": "(literal (bool True) 773)", "voting_powers": "(map 773 )", "export": true}, {"action": "newContract", "id": "(static_id 3 8)", "export": "(storage (record 8 (isLiquidated (literal (bool False) 8)))\nstorage_type (())\nmessages ((default True ((set_type (params 13) \"unit\" 14))) (liquidate True ((set_type (params 19) \"unit\" 20) (set (attr (data) \"isLiquidated\" 21) (literal (bool True) 21) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 784, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 2 98)", "dynamic": false, "message": "liquidate", "params": "(literal (local-address (static_id 3 8)) 8)", "line_no": 787, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 787)", "show": true, "valid": "(literal (bool True) 787)", "voting_powers": "(map 787 )", "export": true}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 3 8) 784) \"isLiquidated\" 791) (literal (bool True) 791) 791)", "line_no": 791}], "decompile": false, "kind": "test"}, {"shortname": "updateBalance_-_updates_balance", "longname": "updateBalance - updates balance", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 145) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s69\" ((set_type (first (params 89) 805) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 805) (contract \"address\") 805) (set (operations 805) (cons (transfer (getLocal \"__s69\" 805) (literal (mutez 0) 805) (second (params 89) 805) 89) (operations 805) 805) 805))) (getAllowance True ((bind \"__s70\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 805) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 805) \"spender\" 46) 46) 46))) (set_type (second (params 45) 805) (contract \"nat\") 805) (set (operations 805) (cons (transfer (getLocal \"__s70\" 805) (literal (mutez 0) 805) (second (params 45) 805) 45) (operations 805) 805) 805))) (getBalance True ((bind \"__s71\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 805) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 805) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 805) 42) \"balance\" 42) 42))) (set_type (second (params 37) 805) (contract \"nat\") 805) (set (operations 805) (cons (transfer (getLocal \"__s71\" 805) (literal (mutez 0) 805) (second (params 37) 805) 37) (operations 805) 805) 805))) (getTotalSupply True ((bind \"__s72\" ((set_type (first (params 49) 805) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 805) (contract \"nat\") 805) (set (operations 805) (cons (transfer (getLocal \"__s72\" 805) (literal (mutez 0) 805) (second (params 49) 805) 49) (operations 805) 805) 805))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 805, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 98)", "export": "(storage (record 98 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 102 ) (bigmap (unknown 146) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 102)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 89 ((literal (string \"\") 811) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 91)) ((literal (string \"data\") 811) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 88))) (bigmap \"string\" \"bytes\") 89)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 98)) (rewardPercent (literal (nat 1) 54)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 98)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 78 ((literal (nat 0) 65) (tuple 811 (literal (nat 0) 65) (type_annotation (map 67 ((literal (string \"name\") 811) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 69)) ((literal (string \"decimals\") 811) (literal (bytes \"0x3138\") 70)) ((literal (string \"symbol\") 811) (literal (bytes \"0x6465787465724c6b555344\") 71)) ((literal (string \"icon\") 811) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 72))) (map \"string\" \"bytes\") 67)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 78)) (totalSupply (literal (intOrNat 0) 98)) (underlyingBalance (literal (nat 0) 119)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 135) \"unit\" 136) (set (operations 140) (cons (transfer (unit) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) (openVariant (contract \"\" \"unit\" (source) 140) \"Some\" \"None\" 140) 140) (operations 140) 140) 140) (set (operations 156) (cons (transfer (tuple 156 (to_address (self) \"None\") (tuple 156 (literal (intOrNat 1) 156) (add_seconds (now) (literal (int 3600) 148) 148))) (sub (balance) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) 143) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 153) 151) \"Some\" \"None\" 151) 156) (operations 156) 156) 156) (set (operations 166) (cons (transfer (unit) (literal (mutez 0) 166) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 161) \"Some\" \"None\" 161) 166) (operations 166) 166) 166))) (deposit True ((set_type (params 195) \"nat\" 196) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 199) 199) (literal (string \"bad state\") 199) 199) (set (attr (data) \"state\" 199) (literal (intOrNat 3) 202) 202) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"Some\" (params 195) 203) 203) (set (attr (data) \"savedState_depositor\" 204) (variant \"Some\" (sender) 204) 204) (set (operations 213) (cons (transfer (tuple 213 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 207)) (literal (mutez 0) 213) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 208) \"Some\" \"None\" 208) 213) (operations 213) 213) 213))) (deposit_callback True ((set_type (params 217) \"nat\" 218) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 221) (literal (string \"bad sender\") 221) 221) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 3) 224) 224) (literal (string \"bad state\") 224) 224) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 203) \"Some\" \"None\" 227) 227) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 228) (literal (intOrNat 1000000000000000000) 228) 228) 228) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 229) 229) ((defineLocal \"newUnderlyingBalance\" (add (params 217) (getLocal \"tokensToDeposit\" 230) 230) 230) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 231) (literal (intOrNat 1000000000000000000) 231) 231) (getLocal \"newUnderlyingBalance\" 231) 231) 231) (set (getLocal \"newTokens\" 811) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 232) (attr (data) \"totalSupply\" 96) 232) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 232) (getLocal \"fractionOfPoolOwnership\" 232) 232) 232) \"Some\" \"None\" 232) 232) 232)) 229) (set (attr (data) \"underlyingBalance\" 235) (add (params 217) (getLocal \"tokensToDeposit\" 235) 235) 235) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 204) \"Some\" \"None\" 238) 238) (set (operations 249) (cons (transfer (record 239 (from_ (getLocal \"depositor\" 240)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 242))) (literal (mutez 0) 249) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 244) \"Some\" \"None\" 244) 249) (operations 249) 249) 249) (set (operations 261) (cons (transfer (record 252 (address (getLocal \"depositor\" 253)) (value (getLocal \"newTokens\" 254))) (literal (mutez 0) 261) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 256) \"Some\" \"None\" 256) 261) (operations 261) 261) 261) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 264) 264) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"None\" (unit) -1) 265) (set (attr (data) \"savedState_depositor\" 204) (variant \"None\" (unit) -1) 266))) (getAdministrator True ((bind \"__s73\" ((set_type (first (params 108) 811) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 811) (contract \"address\") 811) (set (operations 811) (cons (transfer (getLocal \"__s73\" 811) (literal (mutez 0) 811) (second (params 108) 811) 108) (operations 811) 811) 811))) (getAllowance True ((bind \"__s74\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 811) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 811) \"spender\" 69) 69) 69))) (set_type (second (params 68) 811) (contract \"nat\") 811) (set (operations 811) (cons (transfer (getLocal \"__s74\" 811) (literal (mutez 0) 811) (second (params 68) 811) 68) (operations 811) 811) 811))) (getBalance True ((bind \"__s75\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 811) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 811) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 811) 65) \"balance\" 65) 65))) (set_type (second (params 60) 811) (contract \"nat\") 811) (set (operations 811) (cons (transfer (getLocal \"__s75\" 811) (literal (mutez 0) 811) (second (params 60) 811) 60) (operations 811) 811) 811))) (getTotalSupply True ((bind \"__s76\" ((set_type (first (params 72) 811) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 811) (contract \"nat\") 811) (set (operations 811) (cons (transfer (getLocal \"__s76\" 811) (literal (mutez 0) 811) (second (params 72) 811) 72) (operations 811) 811) 811))) (liquidate True ((set_type (params 170) \"address\" 171) (set (operations 179) (cons (transfer (params 170) (literal (mutez 0) 179) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 176) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179) (set (operations 187) (cons (transfer (unit) (literal (mutez 0) 187) (openVariant (contract \"liquidate\" \"unit\" (params 170) 182) \"Some\" \"None\" 182) 187) (operations 187) 187) 187))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 270) \"nat\" 271) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 274) 274) (literal (string \"bad state\") 274) 274) (set (attr (data) \"state\" 199) (literal (intOrNat 2) 277) 277) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"Some\" (params 270) 278) 278) (set (attr (data) \"savedState_redeemer\" 279) (variant \"Some\" (sender) 279) 279) (set (operations 288) (cons (transfer (tuple 288 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 282)) (literal (mutez 0) 288) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 283) \"Some\" \"None\" 283) 288) (operations 288) 288) 288))) (redeem_callback True ((set_type (params 292) \"nat\" 293) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 296) (literal (string \"bad sender\") 296) 296) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 2) 299) 299) (literal (string \"bad state\") 299) 299) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 278) \"Some\" \"None\" 302) 302) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 303) (literal (intOrNat 1000000000000000000) 303) 303) (attr (data) \"totalSupply\" 96) 303) 303) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 304) (params 292) 304) (literal (intOrNat 1000000000000000000) 304) 304) 304) (set (attr (data) \"underlyingBalance\" 235) (openVariant (isNat (sub (params 292) (getLocal \"tokensToReceive\" 307) 307) 307) \"Some\" \"None\" 307) 307) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 279) \"Some\" \"None\" 310) 310) (set (operations 320) (cons (transfer (record 311 (address (getLocal \"redeemer\" 312)) (value (getLocal \"tokensToRedeem\" 313))) (literal (mutez 0) 320) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 315) \"Some\" \"None\" 315) 320) (operations 320) 320) 320) (set (operations 333) (cons (transfer (record 323 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 325)) (value (getLocal \"tokensToReceive\" 326))) (literal (mutez 0) 333) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 328) \"Some\" \"None\" 328) 333) (operations 333) 333) 333) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 336) 336) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"None\" (unit) -1) 337) (set (attr (data) \"savedState_redeemer\" 279) (variant \"None\" (unit) -1) 338))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 346) \"unit\" 347) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 350) 350) (literal (string \"bad state\") 350) 350) (set (attr (data) \"state\" 199) (literal (intOrNat 1) 353) 353) (set (operations 362) (cons (transfer (tuple 362 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 356)) (literal (mutez 0) 362) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 357) \"Some\" \"None\" 357) 362) (operations 362) 362) 362))) (updateBalance_callback True ((set_type (params 366) \"nat\" 367) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 370) (literal (string \"bad sender\") 370) 370) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 1) 373) 373) (literal (string \"bad state\") 373) 373) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 376) 376) (set (attr (data) \"underlyingBalance\" 235) (params 366) 379))) (updateContractMetadata True ((set_type (params 419) (tuple \"string\" \"bytes\") 420) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 422) (literal (string \"not governor\") 422) 422) (set (getItem (attr (data) \"metadata\" 426) (first (params 419) 424) 426) (second (params 419) 425) 426))) (updateDexterAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"dexterAddress\" 153) (params 403) 407))) (updateGovernorAddress True ((set_type (params 387) \"address\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"governorAddress\" 422) (params 387) 391))) (updateOvenRegistryAddress True ((set_type (params 411) \"address\" 412) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 414) (literal (string \"not governor\") 414) 414) (set (attr (data) \"ovenRegistryAddress\" 176) (params 411) 415))) (updateRewardPercent True ((set_type (params 395) \"nat\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"rewardPercent\" 139) (params 395) 399))) (updateTokenMetadata True ((set_type (params 430) (tuple \"nat\" (map \"string\" \"bytes\")) 431) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 433) (literal (string \"not governor\") 433) 433) (set (getItem (attr (data) \"token_metadata\" 434) (literal (intOrNat 0) 434) 434) (params 430) 434))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 811, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 816 (address (literal (local-address (static_id 1 98)) 98)) (value (literal (intOrNat 10) 816)))", "line_no": 815, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 815)", "show": true, "valid": "(literal (bool True) 815)", "voting_powers": "(map 815 )", "export": true}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "updateBalance", "params": "(unit)", "line_no": 825, "title": "", "messageClass": "", "source": "none", "sender": "none", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 825)", "show": true, "valid": "(literal (bool True) 825)", "voting_powers": "(map 825 )", "export": true}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 98) 825) \"underlyingBalance\" 828) (literal (intOrNat 10) 828) 828)", "line_no": 828}], "decompile": false, "kind": "test"}, {"shortname": "updateBalance_-_fails_if_not_in_idle_state", "longname": "updateBalance - fails if not in idle state", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 156) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s77\" ((set_type (first (params 89) 838) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 838) (contract \"address\") 838) (set (operations 838) (cons (transfer (getLocal \"__s77\" 838) (literal (mutez 0) 838) (second (params 89) 838) 89) (operations 838) 838) 838))) (getAllowance True ((bind \"__s78\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 838) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 838) \"spender\" 46) 46) 46))) (set_type (second (params 45) 838) (contract \"nat\") 838) (set (operations 838) (cons (transfer (getLocal \"__s78\" 838) (literal (mutez 0) 838) (second (params 45) 838) 45) (operations 838) 838) 838))) (getBalance True ((bind \"__s79\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 838) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 838) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 838) 42) \"balance\" 42) 42))) (set_type (second (params 37) 838) (contract \"nat\") 838) (set (operations 838) (cons (transfer (getLocal \"__s79\" 838) (literal (mutez 0) 838) (second (params 37) 838) 37) (operations 838) 838) 838))) (getTotalSupply True ((bind \"__s80\" ((set_type (first (params 49) 838) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 838) (contract \"nat\") 838) (set (operations 838) (cons (transfer (getLocal \"__s80\" 838) (literal (mutez 0) 838) (second (params 49) 838) 49) (operations 838) 838) 838))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 838, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 98)", "export": "(storage (record 98 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 102 ) (bigmap (unknown 157) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 102)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 89 ((literal (string \"\") 845) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 91)) ((literal (string \"data\") 845) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 88))) (bigmap \"string\" \"bytes\") 89)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 98)) (rewardPercent (literal (nat 1) 54)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 1) 98)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 78 ((literal (nat 0) 65) (tuple 845 (literal (nat 0) 65) (type_annotation (map 67 ((literal (string \"name\") 845) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 69)) ((literal (string \"decimals\") 845) (literal (bytes \"0x3138\") 70)) ((literal (string \"symbol\") 845) (literal (bytes \"0x6465787465724c6b555344\") 71)) ((literal (string \"icon\") 845) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 72))) (map \"string\" \"bytes\") 67)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 78)) (totalSupply (literal (intOrNat 0) 98)) (underlyingBalance (literal (nat 0) 119)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 135) \"unit\" 136) (set (operations 140) (cons (transfer (unit) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) (openVariant (contract \"\" \"unit\" (source) 140) \"Some\" \"None\" 140) 140) (operations 140) 140) 140) (set (operations 156) (cons (transfer (tuple 156 (to_address (self) \"None\") (tuple 156 (literal (intOrNat 1) 156) (add_seconds (now) (literal (int 3600) 148) 148))) (sub (balance) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) 143) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 153) 151) \"Some\" \"None\" 151) 156) (operations 156) 156) 156) (set (operations 166) (cons (transfer (unit) (literal (mutez 0) 166) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 161) \"Some\" \"None\" 161) 166) (operations 166) 166) 166))) (deposit True ((set_type (params 195) \"nat\" 196) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 199) 199) (literal (string \"bad state\") 199) 199) (set (attr (data) \"state\" 199) (literal (intOrNat 3) 202) 202) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"Some\" (params 195) 203) 203) (set (attr (data) \"savedState_depositor\" 204) (variant \"Some\" (sender) 204) 204) (set (operations 213) (cons (transfer (tuple 213 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 207)) (literal (mutez 0) 213) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 208) \"Some\" \"None\" 208) 213) (operations 213) 213) 213))) (deposit_callback True ((set_type (params 217) \"nat\" 218) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 221) (literal (string \"bad sender\") 221) 221) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 3) 224) 224) (literal (string \"bad state\") 224) 224) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 203) \"Some\" \"None\" 227) 227) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 228) (literal (intOrNat 1000000000000000000) 228) 228) 228) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 229) 229) ((defineLocal \"newUnderlyingBalance\" (add (params 217) (getLocal \"tokensToDeposit\" 230) 230) 230) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 231) (literal (intOrNat 1000000000000000000) 231) 231) (getLocal \"newUnderlyingBalance\" 231) 231) 231) (set (getLocal \"newTokens\" 845) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 232) (attr (data) \"totalSupply\" 96) 232) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 232) (getLocal \"fractionOfPoolOwnership\" 232) 232) 232) \"Some\" \"None\" 232) 232) 232)) 229) (set (attr (data) \"underlyingBalance\" 235) (add (params 217) (getLocal \"tokensToDeposit\" 235) 235) 235) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 204) \"Some\" \"None\" 238) 238) (set (operations 249) (cons (transfer (record 239 (from_ (getLocal \"depositor\" 240)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 242))) (literal (mutez 0) 249) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 244) \"Some\" \"None\" 244) 249) (operations 249) 249) 249) (set (operations 261) (cons (transfer (record 252 (address (getLocal \"depositor\" 253)) (value (getLocal \"newTokens\" 254))) (literal (mutez 0) 261) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 256) \"Some\" \"None\" 256) 261) (operations 261) 261) 261) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 264) 264) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"None\" (unit) -1) 265) (set (attr (data) \"savedState_depositor\" 204) (variant \"None\" (unit) -1) 266))) (getAdministrator True ((bind \"__s81\" ((set_type (first (params 108) 845) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 845) (contract \"address\") 845) (set (operations 845) (cons (transfer (getLocal \"__s81\" 845) (literal (mutez 0) 845) (second (params 108) 845) 108) (operations 845) 845) 845))) (getAllowance True ((bind \"__s82\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 845) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 845) \"spender\" 69) 69) 69))) (set_type (second (params 68) 845) (contract \"nat\") 845) (set (operations 845) (cons (transfer (getLocal \"__s82\" 845) (literal (mutez 0) 845) (second (params 68) 845) 68) (operations 845) 845) 845))) (getBalance True ((bind \"__s83\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 845) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 845) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 845) 65) \"balance\" 65) 65))) (set_type (second (params 60) 845) (contract \"nat\") 845) (set (operations 845) (cons (transfer (getLocal \"__s83\" 845) (literal (mutez 0) 845) (second (params 60) 845) 60) (operations 845) 845) 845))) (getTotalSupply True ((bind \"__s84\" ((set_type (first (params 72) 845) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 845) (contract \"nat\") 845) (set (operations 845) (cons (transfer (getLocal \"__s84\" 845) (literal (mutez 0) 845) (second (params 72) 845) 72) (operations 845) 845) 845))) (liquidate True ((set_type (params 170) \"address\" 171) (set (operations 179) (cons (transfer (params 170) (literal (mutez 0) 179) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 176) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179) (set (operations 187) (cons (transfer (unit) (literal (mutez 0) 187) (openVariant (contract \"liquidate\" \"unit\" (params 170) 182) \"Some\" \"None\" 182) 187) (operations 187) 187) 187))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 270) \"nat\" 271) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 274) 274) (literal (string \"bad state\") 274) 274) (set (attr (data) \"state\" 199) (literal (intOrNat 2) 277) 277) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"Some\" (params 270) 278) 278) (set (attr (data) \"savedState_redeemer\" 279) (variant \"Some\" (sender) 279) 279) (set (operations 288) (cons (transfer (tuple 288 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 282)) (literal (mutez 0) 288) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 283) \"Some\" \"None\" 283) 288) (operations 288) 288) 288))) (redeem_callback True ((set_type (params 292) \"nat\" 293) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 296) (literal (string \"bad sender\") 296) 296) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 2) 299) 299) (literal (string \"bad state\") 299) 299) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 278) \"Some\" \"None\" 302) 302) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 303) (literal (intOrNat 1000000000000000000) 303) 303) (attr (data) \"totalSupply\" 96) 303) 303) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 304) (params 292) 304) (literal (intOrNat 1000000000000000000) 304) 304) 304) (set (attr (data) \"underlyingBalance\" 235) (openVariant (isNat (sub (params 292) (getLocal \"tokensToReceive\" 307) 307) 307) \"Some\" \"None\" 307) 307) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 279) \"Some\" \"None\" 310) 310) (set (operations 320) (cons (transfer (record 311 (address (getLocal \"redeemer\" 312)) (value (getLocal \"tokensToRedeem\" 313))) (literal (mutez 0) 320) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 315) \"Some\" \"None\" 315) 320) (operations 320) 320) 320) (set (operations 333) (cons (transfer (record 323 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 325)) (value (getLocal \"tokensToReceive\" 326))) (literal (mutez 0) 333) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 328) \"Some\" \"None\" 328) 333) (operations 333) 333) 333) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 336) 336) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"None\" (unit) -1) 337) (set (attr (data) \"savedState_redeemer\" 279) (variant \"None\" (unit) -1) 338))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 346) \"unit\" 347) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 350) 350) (literal (string \"bad state\") 350) 350) (set (attr (data) \"state\" 199) (literal (intOrNat 1) 353) 353) (set (operations 362) (cons (transfer (tuple 362 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 356)) (literal (mutez 0) 362) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 357) \"Some\" \"None\" 357) 362) (operations 362) 362) 362))) (updateBalance_callback True ((set_type (params 366) \"nat\" 367) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 370) (literal (string \"bad sender\") 370) 370) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 1) 373) 373) (literal (string \"bad state\") 373) 373) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 376) 376) (set (attr (data) \"underlyingBalance\" 235) (params 366) 379))) (updateContractMetadata True ((set_type (params 419) (tuple \"string\" \"bytes\") 420) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 422) (literal (string \"not governor\") 422) 422) (set (getItem (attr (data) \"metadata\" 426) (first (params 419) 424) 426) (second (params 419) 425) 426))) (updateDexterAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"dexterAddress\" 153) (params 403) 407))) (updateGovernorAddress True ((set_type (params 387) \"address\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"governorAddress\" 422) (params 387) 391))) (updateOvenRegistryAddress True ((set_type (params 411) \"address\" 412) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 414) (literal (string \"not governor\") 414) 414) (set (attr (data) \"ovenRegistryAddress\" 176) (params 411) 415))) (updateRewardPercent True ((set_type (params 395) \"nat\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"rewardPercent\" 139) (params 395) 399))) (updateTokenMetadata True ((set_type (params 430) (tuple \"nat\" (map \"string\" \"bytes\")) 431) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 433) (literal (string \"not governor\") 433) 433) (set (getItem (attr (data) \"token_metadata\" 434) (literal (intOrNat 0) 434) 434) (params 430) 434))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 845, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 850 (address (literal (local-address (static_id 1 98)) 98)) (value (literal (intOrNat 10) 850)))", "line_no": 849, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 849)", "show": true, "valid": "(literal (bool True) 849)", "voting_powers": "(map 849 )", "export": true}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "updateBalance", "params": "(unit)", "line_no": 860, "title": "", "messageClass": "", "source": "none", "sender": "none", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 860)", "show": true, "valid": "(literal (bool False) 860)", "voting_powers": "(map 860 )", "export": true}], "decompile": false, "kind": "test"}, {"shortname": "updateBalance_callback_-_updates_balance", "longname": "updateBalance_callback - updates balance", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 167) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s85\" ((set_type (first (params 89) 876) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 876) (contract \"address\") 876) (set (operations 876) (cons (transfer (getLocal \"__s85\" 876) (literal (mutez 0) 876) (second (params 89) 876) 89) (operations 876) 876) 876))) (getAllowance True ((bind \"__s86\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 876) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 876) \"spender\" 46) 46) 46))) (set_type (second (params 45) 876) (contract \"nat\") 876) (set (operations 876) (cons (transfer (getLocal \"__s86\" 876) (literal (mutez 0) 876) (second (params 45) 876) 45) (operations 876) 876) 876))) (getBalance True ((bind \"__s87\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 876) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 876) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 876) 42) \"balance\" 42) 42))) (set_type (second (params 37) 876) (contract \"nat\") 876) (set (operations 876) (cons (transfer (getLocal \"__s87\" 876) (literal (mutez 0) 876) (second (params 37) 876) 37) (operations 876) 876) 876))) (getTotalSupply True ((bind \"__s88\" ((set_type (first (params 49) 876) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 876) (contract \"nat\") 876) (set (operations 876) (cons (transfer (getLocal \"__s88\" 876) (literal (mutez 0) 876) (second (params 49) 876) 49) (operations 876) 876) 876))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 876, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 98)", "export": "(storage (record 98 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 102 ) (bigmap (unknown 168) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 102)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 89 ((literal (string \"\") 883) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 91)) ((literal (string \"data\") 883) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 88))) (bigmap \"string\" \"bytes\") 89)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 98)) (rewardPercent (literal (nat 1) 54)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 1) 98)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 78 ((literal (nat 0) 65) (tuple 883 (literal (nat 0) 65) (type_annotation (map 67 ((literal (string \"name\") 883) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 69)) ((literal (string \"decimals\") 883) (literal (bytes \"0x3138\") 70)) ((literal (string \"symbol\") 883) (literal (bytes \"0x6465787465724c6b555344\") 71)) ((literal (string \"icon\") 883) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 72))) (map \"string\" \"bytes\") 67)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 78)) (totalSupply (literal (intOrNat 0) 98)) (underlyingBalance (literal (nat 0) 119)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 135) \"unit\" 136) (set (operations 140) (cons (transfer (unit) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) (openVariant (contract \"\" \"unit\" (source) 140) \"Some\" \"None\" 140) 140) (operations 140) 140) 140) (set (operations 156) (cons (transfer (tuple 156 (to_address (self) \"None\") (tuple 156 (literal (intOrNat 1) 156) (add_seconds (now) (literal (int 3600) 148) 148))) (sub (balance) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) 143) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 153) 151) \"Some\" \"None\" 151) 156) (operations 156) 156) 156) (set (operations 166) (cons (transfer (unit) (literal (mutez 0) 166) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 161) \"Some\" \"None\" 161) 166) (operations 166) 166) 166))) (deposit True ((set_type (params 195) \"nat\" 196) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 199) 199) (literal (string \"bad state\") 199) 199) (set (attr (data) \"state\" 199) (literal (intOrNat 3) 202) 202) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"Some\" (params 195) 203) 203) (set (attr (data) \"savedState_depositor\" 204) (variant \"Some\" (sender) 204) 204) (set (operations 213) (cons (transfer (tuple 213 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 207)) (literal (mutez 0) 213) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 208) \"Some\" \"None\" 208) 213) (operations 213) 213) 213))) (deposit_callback True ((set_type (params 217) \"nat\" 218) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 221) (literal (string \"bad sender\") 221) 221) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 3) 224) 224) (literal (string \"bad state\") 224) 224) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 203) \"Some\" \"None\" 227) 227) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 228) (literal (intOrNat 1000000000000000000) 228) 228) 228) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 229) 229) ((defineLocal \"newUnderlyingBalance\" (add (params 217) (getLocal \"tokensToDeposit\" 230) 230) 230) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 231) (literal (intOrNat 1000000000000000000) 231) 231) (getLocal \"newUnderlyingBalance\" 231) 231) 231) (set (getLocal \"newTokens\" 883) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 232) (attr (data) \"totalSupply\" 96) 232) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 232) (getLocal \"fractionOfPoolOwnership\" 232) 232) 232) \"Some\" \"None\" 232) 232) 232)) 229) (set (attr (data) \"underlyingBalance\" 235) (add (params 217) (getLocal \"tokensToDeposit\" 235) 235) 235) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 204) \"Some\" \"None\" 238) 238) (set (operations 249) (cons (transfer (record 239 (from_ (getLocal \"depositor\" 240)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 242))) (literal (mutez 0) 249) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 244) \"Some\" \"None\" 244) 249) (operations 249) 249) 249) (set (operations 261) (cons (transfer (record 252 (address (getLocal \"depositor\" 253)) (value (getLocal \"newTokens\" 254))) (literal (mutez 0) 261) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 256) \"Some\" \"None\" 256) 261) (operations 261) 261) 261) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 264) 264) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"None\" (unit) -1) 265) (set (attr (data) \"savedState_depositor\" 204) (variant \"None\" (unit) -1) 266))) (getAdministrator True ((bind \"__s89\" ((set_type (first (params 108) 883) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 883) (contract \"address\") 883) (set (operations 883) (cons (transfer (getLocal \"__s89\" 883) (literal (mutez 0) 883) (second (params 108) 883) 108) (operations 883) 883) 883))) (getAllowance True ((bind \"__s90\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 883) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 883) \"spender\" 69) 69) 69))) (set_type (second (params 68) 883) (contract \"nat\") 883) (set (operations 883) (cons (transfer (getLocal \"__s90\" 883) (literal (mutez 0) 883) (second (params 68) 883) 68) (operations 883) 883) 883))) (getBalance True ((bind \"__s91\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 883) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 883) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 883) 65) \"balance\" 65) 65))) (set_type (second (params 60) 883) (contract \"nat\") 883) (set (operations 883) (cons (transfer (getLocal \"__s91\" 883) (literal (mutez 0) 883) (second (params 60) 883) 60) (operations 883) 883) 883))) (getTotalSupply True ((bind \"__s92\" ((set_type (first (params 72) 883) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 883) (contract \"nat\") 883) (set (operations 883) (cons (transfer (getLocal \"__s92\" 883) (literal (mutez 0) 883) (second (params 72) 883) 72) (operations 883) 883) 883))) (liquidate True ((set_type (params 170) \"address\" 171) (set (operations 179) (cons (transfer (params 170) (literal (mutez 0) 179) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 176) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179) (set (operations 187) (cons (transfer (unit) (literal (mutez 0) 187) (openVariant (contract \"liquidate\" \"unit\" (params 170) 182) \"Some\" \"None\" 182) 187) (operations 187) 187) 187))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 270) \"nat\" 271) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 274) 274) (literal (string \"bad state\") 274) 274) (set (attr (data) \"state\" 199) (literal (intOrNat 2) 277) 277) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"Some\" (params 270) 278) 278) (set (attr (data) \"savedState_redeemer\" 279) (variant \"Some\" (sender) 279) 279) (set (operations 288) (cons (transfer (tuple 288 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 282)) (literal (mutez 0) 288) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 283) \"Some\" \"None\" 283) 288) (operations 288) 288) 288))) (redeem_callback True ((set_type (params 292) \"nat\" 293) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 296) (literal (string \"bad sender\") 296) 296) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 2) 299) 299) (literal (string \"bad state\") 299) 299) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 278) \"Some\" \"None\" 302) 302) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 303) (literal (intOrNat 1000000000000000000) 303) 303) (attr (data) \"totalSupply\" 96) 303) 303) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 304) (params 292) 304) (literal (intOrNat 1000000000000000000) 304) 304) 304) (set (attr (data) \"underlyingBalance\" 235) (openVariant (isNat (sub (params 292) (getLocal \"tokensToReceive\" 307) 307) 307) \"Some\" \"None\" 307) 307) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 279) \"Some\" \"None\" 310) 310) (set (operations 320) (cons (transfer (record 311 (address (getLocal \"redeemer\" 312)) (value (getLocal \"tokensToRedeem\" 313))) (literal (mutez 0) 320) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 315) \"Some\" \"None\" 315) 320) (operations 320) 320) 320) (set (operations 333) (cons (transfer (record 323 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 325)) (value (getLocal \"tokensToReceive\" 326))) (literal (mutez 0) 333) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 328) \"Some\" \"None\" 328) 333) (operations 333) 333) 333) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 336) 336) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"None\" (unit) -1) 337) (set (attr (data) \"savedState_redeemer\" 279) (variant \"None\" (unit) -1) 338))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 346) \"unit\" 347) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 350) 350) (literal (string \"bad state\") 350) 350) (set (attr (data) \"state\" 199) (literal (intOrNat 1) 353) 353) (set (operations 362) (cons (transfer (tuple 362 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 356)) (literal (mutez 0) 362) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 357) \"Some\" \"None\" 357) 362) (operations 362) 362) 362))) (updateBalance_callback True ((set_type (params 366) \"nat\" 367) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 370) (literal (string \"bad sender\") 370) 370) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 1) 373) 373) (literal (string \"bad state\") 373) 373) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 376) 376) (set (attr (data) \"underlyingBalance\" 235) (params 366) 379))) (updateContractMetadata True ((set_type (params 419) (tuple \"string\" \"bytes\") 420) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 422) (literal (string \"not governor\") 422) 422) (set (getItem (attr (data) \"metadata\" 426) (first (params 419) 424) 426) (second (params 419) 425) 426))) (updateDexterAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"dexterAddress\" 153) (params 403) 407))) (updateGovernorAddress True ((set_type (params 387) \"address\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"governorAddress\" 422) (params 387) 391))) (updateOvenRegistryAddress True ((set_type (params 411) \"address\" 412) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 414) (literal (string \"not governor\") 414) 414) (set (attr (data) \"ovenRegistryAddress\" 176) (params 411) 415))) (updateRewardPercent True ((set_type (params 395) \"nat\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"rewardPercent\" 139) (params 395) 399))) (updateTokenMetadata True ((set_type (params 430) (tuple \"nat\" (map \"string\" \"bytes\")) 431) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 433) (literal (string \"not governor\") 433) 433) (set (getItem (attr (data) \"token_metadata\" 434) (literal (intOrNat 0) 434) 434) (params 430) 434))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 883, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "updateBalance_callback", "params": "(literal (nat 15) 886)", "line_no": 887, "title": "", "messageClass": "", "source": "none", "sender": "(literal (local-address (static_id 0 8)) 8)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 887)", "show": true, "valid": "(literal (bool True) 887)", "voting_powers": "(map 887 )", "export": true}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 98) 887) \"underlyingBalance\" 892) (literal (nat 15) 886) 892)", "line_no": 892}], "decompile": false, "kind": "test"}, {"shortname": "updateBalance_callback_-_fails_if_not_called_from_token_contract", "longname": "updateBalance_callback - fails if not called from token contract", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 178) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s93\" ((set_type (first (params 89) 902) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 902) (contract \"address\") 902) (set (operations 902) (cons (transfer (getLocal \"__s93\" 902) (literal (mutez 0) 902) (second (params 89) 902) 89) (operations 902) 902) 902))) (getAllowance True ((bind \"__s94\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 902) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 902) \"spender\" 46) 46) 46))) (set_type (second (params 45) 902) (contract \"nat\") 902) (set (operations 902) (cons (transfer (getLocal \"__s94\" 902) (literal (mutez 0) 902) (second (params 45) 902) 45) (operations 902) 902) 902))) (getBalance True ((bind \"__s95\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 902) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 902) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 902) 42) \"balance\" 42) 42))) (set_type (second (params 37) 902) (contract \"nat\") 902) (set (operations 902) (cons (transfer (getLocal \"__s95\" 902) (literal (mutez 0) 902) (second (params 37) 902) 37) (operations 902) 902) 902))) (getTotalSupply True ((bind \"__s96\" ((set_type (first (params 49) 902) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 902) (contract \"nat\") 902) (set (operations 902) (cons (transfer (getLocal \"__s96\" 902) (literal (mutez 0) 902) (second (params 49) 902) 49) (operations 902) 902) 902))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 902, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 98)", "export": "(storage (record 98 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 102 ) (bigmap (unknown 179) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 102)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 89 ((literal (string \"\") 909) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 91)) ((literal (string \"data\") 909) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 88))) (bigmap \"string\" \"bytes\") 89)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 98)) (rewardPercent (literal (nat 1) 54)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 1) 98)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 78 ((literal (nat 0) 65) (tuple 909 (literal (nat 0) 65) (type_annotation (map 67 ((literal (string \"name\") 909) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 69)) ((literal (string \"decimals\") 909) (literal (bytes \"0x3138\") 70)) ((literal (string \"symbol\") 909) (literal (bytes \"0x6465787465724c6b555344\") 71)) ((literal (string \"icon\") 909) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 72))) (map \"string\" \"bytes\") 67)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 78)) (totalSupply (literal (intOrNat 0) 98)) (underlyingBalance (literal (nat 0) 119)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 135) \"unit\" 136) (set (operations 140) (cons (transfer (unit) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) (openVariant (contract \"\" \"unit\" (source) 140) \"Some\" \"None\" 140) 140) (operations 140) 140) 140) (set (operations 156) (cons (transfer (tuple 156 (to_address (self) \"None\") (tuple 156 (literal (intOrNat 1) 156) (add_seconds (now) (literal (int 3600) 148) 148))) (sub (balance) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) 143) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 153) 151) \"Some\" \"None\" 151) 156) (operations 156) 156) 156) (set (operations 166) (cons (transfer (unit) (literal (mutez 0) 166) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 161) \"Some\" \"None\" 161) 166) (operations 166) 166) 166))) (deposit True ((set_type (params 195) \"nat\" 196) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 199) 199) (literal (string \"bad state\") 199) 199) (set (attr (data) \"state\" 199) (literal (intOrNat 3) 202) 202) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"Some\" (params 195) 203) 203) (set (attr (data) \"savedState_depositor\" 204) (variant \"Some\" (sender) 204) 204) (set (operations 213) (cons (transfer (tuple 213 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 207)) (literal (mutez 0) 213) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 208) \"Some\" \"None\" 208) 213) (operations 213) 213) 213))) (deposit_callback True ((set_type (params 217) \"nat\" 218) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 221) (literal (string \"bad sender\") 221) 221) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 3) 224) 224) (literal (string \"bad state\") 224) 224) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 203) \"Some\" \"None\" 227) 227) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 228) (literal (intOrNat 1000000000000000000) 228) 228) 228) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 229) 229) ((defineLocal \"newUnderlyingBalance\" (add (params 217) (getLocal \"tokensToDeposit\" 230) 230) 230) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 231) (literal (intOrNat 1000000000000000000) 231) 231) (getLocal \"newUnderlyingBalance\" 231) 231) 231) (set (getLocal \"newTokens\" 909) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 232) (attr (data) \"totalSupply\" 96) 232) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 232) (getLocal \"fractionOfPoolOwnership\" 232) 232) 232) \"Some\" \"None\" 232) 232) 232)) 229) (set (attr (data) \"underlyingBalance\" 235) (add (params 217) (getLocal \"tokensToDeposit\" 235) 235) 235) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 204) \"Some\" \"None\" 238) 238) (set (operations 249) (cons (transfer (record 239 (from_ (getLocal \"depositor\" 240)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 242))) (literal (mutez 0) 249) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 244) \"Some\" \"None\" 244) 249) (operations 249) 249) 249) (set (operations 261) (cons (transfer (record 252 (address (getLocal \"depositor\" 253)) (value (getLocal \"newTokens\" 254))) (literal (mutez 0) 261) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 256) \"Some\" \"None\" 256) 261) (operations 261) 261) 261) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 264) 264) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"None\" (unit) -1) 265) (set (attr (data) \"savedState_depositor\" 204) (variant \"None\" (unit) -1) 266))) (getAdministrator True ((bind \"__s97\" ((set_type (first (params 108) 909) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 909) (contract \"address\") 909) (set (operations 909) (cons (transfer (getLocal \"__s97\" 909) (literal (mutez 0) 909) (second (params 108) 909) 108) (operations 909) 909) 909))) (getAllowance True ((bind \"__s98\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 909) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 909) \"spender\" 69) 69) 69))) (set_type (second (params 68) 909) (contract \"nat\") 909) (set (operations 909) (cons (transfer (getLocal \"__s98\" 909) (literal (mutez 0) 909) (second (params 68) 909) 68) (operations 909) 909) 909))) (getBalance True ((bind \"__s99\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 909) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 909) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 909) 65) \"balance\" 65) 65))) (set_type (second (params 60) 909) (contract \"nat\") 909) (set (operations 909) (cons (transfer (getLocal \"__s99\" 909) (literal (mutez 0) 909) (second (params 60) 909) 60) (operations 909) 909) 909))) (getTotalSupply True ((bind \"__s100\" ((set_type (first (params 72) 909) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 909) (contract \"nat\") 909) (set (operations 909) (cons (transfer (getLocal \"__s100\" 909) (literal (mutez 0) 909) (second (params 72) 909) 72) (operations 909) 909) 909))) (liquidate True ((set_type (params 170) \"address\" 171) (set (operations 179) (cons (transfer (params 170) (literal (mutez 0) 179) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 176) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179) (set (operations 187) (cons (transfer (unit) (literal (mutez 0) 187) (openVariant (contract \"liquidate\" \"unit\" (params 170) 182) \"Some\" \"None\" 182) 187) (operations 187) 187) 187))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 270) \"nat\" 271) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 274) 274) (literal (string \"bad state\") 274) 274) (set (attr (data) \"state\" 199) (literal (intOrNat 2) 277) 277) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"Some\" (params 270) 278) 278) (set (attr (data) \"savedState_redeemer\" 279) (variant \"Some\" (sender) 279) 279) (set (operations 288) (cons (transfer (tuple 288 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 282)) (literal (mutez 0) 288) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 283) \"Some\" \"None\" 283) 288) (operations 288) 288) 288))) (redeem_callback True ((set_type (params 292) \"nat\" 293) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 296) (literal (string \"bad sender\") 296) 296) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 2) 299) 299) (literal (string \"bad state\") 299) 299) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 278) \"Some\" \"None\" 302) 302) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 303) (literal (intOrNat 1000000000000000000) 303) 303) (attr (data) \"totalSupply\" 96) 303) 303) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 304) (params 292) 304) (literal (intOrNat 1000000000000000000) 304) 304) 304) (set (attr (data) \"underlyingBalance\" 235) (openVariant (isNat (sub (params 292) (getLocal \"tokensToReceive\" 307) 307) 307) \"Some\" \"None\" 307) 307) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 279) \"Some\" \"None\" 310) 310) (set (operations 320) (cons (transfer (record 311 (address (getLocal \"redeemer\" 312)) (value (getLocal \"tokensToRedeem\" 313))) (literal (mutez 0) 320) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 315) \"Some\" \"None\" 315) 320) (operations 320) 320) 320) (set (operations 333) (cons (transfer (record 323 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 325)) (value (getLocal \"tokensToReceive\" 326))) (literal (mutez 0) 333) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 328) \"Some\" \"None\" 328) 333) (operations 333) 333) 333) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 336) 336) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"None\" (unit) -1) 337) (set (attr (data) \"savedState_redeemer\" 279) (variant \"None\" (unit) -1) 338))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 346) \"unit\" 347) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 350) 350) (literal (string \"bad state\") 350) 350) (set (attr (data) \"state\" 199) (literal (intOrNat 1) 353) 353) (set (operations 362) (cons (transfer (tuple 362 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 356)) (literal (mutez 0) 362) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 357) \"Some\" \"None\" 357) 362) (operations 362) 362) 362))) (updateBalance_callback True ((set_type (params 366) \"nat\" 367) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 370) (literal (string \"bad sender\") 370) 370) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 1) 373) 373) (literal (string \"bad state\") 373) 373) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 376) 376) (set (attr (data) \"underlyingBalance\" 235) (params 366) 379))) (updateContractMetadata True ((set_type (params 419) (tuple \"string\" \"bytes\") 420) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 422) (literal (string \"not governor\") 422) 422) (set (getItem (attr (data) \"metadata\" 426) (first (params 419) 424) 426) (second (params 419) 425) 426))) (updateDexterAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"dexterAddress\" 153) (params 403) 407))) (updateGovernorAddress True ((set_type (params 387) \"address\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"governorAddress\" 422) (params 387) 391))) (updateOvenRegistryAddress True ((set_type (params 411) \"address\" 412) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 414) (literal (string \"not governor\") 414) 414) (set (attr (data) \"ovenRegistryAddress\" 176) (params 411) 415))) (updateRewardPercent True ((set_type (params 395) \"nat\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"rewardPercent\" 139) (params 395) 399))) (updateTokenMetadata True ((set_type (params 430) (tuple \"nat\" (map \"string\" \"bytes\")) 431) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 433) (literal (string \"not governor\") 433) 433) (set (getItem (attr (data) \"token_metadata\" 434) (literal (intOrNat 0) 434) 434) (params 430) 434))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 909, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "updateBalance_callback", "params": "(literal (nat 15) 912)", "line_no": 913, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1bTpviNnyx2PXsNmGpCQTMQsGoYordkUoA\") 26)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 913)", "show": true, "valid": "(literal (bool False) 913)", "voting_powers": "(map 913 )", "export": true}], "decompile": false, "kind": "test"}, {"shortname": "updateBalance_callback_-_fails_if_not_called_from_IDLE_state", "longname": "updateBalance_callback - fails if not called from IDLE state", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 189) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s101\" ((set_type (first (params 89) 926) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 926) (contract \"address\") 926) (set (operations 926) (cons (transfer (getLocal \"__s101\" 926) (literal (mutez 0) 926) (second (params 89) 926) 89) (operations 926) 926) 926))) (getAllowance True ((bind \"__s102\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 926) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 926) \"spender\" 46) 46) 46))) (set_type (second (params 45) 926) (contract \"nat\") 926) (set (operations 926) (cons (transfer (getLocal \"__s102\" 926) (literal (mutez 0) 926) (second (params 45) 926) 45) (operations 926) 926) 926))) (getBalance True ((bind \"__s103\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 926) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 926) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 926) 42) \"balance\" 42) 42))) (set_type (second (params 37) 926) (contract \"nat\") 926) (set (operations 926) (cons (transfer (getLocal \"__s103\" 926) (literal (mutez 0) 926) (second (params 37) 926) 37) (operations 926) 926) 926))) (getTotalSupply True ((bind \"__s104\" ((set_type (first (params 49) 926) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 926) (contract \"nat\") 926) (set (operations 926) (cons (transfer (getLocal \"__s104\" 926) (literal (mutez 0) 926) (second (params 49) 926) 49) (operations 926) 926) 926))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 926, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 98)", "export": "(storage (record 98 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 102 ) (bigmap (unknown 190) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 102)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 89 ((literal (string \"\") 933) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 91)) ((literal (string \"data\") 933) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 88))) (bigmap \"string\" \"bytes\") 89)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 98)) (rewardPercent (literal (nat 1) 54)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 98)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 78 ((literal (nat 0) 65) (tuple 933 (literal (nat 0) 65) (type_annotation (map 67 ((literal (string \"name\") 933) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 69)) ((literal (string \"decimals\") 933) (literal (bytes \"0x3138\") 70)) ((literal (string \"symbol\") 933) (literal (bytes \"0x6465787465724c6b555344\") 71)) ((literal (string \"icon\") 933) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 72))) (map \"string\" \"bytes\") 67)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 78)) (totalSupply (literal (intOrNat 0) 98)) (underlyingBalance (literal (nat 0) 119)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 135) \"unit\" 136) (set (operations 140) (cons (transfer (unit) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) (openVariant (contract \"\" \"unit\" (source) 140) \"Some\" \"None\" 140) 140) (operations 140) 140) 140) (set (operations 156) (cons (transfer (tuple 156 (to_address (self) \"None\") (tuple 156 (literal (intOrNat 1) 156) (add_seconds (now) (literal (int 3600) 148) 148))) (sub (balance) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) 143) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 153) 151) \"Some\" \"None\" 151) 156) (operations 156) 156) 156) (set (operations 166) (cons (transfer (unit) (literal (mutez 0) 166) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 161) \"Some\" \"None\" 161) 166) (operations 166) 166) 166))) (deposit True ((set_type (params 195) \"nat\" 196) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 199) 199) (literal (string \"bad state\") 199) 199) (set (attr (data) \"state\" 199) (literal (intOrNat 3) 202) 202) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"Some\" (params 195) 203) 203) (set (attr (data) \"savedState_depositor\" 204) (variant \"Some\" (sender) 204) 204) (set (operations 213) (cons (transfer (tuple 213 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 207)) (literal (mutez 0) 213) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 208) \"Some\" \"None\" 208) 213) (operations 213) 213) 213))) (deposit_callback True ((set_type (params 217) \"nat\" 218) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 221) (literal (string \"bad sender\") 221) 221) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 3) 224) 224) (literal (string \"bad state\") 224) 224) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 203) \"Some\" \"None\" 227) 227) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 228) (literal (intOrNat 1000000000000000000) 228) 228) 228) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 229) 229) ((defineLocal \"newUnderlyingBalance\" (add (params 217) (getLocal \"tokensToDeposit\" 230) 230) 230) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 231) (literal (intOrNat 1000000000000000000) 231) 231) (getLocal \"newUnderlyingBalance\" 231) 231) 231) (set (getLocal \"newTokens\" 933) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 232) (attr (data) \"totalSupply\" 96) 232) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 232) (getLocal \"fractionOfPoolOwnership\" 232) 232) 232) \"Some\" \"None\" 232) 232) 232)) 229) (set (attr (data) \"underlyingBalance\" 235) (add (params 217) (getLocal \"tokensToDeposit\" 235) 235) 235) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 204) \"Some\" \"None\" 238) 238) (set (operations 249) (cons (transfer (record 239 (from_ (getLocal \"depositor\" 240)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 242))) (literal (mutez 0) 249) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 244) \"Some\" \"None\" 244) 249) (operations 249) 249) 249) (set (operations 261) (cons (transfer (record 252 (address (getLocal \"depositor\" 253)) (value (getLocal \"newTokens\" 254))) (literal (mutez 0) 261) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 256) \"Some\" \"None\" 256) 261) (operations 261) 261) 261) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 264) 264) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"None\" (unit) -1) 265) (set (attr (data) \"savedState_depositor\" 204) (variant \"None\" (unit) -1) 266))) (getAdministrator True ((bind \"__s105\" ((set_type (first (params 108) 933) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 933) (contract \"address\") 933) (set (operations 933) (cons (transfer (getLocal \"__s105\" 933) (literal (mutez 0) 933) (second (params 108) 933) 108) (operations 933) 933) 933))) (getAllowance True ((bind \"__s106\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 933) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 933) \"spender\" 69) 69) 69))) (set_type (second (params 68) 933) (contract \"nat\") 933) (set (operations 933) (cons (transfer (getLocal \"__s106\" 933) (literal (mutez 0) 933) (second (params 68) 933) 68) (operations 933) 933) 933))) (getBalance True ((bind \"__s107\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 933) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 933) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 933) 65) \"balance\" 65) 65))) (set_type (second (params 60) 933) (contract \"nat\") 933) (set (operations 933) (cons (transfer (getLocal \"__s107\" 933) (literal (mutez 0) 933) (second (params 60) 933) 60) (operations 933) 933) 933))) (getTotalSupply True ((bind \"__s108\" ((set_type (first (params 72) 933) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 933) (contract \"nat\") 933) (set (operations 933) (cons (transfer (getLocal \"__s108\" 933) (literal (mutez 0) 933) (second (params 72) 933) 72) (operations 933) 933) 933))) (liquidate True ((set_type (params 170) \"address\" 171) (set (operations 179) (cons (transfer (params 170) (literal (mutez 0) 179) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 176) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179) (set (operations 187) (cons (transfer (unit) (literal (mutez 0) 187) (openVariant (contract \"liquidate\" \"unit\" (params 170) 182) \"Some\" \"None\" 182) 187) (operations 187) 187) 187))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 270) \"nat\" 271) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 274) 274) (literal (string \"bad state\") 274) 274) (set (attr (data) \"state\" 199) (literal (intOrNat 2) 277) 277) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"Some\" (params 270) 278) 278) (set (attr (data) \"savedState_redeemer\" 279) (variant \"Some\" (sender) 279) 279) (set (operations 288) (cons (transfer (tuple 288 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 282)) (literal (mutez 0) 288) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 283) \"Some\" \"None\" 283) 288) (operations 288) 288) 288))) (redeem_callback True ((set_type (params 292) \"nat\" 293) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 296) (literal (string \"bad sender\") 296) 296) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 2) 299) 299) (literal (string \"bad state\") 299) 299) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 278) \"Some\" \"None\" 302) 302) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 303) (literal (intOrNat 1000000000000000000) 303) 303) (attr (data) \"totalSupply\" 96) 303) 303) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 304) (params 292) 304) (literal (intOrNat 1000000000000000000) 304) 304) 304) (set (attr (data) \"underlyingBalance\" 235) (openVariant (isNat (sub (params 292) (getLocal \"tokensToReceive\" 307) 307) 307) \"Some\" \"None\" 307) 307) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 279) \"Some\" \"None\" 310) 310) (set (operations 320) (cons (transfer (record 311 (address (getLocal \"redeemer\" 312)) (value (getLocal \"tokensToRedeem\" 313))) (literal (mutez 0) 320) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 315) \"Some\" \"None\" 315) 320) (operations 320) 320) 320) (set (operations 333) (cons (transfer (record 323 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 325)) (value (getLocal \"tokensToReceive\" 326))) (literal (mutez 0) 333) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 328) \"Some\" \"None\" 328) 333) (operations 333) 333) 333) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 336) 336) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"None\" (unit) -1) 337) (set (attr (data) \"savedState_redeemer\" 279) (variant \"None\" (unit) -1) 338))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 346) \"unit\" 347) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 350) 350) (literal (string \"bad state\") 350) 350) (set (attr (data) \"state\" 199) (literal (intOrNat 1) 353) 353) (set (operations 362) (cons (transfer (tuple 362 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 356)) (literal (mutez 0) 362) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 357) \"Some\" \"None\" 357) 362) (operations 362) 362) 362))) (updateBalance_callback True ((set_type (params 366) \"nat\" 367) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 370) (literal (string \"bad sender\") 370) 370) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 1) 373) 373) (literal (string \"bad state\") 373) 373) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 376) 376) (set (attr (data) \"underlyingBalance\" 235) (params 366) 379))) (updateContractMetadata True ((set_type (params 419) (tuple \"string\" \"bytes\") 420) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 422) (literal (string \"not governor\") 422) 422) (set (getItem (attr (data) \"metadata\" 426) (first (params 419) 424) 426) (second (params 419) 425) 426))) (updateDexterAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"dexterAddress\" 153) (params 403) 407))) (updateGovernorAddress True ((set_type (params 387) \"address\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"governorAddress\" 422) (params 387) 391))) (updateOvenRegistryAddress True ((set_type (params 411) \"address\" 412) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 414) (literal (string \"not governor\") 414) 414) (set (attr (data) \"ovenRegistryAddress\" 176) (params 411) 415))) (updateRewardPercent True ((set_type (params 395) \"nat\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"rewardPercent\" 139) (params 395) 399))) (updateTokenMetadata True ((set_type (params 430) (tuple \"nat\" (map \"string\" \"bytes\")) 431) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 433) (literal (string \"not governor\") 433) 433) (set (getItem (attr (data) \"token_metadata\" 434) (literal (intOrNat 0) 434) 434) (params 430) 434))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 933, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "updateBalance_callback", "params": "(literal (nat 15) 936)", "line_no": 937, "title": "", "messageClass": "", "source": "none", "sender": "(literal (local-address (static_id 0 8)) 8)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 937)", "show": true, "valid": "(literal (bool False) 937)", "voting_powers": "(map 937 )", "export": true}], "decompile": false, "kind": "test"}, {"shortname": "default_-_can_swap_tokens", "longname": "default - can swap tokens", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 200) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s109\" ((set_type (first (params 89) 954) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 954) (contract \"address\") 954) (set (operations 954) (cons (transfer (getLocal \"__s109\" 954) (literal (mutez 0) 954) (second (params 89) 954) 89) (operations 954) 954) 954))) (getAllowance True ((bind \"__s110\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 954) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 954) \"spender\" 46) 46) 46))) (set_type (second (params 45) 954) (contract \"nat\") 954) (set (operations 954) (cons (transfer (getLocal \"__s110\" 954) (literal (mutez 0) 954) (second (params 45) 954) 45) (operations 954) 954) 954))) (getBalance True ((bind \"__s111\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 954) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 954) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 954) 42) \"balance\" 42) 42))) (set_type (second (params 37) 954) (contract \"nat\") 954) (set (operations 954) (cons (transfer (getLocal \"__s111\" 954) (literal (mutez 0) 954) (second (params 37) 954) 37) (operations 954) 954) 954))) (getTotalSupply True ((bind \"__s112\" ((set_type (first (params 49) 954) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 954) (contract \"nat\") 954) (set (operations 954) (cons (transfer (getLocal \"__s112\" 954) (literal (mutez 0) 954) (second (params 49) 954) 49) (operations 954) 954) 954))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 954, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 11)", "export": "(storage (record 11 (tokenAddress (literal (local-address (static_id 0 8)) 8)))\nstorage_type (())\nmessages ((default True ((set_type (params 16) \"unit\" 17))) (xtzToToken True ((set_type (params 22) (tuple \"address\" (tuple \"nat\" \"timestamp\")) 23) (set (operations 43) (cons (transfer (record 33 (from_ (to_address (self) \"None\")) (to_ (first (params 22) 26)) (value (first (openVariant (ediv (amount) (literal (mutez 1) 30) 30) \"Some\" \"None\" 30) 30))) (literal (mutez 0) 43) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 40) 38) \"Some\" \"None\" 38) 43) (operations 43) 43) 43))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 960, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 2 12)", "export": "(storage (record 12 (intValue (literal (int 0) 10)) (natValue (literal (nat 0) 9)))\nstorage_type (())\nmessages ((default True ()) (intCallback True ((set (attr (data) \"intValue\" 30) (params 29) 30))) (natCallback True ((set (attr (data) \"natValue\" 25) (params 24) 25))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 964, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 3 98)", "export": "(storage (record 98 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 102 ) (bigmap (unknown 201) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 102)) (dexterAddress (literal (local-address (static_id 1 11)) 11)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 89 ((literal (string \"\") 971) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 91)) ((literal (string \"data\") 971) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 88))) (bigmap \"string\" \"bytes\") 89)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 98)) (rewardPercent (literal (nat 1) 54)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 98)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 78 ((literal (nat 0) 65) (tuple 971 (literal (nat 0) 65) (type_annotation (map 67 ((literal (string \"name\") 971) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 69)) ((literal (string \"decimals\") 971) (literal (bytes \"0x3138\") 70)) ((literal (string \"symbol\") 971) (literal (bytes \"0x6465787465724c6b555344\") 71)) ((literal (string \"icon\") 971) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 72))) (map \"string\" \"bytes\") 67)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 78)) (totalSupply (literal (intOrNat 0) 98)) (underlyingBalance (literal (nat 0) 119)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 135) \"unit\" 136) (set (operations 140) (cons (transfer (unit) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) (openVariant (contract \"\" \"unit\" (source) 140) \"Some\" \"None\" 140) 140) (operations 140) 140) 140) (set (operations 156) (cons (transfer (tuple 156 (to_address (self) \"None\") (tuple 156 (literal (intOrNat 1) 156) (add_seconds (now) (literal (int 3600) 148) 148))) (sub (balance) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) 143) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 153) 151) \"Some\" \"None\" 151) 156) (operations 156) 156) 156) (set (operations 166) (cons (transfer (unit) (literal (mutez 0) 166) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 161) \"Some\" \"None\" 161) 166) (operations 166) 166) 166))) (deposit True ((set_type (params 195) \"nat\" 196) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 199) 199) (literal (string \"bad state\") 199) 199) (set (attr (data) \"state\" 199) (literal (intOrNat 3) 202) 202) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"Some\" (params 195) 203) 203) (set (attr (data) \"savedState_depositor\" 204) (variant \"Some\" (sender) 204) 204) (set (operations 213) (cons (transfer (tuple 213 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 207)) (literal (mutez 0) 213) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 208) \"Some\" \"None\" 208) 213) (operations 213) 213) 213))) (deposit_callback True ((set_type (params 217) \"nat\" 218) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 221) (literal (string \"bad sender\") 221) 221) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 3) 224) 224) (literal (string \"bad state\") 224) 224) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 203) \"Some\" \"None\" 227) 227) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 228) (literal (intOrNat 1000000000000000000) 228) 228) 228) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 229) 229) ((defineLocal \"newUnderlyingBalance\" (add (params 217) (getLocal \"tokensToDeposit\" 230) 230) 230) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 231) (literal (intOrNat 1000000000000000000) 231) 231) (getLocal \"newUnderlyingBalance\" 231) 231) 231) (set (getLocal \"newTokens\" 971) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 232) (attr (data) \"totalSupply\" 96) 232) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 232) (getLocal \"fractionOfPoolOwnership\" 232) 232) 232) \"Some\" \"None\" 232) 232) 232)) 229) (set (attr (data) \"underlyingBalance\" 235) (add (params 217) (getLocal \"tokensToDeposit\" 235) 235) 235) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 204) \"Some\" \"None\" 238) 238) (set (operations 249) (cons (transfer (record 239 (from_ (getLocal \"depositor\" 240)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 242))) (literal (mutez 0) 249) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 244) \"Some\" \"None\" 244) 249) (operations 249) 249) 249) (set (operations 261) (cons (transfer (record 252 (address (getLocal \"depositor\" 253)) (value (getLocal \"newTokens\" 254))) (literal (mutez 0) 261) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 256) \"Some\" \"None\" 256) 261) (operations 261) 261) 261) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 264) 264) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"None\" (unit) -1) 265) (set (attr (data) \"savedState_depositor\" 204) (variant \"None\" (unit) -1) 266))) (getAdministrator True ((bind \"__s113\" ((set_type (first (params 108) 971) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 971) (contract \"address\") 971) (set (operations 971) (cons (transfer (getLocal \"__s113\" 971) (literal (mutez 0) 971) (second (params 108) 971) 108) (operations 971) 971) 971))) (getAllowance True ((bind \"__s114\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 971) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 971) \"spender\" 69) 69) 69))) (set_type (second (params 68) 971) (contract \"nat\") 971) (set (operations 971) (cons (transfer (getLocal \"__s114\" 971) (literal (mutez 0) 971) (second (params 68) 971) 68) (operations 971) 971) 971))) (getBalance True ((bind \"__s115\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 971) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 971) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 971) 65) \"balance\" 65) 65))) (set_type (second (params 60) 971) (contract \"nat\") 971) (set (operations 971) (cons (transfer (getLocal \"__s115\" 971) (literal (mutez 0) 971) (second (params 60) 971) 60) (operations 971) 971) 971))) (getTotalSupply True ((bind \"__s116\" ((set_type (first (params 72) 971) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 971) (contract \"nat\") 971) (set (operations 971) (cons (transfer (getLocal \"__s116\" 971) (literal (mutez 0) 971) (second (params 72) 971) 72) (operations 971) 971) 971))) (liquidate True ((set_type (params 170) \"address\" 171) (set (operations 179) (cons (transfer (params 170) (literal (mutez 0) 179) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 176) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179) (set (operations 187) (cons (transfer (unit) (literal (mutez 0) 187) (openVariant (contract \"liquidate\" \"unit\" (params 170) 182) \"Some\" \"None\" 182) 187) (operations 187) 187) 187))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 270) \"nat\" 271) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 274) 274) (literal (string \"bad state\") 274) 274) (set (attr (data) \"state\" 199) (literal (intOrNat 2) 277) 277) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"Some\" (params 270) 278) 278) (set (attr (data) \"savedState_redeemer\" 279) (variant \"Some\" (sender) 279) 279) (set (operations 288) (cons (transfer (tuple 288 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 282)) (literal (mutez 0) 288) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 283) \"Some\" \"None\" 283) 288) (operations 288) 288) 288))) (redeem_callback True ((set_type (params 292) \"nat\" 293) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 296) (literal (string \"bad sender\") 296) 296) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 2) 299) 299) (literal (string \"bad state\") 299) 299) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 278) \"Some\" \"None\" 302) 302) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 303) (literal (intOrNat 1000000000000000000) 303) 303) (attr (data) \"totalSupply\" 96) 303) 303) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 304) (params 292) 304) (literal (intOrNat 1000000000000000000) 304) 304) 304) (set (attr (data) \"underlyingBalance\" 235) (openVariant (isNat (sub (params 292) (getLocal \"tokensToReceive\" 307) 307) 307) \"Some\" \"None\" 307) 307) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 279) \"Some\" \"None\" 310) 310) (set (operations 320) (cons (transfer (record 311 (address (getLocal \"redeemer\" 312)) (value (getLocal \"tokensToRedeem\" 313))) (literal (mutez 0) 320) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 315) \"Some\" \"None\" 315) 320) (operations 320) 320) 320) (set (operations 333) (cons (transfer (record 323 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 325)) (value (getLocal \"tokensToReceive\" 326))) (literal (mutez 0) 333) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 328) \"Some\" \"None\" 328) 333) (operations 333) 333) 333) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 336) 336) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"None\" (unit) -1) 337) (set (attr (data) \"savedState_redeemer\" 279) (variant \"None\" (unit) -1) 338))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 346) \"unit\" 347) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 350) 350) (literal (string \"bad state\") 350) 350) (set (attr (data) \"state\" 199) (literal (intOrNat 1) 353) 353) (set (operations 362) (cons (transfer (tuple 362 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 356)) (literal (mutez 0) 362) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 357) \"Some\" \"None\" 357) 362) (operations 362) 362) 362))) (updateBalance_callback True ((set_type (params 366) \"nat\" 367) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 370) (literal (string \"bad sender\") 370) 370) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 1) 373) 373) (literal (string \"bad state\") 373) 373) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 376) 376) (set (attr (data) \"underlyingBalance\" 235) (params 366) 379))) (updateContractMetadata True ((set_type (params 419) (tuple \"string\" \"bytes\") 420) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 422) (literal (string \"not governor\") 422) 422) (set (getItem (attr (data) \"metadata\" 426) (first (params 419) 424) 426) (second (params 419) 425) 426))) (updateDexterAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"dexterAddress\" 153) (params 403) 407))) (updateGovernorAddress True ((set_type (params 387) \"address\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"governorAddress\" 422) (params 387) 391))) (updateOvenRegistryAddress True ((set_type (params 411) \"address\" 412) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 414) (literal (string \"not governor\") 414) 414) (set (attr (data) \"ovenRegistryAddress\" 176) (params 411) 415))) (updateRewardPercent True ((set_type (params 395) \"nat\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"rewardPercent\" 139) (params 395) 399))) (updateTokenMetadata True ((set_type (params 430) (tuple \"nat\" (map \"string\" \"bytes\")) 431) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 433) (literal (string \"not governor\") 433) 433) (set (getItem (attr (data) \"token_metadata\" 434) (literal (intOrNat 0) 434) 434) (params 430) 434))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 971, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 975 (address (literal (local-address (static_id 1 11)) 11)) (value (literal (nat 10000000000) 977)))", "line_no": 974, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 974)", "show": true, "valid": "(literal (bool True) 974)", "voting_powers": "(map 974 )", "export": true}, {"action": "message", "id": "(static_id 3 98)", "dynamic": false, "message": "default", "params": "(unit)", "line_no": 985, "title": "", "messageClass": "", "source": "none", "sender": "(literal (local-address (static_id 2 12)) 12)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 240000) 984)", "level": "(literal (intOrNat 0) 985)", "show": true, "valid": "(literal (bool True) 985)", "voting_powers": "(map 985 )", "export": true}, {"action": "verify", "condition": "(eq (contractBalance (static_id 2 12) 964) (literal (mutez 2400) 991) 991)", "line_no": 991}, {"action": "verify", "condition": "(eq (contractBalance (static_id 1 11) 960) (literal (mutez 237600) 994) 994)", "line_no": 994}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 974) \"balances\" 997) (literal (local-address (static_id 3 98)) 98) 997) \"balance\" 997) (openVariant (isNat (literal (intOrNat 237600) 997) 997) \"Some\" \"None\" 997) 997)", "line_no": 997}, {"action": "verify", "condition": "(eq (contractBalance (static_id 3 98) 971) (literal (mutez 0) 1000) 1000)", "line_no": 1000}], "decompile": false, "kind": "test"}, {"shortname": "deposit_-_fails_in_bad_state", "longname": "deposit - fails in bad state", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 211) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s117\" ((set_type (first (params 89) 1014) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 1014) (contract \"address\") 1014) (set (operations 1014) (cons (transfer (getLocal \"__s117\" 1014) (literal (mutez 0) 1014) (second (params 89) 1014) 89) (operations 1014) 1014) 1014))) (getAllowance True ((bind \"__s118\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 1014) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 1014) \"spender\" 46) 46) 46))) (set_type (second (params 45) 1014) (contract \"nat\") 1014) (set (operations 1014) (cons (transfer (getLocal \"__s118\" 1014) (literal (mutez 0) 1014) (second (params 45) 1014) 45) (operations 1014) 1014) 1014))) (getBalance True ((bind \"__s119\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 1014) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 1014) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 1014) 42) \"balance\" 42) 42))) (set_type (second (params 37) 1014) (contract \"nat\") 1014) (set (operations 1014) (cons (transfer (getLocal \"__s119\" 1014) (literal (mutez 0) 1014) (second (params 37) 1014) 37) (operations 1014) 1014) 1014))) (getTotalSupply True ((bind \"__s120\" ((set_type (first (params 49) 1014) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 1014) (contract \"nat\") 1014) (set (operations 1014) (cons (transfer (getLocal \"__s120\" 1014) (literal (mutez 0) 1014) (second (params 49) 1014) 49) (operations 1014) 1014) 1014))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1014, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 98)", "export": "(storage (record 98 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 102 ) (bigmap (unknown 212) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 102)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 89 ((literal (string \"\") 1021) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 91)) ((literal (string \"data\") 1021) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 88))) (bigmap \"string\" \"bytes\") 89)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 98)) (rewardPercent (literal (nat 1) 54)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 3) 98)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 78 ((literal (nat 0) 65) (tuple 1021 (literal (nat 0) 65) (type_annotation (map 67 ((literal (string \"name\") 1021) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 69)) ((literal (string \"decimals\") 1021) (literal (bytes \"0x3138\") 70)) ((literal (string \"symbol\") 1021) (literal (bytes \"0x6465787465724c6b555344\") 71)) ((literal (string \"icon\") 1021) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 72))) (map \"string\" \"bytes\") 67)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 78)) (totalSupply (literal (intOrNat 0) 98)) (underlyingBalance (literal (nat 0) 119)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 135) \"unit\" 136) (set (operations 140) (cons (transfer (unit) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) (openVariant (contract \"\" \"unit\" (source) 140) \"Some\" \"None\" 140) 140) (operations 140) 140) 140) (set (operations 156) (cons (transfer (tuple 156 (to_address (self) \"None\") (tuple 156 (literal (intOrNat 1) 156) (add_seconds (now) (literal (int 3600) 148) 148))) (sub (balance) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) 143) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 153) 151) \"Some\" \"None\" 151) 156) (operations 156) 156) 156) (set (operations 166) (cons (transfer (unit) (literal (mutez 0) 166) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 161) \"Some\" \"None\" 161) 166) (operations 166) 166) 166))) (deposit True ((set_type (params 195) \"nat\" 196) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 199) 199) (literal (string \"bad state\") 199) 199) (set (attr (data) \"state\" 199) (literal (intOrNat 3) 202) 202) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"Some\" (params 195) 203) 203) (set (attr (data) \"savedState_depositor\" 204) (variant \"Some\" (sender) 204) 204) (set (operations 213) (cons (transfer (tuple 213 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 207)) (literal (mutez 0) 213) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 208) \"Some\" \"None\" 208) 213) (operations 213) 213) 213))) (deposit_callback True ((set_type (params 217) \"nat\" 218) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 221) (literal (string \"bad sender\") 221) 221) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 3) 224) 224) (literal (string \"bad state\") 224) 224) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 203) \"Some\" \"None\" 227) 227) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 228) (literal (intOrNat 1000000000000000000) 228) 228) 228) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 229) 229) ((defineLocal \"newUnderlyingBalance\" (add (params 217) (getLocal \"tokensToDeposit\" 230) 230) 230) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 231) (literal (intOrNat 1000000000000000000) 231) 231) (getLocal \"newUnderlyingBalance\" 231) 231) 231) (set (getLocal \"newTokens\" 1021) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 232) (attr (data) \"totalSupply\" 96) 232) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 232) (getLocal \"fractionOfPoolOwnership\" 232) 232) 232) \"Some\" \"None\" 232) 232) 232)) 229) (set (attr (data) \"underlyingBalance\" 235) (add (params 217) (getLocal \"tokensToDeposit\" 235) 235) 235) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 204) \"Some\" \"None\" 238) 238) (set (operations 249) (cons (transfer (record 239 (from_ (getLocal \"depositor\" 240)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 242))) (literal (mutez 0) 249) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 244) \"Some\" \"None\" 244) 249) (operations 249) 249) 249) (set (operations 261) (cons (transfer (record 252 (address (getLocal \"depositor\" 253)) (value (getLocal \"newTokens\" 254))) (literal (mutez 0) 261) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 256) \"Some\" \"None\" 256) 261) (operations 261) 261) 261) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 264) 264) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"None\" (unit) -1) 265) (set (attr (data) \"savedState_depositor\" 204) (variant \"None\" (unit) -1) 266))) (getAdministrator True ((bind \"__s121\" ((set_type (first (params 108) 1021) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 1021) (contract \"address\") 1021) (set (operations 1021) (cons (transfer (getLocal \"__s121\" 1021) (literal (mutez 0) 1021) (second (params 108) 1021) 108) (operations 1021) 1021) 1021))) (getAllowance True ((bind \"__s122\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 1021) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 1021) \"spender\" 69) 69) 69))) (set_type (second (params 68) 1021) (contract \"nat\") 1021) (set (operations 1021) (cons (transfer (getLocal \"__s122\" 1021) (literal (mutez 0) 1021) (second (params 68) 1021) 68) (operations 1021) 1021) 1021))) (getBalance True ((bind \"__s123\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 1021) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 1021) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 1021) 65) \"balance\" 65) 65))) (set_type (second (params 60) 1021) (contract \"nat\") 1021) (set (operations 1021) (cons (transfer (getLocal \"__s123\" 1021) (literal (mutez 0) 1021) (second (params 60) 1021) 60) (operations 1021) 1021) 1021))) (getTotalSupply True ((bind \"__s124\" ((set_type (first (params 72) 1021) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 1021) (contract \"nat\") 1021) (set (operations 1021) (cons (transfer (getLocal \"__s124\" 1021) (literal (mutez 0) 1021) (second (params 72) 1021) 72) (operations 1021) 1021) 1021))) (liquidate True ((set_type (params 170) \"address\" 171) (set (operations 179) (cons (transfer (params 170) (literal (mutez 0) 179) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 176) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179) (set (operations 187) (cons (transfer (unit) (literal (mutez 0) 187) (openVariant (contract \"liquidate\" \"unit\" (params 170) 182) \"Some\" \"None\" 182) 187) (operations 187) 187) 187))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 270) \"nat\" 271) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 274) 274) (literal (string \"bad state\") 274) 274) (set (attr (data) \"state\" 199) (literal (intOrNat 2) 277) 277) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"Some\" (params 270) 278) 278) (set (attr (data) \"savedState_redeemer\" 279) (variant \"Some\" (sender) 279) 279) (set (operations 288) (cons (transfer (tuple 288 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 282)) (literal (mutez 0) 288) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 283) \"Some\" \"None\" 283) 288) (operations 288) 288) 288))) (redeem_callback True ((set_type (params 292) \"nat\" 293) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 296) (literal (string \"bad sender\") 296) 296) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 2) 299) 299) (literal (string \"bad state\") 299) 299) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 278) \"Some\" \"None\" 302) 302) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 303) (literal (intOrNat 1000000000000000000) 303) 303) (attr (data) \"totalSupply\" 96) 303) 303) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 304) (params 292) 304) (literal (intOrNat 1000000000000000000) 304) 304) 304) (set (attr (data) \"underlyingBalance\" 235) (openVariant (isNat (sub (params 292) (getLocal \"tokensToReceive\" 307) 307) 307) \"Some\" \"None\" 307) 307) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 279) \"Some\" \"None\" 310) 310) (set (operations 320) (cons (transfer (record 311 (address (getLocal \"redeemer\" 312)) (value (getLocal \"tokensToRedeem\" 313))) (literal (mutez 0) 320) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 315) \"Some\" \"None\" 315) 320) (operations 320) 320) 320) (set (operations 333) (cons (transfer (record 323 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 325)) (value (getLocal \"tokensToReceive\" 326))) (literal (mutez 0) 333) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 328) \"Some\" \"None\" 328) 333) (operations 333) 333) 333) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 336) 336) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"None\" (unit) -1) 337) (set (attr (data) \"savedState_redeemer\" 279) (variant \"None\" (unit) -1) 338))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 346) \"unit\" 347) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 350) 350) (literal (string \"bad state\") 350) 350) (set (attr (data) \"state\" 199) (literal (intOrNat 1) 353) 353) (set (operations 362) (cons (transfer (tuple 362 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 356)) (literal (mutez 0) 362) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 357) \"Some\" \"None\" 357) 362) (operations 362) 362) 362))) (updateBalance_callback True ((set_type (params 366) \"nat\" 367) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 370) (literal (string \"bad sender\") 370) 370) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 1) 373) 373) (literal (string \"bad state\") 373) 373) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 376) 376) (set (attr (data) \"underlyingBalance\" 235) (params 366) 379))) (updateContractMetadata True ((set_type (params 419) (tuple \"string\" \"bytes\") 420) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 422) (literal (string \"not governor\") 422) 422) (set (getItem (attr (data) \"metadata\" 426) (first (params 419) 424) 426) (second (params 419) 425) 426))) (updateDexterAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"dexterAddress\" 153) (params 403) 407))) (updateGovernorAddress True ((set_type (params 387) \"address\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"governorAddress\" 422) (params 387) 391))) (updateOvenRegistryAddress True ((set_type (params 411) \"address\" 412) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 414) (literal (string \"not governor\") 414) 414) (set (attr (data) \"ovenRegistryAddress\" 176) (params 411) 415))) (updateRewardPercent True ((set_type (params 395) \"nat\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"rewardPercent\" 139) (params 395) 399))) (updateTokenMetadata True ((set_type (params 430) (tuple \"nat\" (map \"string\" \"bytes\")) 431) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 433) (literal (string \"not governor\") 433) 433) (set (getItem (attr (data) \"token_metadata\" 434) (literal (intOrNat 0) 434) 434) (params 430) 434))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1021, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1026 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)) (value (literal (nat 10) 1024)))", "line_no": 1025, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1025)", "show": true, "valid": "(literal (bool True) 1025)", "voting_powers": "(map 1025 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 1036 (spender (literal (local-address (static_id 1 98)) 98)) (value (literal (nat 10) 1024)))", "line_no": 1035, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1035)", "show": true, "valid": "(literal (bool True) 1035)", "voting_powers": "(map 1035 )", "export": true}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "deposit", "params": "(literal (nat 10) 1024)", "line_no": 1046, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1046)", "show": true, "valid": "(literal (bool False) 1046)", "voting_powers": "(map 1046 )", "export": true}], "decompile": false, "kind": "test"}, {"shortname": "deposit_-_resets_state", "longname": "deposit - resets state", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 222) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s125\" ((set_type (first (params 89) 1061) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 1061) (contract \"address\") 1061) (set (operations 1061) (cons (transfer (getLocal \"__s125\" 1061) (literal (mutez 0) 1061) (second (params 89) 1061) 89) (operations 1061) 1061) 1061))) (getAllowance True ((bind \"__s126\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 1061) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 1061) \"spender\" 46) 46) 46))) (set_type (second (params 45) 1061) (contract \"nat\") 1061) (set (operations 1061) (cons (transfer (getLocal \"__s126\" 1061) (literal (mutez 0) 1061) (second (params 45) 1061) 45) (operations 1061) 1061) 1061))) (getBalance True ((bind \"__s127\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 1061) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 1061) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 1061) 42) \"balance\" 42) 42))) (set_type (second (params 37) 1061) (contract \"nat\") 1061) (set (operations 1061) (cons (transfer (getLocal \"__s127\" 1061) (literal (mutez 0) 1061) (second (params 37) 1061) 37) (operations 1061) 1061) 1061))) (getTotalSupply True ((bind \"__s128\" ((set_type (first (params 49) 1061) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 1061) (contract \"nat\") 1061) (set (operations 1061) (cons (transfer (getLocal \"__s128\" 1061) (literal (mutez 0) 1061) (second (params 49) 1061) 49) (operations 1061) 1061) 1061))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1061, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 98)", "export": "(storage (record 98 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 102 ) (bigmap (unknown 223) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 102)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 89 ((literal (string \"\") 1067) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 91)) ((literal (string \"data\") 1067) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 88))) (bigmap \"string\" \"bytes\") 89)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 98)) (rewardPercent (literal (nat 1) 54)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 98)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 78 ((literal (nat 0) 65) (tuple 1067 (literal (nat 0) 65) (type_annotation (map 67 ((literal (string \"name\") 1067) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 69)) ((literal (string \"decimals\") 1067) (literal (bytes \"0x3138\") 70)) ((literal (string \"symbol\") 1067) (literal (bytes \"0x6465787465724c6b555344\") 71)) ((literal (string \"icon\") 1067) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 72))) (map \"string\" \"bytes\") 67)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 78)) (totalSupply (literal (intOrNat 0) 98)) (underlyingBalance (literal (nat 0) 119)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 135) \"unit\" 136) (set (operations 140) (cons (transfer (unit) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) (openVariant (contract \"\" \"unit\" (source) 140) \"Some\" \"None\" 140) 140) (operations 140) 140) 140) (set (operations 156) (cons (transfer (tuple 156 (to_address (self) \"None\") (tuple 156 (literal (intOrNat 1) 156) (add_seconds (now) (literal (int 3600) 148) 148))) (sub (balance) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) 143) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 153) 151) \"Some\" \"None\" 151) 156) (operations 156) 156) 156) (set (operations 166) (cons (transfer (unit) (literal (mutez 0) 166) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 161) \"Some\" \"None\" 161) 166) (operations 166) 166) 166))) (deposit True ((set_type (params 195) \"nat\" 196) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 199) 199) (literal (string \"bad state\") 199) 199) (set (attr (data) \"state\" 199) (literal (intOrNat 3) 202) 202) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"Some\" (params 195) 203) 203) (set (attr (data) \"savedState_depositor\" 204) (variant \"Some\" (sender) 204) 204) (set (operations 213) (cons (transfer (tuple 213 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 207)) (literal (mutez 0) 213) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 208) \"Some\" \"None\" 208) 213) (operations 213) 213) 213))) (deposit_callback True ((set_type (params 217) \"nat\" 218) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 221) (literal (string \"bad sender\") 221) 221) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 3) 224) 224) (literal (string \"bad state\") 224) 224) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 203) \"Some\" \"None\" 227) 227) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 228) (literal (intOrNat 1000000000000000000) 228) 228) 228) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 229) 229) ((defineLocal \"newUnderlyingBalance\" (add (params 217) (getLocal \"tokensToDeposit\" 230) 230) 230) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 231) (literal (intOrNat 1000000000000000000) 231) 231) (getLocal \"newUnderlyingBalance\" 231) 231) 231) (set (getLocal \"newTokens\" 1067) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 232) (attr (data) \"totalSupply\" 96) 232) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 232) (getLocal \"fractionOfPoolOwnership\" 232) 232) 232) \"Some\" \"None\" 232) 232) 232)) 229) (set (attr (data) \"underlyingBalance\" 235) (add (params 217) (getLocal \"tokensToDeposit\" 235) 235) 235) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 204) \"Some\" \"None\" 238) 238) (set (operations 249) (cons (transfer (record 239 (from_ (getLocal \"depositor\" 240)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 242))) (literal (mutez 0) 249) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 244) \"Some\" \"None\" 244) 249) (operations 249) 249) 249) (set (operations 261) (cons (transfer (record 252 (address (getLocal \"depositor\" 253)) (value (getLocal \"newTokens\" 254))) (literal (mutez 0) 261) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 256) \"Some\" \"None\" 256) 261) (operations 261) 261) 261) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 264) 264) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"None\" (unit) -1) 265) (set (attr (data) \"savedState_depositor\" 204) (variant \"None\" (unit) -1) 266))) (getAdministrator True ((bind \"__s129\" ((set_type (first (params 108) 1067) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 1067) (contract \"address\") 1067) (set (operations 1067) (cons (transfer (getLocal \"__s129\" 1067) (literal (mutez 0) 1067) (second (params 108) 1067) 108) (operations 1067) 1067) 1067))) (getAllowance True ((bind \"__s130\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 1067) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 1067) \"spender\" 69) 69) 69))) (set_type (second (params 68) 1067) (contract \"nat\") 1067) (set (operations 1067) (cons (transfer (getLocal \"__s130\" 1067) (literal (mutez 0) 1067) (second (params 68) 1067) 68) (operations 1067) 1067) 1067))) (getBalance True ((bind \"__s131\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 1067) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 1067) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 1067) 65) \"balance\" 65) 65))) (set_type (second (params 60) 1067) (contract \"nat\") 1067) (set (operations 1067) (cons (transfer (getLocal \"__s131\" 1067) (literal (mutez 0) 1067) (second (params 60) 1067) 60) (operations 1067) 1067) 1067))) (getTotalSupply True ((bind \"__s132\" ((set_type (first (params 72) 1067) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 1067) (contract \"nat\") 1067) (set (operations 1067) (cons (transfer (getLocal \"__s132\" 1067) (literal (mutez 0) 1067) (second (params 72) 1067) 72) (operations 1067) 1067) 1067))) (liquidate True ((set_type (params 170) \"address\" 171) (set (operations 179) (cons (transfer (params 170) (literal (mutez 0) 179) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 176) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179) (set (operations 187) (cons (transfer (unit) (literal (mutez 0) 187) (openVariant (contract \"liquidate\" \"unit\" (params 170) 182) \"Some\" \"None\" 182) 187) (operations 187) 187) 187))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 270) \"nat\" 271) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 274) 274) (literal (string \"bad state\") 274) 274) (set (attr (data) \"state\" 199) (literal (intOrNat 2) 277) 277) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"Some\" (params 270) 278) 278) (set (attr (data) \"savedState_redeemer\" 279) (variant \"Some\" (sender) 279) 279) (set (operations 288) (cons (transfer (tuple 288 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 282)) (literal (mutez 0) 288) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 283) \"Some\" \"None\" 283) 288) (operations 288) 288) 288))) (redeem_callback True ((set_type (params 292) \"nat\" 293) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 296) (literal (string \"bad sender\") 296) 296) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 2) 299) 299) (literal (string \"bad state\") 299) 299) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 278) \"Some\" \"None\" 302) 302) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 303) (literal (intOrNat 1000000000000000000) 303) 303) (attr (data) \"totalSupply\" 96) 303) 303) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 304) (params 292) 304) (literal (intOrNat 1000000000000000000) 304) 304) 304) (set (attr (data) \"underlyingBalance\" 235) (openVariant (isNat (sub (params 292) (getLocal \"tokensToReceive\" 307) 307) 307) \"Some\" \"None\" 307) 307) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 279) \"Some\" \"None\" 310) 310) (set (operations 320) (cons (transfer (record 311 (address (getLocal \"redeemer\" 312)) (value (getLocal \"tokensToRedeem\" 313))) (literal (mutez 0) 320) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 315) \"Some\" \"None\" 315) 320) (operations 320) 320) 320) (set (operations 333) (cons (transfer (record 323 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 325)) (value (getLocal \"tokensToReceive\" 326))) (literal (mutez 0) 333) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 328) \"Some\" \"None\" 328) 333) (operations 333) 333) 333) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 336) 336) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"None\" (unit) -1) 337) (set (attr (data) \"savedState_redeemer\" 279) (variant \"None\" (unit) -1) 338))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 346) \"unit\" 347) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 350) 350) (literal (string \"bad state\") 350) 350) (set (attr (data) \"state\" 199) (literal (intOrNat 1) 353) 353) (set (operations 362) (cons (transfer (tuple 362 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 356)) (literal (mutez 0) 362) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 357) \"Some\" \"None\" 357) 362) (operations 362) 362) 362))) (updateBalance_callback True ((set_type (params 366) \"nat\" 367) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 370) (literal (string \"bad sender\") 370) 370) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 1) 373) 373) (literal (string \"bad state\") 373) 373) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 376) 376) (set (attr (data) \"underlyingBalance\" 235) (params 366) 379))) (updateContractMetadata True ((set_type (params 419) (tuple \"string\" \"bytes\") 420) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 422) (literal (string \"not governor\") 422) 422) (set (getItem (attr (data) \"metadata\" 426) (first (params 419) 424) 426) (second (params 419) 425) 426))) (updateDexterAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"dexterAddress\" 153) (params 403) 407))) (updateGovernorAddress True ((set_type (params 387) \"address\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"governorAddress\" 422) (params 387) 391))) (updateOvenRegistryAddress True ((set_type (params 411) \"address\" 412) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 414) (literal (string \"not governor\") 414) 414) (set (attr (data) \"ovenRegistryAddress\" 176) (params 411) 415))) (updateRewardPercent True ((set_type (params 395) \"nat\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"rewardPercent\" 139) (params 395) 399))) (updateTokenMetadata True ((set_type (params 430) (tuple \"nat\" (map \"string\" \"bytes\")) 431) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 433) (literal (string \"not governor\") 433) 433) (set (getItem (attr (data) \"token_metadata\" 434) (literal (intOrNat 0) 434) 434) (params 430) 434))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1067, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1072 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)) (value (literal (nat 10) 1070)))", "line_no": 1071, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1071)", "show": true, "valid": "(literal (bool True) 1071)", "voting_powers": "(map 1071 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 1082 (spender (literal (local-address (static_id 1 98)) 98)) (value (literal (nat 10) 1070)))", "line_no": 1081, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1081)", "show": true, "valid": "(literal (bool True) 1081)", "voting_powers": "(map 1081 )", "export": true}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "deposit", "params": "(literal (nat 10) 1070)", "line_no": 1091, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1091)", "show": true, "valid": "(literal (bool True) 1091)", "voting_powers": "(map 1091 )", "export": true}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 98) 1091) \"state\" 1098) (literal (intOrNat 0) 1098) 1098)", "line_no": 1098}, {"action": "verify", "condition": "(eq (isVariant (attr (contractData (static_id 1 98) 1091) \"savedState_tokensToDeposit\" 1099) \"Some\" 1099) (literal (bool False) 1099) 1099)", "line_no": 1099}, {"action": "verify", "condition": "(eq (isVariant (attr (contractData (static_id 1 98) 1091) \"savedState_depositor\" 1100) \"Some\" 1100) (literal (bool False) 1100) 1100)", "line_no": 1100}], "decompile": false, "kind": "test"}, {"shortname": "deposit_-_can_deposit_from_one_account", "longname": "deposit - can deposit from one account", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 233) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s133\" ((set_type (first (params 89) 1110) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 1110) (contract \"address\") 1110) (set (operations 1110) (cons (transfer (getLocal \"__s133\" 1110) (literal (mutez 0) 1110) (second (params 89) 1110) 89) (operations 1110) 1110) 1110))) (getAllowance True ((bind \"__s134\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 1110) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 1110) \"spender\" 46) 46) 46))) (set_type (second (params 45) 1110) (contract \"nat\") 1110) (set (operations 1110) (cons (transfer (getLocal \"__s134\" 1110) (literal (mutez 0) 1110) (second (params 45) 1110) 45) (operations 1110) 1110) 1110))) (getBalance True ((bind \"__s135\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 1110) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 1110) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 1110) 42) \"balance\" 42) 42))) (set_type (second (params 37) 1110) (contract \"nat\") 1110) (set (operations 1110) (cons (transfer (getLocal \"__s135\" 1110) (literal (mutez 0) 1110) (second (params 37) 1110) 37) (operations 1110) 1110) 1110))) (getTotalSupply True ((bind \"__s136\" ((set_type (first (params 49) 1110) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 1110) (contract \"nat\") 1110) (set (operations 1110) (cons (transfer (getLocal \"__s136\" 1110) (literal (mutez 0) 1110) (second (params 49) 1110) 49) (operations 1110) 1110) 1110))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1110, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 98)", "export": "(storage (record 98 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 102 ) (bigmap (unknown 234) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 102)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 89 ((literal (string \"\") 1116) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 91)) ((literal (string \"data\") 1116) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 88))) (bigmap \"string\" \"bytes\") 89)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 98)) (rewardPercent (literal (nat 1) 54)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 98)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 78 ((literal (nat 0) 65) (tuple 1116 (literal (nat 0) 65) (type_annotation (map 67 ((literal (string \"name\") 1116) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 69)) ((literal (string \"decimals\") 1116) (literal (bytes \"0x3138\") 70)) ((literal (string \"symbol\") 1116) (literal (bytes \"0x6465787465724c6b555344\") 71)) ((literal (string \"icon\") 1116) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 72))) (map \"string\" \"bytes\") 67)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 78)) (totalSupply (literal (intOrNat 0) 98)) (underlyingBalance (literal (nat 0) 119)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 135) \"unit\" 136) (set (operations 140) (cons (transfer (unit) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) (openVariant (contract \"\" \"unit\" (source) 140) \"Some\" \"None\" 140) 140) (operations 140) 140) 140) (set (operations 156) (cons (transfer (tuple 156 (to_address (self) \"None\") (tuple 156 (literal (intOrNat 1) 156) (add_seconds (now) (literal (int 3600) 148) 148))) (sub (balance) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) 143) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 153) 151) \"Some\" \"None\" 151) 156) (operations 156) 156) 156) (set (operations 166) (cons (transfer (unit) (literal (mutez 0) 166) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 161) \"Some\" \"None\" 161) 166) (operations 166) 166) 166))) (deposit True ((set_type (params 195) \"nat\" 196) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 199) 199) (literal (string \"bad state\") 199) 199) (set (attr (data) \"state\" 199) (literal (intOrNat 3) 202) 202) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"Some\" (params 195) 203) 203) (set (attr (data) \"savedState_depositor\" 204) (variant \"Some\" (sender) 204) 204) (set (operations 213) (cons (transfer (tuple 213 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 207)) (literal (mutez 0) 213) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 208) \"Some\" \"None\" 208) 213) (operations 213) 213) 213))) (deposit_callback True ((set_type (params 217) \"nat\" 218) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 221) (literal (string \"bad sender\") 221) 221) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 3) 224) 224) (literal (string \"bad state\") 224) 224) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 203) \"Some\" \"None\" 227) 227) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 228) (literal (intOrNat 1000000000000000000) 228) 228) 228) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 229) 229) ((defineLocal \"newUnderlyingBalance\" (add (params 217) (getLocal \"tokensToDeposit\" 230) 230) 230) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 231) (literal (intOrNat 1000000000000000000) 231) 231) (getLocal \"newUnderlyingBalance\" 231) 231) 231) (set (getLocal \"newTokens\" 1116) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 232) (attr (data) \"totalSupply\" 96) 232) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 232) (getLocal \"fractionOfPoolOwnership\" 232) 232) 232) \"Some\" \"None\" 232) 232) 232)) 229) (set (attr (data) \"underlyingBalance\" 235) (add (params 217) (getLocal \"tokensToDeposit\" 235) 235) 235) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 204) \"Some\" \"None\" 238) 238) (set (operations 249) (cons (transfer (record 239 (from_ (getLocal \"depositor\" 240)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 242))) (literal (mutez 0) 249) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 244) \"Some\" \"None\" 244) 249) (operations 249) 249) 249) (set (operations 261) (cons (transfer (record 252 (address (getLocal \"depositor\" 253)) (value (getLocal \"newTokens\" 254))) (literal (mutez 0) 261) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 256) \"Some\" \"None\" 256) 261) (operations 261) 261) 261) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 264) 264) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"None\" (unit) -1) 265) (set (attr (data) \"savedState_depositor\" 204) (variant \"None\" (unit) -1) 266))) (getAdministrator True ((bind \"__s137\" ((set_type (first (params 108) 1116) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 1116) (contract \"address\") 1116) (set (operations 1116) (cons (transfer (getLocal \"__s137\" 1116) (literal (mutez 0) 1116) (second (params 108) 1116) 108) (operations 1116) 1116) 1116))) (getAllowance True ((bind \"__s138\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 1116) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 1116) \"spender\" 69) 69) 69))) (set_type (second (params 68) 1116) (contract \"nat\") 1116) (set (operations 1116) (cons (transfer (getLocal \"__s138\" 1116) (literal (mutez 0) 1116) (second (params 68) 1116) 68) (operations 1116) 1116) 1116))) (getBalance True ((bind \"__s139\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 1116) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 1116) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 1116) 65) \"balance\" 65) 65))) (set_type (second (params 60) 1116) (contract \"nat\") 1116) (set (operations 1116) (cons (transfer (getLocal \"__s139\" 1116) (literal (mutez 0) 1116) (second (params 60) 1116) 60) (operations 1116) 1116) 1116))) (getTotalSupply True ((bind \"__s140\" ((set_type (first (params 72) 1116) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 1116) (contract \"nat\") 1116) (set (operations 1116) (cons (transfer (getLocal \"__s140\" 1116) (literal (mutez 0) 1116) (second (params 72) 1116) 72) (operations 1116) 1116) 1116))) (liquidate True ((set_type (params 170) \"address\" 171) (set (operations 179) (cons (transfer (params 170) (literal (mutez 0) 179) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 176) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179) (set (operations 187) (cons (transfer (unit) (literal (mutez 0) 187) (openVariant (contract \"liquidate\" \"unit\" (params 170) 182) \"Some\" \"None\" 182) 187) (operations 187) 187) 187))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 270) \"nat\" 271) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 274) 274) (literal (string \"bad state\") 274) 274) (set (attr (data) \"state\" 199) (literal (intOrNat 2) 277) 277) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"Some\" (params 270) 278) 278) (set (attr (data) \"savedState_redeemer\" 279) (variant \"Some\" (sender) 279) 279) (set (operations 288) (cons (transfer (tuple 288 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 282)) (literal (mutez 0) 288) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 283) \"Some\" \"None\" 283) 288) (operations 288) 288) 288))) (redeem_callback True ((set_type (params 292) \"nat\" 293) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 296) (literal (string \"bad sender\") 296) 296) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 2) 299) 299) (literal (string \"bad state\") 299) 299) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 278) \"Some\" \"None\" 302) 302) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 303) (literal (intOrNat 1000000000000000000) 303) 303) (attr (data) \"totalSupply\" 96) 303) 303) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 304) (params 292) 304) (literal (intOrNat 1000000000000000000) 304) 304) 304) (set (attr (data) \"underlyingBalance\" 235) (openVariant (isNat (sub (params 292) (getLocal \"tokensToReceive\" 307) 307) 307) \"Some\" \"None\" 307) 307) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 279) \"Some\" \"None\" 310) 310) (set (operations 320) (cons (transfer (record 311 (address (getLocal \"redeemer\" 312)) (value (getLocal \"tokensToRedeem\" 313))) (literal (mutez 0) 320) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 315) \"Some\" \"None\" 315) 320) (operations 320) 320) 320) (set (operations 333) (cons (transfer (record 323 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 325)) (value (getLocal \"tokensToReceive\" 326))) (literal (mutez 0) 333) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 328) \"Some\" \"None\" 328) 333) (operations 333) 333) 333) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 336) 336) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"None\" (unit) -1) 337) (set (attr (data) \"savedState_redeemer\" 279) (variant \"None\" (unit) -1) 338))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 346) \"unit\" 347) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 350) 350) (literal (string \"bad state\") 350) 350) (set (attr (data) \"state\" 199) (literal (intOrNat 1) 353) 353) (set (operations 362) (cons (transfer (tuple 362 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 356)) (literal (mutez 0) 362) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 357) \"Some\" \"None\" 357) 362) (operations 362) 362) 362))) (updateBalance_callback True ((set_type (params 366) \"nat\" 367) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 370) (literal (string \"bad sender\") 370) 370) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 1) 373) 373) (literal (string \"bad state\") 373) 373) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 376) 376) (set (attr (data) \"underlyingBalance\" 235) (params 366) 379))) (updateContractMetadata True ((set_type (params 419) (tuple \"string\" \"bytes\") 420) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 422) (literal (string \"not governor\") 422) 422) (set (getItem (attr (data) \"metadata\" 426) (first (params 419) 424) 426) (second (params 419) 425) 426))) (updateDexterAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"dexterAddress\" 153) (params 403) 407))) (updateGovernorAddress True ((set_type (params 387) \"address\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"governorAddress\" 422) (params 387) 391))) (updateOvenRegistryAddress True ((set_type (params 411) \"address\" 412) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 414) (literal (string \"not governor\") 414) 414) (set (attr (data) \"ovenRegistryAddress\" 176) (params 411) 415))) (updateRewardPercent True ((set_type (params 395) \"nat\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"rewardPercent\" 139) (params 395) 399))) (updateTokenMetadata True ((set_type (params 430) (tuple \"nat\" (map \"string\" \"bytes\")) 431) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 433) (literal (string \"not governor\") 433) 433) (set (getItem (attr (data) \"token_metadata\" 434) (literal (intOrNat 0) 434) 434) (params 430) 434))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1116, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1121 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)) (value (literal (nat 10) 1119)))", "line_no": 1120, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1120)", "show": true, "valid": "(literal (bool True) 1120)", "voting_powers": "(map 1120 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 1131 (spender (literal (local-address (static_id 1 98)) 98)) (value (literal (nat 10) 1119)))", "line_no": 1130, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1130)", "show": true, "valid": "(literal (bool True) 1130)", "voting_powers": "(map 1130 )", "export": true}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "deposit", "params": "(literal (nat 10) 1119)", "line_no": 1140, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1140)", "show": true, "valid": "(literal (bool True) 1140)", "voting_powers": "(map 1140 )", "export": true}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 1130) \"balances\" 1147) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 1147) \"balance\" 1147) (literal (nat 0) 1147) 1147)", "line_no": 1147}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 98) 1140) \"balances\" 1148) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 1148) \"balance\" 1148) (mul (literal (nat 10) 1119) (literal (intOrNat 1000000000000000000) 1148) 1148) 1148)", "line_no": 1148}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 98) 1140) \"totalSupply\" 1151) (mul (literal (nat 10) 1119) (literal (intOrNat 1000000000000000000) 1151) 1151) 1151)", "line_no": 1151}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 1130) \"balances\" 1147) (literal (local-address (static_id 1 98)) 98) 1154) \"balance\" 1154) (literal (nat 10) 1119) 1154)", "line_no": 1154}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 98) 1140) \"underlyingBalance\" 1155) (literal (nat 10) 1119) 1155)", "line_no": 1155}], "decompile": false, "kind": "test"}, {"shortname": "deposit_-_can_deposit_from_two_accounts", "longname": "deposit - can deposit from two accounts", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 244) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s141\" ((set_type (first (params 89) 1165) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 1165) (contract \"address\") 1165) (set (operations 1165) (cons (transfer (getLocal \"__s141\" 1165) (literal (mutez 0) 1165) (second (params 89) 1165) 89) (operations 1165) 1165) 1165))) (getAllowance True ((bind \"__s142\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 1165) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 1165) \"spender\" 46) 46) 46))) (set_type (second (params 45) 1165) (contract \"nat\") 1165) (set (operations 1165) (cons (transfer (getLocal \"__s142\" 1165) (literal (mutez 0) 1165) (second (params 45) 1165) 45) (operations 1165) 1165) 1165))) (getBalance True ((bind \"__s143\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 1165) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 1165) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 1165) 42) \"balance\" 42) 42))) (set_type (second (params 37) 1165) (contract \"nat\") 1165) (set (operations 1165) (cons (transfer (getLocal \"__s143\" 1165) (literal (mutez 0) 1165) (second (params 37) 1165) 37) (operations 1165) 1165) 1165))) (getTotalSupply True ((bind \"__s144\" ((set_type (first (params 49) 1165) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 1165) (contract \"nat\") 1165) (set (operations 1165) (cons (transfer (getLocal \"__s144\" 1165) (literal (mutez 0) 1165) (second (params 49) 1165) 49) (operations 1165) 1165) 1165))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1165, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 98)", "export": "(storage (record 98 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 102 ) (bigmap (unknown 245) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 102)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 89 ((literal (string \"\") 1171) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 91)) ((literal (string \"data\") 1171) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 88))) (bigmap \"string\" \"bytes\") 89)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 98)) (rewardPercent (literal (nat 1) 54)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 98)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 78 ((literal (nat 0) 65) (tuple 1171 (literal (nat 0) 65) (type_annotation (map 67 ((literal (string \"name\") 1171) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 69)) ((literal (string \"decimals\") 1171) (literal (bytes \"0x3138\") 70)) ((literal (string \"symbol\") 1171) (literal (bytes \"0x6465787465724c6b555344\") 71)) ((literal (string \"icon\") 1171) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 72))) (map \"string\" \"bytes\") 67)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 78)) (totalSupply (literal (intOrNat 0) 98)) (underlyingBalance (literal (nat 0) 119)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 135) \"unit\" 136) (set (operations 140) (cons (transfer (unit) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) (openVariant (contract \"\" \"unit\" (source) 140) \"Some\" \"None\" 140) 140) (operations 140) 140) 140) (set (operations 156) (cons (transfer (tuple 156 (to_address (self) \"None\") (tuple 156 (literal (intOrNat 1) 156) (add_seconds (now) (literal (int 3600) 148) 148))) (sub (balance) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) 143) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 153) 151) \"Some\" \"None\" 151) 156) (operations 156) 156) 156) (set (operations 166) (cons (transfer (unit) (literal (mutez 0) 166) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 161) \"Some\" \"None\" 161) 166) (operations 166) 166) 166))) (deposit True ((set_type (params 195) \"nat\" 196) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 199) 199) (literal (string \"bad state\") 199) 199) (set (attr (data) \"state\" 199) (literal (intOrNat 3) 202) 202) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"Some\" (params 195) 203) 203) (set (attr (data) \"savedState_depositor\" 204) (variant \"Some\" (sender) 204) 204) (set (operations 213) (cons (transfer (tuple 213 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 207)) (literal (mutez 0) 213) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 208) \"Some\" \"None\" 208) 213) (operations 213) 213) 213))) (deposit_callback True ((set_type (params 217) \"nat\" 218) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 221) (literal (string \"bad sender\") 221) 221) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 3) 224) 224) (literal (string \"bad state\") 224) 224) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 203) \"Some\" \"None\" 227) 227) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 228) (literal (intOrNat 1000000000000000000) 228) 228) 228) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 229) 229) ((defineLocal \"newUnderlyingBalance\" (add (params 217) (getLocal \"tokensToDeposit\" 230) 230) 230) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 231) (literal (intOrNat 1000000000000000000) 231) 231) (getLocal \"newUnderlyingBalance\" 231) 231) 231) (set (getLocal \"newTokens\" 1171) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 232) (attr (data) \"totalSupply\" 96) 232) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 232) (getLocal \"fractionOfPoolOwnership\" 232) 232) 232) \"Some\" \"None\" 232) 232) 232)) 229) (set (attr (data) \"underlyingBalance\" 235) (add (params 217) (getLocal \"tokensToDeposit\" 235) 235) 235) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 204) \"Some\" \"None\" 238) 238) (set (operations 249) (cons (transfer (record 239 (from_ (getLocal \"depositor\" 240)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 242))) (literal (mutez 0) 249) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 244) \"Some\" \"None\" 244) 249) (operations 249) 249) 249) (set (operations 261) (cons (transfer (record 252 (address (getLocal \"depositor\" 253)) (value (getLocal \"newTokens\" 254))) (literal (mutez 0) 261) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 256) \"Some\" \"None\" 256) 261) (operations 261) 261) 261) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 264) 264) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"None\" (unit) -1) 265) (set (attr (data) \"savedState_depositor\" 204) (variant \"None\" (unit) -1) 266))) (getAdministrator True ((bind \"__s145\" ((set_type (first (params 108) 1171) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 1171) (contract \"address\") 1171) (set (operations 1171) (cons (transfer (getLocal \"__s145\" 1171) (literal (mutez 0) 1171) (second (params 108) 1171) 108) (operations 1171) 1171) 1171))) (getAllowance True ((bind \"__s146\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 1171) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 1171) \"spender\" 69) 69) 69))) (set_type (second (params 68) 1171) (contract \"nat\") 1171) (set (operations 1171) (cons (transfer (getLocal \"__s146\" 1171) (literal (mutez 0) 1171) (second (params 68) 1171) 68) (operations 1171) 1171) 1171))) (getBalance True ((bind \"__s147\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 1171) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 1171) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 1171) 65) \"balance\" 65) 65))) (set_type (second (params 60) 1171) (contract \"nat\") 1171) (set (operations 1171) (cons (transfer (getLocal \"__s147\" 1171) (literal (mutez 0) 1171) (second (params 60) 1171) 60) (operations 1171) 1171) 1171))) (getTotalSupply True ((bind \"__s148\" ((set_type (first (params 72) 1171) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 1171) (contract \"nat\") 1171) (set (operations 1171) (cons (transfer (getLocal \"__s148\" 1171) (literal (mutez 0) 1171) (second (params 72) 1171) 72) (operations 1171) 1171) 1171))) (liquidate True ((set_type (params 170) \"address\" 171) (set (operations 179) (cons (transfer (params 170) (literal (mutez 0) 179) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 176) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179) (set (operations 187) (cons (transfer (unit) (literal (mutez 0) 187) (openVariant (contract \"liquidate\" \"unit\" (params 170) 182) \"Some\" \"None\" 182) 187) (operations 187) 187) 187))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 270) \"nat\" 271) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 274) 274) (literal (string \"bad state\") 274) 274) (set (attr (data) \"state\" 199) (literal (intOrNat 2) 277) 277) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"Some\" (params 270) 278) 278) (set (attr (data) \"savedState_redeemer\" 279) (variant \"Some\" (sender) 279) 279) (set (operations 288) (cons (transfer (tuple 288 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 282)) (literal (mutez 0) 288) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 283) \"Some\" \"None\" 283) 288) (operations 288) 288) 288))) (redeem_callback True ((set_type (params 292) \"nat\" 293) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 296) (literal (string \"bad sender\") 296) 296) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 2) 299) 299) (literal (string \"bad state\") 299) 299) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 278) \"Some\" \"None\" 302) 302) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 303) (literal (intOrNat 1000000000000000000) 303) 303) (attr (data) \"totalSupply\" 96) 303) 303) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 304) (params 292) 304) (literal (intOrNat 1000000000000000000) 304) 304) 304) (set (attr (data) \"underlyingBalance\" 235) (openVariant (isNat (sub (params 292) (getLocal \"tokensToReceive\" 307) 307) 307) \"Some\" \"None\" 307) 307) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 279) \"Some\" \"None\" 310) 310) (set (operations 320) (cons (transfer (record 311 (address (getLocal \"redeemer\" 312)) (value (getLocal \"tokensToRedeem\" 313))) (literal (mutez 0) 320) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 315) \"Some\" \"None\" 315) 320) (operations 320) 320) 320) (set (operations 333) (cons (transfer (record 323 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 325)) (value (getLocal \"tokensToReceive\" 326))) (literal (mutez 0) 333) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 328) \"Some\" \"None\" 328) 333) (operations 333) 333) 333) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 336) 336) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"None\" (unit) -1) 337) (set (attr (data) \"savedState_redeemer\" 279) (variant \"None\" (unit) -1) 338))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 346) \"unit\" 347) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 350) 350) (literal (string \"bad state\") 350) 350) (set (attr (data) \"state\" 199) (literal (intOrNat 1) 353) 353) (set (operations 362) (cons (transfer (tuple 362 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 356)) (literal (mutez 0) 362) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 357) \"Some\" \"None\" 357) 362) (operations 362) 362) 362))) (updateBalance_callback True ((set_type (params 366) \"nat\" 367) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 370) (literal (string \"bad sender\") 370) 370) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 1) 373) 373) (literal (string \"bad state\") 373) 373) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 376) 376) (set (attr (data) \"underlyingBalance\" 235) (params 366) 379))) (updateContractMetadata True ((set_type (params 419) (tuple \"string\" \"bytes\") 420) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 422) (literal (string \"not governor\") 422) 422) (set (getItem (attr (data) \"metadata\" 426) (first (params 419) 424) 426) (second (params 419) 425) 426))) (updateDexterAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"dexterAddress\" 153) (params 403) 407))) (updateGovernorAddress True ((set_type (params 387) \"address\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"governorAddress\" 422) (params 387) 391))) (updateOvenRegistryAddress True ((set_type (params 411) \"address\" 412) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 414) (literal (string \"not governor\") 414) 414) (set (attr (data) \"ovenRegistryAddress\" 176) (params 411) 415))) (updateRewardPercent True ((set_type (params 395) \"nat\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"rewardPercent\" 139) (params 395) 399))) (updateTokenMetadata True ((set_type (params 430) (tuple \"nat\" (map \"string\" \"bytes\")) 431) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 433) (literal (string \"not governor\") 433) 433) (set (getItem (attr (data) \"token_metadata\" 434) (literal (intOrNat 0) 434) 434) (params 430) 434))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1171, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1176 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)) (value (literal (nat 10) 1174)))", "line_no": 1175, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1175)", "show": true, "valid": "(literal (bool True) 1175)", "voting_powers": "(map 1175 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1187 (address (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)) (value (literal (nat 40) 1185)))", "line_no": 1186, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1186)", "show": true, "valid": "(literal (bool True) 1186)", "voting_powers": "(map 1186 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 1197 (spender (literal (local-address (static_id 1 98)) 98)) (value (literal (nat 10) 1174)))", "line_no": 1196, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1196)", "show": true, "valid": "(literal (bool True) 1196)", "voting_powers": "(map 1196 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 1207 (spender (literal (local-address (static_id 1 98)) 98)) (value (literal (nat 40) 1185)))", "line_no": 1206, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1206)", "show": true, "valid": "(literal (bool True) 1206)", "voting_powers": "(map 1206 )", "export": true}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "deposit", "params": "(literal (nat 10) 1174)", "line_no": 1216, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1216)", "show": true, "valid": "(literal (bool True) 1216)", "voting_powers": "(map 1216 )", "export": true}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "deposit", "params": "(literal (nat 40) 1185)", "line_no": 1222, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1222)", "show": true, "valid": "(literal (bool True) 1222)", "voting_powers": "(map 1222 )", "export": true}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 1206) \"balances\" 1229) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 1229) \"balance\" 1229) (literal (nat 0) 1229) 1229)", "line_no": 1229}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 98) 1222) \"balances\" 1230) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 1230) \"balance\" 1230) (mul (literal (nat 10) 1174) (literal (intOrNat 1000000000000000000) 1230) 1230) 1230)", "line_no": 1230}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 1206) \"balances\" 1229) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22) 1233) \"balance\" 1233) (literal (nat 0) 1233) 1233)", "line_no": 1233}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 98) 1222) \"balances\" 1230) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22) 1234) \"balance\" 1234) (mul (mul (literal (nat 10) 1174) (literal (intOrNat 4) 1234) 1234) (literal (intOrNat 1000000000000000000) 1234) 1234) 1234)", "line_no": 1234}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 98) 1222) \"totalSupply\" 1237) (mul (add (literal (nat 10) 1174) (literal (nat 40) 1185) 1237) (literal (intOrNat 1000000000000000000) 1237) 1237) 1237)", "line_no": 1237}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 1206) \"balances\" 1229) (literal (local-address (static_id 1 98)) 98) 1240) \"balance\" 1240) (add (literal (nat 10) 1174) (literal (nat 40) 1185) 1240) 1240)", "line_no": 1240}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 98) 1222) \"underlyingBalance\" 1241) (add (literal (nat 10) 1174) (literal (nat 40) 1185) 1241) 1241)", "line_no": 1241}], "decompile": false, "kind": "test"}, {"shortname": "deposit_-_can_deposit_from_two_accounts_-_reversed", "longname": "deposit - can deposit from two accounts - reversed", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 255) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s149\" ((set_type (first (params 89) 1251) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 1251) (contract \"address\") 1251) (set (operations 1251) (cons (transfer (getLocal \"__s149\" 1251) (literal (mutez 0) 1251) (second (params 89) 1251) 89) (operations 1251) 1251) 1251))) (getAllowance True ((bind \"__s150\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 1251) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 1251) \"spender\" 46) 46) 46))) (set_type (second (params 45) 1251) (contract \"nat\") 1251) (set (operations 1251) (cons (transfer (getLocal \"__s150\" 1251) (literal (mutez 0) 1251) (second (params 45) 1251) 45) (operations 1251) 1251) 1251))) (getBalance True ((bind \"__s151\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 1251) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 1251) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 1251) 42) \"balance\" 42) 42))) (set_type (second (params 37) 1251) (contract \"nat\") 1251) (set (operations 1251) (cons (transfer (getLocal \"__s151\" 1251) (literal (mutez 0) 1251) (second (params 37) 1251) 37) (operations 1251) 1251) 1251))) (getTotalSupply True ((bind \"__s152\" ((set_type (first (params 49) 1251) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 1251) (contract \"nat\") 1251) (set (operations 1251) (cons (transfer (getLocal \"__s152\" 1251) (literal (mutez 0) 1251) (second (params 49) 1251) 49) (operations 1251) 1251) 1251))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1251, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 98)", "export": "(storage (record 98 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 102 ) (bigmap (unknown 256) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 102)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 89 ((literal (string \"\") 1257) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 91)) ((literal (string \"data\") 1257) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 88))) (bigmap \"string\" \"bytes\") 89)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 98)) (rewardPercent (literal (nat 1) 54)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 98)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 78 ((literal (nat 0) 65) (tuple 1257 (literal (nat 0) 65) (type_annotation (map 67 ((literal (string \"name\") 1257) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 69)) ((literal (string \"decimals\") 1257) (literal (bytes \"0x3138\") 70)) ((literal (string \"symbol\") 1257) (literal (bytes \"0x6465787465724c6b555344\") 71)) ((literal (string \"icon\") 1257) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 72))) (map \"string\" \"bytes\") 67)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 78)) (totalSupply (literal (intOrNat 0) 98)) (underlyingBalance (literal (nat 0) 119)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 135) \"unit\" 136) (set (operations 140) (cons (transfer (unit) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) (openVariant (contract \"\" \"unit\" (source) 140) \"Some\" \"None\" 140) 140) (operations 140) 140) 140) (set (operations 156) (cons (transfer (tuple 156 (to_address (self) \"None\") (tuple 156 (literal (intOrNat 1) 156) (add_seconds (now) (literal (int 3600) 148) 148))) (sub (balance) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) 143) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 153) 151) \"Some\" \"None\" 151) 156) (operations 156) 156) 156) (set (operations 166) (cons (transfer (unit) (literal (mutez 0) 166) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 161) \"Some\" \"None\" 161) 166) (operations 166) 166) 166))) (deposit True ((set_type (params 195) \"nat\" 196) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 199) 199) (literal (string \"bad state\") 199) 199) (set (attr (data) \"state\" 199) (literal (intOrNat 3) 202) 202) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"Some\" (params 195) 203) 203) (set (attr (data) \"savedState_depositor\" 204) (variant \"Some\" (sender) 204) 204) (set (operations 213) (cons (transfer (tuple 213 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 207)) (literal (mutez 0) 213) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 208) \"Some\" \"None\" 208) 213) (operations 213) 213) 213))) (deposit_callback True ((set_type (params 217) \"nat\" 218) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 221) (literal (string \"bad sender\") 221) 221) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 3) 224) 224) (literal (string \"bad state\") 224) 224) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 203) \"Some\" \"None\" 227) 227) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 228) (literal (intOrNat 1000000000000000000) 228) 228) 228) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 229) 229) ((defineLocal \"newUnderlyingBalance\" (add (params 217) (getLocal \"tokensToDeposit\" 230) 230) 230) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 231) (literal (intOrNat 1000000000000000000) 231) 231) (getLocal \"newUnderlyingBalance\" 231) 231) 231) (set (getLocal \"newTokens\" 1257) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 232) (attr (data) \"totalSupply\" 96) 232) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 232) (getLocal \"fractionOfPoolOwnership\" 232) 232) 232) \"Some\" \"None\" 232) 232) 232)) 229) (set (attr (data) \"underlyingBalance\" 235) (add (params 217) (getLocal \"tokensToDeposit\" 235) 235) 235) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 204) \"Some\" \"None\" 238) 238) (set (operations 249) (cons (transfer (record 239 (from_ (getLocal \"depositor\" 240)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 242))) (literal (mutez 0) 249) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 244) \"Some\" \"None\" 244) 249) (operations 249) 249) 249) (set (operations 261) (cons (transfer (record 252 (address (getLocal \"depositor\" 253)) (value (getLocal \"newTokens\" 254))) (literal (mutez 0) 261) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 256) \"Some\" \"None\" 256) 261) (operations 261) 261) 261) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 264) 264) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"None\" (unit) -1) 265) (set (attr (data) \"savedState_depositor\" 204) (variant \"None\" (unit) -1) 266))) (getAdministrator True ((bind \"__s153\" ((set_type (first (params 108) 1257) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 1257) (contract \"address\") 1257) (set (operations 1257) (cons (transfer (getLocal \"__s153\" 1257) (literal (mutez 0) 1257) (second (params 108) 1257) 108) (operations 1257) 1257) 1257))) (getAllowance True ((bind \"__s154\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 1257) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 1257) \"spender\" 69) 69) 69))) (set_type (second (params 68) 1257) (contract \"nat\") 1257) (set (operations 1257) (cons (transfer (getLocal \"__s154\" 1257) (literal (mutez 0) 1257) (second (params 68) 1257) 68) (operations 1257) 1257) 1257))) (getBalance True ((bind \"__s155\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 1257) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 1257) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 1257) 65) \"balance\" 65) 65))) (set_type (second (params 60) 1257) (contract \"nat\") 1257) (set (operations 1257) (cons (transfer (getLocal \"__s155\" 1257) (literal (mutez 0) 1257) (second (params 60) 1257) 60) (operations 1257) 1257) 1257))) (getTotalSupply True ((bind \"__s156\" ((set_type (first (params 72) 1257) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 1257) (contract \"nat\") 1257) (set (operations 1257) (cons (transfer (getLocal \"__s156\" 1257) (literal (mutez 0) 1257) (second (params 72) 1257) 72) (operations 1257) 1257) 1257))) (liquidate True ((set_type (params 170) \"address\" 171) (set (operations 179) (cons (transfer (params 170) (literal (mutez 0) 179) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 176) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179) (set (operations 187) (cons (transfer (unit) (literal (mutez 0) 187) (openVariant (contract \"liquidate\" \"unit\" (params 170) 182) \"Some\" \"None\" 182) 187) (operations 187) 187) 187))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 270) \"nat\" 271) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 274) 274) (literal (string \"bad state\") 274) 274) (set (attr (data) \"state\" 199) (literal (intOrNat 2) 277) 277) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"Some\" (params 270) 278) 278) (set (attr (data) \"savedState_redeemer\" 279) (variant \"Some\" (sender) 279) 279) (set (operations 288) (cons (transfer (tuple 288 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 282)) (literal (mutez 0) 288) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 283) \"Some\" \"None\" 283) 288) (operations 288) 288) 288))) (redeem_callback True ((set_type (params 292) \"nat\" 293) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 296) (literal (string \"bad sender\") 296) 296) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 2) 299) 299) (literal (string \"bad state\") 299) 299) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 278) \"Some\" \"None\" 302) 302) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 303) (literal (intOrNat 1000000000000000000) 303) 303) (attr (data) \"totalSupply\" 96) 303) 303) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 304) (params 292) 304) (literal (intOrNat 1000000000000000000) 304) 304) 304) (set (attr (data) \"underlyingBalance\" 235) (openVariant (isNat (sub (params 292) (getLocal \"tokensToReceive\" 307) 307) 307) \"Some\" \"None\" 307) 307) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 279) \"Some\" \"None\" 310) 310) (set (operations 320) (cons (transfer (record 311 (address (getLocal \"redeemer\" 312)) (value (getLocal \"tokensToRedeem\" 313))) (literal (mutez 0) 320) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 315) \"Some\" \"None\" 315) 320) (operations 320) 320) 320) (set (operations 333) (cons (transfer (record 323 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 325)) (value (getLocal \"tokensToReceive\" 326))) (literal (mutez 0) 333) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 328) \"Some\" \"None\" 328) 333) (operations 333) 333) 333) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 336) 336) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"None\" (unit) -1) 337) (set (attr (data) \"savedState_redeemer\" 279) (variant \"None\" (unit) -1) 338))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 346) \"unit\" 347) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 350) 350) (literal (string \"bad state\") 350) 350) (set (attr (data) \"state\" 199) (literal (intOrNat 1) 353) 353) (set (operations 362) (cons (transfer (tuple 362 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 356)) (literal (mutez 0) 362) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 357) \"Some\" \"None\" 357) 362) (operations 362) 362) 362))) (updateBalance_callback True ((set_type (params 366) \"nat\" 367) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 370) (literal (string \"bad sender\") 370) 370) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 1) 373) 373) (literal (string \"bad state\") 373) 373) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 376) 376) (set (attr (data) \"underlyingBalance\" 235) (params 366) 379))) (updateContractMetadata True ((set_type (params 419) (tuple \"string\" \"bytes\") 420) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 422) (literal (string \"not governor\") 422) 422) (set (getItem (attr (data) \"metadata\" 426) (first (params 419) 424) 426) (second (params 419) 425) 426))) (updateDexterAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"dexterAddress\" 153) (params 403) 407))) (updateGovernorAddress True ((set_type (params 387) \"address\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"governorAddress\" 422) (params 387) 391))) (updateOvenRegistryAddress True ((set_type (params 411) \"address\" 412) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 414) (literal (string \"not governor\") 414) 414) (set (attr (data) \"ovenRegistryAddress\" 176) (params 411) 415))) (updateRewardPercent True ((set_type (params 395) \"nat\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"rewardPercent\" 139) (params 395) 399))) (updateTokenMetadata True ((set_type (params 430) (tuple \"nat\" (map \"string\" \"bytes\")) 431) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 433) (literal (string \"not governor\") 433) 433) (set (getItem (attr (data) \"token_metadata\" 434) (literal (intOrNat 0) 434) 434) (params 430) 434))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1257, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1262 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)) (value (literal (nat 10) 1260)))", "line_no": 1261, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1261)", "show": true, "valid": "(literal (bool True) 1261)", "voting_powers": "(map 1261 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1273 (address (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)) (value (literal (nat 40) 1271)))", "line_no": 1272, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1272)", "show": true, "valid": "(literal (bool True) 1272)", "voting_powers": "(map 1272 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 1283 (spender (literal (local-address (static_id 1 98)) 98)) (value (literal (nat 10) 1260)))", "line_no": 1282, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1282)", "show": true, "valid": "(literal (bool True) 1282)", "voting_powers": "(map 1282 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 1293 (spender (literal (local-address (static_id 1 98)) 98)) (value (literal (nat 40) 1271)))", "line_no": 1292, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1292)", "show": true, "valid": "(literal (bool True) 1292)", "voting_powers": "(map 1292 )", "export": true}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "deposit", "params": "(literal (nat 40) 1271)", "line_no": 1302, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1302)", "show": true, "valid": "(literal (bool True) 1302)", "voting_powers": "(map 1302 )", "export": true}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "deposit", "params": "(literal (nat 10) 1260)", "line_no": 1308, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1308)", "show": true, "valid": "(literal (bool True) 1308)", "voting_powers": "(map 1308 )", "export": true}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 1292) \"balances\" 1315) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 1315) \"balance\" 1315) (literal (nat 0) 1315) 1315)", "line_no": 1315}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 98) 1308) \"balances\" 1316) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 1316) \"balance\" 1316) (mul (literal (nat 10) 1260) (literal (intOrNat 1000000000000000000) 1316) 1316) 1316)", "line_no": 1316}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 1292) \"balances\" 1315) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22) 1319) \"balance\" 1319) (literal (nat 0) 1319) 1319)", "line_no": 1319}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 98) 1308) \"balances\" 1316) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22) 1320) \"balance\" 1320) (mul (mul (literal (nat 10) 1260) (literal (intOrNat 4) 1320) 1320) (literal (intOrNat 1000000000000000000) 1320) 1320) 1320)", "line_no": 1320}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 98) 1308) \"totalSupply\" 1323) (mul (add (literal (nat 10) 1260) (literal (nat 40) 1271) 1323) (literal (intOrNat 1000000000000000000) 1323) 1323) 1323)", "line_no": 1323}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 1292) \"balances\" 1315) (literal (local-address (static_id 1 98)) 98) 1326) \"balance\" 1326) (add (literal (nat 10) 1260) (literal (nat 40) 1271) 1326) 1326)", "line_no": 1326}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 98) 1308) \"underlyingBalance\" 1327) (add (literal (nat 10) 1260) (literal (nat 40) 1271) 1327) 1327)", "line_no": 1327}], "decompile": false, "kind": "test"}, {"shortname": "deposit_-_successfully_mints_LP_tokens_after_additional_liquidity_is_deposited_in_the_pool", "longname": "deposit - successfully mints LP tokens after additional liquidity is deposited in the pool", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 266) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s157\" ((set_type (first (params 89) 1337) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 1337) (contract \"address\") 1337) (set (operations 1337) (cons (transfer (getLocal \"__s157\" 1337) (literal (mutez 0) 1337) (second (params 89) 1337) 89) (operations 1337) 1337) 1337))) (getAllowance True ((bind \"__s158\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 1337) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 1337) \"spender\" 46) 46) 46))) (set_type (second (params 45) 1337) (contract \"nat\") 1337) (set (operations 1337) (cons (transfer (getLocal \"__s158\" 1337) (literal (mutez 0) 1337) (second (params 45) 1337) 45) (operations 1337) 1337) 1337))) (getBalance True ((bind \"__s159\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 1337) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 1337) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 1337) 42) \"balance\" 42) 42))) (set_type (second (params 37) 1337) (contract \"nat\") 1337) (set (operations 1337) (cons (transfer (getLocal \"__s159\" 1337) (literal (mutez 0) 1337) (second (params 37) 1337) 37) (operations 1337) 1337) 1337))) (getTotalSupply True ((bind \"__s160\" ((set_type (first (params 49) 1337) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 1337) (contract \"nat\") 1337) (set (operations 1337) (cons (transfer (getLocal \"__s160\" 1337) (literal (mutez 0) 1337) (second (params 49) 1337) 49) (operations 1337) 1337) 1337))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1337, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 98)", "export": "(storage (record 98 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 102 ) (bigmap (unknown 267) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 102)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 89 ((literal (string \"\") 1343) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 91)) ((literal (string \"data\") 1343) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 88))) (bigmap \"string\" \"bytes\") 89)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 98)) (rewardPercent (literal (nat 1) 54)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 98)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 78 ((literal (nat 0) 65) (tuple 1343 (literal (nat 0) 65) (type_annotation (map 67 ((literal (string \"name\") 1343) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 69)) ((literal (string \"decimals\") 1343) (literal (bytes \"0x3138\") 70)) ((literal (string \"symbol\") 1343) (literal (bytes \"0x6465787465724c6b555344\") 71)) ((literal (string \"icon\") 1343) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 72))) (map \"string\" \"bytes\") 67)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 78)) (totalSupply (literal (intOrNat 0) 98)) (underlyingBalance (literal (nat 0) 119)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 135) \"unit\" 136) (set (operations 140) (cons (transfer (unit) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) (openVariant (contract \"\" \"unit\" (source) 140) \"Some\" \"None\" 140) 140) (operations 140) 140) 140) (set (operations 156) (cons (transfer (tuple 156 (to_address (self) \"None\") (tuple 156 (literal (intOrNat 1) 156) (add_seconds (now) (literal (int 3600) 148) 148))) (sub (balance) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) 143) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 153) 151) \"Some\" \"None\" 151) 156) (operations 156) 156) 156) (set (operations 166) (cons (transfer (unit) (literal (mutez 0) 166) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 161) \"Some\" \"None\" 161) 166) (operations 166) 166) 166))) (deposit True ((set_type (params 195) \"nat\" 196) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 199) 199) (literal (string \"bad state\") 199) 199) (set (attr (data) \"state\" 199) (literal (intOrNat 3) 202) 202) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"Some\" (params 195) 203) 203) (set (attr (data) \"savedState_depositor\" 204) (variant \"Some\" (sender) 204) 204) (set (operations 213) (cons (transfer (tuple 213 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 207)) (literal (mutez 0) 213) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 208) \"Some\" \"None\" 208) 213) (operations 213) 213) 213))) (deposit_callback True ((set_type (params 217) \"nat\" 218) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 221) (literal (string \"bad sender\") 221) 221) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 3) 224) 224) (literal (string \"bad state\") 224) 224) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 203) \"Some\" \"None\" 227) 227) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 228) (literal (intOrNat 1000000000000000000) 228) 228) 228) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 229) 229) ((defineLocal \"newUnderlyingBalance\" (add (params 217) (getLocal \"tokensToDeposit\" 230) 230) 230) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 231) (literal (intOrNat 1000000000000000000) 231) 231) (getLocal \"newUnderlyingBalance\" 231) 231) 231) (set (getLocal \"newTokens\" 1343) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 232) (attr (data) \"totalSupply\" 96) 232) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 232) (getLocal \"fractionOfPoolOwnership\" 232) 232) 232) \"Some\" \"None\" 232) 232) 232)) 229) (set (attr (data) \"underlyingBalance\" 235) (add (params 217) (getLocal \"tokensToDeposit\" 235) 235) 235) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 204) \"Some\" \"None\" 238) 238) (set (operations 249) (cons (transfer (record 239 (from_ (getLocal \"depositor\" 240)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 242))) (literal (mutez 0) 249) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 244) \"Some\" \"None\" 244) 249) (operations 249) 249) 249) (set (operations 261) (cons (transfer (record 252 (address (getLocal \"depositor\" 253)) (value (getLocal \"newTokens\" 254))) (literal (mutez 0) 261) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 256) \"Some\" \"None\" 256) 261) (operations 261) 261) 261) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 264) 264) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"None\" (unit) -1) 265) (set (attr (data) \"savedState_depositor\" 204) (variant \"None\" (unit) -1) 266))) (getAdministrator True ((bind \"__s161\" ((set_type (first (params 108) 1343) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 1343) (contract \"address\") 1343) (set (operations 1343) (cons (transfer (getLocal \"__s161\" 1343) (literal (mutez 0) 1343) (second (params 108) 1343) 108) (operations 1343) 1343) 1343))) (getAllowance True ((bind \"__s162\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 1343) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 1343) \"spender\" 69) 69) 69))) (set_type (second (params 68) 1343) (contract \"nat\") 1343) (set (operations 1343) (cons (transfer (getLocal \"__s162\" 1343) (literal (mutez 0) 1343) (second (params 68) 1343) 68) (operations 1343) 1343) 1343))) (getBalance True ((bind \"__s163\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 1343) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 1343) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 1343) 65) \"balance\" 65) 65))) (set_type (second (params 60) 1343) (contract \"nat\") 1343) (set (operations 1343) (cons (transfer (getLocal \"__s163\" 1343) (literal (mutez 0) 1343) (second (params 60) 1343) 60) (operations 1343) 1343) 1343))) (getTotalSupply True ((bind \"__s164\" ((set_type (first (params 72) 1343) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 1343) (contract \"nat\") 1343) (set (operations 1343) (cons (transfer (getLocal \"__s164\" 1343) (literal (mutez 0) 1343) (second (params 72) 1343) 72) (operations 1343) 1343) 1343))) (liquidate True ((set_type (params 170) \"address\" 171) (set (operations 179) (cons (transfer (params 170) (literal (mutez 0) 179) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 176) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179) (set (operations 187) (cons (transfer (unit) (literal (mutez 0) 187) (openVariant (contract \"liquidate\" \"unit\" (params 170) 182) \"Some\" \"None\" 182) 187) (operations 187) 187) 187))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 270) \"nat\" 271) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 274) 274) (literal (string \"bad state\") 274) 274) (set (attr (data) \"state\" 199) (literal (intOrNat 2) 277) 277) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"Some\" (params 270) 278) 278) (set (attr (data) \"savedState_redeemer\" 279) (variant \"Some\" (sender) 279) 279) (set (operations 288) (cons (transfer (tuple 288 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 282)) (literal (mutez 0) 288) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 283) \"Some\" \"None\" 283) 288) (operations 288) 288) 288))) (redeem_callback True ((set_type (params 292) \"nat\" 293) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 296) (literal (string \"bad sender\") 296) 296) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 2) 299) 299) (literal (string \"bad state\") 299) 299) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 278) \"Some\" \"None\" 302) 302) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 303) (literal (intOrNat 1000000000000000000) 303) 303) (attr (data) \"totalSupply\" 96) 303) 303) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 304) (params 292) 304) (literal (intOrNat 1000000000000000000) 304) 304) 304) (set (attr (data) \"underlyingBalance\" 235) (openVariant (isNat (sub (params 292) (getLocal \"tokensToReceive\" 307) 307) 307) \"Some\" \"None\" 307) 307) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 279) \"Some\" \"None\" 310) 310) (set (operations 320) (cons (transfer (record 311 (address (getLocal \"redeemer\" 312)) (value (getLocal \"tokensToRedeem\" 313))) (literal (mutez 0) 320) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 315) \"Some\" \"None\" 315) 320) (operations 320) 320) 320) (set (operations 333) (cons (transfer (record 323 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 325)) (value (getLocal \"tokensToReceive\" 326))) (literal (mutez 0) 333) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 328) \"Some\" \"None\" 328) 333) (operations 333) 333) 333) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 336) 336) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"None\" (unit) -1) 337) (set (attr (data) \"savedState_redeemer\" 279) (variant \"None\" (unit) -1) 338))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 346) \"unit\" 347) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 350) 350) (literal (string \"bad state\") 350) 350) (set (attr (data) \"state\" 199) (literal (intOrNat 1) 353) 353) (set (operations 362) (cons (transfer (tuple 362 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 356)) (literal (mutez 0) 362) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 357) \"Some\" \"None\" 357) 362) (operations 362) 362) 362))) (updateBalance_callback True ((set_type (params 366) \"nat\" 367) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 370) (literal (string \"bad sender\") 370) 370) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 1) 373) 373) (literal (string \"bad state\") 373) 373) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 376) 376) (set (attr (data) \"underlyingBalance\" 235) (params 366) 379))) (updateContractMetadata True ((set_type (params 419) (tuple \"string\" \"bytes\") 420) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 422) (literal (string \"not governor\") 422) 422) (set (getItem (attr (data) \"metadata\" 426) (first (params 419) 424) 426) (second (params 419) 425) 426))) (updateDexterAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"dexterAddress\" 153) (params 403) 407))) (updateGovernorAddress True ((set_type (params 387) \"address\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"governorAddress\" 422) (params 387) 391))) (updateOvenRegistryAddress True ((set_type (params 411) \"address\" 412) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 414) (literal (string \"not governor\") 414) 414) (set (attr (data) \"ovenRegistryAddress\" 176) (params 411) 415))) (updateRewardPercent True ((set_type (params 395) \"nat\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"rewardPercent\" 139) (params 395) 399))) (updateTokenMetadata True ((set_type (params 430) (tuple \"nat\" (map \"string\" \"bytes\")) 431) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 433) (literal (string \"not governor\") 433) 433) (set (getItem (attr (data) \"token_metadata\" 434) (literal (intOrNat 0) 434) 434) (params 430) 434))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1343, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1348 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)) (value (literal (nat 10) 1346)))", "line_no": 1347, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1347)", "show": true, "valid": "(literal (bool True) 1347)", "voting_powers": "(map 1347 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1359 (address (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)) (value (literal (nat 40) 1357)))", "line_no": 1358, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1358)", "show": true, "valid": "(literal (bool True) 1358)", "voting_powers": "(map 1358 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1370 (address (literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 23)) (value (literal (nat 60) 1368)))", "line_no": 1369, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1369)", "show": true, "valid": "(literal (bool True) 1369)", "voting_powers": "(map 1369 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 1380 (spender (literal (local-address (static_id 1 98)) 98)) (value (literal (nat 10) 1346)))", "line_no": 1379, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1379)", "show": true, "valid": "(literal (bool True) 1379)", "voting_powers": "(map 1379 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 1390 (spender (literal (local-address (static_id 1 98)) 98)) (value (literal (nat 40) 1357)))", "line_no": 1389, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1389)", "show": true, "valid": "(literal (bool True) 1389)", "voting_powers": "(map 1389 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 1400 (spender (literal (local-address (static_id 1 98)) 98)) (value (literal (nat 60) 1368)))", "line_no": 1399, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 23)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1399)", "show": true, "valid": "(literal (bool True) 1399)", "voting_powers": "(map 1399 )", "export": true}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "deposit", "params": "(literal (nat 10) 1346)", "line_no": 1409, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1409)", "show": true, "valid": "(literal (bool True) 1409)", "voting_powers": "(map 1409 )", "export": true}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "deposit", "params": "(literal (nat 40) 1357)", "line_no": 1415, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1415)", "show": true, "valid": "(literal (bool True) 1415)", "voting_powers": "(map 1415 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1424 (address (literal (local-address (static_id 1 98)) 98)) (value (literal (intOrNat 10) 1424)))", "line_no": 1423, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1423)", "show": true, "valid": "(literal (bool True) 1423)", "voting_powers": "(map 1423 )", "export": true}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "updateBalance", "params": "(unit)", "line_no": 1433, "title": "", "messageClass": "", "source": "none", "sender": "none", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1433)", "show": true, "valid": "(literal (bool True) 1433)", "voting_powers": "(map 1433 )", "export": true}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "deposit", "params": "(literal (nat 60) 1368)", "line_no": 1436, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 23)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1436)", "show": true, "valid": "(literal (bool True) 1436)", "voting_powers": "(map 1436 )", "export": true}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 98) 1436) \"totalSupply\" 1443) (literal (intOrNat 100000000000000000000) 1443) 1443)", "line_no": 1443}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 1423) \"balances\" 1446) (literal (local-address (static_id 1 98)) 98) 1446) \"balance\" 1446) (literal (nat 120) 1446) 1446)", "line_no": 1446}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 98) 1436) \"underlyingBalance\" 1447) (literal (nat 120) 1447) 1447)", "line_no": 1447}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 98) 1436) \"balances\" 1450) (literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 23) 1450) \"balance\" 1450) (literal (intOrNat 50000000000000000000) 1450) 1450)", "line_no": 1450}], "decompile": false, "kind": "test"}, {"shortname": "deposit_-_successfully_mints_LP_tokens_after_additional_liquidity_is_deposited_in_the_pool_with_a_small_amount_of_tokens", "longname": "deposit - successfully mints LP tokens after additional liquidity is deposited in the pool with a small amount of tokens", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 277) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s165\" ((set_type (first (params 89) 1460) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 1460) (contract \"address\") 1460) (set (operations 1460) (cons (transfer (getLocal \"__s165\" 1460) (literal (mutez 0) 1460) (second (params 89) 1460) 89) (operations 1460) 1460) 1460))) (getAllowance True ((bind \"__s166\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 1460) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 1460) \"spender\" 46) 46) 46))) (set_type (second (params 45) 1460) (contract \"nat\") 1460) (set (operations 1460) (cons (transfer (getLocal \"__s166\" 1460) (literal (mutez 0) 1460) (second (params 45) 1460) 45) (operations 1460) 1460) 1460))) (getBalance True ((bind \"__s167\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 1460) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 1460) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 1460) 42) \"balance\" 42) 42))) (set_type (second (params 37) 1460) (contract \"nat\") 1460) (set (operations 1460) (cons (transfer (getLocal \"__s167\" 1460) (literal (mutez 0) 1460) (second (params 37) 1460) 37) (operations 1460) 1460) 1460))) (getTotalSupply True ((bind \"__s168\" ((set_type (first (params 49) 1460) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 1460) (contract \"nat\") 1460) (set (operations 1460) (cons (transfer (getLocal \"__s168\" 1460) (literal (mutez 0) 1460) (second (params 49) 1460) 49) (operations 1460) 1460) 1460))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1460, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 98)", "export": "(storage (record 98 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 102 ) (bigmap (unknown 278) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 102)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 89 ((literal (string \"\") 1466) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 91)) ((literal (string \"data\") 1466) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 88))) (bigmap \"string\" \"bytes\") 89)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 98)) (rewardPercent (literal (nat 1) 54)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 98)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 78 ((literal (nat 0) 65) (tuple 1466 (literal (nat 0) 65) (type_annotation (map 67 ((literal (string \"name\") 1466) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 69)) ((literal (string \"decimals\") 1466) (literal (bytes \"0x3138\") 70)) ((literal (string \"symbol\") 1466) (literal (bytes \"0x6465787465724c6b555344\") 71)) ((literal (string \"icon\") 1466) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 72))) (map \"string\" \"bytes\") 67)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 78)) (totalSupply (literal (intOrNat 0) 98)) (underlyingBalance (literal (nat 0) 119)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 135) \"unit\" 136) (set (operations 140) (cons (transfer (unit) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) (openVariant (contract \"\" \"unit\" (source) 140) \"Some\" \"None\" 140) 140) (operations 140) 140) 140) (set (operations 156) (cons (transfer (tuple 156 (to_address (self) \"None\") (tuple 156 (literal (intOrNat 1) 156) (add_seconds (now) (literal (int 3600) 148) 148))) (sub (balance) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) 143) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 153) 151) \"Some\" \"None\" 151) 156) (operations 156) 156) 156) (set (operations 166) (cons (transfer (unit) (literal (mutez 0) 166) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 161) \"Some\" \"None\" 161) 166) (operations 166) 166) 166))) (deposit True ((set_type (params 195) \"nat\" 196) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 199) 199) (literal (string \"bad state\") 199) 199) (set (attr (data) \"state\" 199) (literal (intOrNat 3) 202) 202) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"Some\" (params 195) 203) 203) (set (attr (data) \"savedState_depositor\" 204) (variant \"Some\" (sender) 204) 204) (set (operations 213) (cons (transfer (tuple 213 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 207)) (literal (mutez 0) 213) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 208) \"Some\" \"None\" 208) 213) (operations 213) 213) 213))) (deposit_callback True ((set_type (params 217) \"nat\" 218) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 221) (literal (string \"bad sender\") 221) 221) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 3) 224) 224) (literal (string \"bad state\") 224) 224) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 203) \"Some\" \"None\" 227) 227) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 228) (literal (intOrNat 1000000000000000000) 228) 228) 228) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 229) 229) ((defineLocal \"newUnderlyingBalance\" (add (params 217) (getLocal \"tokensToDeposit\" 230) 230) 230) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 231) (literal (intOrNat 1000000000000000000) 231) 231) (getLocal \"newUnderlyingBalance\" 231) 231) 231) (set (getLocal \"newTokens\" 1466) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 232) (attr (data) \"totalSupply\" 96) 232) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 232) (getLocal \"fractionOfPoolOwnership\" 232) 232) 232) \"Some\" \"None\" 232) 232) 232)) 229) (set (attr (data) \"underlyingBalance\" 235) (add (params 217) (getLocal \"tokensToDeposit\" 235) 235) 235) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 204) \"Some\" \"None\" 238) 238) (set (operations 249) (cons (transfer (record 239 (from_ (getLocal \"depositor\" 240)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 242))) (literal (mutez 0) 249) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 244) \"Some\" \"None\" 244) 249) (operations 249) 249) 249) (set (operations 261) (cons (transfer (record 252 (address (getLocal \"depositor\" 253)) (value (getLocal \"newTokens\" 254))) (literal (mutez 0) 261) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 256) \"Some\" \"None\" 256) 261) (operations 261) 261) 261) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 264) 264) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"None\" (unit) -1) 265) (set (attr (data) \"savedState_depositor\" 204) (variant \"None\" (unit) -1) 266))) (getAdministrator True ((bind \"__s169\" ((set_type (first (params 108) 1466) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 1466) (contract \"address\") 1466) (set (operations 1466) (cons (transfer (getLocal \"__s169\" 1466) (literal (mutez 0) 1466) (second (params 108) 1466) 108) (operations 1466) 1466) 1466))) (getAllowance True ((bind \"__s170\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 1466) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 1466) \"spender\" 69) 69) 69))) (set_type (second (params 68) 1466) (contract \"nat\") 1466) (set (operations 1466) (cons (transfer (getLocal \"__s170\" 1466) (literal (mutez 0) 1466) (second (params 68) 1466) 68) (operations 1466) 1466) 1466))) (getBalance True ((bind \"__s171\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 1466) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 1466) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 1466) 65) \"balance\" 65) 65))) (set_type (second (params 60) 1466) (contract \"nat\") 1466) (set (operations 1466) (cons (transfer (getLocal \"__s171\" 1466) (literal (mutez 0) 1466) (second (params 60) 1466) 60) (operations 1466) 1466) 1466))) (getTotalSupply True ((bind \"__s172\" ((set_type (first (params 72) 1466) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 1466) (contract \"nat\") 1466) (set (operations 1466) (cons (transfer (getLocal \"__s172\" 1466) (literal (mutez 0) 1466) (second (params 72) 1466) 72) (operations 1466) 1466) 1466))) (liquidate True ((set_type (params 170) \"address\" 171) (set (operations 179) (cons (transfer (params 170) (literal (mutez 0) 179) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 176) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179) (set (operations 187) (cons (transfer (unit) (literal (mutez 0) 187) (openVariant (contract \"liquidate\" \"unit\" (params 170) 182) \"Some\" \"None\" 182) 187) (operations 187) 187) 187))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 270) \"nat\" 271) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 274) 274) (literal (string \"bad state\") 274) 274) (set (attr (data) \"state\" 199) (literal (intOrNat 2) 277) 277) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"Some\" (params 270) 278) 278) (set (attr (data) \"savedState_redeemer\" 279) (variant \"Some\" (sender) 279) 279) (set (operations 288) (cons (transfer (tuple 288 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 282)) (literal (mutez 0) 288) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 283) \"Some\" \"None\" 283) 288) (operations 288) 288) 288))) (redeem_callback True ((set_type (params 292) \"nat\" 293) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 296) (literal (string \"bad sender\") 296) 296) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 2) 299) 299) (literal (string \"bad state\") 299) 299) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 278) \"Some\" \"None\" 302) 302) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 303) (literal (intOrNat 1000000000000000000) 303) 303) (attr (data) \"totalSupply\" 96) 303) 303) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 304) (params 292) 304) (literal (intOrNat 1000000000000000000) 304) 304) 304) (set (attr (data) \"underlyingBalance\" 235) (openVariant (isNat (sub (params 292) (getLocal \"tokensToReceive\" 307) 307) 307) \"Some\" \"None\" 307) 307) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 279) \"Some\" \"None\" 310) 310) (set (operations 320) (cons (transfer (record 311 (address (getLocal \"redeemer\" 312)) (value (getLocal \"tokensToRedeem\" 313))) (literal (mutez 0) 320) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 315) \"Some\" \"None\" 315) 320) (operations 320) 320) 320) (set (operations 333) (cons (transfer (record 323 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 325)) (value (getLocal \"tokensToReceive\" 326))) (literal (mutez 0) 333) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 328) \"Some\" \"None\" 328) 333) (operations 333) 333) 333) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 336) 336) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"None\" (unit) -1) 337) (set (attr (data) \"savedState_redeemer\" 279) (variant \"None\" (unit) -1) 338))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 346) \"unit\" 347) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 350) 350) (literal (string \"bad state\") 350) 350) (set (attr (data) \"state\" 199) (literal (intOrNat 1) 353) 353) (set (operations 362) (cons (transfer (tuple 362 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 356)) (literal (mutez 0) 362) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 357) \"Some\" \"None\" 357) 362) (operations 362) 362) 362))) (updateBalance_callback True ((set_type (params 366) \"nat\" 367) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 370) (literal (string \"bad sender\") 370) 370) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 1) 373) 373) (literal (string \"bad state\") 373) 373) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 376) 376) (set (attr (data) \"underlyingBalance\" 235) (params 366) 379))) (updateContractMetadata True ((set_type (params 419) (tuple \"string\" \"bytes\") 420) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 422) (literal (string \"not governor\") 422) 422) (set (getItem (attr (data) \"metadata\" 426) (first (params 419) 424) 426) (second (params 419) 425) 426))) (updateDexterAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"dexterAddress\" 153) (params 403) 407))) (updateGovernorAddress True ((set_type (params 387) \"address\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"governorAddress\" 422) (params 387) 391))) (updateOvenRegistryAddress True ((set_type (params 411) \"address\" 412) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 414) (literal (string \"not governor\") 414) 414) (set (attr (data) \"ovenRegistryAddress\" 176) (params 411) 415))) (updateRewardPercent True ((set_type (params 395) \"nat\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"rewardPercent\" 139) (params 395) 399))) (updateTokenMetadata True ((set_type (params 430) (tuple \"nat\" (map \"string\" \"bytes\")) 431) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 433) (literal (string \"not governor\") 433) 433) (set (getItem (attr (data) \"token_metadata\" 434) (literal (intOrNat 0) 434) 434) (params 430) 434))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1466, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1471 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)) (value (literal (nat 10) 1469)))", "line_no": 1470, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1470)", "show": true, "valid": "(literal (bool True) 1470)", "voting_powers": "(map 1470 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1482 (address (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)) (value (literal (nat 40) 1480)))", "line_no": 1481, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1481)", "show": true, "valid": "(literal (bool True) 1481)", "voting_powers": "(map 1481 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1493 (address (literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 23)) (value (literal (nat 20) 1491)))", "line_no": 1492, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1492)", "show": true, "valid": "(literal (bool True) 1492)", "voting_powers": "(map 1492 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 1503 (spender (literal (local-address (static_id 1 98)) 98)) (value (literal (nat 10) 1469)))", "line_no": 1502, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1502)", "show": true, "valid": "(literal (bool True) 1502)", "voting_powers": "(map 1502 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 1513 (spender (literal (local-address (static_id 1 98)) 98)) (value (literal (nat 40) 1480)))", "line_no": 1512, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1512)", "show": true, "valid": "(literal (bool True) 1512)", "voting_powers": "(map 1512 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 1523 (spender (literal (local-address (static_id 1 98)) 98)) (value (literal (nat 20) 1491)))", "line_no": 1522, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 23)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1522)", "show": true, "valid": "(literal (bool True) 1522)", "voting_powers": "(map 1522 )", "export": true}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "deposit", "params": "(literal (nat 10) 1469)", "line_no": 1532, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1532)", "show": true, "valid": "(literal (bool True) 1532)", "voting_powers": "(map 1532 )", "export": true}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "deposit", "params": "(literal (nat 40) 1480)", "line_no": 1538, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1538)", "show": true, "valid": "(literal (bool True) 1538)", "voting_powers": "(map 1538 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1547 (address (literal (local-address (static_id 1 98)) 98)) (value (literal (intOrNat 10) 1547)))", "line_no": 1546, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1546)", "show": true, "valid": "(literal (bool True) 1546)", "voting_powers": "(map 1546 )", "export": true}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "updateBalance", "params": "(unit)", "line_no": 1556, "title": "", "messageClass": "", "source": "none", "sender": "none", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1556)", "show": true, "valid": "(literal (bool True) 1556)", "voting_powers": "(map 1556 )", "export": true}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "deposit", "params": "(literal (nat 20) 1491)", "line_no": 1559, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 23)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1559)", "show": true, "valid": "(literal (bool True) 1559)", "voting_powers": "(map 1559 )", "export": true}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 98) 1559) \"totalSupply\" 1566) (literal (intOrNat 66666666666666666666) 1566) 1566)", "line_no": 1566}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 1546) \"balances\" 1569) (literal (local-address (static_id 1 98)) 98) 1569) \"balance\" 1569) (literal (nat 80) 1569) 1569)", "line_no": 1569}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 98) 1559) \"underlyingBalance\" 1570) (literal (nat 80) 1570) 1570)", "line_no": 1570}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 98) 1559) \"balances\" 1573) (literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 23) 1573) \"balance\" 1573) (literal (intOrNat 16666666666666666666) 1573) 1573)", "line_no": 1573}], "decompile": false, "kind": "test"}, {"shortname": "deposit_callback_-_can_finish_deposit", "longname": "deposit_callback - can finish deposit", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 288) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s173\" ((set_type (first (params 89) 1587) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 1587) (contract \"address\") 1587) (set (operations 1587) (cons (transfer (getLocal \"__s173\" 1587) (literal (mutez 0) 1587) (second (params 89) 1587) 89) (operations 1587) 1587) 1587))) (getAllowance True ((bind \"__s174\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 1587) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 1587) \"spender\" 46) 46) 46))) (set_type (second (params 45) 1587) (contract \"nat\") 1587) (set (operations 1587) (cons (transfer (getLocal \"__s174\" 1587) (literal (mutez 0) 1587) (second (params 45) 1587) 45) (operations 1587) 1587) 1587))) (getBalance True ((bind \"__s175\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 1587) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 1587) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 1587) 42) \"balance\" 42) 42))) (set_type (second (params 37) 1587) (contract \"nat\") 1587) (set (operations 1587) (cons (transfer (getLocal \"__s175\" 1587) (literal (mutez 0) 1587) (second (params 37) 1587) 37) (operations 1587) 1587) 1587))) (getTotalSupply True ((bind \"__s176\" ((set_type (first (params 49) 1587) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 1587) (contract \"nat\") 1587) (set (operations 1587) (cons (transfer (getLocal \"__s176\" 1587) (literal (mutez 0) 1587) (second (params 49) 1587) 49) (operations 1587) 1587) 1587))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1587, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1592 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)) (value (literal (nat 10) 1590)))", "line_no": 1591, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1591)", "show": true, "valid": "(literal (bool True) 1591)", "voting_powers": "(map 1591 )", "export": true}, {"action": "newContract", "id": "(static_id 1 98)", "export": "(storage (record 98 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 102 ) (bigmap (unknown 289) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 102)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 89 ((literal (string \"\") 1608) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 91)) ((literal (string \"data\") 1608) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 88))) (bigmap \"string\" \"bytes\") 89)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 98)) (rewardPercent (literal (nat 1) 54)) (savedState_depositor (variant \"Some\" (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 1603)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"Some\" (literal (nat 10) 1590) 1604)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 3) 98)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 78 ((literal (nat 0) 65) (tuple 1608 (literal (nat 0) 65) (type_annotation (map 67 ((literal (string \"name\") 1608) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 69)) ((literal (string \"decimals\") 1608) (literal (bytes \"0x3138\") 70)) ((literal (string \"symbol\") 1608) (literal (bytes \"0x6465787465724c6b555344\") 71)) ((literal (string \"icon\") 1608) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 72))) (map \"string\" \"bytes\") 67)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 78)) (totalSupply (literal (intOrNat 0) 98)) (underlyingBalance (literal (nat 0) 119)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 135) \"unit\" 136) (set (operations 140) (cons (transfer (unit) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) (openVariant (contract \"\" \"unit\" (source) 140) \"Some\" \"None\" 140) 140) (operations 140) 140) 140) (set (operations 156) (cons (transfer (tuple 156 (to_address (self) \"None\") (tuple 156 (literal (intOrNat 1) 156) (add_seconds (now) (literal (int 3600) 148) 148))) (sub (balance) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) 143) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 153) 151) \"Some\" \"None\" 151) 156) (operations 156) 156) 156) (set (operations 166) (cons (transfer (unit) (literal (mutez 0) 166) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 161) \"Some\" \"None\" 161) 166) (operations 166) 166) 166))) (deposit True ((set_type (params 195) \"nat\" 196) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 199) 199) (literal (string \"bad state\") 199) 199) (set (attr (data) \"state\" 199) (literal (intOrNat 3) 202) 202) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"Some\" (params 195) 203) 203) (set (attr (data) \"savedState_depositor\" 204) (variant \"Some\" (sender) 204) 204) (set (operations 213) (cons (transfer (tuple 213 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 207)) (literal (mutez 0) 213) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 208) \"Some\" \"None\" 208) 213) (operations 213) 213) 213))) (deposit_callback True ((set_type (params 217) \"nat\" 218) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 221) (literal (string \"bad sender\") 221) 221) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 3) 224) 224) (literal (string \"bad state\") 224) 224) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 203) \"Some\" \"None\" 227) 227) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 228) (literal (intOrNat 1000000000000000000) 228) 228) 228) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 229) 229) ((defineLocal \"newUnderlyingBalance\" (add (params 217) (getLocal \"tokensToDeposit\" 230) 230) 230) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 231) (literal (intOrNat 1000000000000000000) 231) 231) (getLocal \"newUnderlyingBalance\" 231) 231) 231) (set (getLocal \"newTokens\" 1608) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 232) (attr (data) \"totalSupply\" 96) 232) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 232) (getLocal \"fractionOfPoolOwnership\" 232) 232) 232) \"Some\" \"None\" 232) 232) 232)) 229) (set (attr (data) \"underlyingBalance\" 235) (add (params 217) (getLocal \"tokensToDeposit\" 235) 235) 235) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 204) \"Some\" \"None\" 238) 238) (set (operations 249) (cons (transfer (record 239 (from_ (getLocal \"depositor\" 240)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 242))) (literal (mutez 0) 249) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 244) \"Some\" \"None\" 244) 249) (operations 249) 249) 249) (set (operations 261) (cons (transfer (record 252 (address (getLocal \"depositor\" 253)) (value (getLocal \"newTokens\" 254))) (literal (mutez 0) 261) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 256) \"Some\" \"None\" 256) 261) (operations 261) 261) 261) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 264) 264) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"None\" (unit) -1) 265) (set (attr (data) \"savedState_depositor\" 204) (variant \"None\" (unit) -1) 266))) (getAdministrator True ((bind \"__s177\" ((set_type (first (params 108) 1608) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 1608) (contract \"address\") 1608) (set (operations 1608) (cons (transfer (getLocal \"__s177\" 1608) (literal (mutez 0) 1608) (second (params 108) 1608) 108) (operations 1608) 1608) 1608))) (getAllowance True ((bind \"__s178\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 1608) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 1608) \"spender\" 69) 69) 69))) (set_type (second (params 68) 1608) (contract \"nat\") 1608) (set (operations 1608) (cons (transfer (getLocal \"__s178\" 1608) (literal (mutez 0) 1608) (second (params 68) 1608) 68) (operations 1608) 1608) 1608))) (getBalance True ((bind \"__s179\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 1608) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 1608) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 1608) 65) \"balance\" 65) 65))) (set_type (second (params 60) 1608) (contract \"nat\") 1608) (set (operations 1608) (cons (transfer (getLocal \"__s179\" 1608) (literal (mutez 0) 1608) (second (params 60) 1608) 60) (operations 1608) 1608) 1608))) (getTotalSupply True ((bind \"__s180\" ((set_type (first (params 72) 1608) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 1608) (contract \"nat\") 1608) (set (operations 1608) (cons (transfer (getLocal \"__s180\" 1608) (literal (mutez 0) 1608) (second (params 72) 1608) 72) (operations 1608) 1608) 1608))) (liquidate True ((set_type (params 170) \"address\" 171) (set (operations 179) (cons (transfer (params 170) (literal (mutez 0) 179) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 176) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179) (set (operations 187) (cons (transfer (unit) (literal (mutez 0) 187) (openVariant (contract \"liquidate\" \"unit\" (params 170) 182) \"Some\" \"None\" 182) 187) (operations 187) 187) 187))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 270) \"nat\" 271) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 274) 274) (literal (string \"bad state\") 274) 274) (set (attr (data) \"state\" 199) (literal (intOrNat 2) 277) 277) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"Some\" (params 270) 278) 278) (set (attr (data) \"savedState_redeemer\" 279) (variant \"Some\" (sender) 279) 279) (set (operations 288) (cons (transfer (tuple 288 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 282)) (literal (mutez 0) 288) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 283) \"Some\" \"None\" 283) 288) (operations 288) 288) 288))) (redeem_callback True ((set_type (params 292) \"nat\" 293) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 296) (literal (string \"bad sender\") 296) 296) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 2) 299) 299) (literal (string \"bad state\") 299) 299) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 278) \"Some\" \"None\" 302) 302) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 303) (literal (intOrNat 1000000000000000000) 303) 303) (attr (data) \"totalSupply\" 96) 303) 303) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 304) (params 292) 304) (literal (intOrNat 1000000000000000000) 304) 304) 304) (set (attr (data) \"underlyingBalance\" 235) (openVariant (isNat (sub (params 292) (getLocal \"tokensToReceive\" 307) 307) 307) \"Some\" \"None\" 307) 307) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 279) \"Some\" \"None\" 310) 310) (set (operations 320) (cons (transfer (record 311 (address (getLocal \"redeemer\" 312)) (value (getLocal \"tokensToRedeem\" 313))) (literal (mutez 0) 320) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 315) \"Some\" \"None\" 315) 320) (operations 320) 320) 320) (set (operations 333) (cons (transfer (record 323 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 325)) (value (getLocal \"tokensToReceive\" 326))) (literal (mutez 0) 333) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 328) \"Some\" \"None\" 328) 333) (operations 333) 333) 333) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 336) 336) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"None\" (unit) -1) 337) (set (attr (data) \"savedState_redeemer\" 279) (variant \"None\" (unit) -1) 338))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 346) \"unit\" 347) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 350) 350) (literal (string \"bad state\") 350) 350) (set (attr (data) \"state\" 199) (literal (intOrNat 1) 353) 353) (set (operations 362) (cons (transfer (tuple 362 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 356)) (literal (mutez 0) 362) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 357) \"Some\" \"None\" 357) 362) (operations 362) 362) 362))) (updateBalance_callback True ((set_type (params 366) \"nat\" 367) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 370) (literal (string \"bad sender\") 370) 370) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 1) 373) 373) (literal (string \"bad state\") 373) 373) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 376) 376) (set (attr (data) \"underlyingBalance\" 235) (params 366) 379))) (updateContractMetadata True ((set_type (params 419) (tuple \"string\" \"bytes\") 420) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 422) (literal (string \"not governor\") 422) 422) (set (getItem (attr (data) \"metadata\" 426) (first (params 419) 424) 426) (second (params 419) 425) 426))) (updateDexterAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"dexterAddress\" 153) (params 403) 407))) (updateGovernorAddress True ((set_type (params 387) \"address\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"governorAddress\" 422) (params 387) 391))) (updateOvenRegistryAddress True ((set_type (params 411) \"address\" 412) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 414) (literal (string \"not governor\") 414) 414) (set (attr (data) \"ovenRegistryAddress\" 176) (params 411) 415))) (updateRewardPercent True ((set_type (params 395) \"nat\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"rewardPercent\" 139) (params 395) 399))) (updateTokenMetadata True ((set_type (params 430) (tuple \"nat\" (map \"string\" \"bytes\")) 431) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 433) (literal (string \"not governor\") 433) 433) (set (getItem (attr (data) \"token_metadata\" 434) (literal (intOrNat 0) 434) 434) (params 430) 434))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1608, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 1612 (spender (literal (local-address (static_id 1 98)) 98)) (value (literal (nat 10) 1590)))", "line_no": 1611, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1611)", "show": true, "valid": "(literal (bool True) 1611)", "voting_powers": "(map 1611 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1623 (address (literal (local-address (static_id 1 98)) 98)) (value (literal (intOrNat 200000000000000000000) 1623)))", "line_no": 1622, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1622)", "show": true, "valid": "(literal (bool True) 1622)", "voting_powers": "(map 1622 )", "export": true}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "deposit_callback", "params": "(literal (intOrNat 200000000000000000000) 1632)", "line_no": 1632, "title": "", "messageClass": "", "source": "none", "sender": "(literal (local-address (static_id 0 8)) 8)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1632)", "show": true, "valid": "(literal (bool True) 1632)", "voting_powers": "(map 1632 )", "export": true}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 98) 1632) \"state\" 1641) (literal (intOrNat 0) 1641) 1641)", "line_no": 1641}], "decompile": false, "kind": "test"}, {"shortname": "deposit_callback_-_fails_in_bad_state", "longname": "deposit_callback - fails in bad state", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 299) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s181\" ((set_type (first (params 89) 1651) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 1651) (contract \"address\") 1651) (set (operations 1651) (cons (transfer (getLocal \"__s181\" 1651) (literal (mutez 0) 1651) (second (params 89) 1651) 89) (operations 1651) 1651) 1651))) (getAllowance True ((bind \"__s182\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 1651) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 1651) \"spender\" 46) 46) 46))) (set_type (second (params 45) 1651) (contract \"nat\") 1651) (set (operations 1651) (cons (transfer (getLocal \"__s182\" 1651) (literal (mutez 0) 1651) (second (params 45) 1651) 45) (operations 1651) 1651) 1651))) (getBalance True ((bind \"__s183\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 1651) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 1651) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 1651) 42) \"balance\" 42) 42))) (set_type (second (params 37) 1651) (contract \"nat\") 1651) (set (operations 1651) (cons (transfer (getLocal \"__s183\" 1651) (literal (mutez 0) 1651) (second (params 37) 1651) 37) (operations 1651) 1651) 1651))) (getTotalSupply True ((bind \"__s184\" ((set_type (first (params 49) 1651) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 1651) (contract \"nat\") 1651) (set (operations 1651) (cons (transfer (getLocal \"__s184\" 1651) (literal (mutez 0) 1651) (second (params 49) 1651) 49) (operations 1651) 1651) 1651))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1651, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1656 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)) (value (literal (nat 10) 1654)))", "line_no": 1655, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1655)", "show": true, "valid": "(literal (bool True) 1655)", "voting_powers": "(map 1655 )", "export": true}, {"action": "newContract", "id": "(static_id 1 98)", "export": "(storage (record 98 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 102 ) (bigmap (unknown 300) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 102)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 89 ((literal (string \"\") 1672) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 91)) ((literal (string \"data\") 1672) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 88))) (bigmap \"string\" \"bytes\") 89)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 98)) (rewardPercent (literal (nat 1) 54)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 98)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 78 ((literal (nat 0) 65) (tuple 1672 (literal (nat 0) 65) (type_annotation (map 67 ((literal (string \"name\") 1672) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 69)) ((literal (string \"decimals\") 1672) (literal (bytes \"0x3138\") 70)) ((literal (string \"symbol\") 1672) (literal (bytes \"0x6465787465724c6b555344\") 71)) ((literal (string \"icon\") 1672) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 72))) (map \"string\" \"bytes\") 67)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 78)) (totalSupply (literal (intOrNat 0) 98)) (underlyingBalance (literal (nat 0) 119)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 135) \"unit\" 136) (set (operations 140) (cons (transfer (unit) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) (openVariant (contract \"\" \"unit\" (source) 140) \"Some\" \"None\" 140) 140) (operations 140) 140) 140) (set (operations 156) (cons (transfer (tuple 156 (to_address (self) \"None\") (tuple 156 (literal (intOrNat 1) 156) (add_seconds (now) (literal (int 3600) 148) 148))) (sub (balance) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) 143) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 153) 151) \"Some\" \"None\" 151) 156) (operations 156) 156) 156) (set (operations 166) (cons (transfer (unit) (literal (mutez 0) 166) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 161) \"Some\" \"None\" 161) 166) (operations 166) 166) 166))) (deposit True ((set_type (params 195) \"nat\" 196) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 199) 199) (literal (string \"bad state\") 199) 199) (set (attr (data) \"state\" 199) (literal (intOrNat 3) 202) 202) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"Some\" (params 195) 203) 203) (set (attr (data) \"savedState_depositor\" 204) (variant \"Some\" (sender) 204) 204) (set (operations 213) (cons (transfer (tuple 213 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 207)) (literal (mutez 0) 213) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 208) \"Some\" \"None\" 208) 213) (operations 213) 213) 213))) (deposit_callback True ((set_type (params 217) \"nat\" 218) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 221) (literal (string \"bad sender\") 221) 221) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 3) 224) 224) (literal (string \"bad state\") 224) 224) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 203) \"Some\" \"None\" 227) 227) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 228) (literal (intOrNat 1000000000000000000) 228) 228) 228) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 229) 229) ((defineLocal \"newUnderlyingBalance\" (add (params 217) (getLocal \"tokensToDeposit\" 230) 230) 230) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 231) (literal (intOrNat 1000000000000000000) 231) 231) (getLocal \"newUnderlyingBalance\" 231) 231) 231) (set (getLocal \"newTokens\" 1672) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 232) (attr (data) \"totalSupply\" 96) 232) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 232) (getLocal \"fractionOfPoolOwnership\" 232) 232) 232) \"Some\" \"None\" 232) 232) 232)) 229) (set (attr (data) \"underlyingBalance\" 235) (add (params 217) (getLocal \"tokensToDeposit\" 235) 235) 235) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 204) \"Some\" \"None\" 238) 238) (set (operations 249) (cons (transfer (record 239 (from_ (getLocal \"depositor\" 240)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 242))) (literal (mutez 0) 249) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 244) \"Some\" \"None\" 244) 249) (operations 249) 249) 249) (set (operations 261) (cons (transfer (record 252 (address (getLocal \"depositor\" 253)) (value (getLocal \"newTokens\" 254))) (literal (mutez 0) 261) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 256) \"Some\" \"None\" 256) 261) (operations 261) 261) 261) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 264) 264) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"None\" (unit) -1) 265) (set (attr (data) \"savedState_depositor\" 204) (variant \"None\" (unit) -1) 266))) (getAdministrator True ((bind \"__s185\" ((set_type (first (params 108) 1672) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 1672) (contract \"address\") 1672) (set (operations 1672) (cons (transfer (getLocal \"__s185\" 1672) (literal (mutez 0) 1672) (second (params 108) 1672) 108) (operations 1672) 1672) 1672))) (getAllowance True ((bind \"__s186\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 1672) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 1672) \"spender\" 69) 69) 69))) (set_type (second (params 68) 1672) (contract \"nat\") 1672) (set (operations 1672) (cons (transfer (getLocal \"__s186\" 1672) (literal (mutez 0) 1672) (second (params 68) 1672) 68) (operations 1672) 1672) 1672))) (getBalance True ((bind \"__s187\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 1672) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 1672) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 1672) 65) \"balance\" 65) 65))) (set_type (second (params 60) 1672) (contract \"nat\") 1672) (set (operations 1672) (cons (transfer (getLocal \"__s187\" 1672) (literal (mutez 0) 1672) (second (params 60) 1672) 60) (operations 1672) 1672) 1672))) (getTotalSupply True ((bind \"__s188\" ((set_type (first (params 72) 1672) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 1672) (contract \"nat\") 1672) (set (operations 1672) (cons (transfer (getLocal \"__s188\" 1672) (literal (mutez 0) 1672) (second (params 72) 1672) 72) (operations 1672) 1672) 1672))) (liquidate True ((set_type (params 170) \"address\" 171) (set (operations 179) (cons (transfer (params 170) (literal (mutez 0) 179) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 176) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179) (set (operations 187) (cons (transfer (unit) (literal (mutez 0) 187) (openVariant (contract \"liquidate\" \"unit\" (params 170) 182) \"Some\" \"None\" 182) 187) (operations 187) 187) 187))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 270) \"nat\" 271) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 274) 274) (literal (string \"bad state\") 274) 274) (set (attr (data) \"state\" 199) (literal (intOrNat 2) 277) 277) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"Some\" (params 270) 278) 278) (set (attr (data) \"savedState_redeemer\" 279) (variant \"Some\" (sender) 279) 279) (set (operations 288) (cons (transfer (tuple 288 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 282)) (literal (mutez 0) 288) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 283) \"Some\" \"None\" 283) 288) (operations 288) 288) 288))) (redeem_callback True ((set_type (params 292) \"nat\" 293) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 296) (literal (string \"bad sender\") 296) 296) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 2) 299) 299) (literal (string \"bad state\") 299) 299) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 278) \"Some\" \"None\" 302) 302) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 303) (literal (intOrNat 1000000000000000000) 303) 303) (attr (data) \"totalSupply\" 96) 303) 303) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 304) (params 292) 304) (literal (intOrNat 1000000000000000000) 304) 304) 304) (set (attr (data) \"underlyingBalance\" 235) (openVariant (isNat (sub (params 292) (getLocal \"tokensToReceive\" 307) 307) 307) \"Some\" \"None\" 307) 307) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 279) \"Some\" \"None\" 310) 310) (set (operations 320) (cons (transfer (record 311 (address (getLocal \"redeemer\" 312)) (value (getLocal \"tokensToRedeem\" 313))) (literal (mutez 0) 320) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 315) \"Some\" \"None\" 315) 320) (operations 320) 320) 320) (set (operations 333) (cons (transfer (record 323 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 325)) (value (getLocal \"tokensToReceive\" 326))) (literal (mutez 0) 333) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 328) \"Some\" \"None\" 328) 333) (operations 333) 333) 333) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 336) 336) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"None\" (unit) -1) 337) (set (attr (data) \"savedState_redeemer\" 279) (variant \"None\" (unit) -1) 338))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 346) \"unit\" 347) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 350) 350) (literal (string \"bad state\") 350) 350) (set (attr (data) \"state\" 199) (literal (intOrNat 1) 353) 353) (set (operations 362) (cons (transfer (tuple 362 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 356)) (literal (mutez 0) 362) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 357) \"Some\" \"None\" 357) 362) (operations 362) 362) 362))) (updateBalance_callback True ((set_type (params 366) \"nat\" 367) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 370) (literal (string \"bad sender\") 370) 370) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 1) 373) 373) (literal (string \"bad state\") 373) 373) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 376) 376) (set (attr (data) \"underlyingBalance\" 235) (params 366) 379))) (updateContractMetadata True ((set_type (params 419) (tuple \"string\" \"bytes\") 420) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 422) (literal (string \"not governor\") 422) 422) (set (getItem (attr (data) \"metadata\" 426) (first (params 419) 424) 426) (second (params 419) 425) 426))) (updateDexterAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"dexterAddress\" 153) (params 403) 407))) (updateGovernorAddress True ((set_type (params 387) \"address\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"governorAddress\" 422) (params 387) 391))) (updateOvenRegistryAddress True ((set_type (params 411) \"address\" 412) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 414) (literal (string \"not governor\") 414) 414) (set (attr (data) \"ovenRegistryAddress\" 176) (params 411) 415))) (updateRewardPercent True ((set_type (params 395) \"nat\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"rewardPercent\" 139) (params 395) 399))) (updateTokenMetadata True ((set_type (params 430) (tuple \"nat\" (map \"string\" \"bytes\")) 431) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 433) (literal (string \"not governor\") 433) 433) (set (getItem (attr (data) \"token_metadata\" 434) (literal (intOrNat 0) 434) 434) (params 430) 434))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1672, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 1676 (spender (literal (local-address (static_id 1 98)) 98)) (value (literal (nat 10) 1654)))", "line_no": 1675, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1675)", "show": true, "valid": "(literal (bool True) 1675)", "voting_powers": "(map 1675 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1687 (address (literal (local-address (static_id 1 98)) 98)) (value (literal (intOrNat 200000000000000000000) 1687)))", "line_no": 1686, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1686)", "show": true, "valid": "(literal (bool True) 1686)", "voting_powers": "(map 1686 )", "export": true}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "deposit_callback", "params": "(literal (intOrNat 200000000000000000000) 1697)", "line_no": 1697, "title": "", "messageClass": "", "source": "none", "sender": "(literal (local-address (static_id 0 8)) 8)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1697)", "show": true, "valid": "(literal (bool False) 1697)", "voting_powers": "(map 1697 )", "export": true}], "decompile": false, "kind": "test"}, {"shortname": "deposit_callback_-_fails_with_bad_sender", "longname": "deposit_callback - fails with bad sender", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 310) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s189\" ((set_type (first (params 89) 1712) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 1712) (contract \"address\") 1712) (set (operations 1712) (cons (transfer (getLocal \"__s189\" 1712) (literal (mutez 0) 1712) (second (params 89) 1712) 89) (operations 1712) 1712) 1712))) (getAllowance True ((bind \"__s190\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 1712) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 1712) \"spender\" 46) 46) 46))) (set_type (second (params 45) 1712) (contract \"nat\") 1712) (set (operations 1712) (cons (transfer (getLocal \"__s190\" 1712) (literal (mutez 0) 1712) (second (params 45) 1712) 45) (operations 1712) 1712) 1712))) (getBalance True ((bind \"__s191\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 1712) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 1712) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 1712) 42) \"balance\" 42) 42))) (set_type (second (params 37) 1712) (contract \"nat\") 1712) (set (operations 1712) (cons (transfer (getLocal \"__s191\" 1712) (literal (mutez 0) 1712) (second (params 37) 1712) 37) (operations 1712) 1712) 1712))) (getTotalSupply True ((bind \"__s192\" ((set_type (first (params 49) 1712) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 1712) (contract \"nat\") 1712) (set (operations 1712) (cons (transfer (getLocal \"__s192\" 1712) (literal (mutez 0) 1712) (second (params 49) 1712) 49) (operations 1712) 1712) 1712))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1712, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1717 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)) (value (literal (nat 10) 1715)))", "line_no": 1716, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1716)", "show": true, "valid": "(literal (bool True) 1716)", "voting_powers": "(map 1716 )", "export": true}, {"action": "newContract", "id": "(static_id 1 98)", "export": "(storage (record 98 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 102 ) (bigmap (unknown 311) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 102)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 89 ((literal (string \"\") 1733) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 91)) ((literal (string \"data\") 1733) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 88))) (bigmap \"string\" \"bytes\") 89)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 98)) (rewardPercent (literal (nat 1) 54)) (savedState_depositor (variant \"Some\" (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 1728)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"Some\" (literal (nat 10) 1715) 1729)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 3) 98)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 78 ((literal (nat 0) 65) (tuple 1733 (literal (nat 0) 65) (type_annotation (map 67 ((literal (string \"name\") 1733) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 69)) ((literal (string \"decimals\") 1733) (literal (bytes \"0x3138\") 70)) ((literal (string \"symbol\") 1733) (literal (bytes \"0x6465787465724c6b555344\") 71)) ((literal (string \"icon\") 1733) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 72))) (map \"string\" \"bytes\") 67)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 78)) (totalSupply (literal (intOrNat 0) 98)) (underlyingBalance (literal (nat 0) 119)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 135) \"unit\" 136) (set (operations 140) (cons (transfer (unit) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) (openVariant (contract \"\" \"unit\" (source) 140) \"Some\" \"None\" 140) 140) (operations 140) 140) 140) (set (operations 156) (cons (transfer (tuple 156 (to_address (self) \"None\") (tuple 156 (literal (intOrNat 1) 156) (add_seconds (now) (literal (int 3600) 148) 148))) (sub (balance) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) 143) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 153) 151) \"Some\" \"None\" 151) 156) (operations 156) 156) 156) (set (operations 166) (cons (transfer (unit) (literal (mutez 0) 166) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 161) \"Some\" \"None\" 161) 166) (operations 166) 166) 166))) (deposit True ((set_type (params 195) \"nat\" 196) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 199) 199) (literal (string \"bad state\") 199) 199) (set (attr (data) \"state\" 199) (literal (intOrNat 3) 202) 202) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"Some\" (params 195) 203) 203) (set (attr (data) \"savedState_depositor\" 204) (variant \"Some\" (sender) 204) 204) (set (operations 213) (cons (transfer (tuple 213 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 207)) (literal (mutez 0) 213) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 208) \"Some\" \"None\" 208) 213) (operations 213) 213) 213))) (deposit_callback True ((set_type (params 217) \"nat\" 218) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 221) (literal (string \"bad sender\") 221) 221) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 3) 224) 224) (literal (string \"bad state\") 224) 224) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 203) \"Some\" \"None\" 227) 227) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 228) (literal (intOrNat 1000000000000000000) 228) 228) 228) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 229) 229) ((defineLocal \"newUnderlyingBalance\" (add (params 217) (getLocal \"tokensToDeposit\" 230) 230) 230) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 231) (literal (intOrNat 1000000000000000000) 231) 231) (getLocal \"newUnderlyingBalance\" 231) 231) 231) (set (getLocal \"newTokens\" 1733) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 232) (attr (data) \"totalSupply\" 96) 232) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 232) (getLocal \"fractionOfPoolOwnership\" 232) 232) 232) \"Some\" \"None\" 232) 232) 232)) 229) (set (attr (data) \"underlyingBalance\" 235) (add (params 217) (getLocal \"tokensToDeposit\" 235) 235) 235) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 204) \"Some\" \"None\" 238) 238) (set (operations 249) (cons (transfer (record 239 (from_ (getLocal \"depositor\" 240)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 242))) (literal (mutez 0) 249) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 244) \"Some\" \"None\" 244) 249) (operations 249) 249) 249) (set (operations 261) (cons (transfer (record 252 (address (getLocal \"depositor\" 253)) (value (getLocal \"newTokens\" 254))) (literal (mutez 0) 261) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 256) \"Some\" \"None\" 256) 261) (operations 261) 261) 261) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 264) 264) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"None\" (unit) -1) 265) (set (attr (data) \"savedState_depositor\" 204) (variant \"None\" (unit) -1) 266))) (getAdministrator True ((bind \"__s193\" ((set_type (first (params 108) 1733) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 1733) (contract \"address\") 1733) (set (operations 1733) (cons (transfer (getLocal \"__s193\" 1733) (literal (mutez 0) 1733) (second (params 108) 1733) 108) (operations 1733) 1733) 1733))) (getAllowance True ((bind \"__s194\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 1733) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 1733) \"spender\" 69) 69) 69))) (set_type (second (params 68) 1733) (contract \"nat\") 1733) (set (operations 1733) (cons (transfer (getLocal \"__s194\" 1733) (literal (mutez 0) 1733) (second (params 68) 1733) 68) (operations 1733) 1733) 1733))) (getBalance True ((bind \"__s195\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 1733) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 1733) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 1733) 65) \"balance\" 65) 65))) (set_type (second (params 60) 1733) (contract \"nat\") 1733) (set (operations 1733) (cons (transfer (getLocal \"__s195\" 1733) (literal (mutez 0) 1733) (second (params 60) 1733) 60) (operations 1733) 1733) 1733))) (getTotalSupply True ((bind \"__s196\" ((set_type (first (params 72) 1733) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 1733) (contract \"nat\") 1733) (set (operations 1733) (cons (transfer (getLocal \"__s196\" 1733) (literal (mutez 0) 1733) (second (params 72) 1733) 72) (operations 1733) 1733) 1733))) (liquidate True ((set_type (params 170) \"address\" 171) (set (operations 179) (cons (transfer (params 170) (literal (mutez 0) 179) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 176) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179) (set (operations 187) (cons (transfer (unit) (literal (mutez 0) 187) (openVariant (contract \"liquidate\" \"unit\" (params 170) 182) \"Some\" \"None\" 182) 187) (operations 187) 187) 187))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 270) \"nat\" 271) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 274) 274) (literal (string \"bad state\") 274) 274) (set (attr (data) \"state\" 199) (literal (intOrNat 2) 277) 277) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"Some\" (params 270) 278) 278) (set (attr (data) \"savedState_redeemer\" 279) (variant \"Some\" (sender) 279) 279) (set (operations 288) (cons (transfer (tuple 288 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 282)) (literal (mutez 0) 288) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 283) \"Some\" \"None\" 283) 288) (operations 288) 288) 288))) (redeem_callback True ((set_type (params 292) \"nat\" 293) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 296) (literal (string \"bad sender\") 296) 296) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 2) 299) 299) (literal (string \"bad state\") 299) 299) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 278) \"Some\" \"None\" 302) 302) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 303) (literal (intOrNat 1000000000000000000) 303) 303) (attr (data) \"totalSupply\" 96) 303) 303) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 304) (params 292) 304) (literal (intOrNat 1000000000000000000) 304) 304) 304) (set (attr (data) \"underlyingBalance\" 235) (openVariant (isNat (sub (params 292) (getLocal \"tokensToReceive\" 307) 307) 307) \"Some\" \"None\" 307) 307) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 279) \"Some\" \"None\" 310) 310) (set (operations 320) (cons (transfer (record 311 (address (getLocal \"redeemer\" 312)) (value (getLocal \"tokensToRedeem\" 313))) (literal (mutez 0) 320) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 315) \"Some\" \"None\" 315) 320) (operations 320) 320) 320) (set (operations 333) (cons (transfer (record 323 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 325)) (value (getLocal \"tokensToReceive\" 326))) (literal (mutez 0) 333) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 328) \"Some\" \"None\" 328) 333) (operations 333) 333) 333) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 336) 336) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"None\" (unit) -1) 337) (set (attr (data) \"savedState_redeemer\" 279) (variant \"None\" (unit) -1) 338))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 346) \"unit\" 347) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 350) 350) (literal (string \"bad state\") 350) 350) (set (attr (data) \"state\" 199) (literal (intOrNat 1) 353) 353) (set (operations 362) (cons (transfer (tuple 362 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 356)) (literal (mutez 0) 362) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 357) \"Some\" \"None\" 357) 362) (operations 362) 362) 362))) (updateBalance_callback True ((set_type (params 366) \"nat\" 367) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 370) (literal (string \"bad sender\") 370) 370) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 1) 373) 373) (literal (string \"bad state\") 373) 373) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 376) 376) (set (attr (data) \"underlyingBalance\" 235) (params 366) 379))) (updateContractMetadata True ((set_type (params 419) (tuple \"string\" \"bytes\") 420) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 422) (literal (string \"not governor\") 422) 422) (set (getItem (attr (data) \"metadata\" 426) (first (params 419) 424) 426) (second (params 419) 425) 426))) (updateDexterAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"dexterAddress\" 153) (params 403) 407))) (updateGovernorAddress True ((set_type (params 387) \"address\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"governorAddress\" 422) (params 387) 391))) (updateOvenRegistryAddress True ((set_type (params 411) \"address\" 412) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 414) (literal (string \"not governor\") 414) 414) (set (attr (data) \"ovenRegistryAddress\" 176) (params 411) 415))) (updateRewardPercent True ((set_type (params 395) \"nat\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"rewardPercent\" 139) (params 395) 399))) (updateTokenMetadata True ((set_type (params 430) (tuple \"nat\" (map \"string\" \"bytes\")) 431) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 433) (literal (string \"not governor\") 433) 433) (set (getItem (attr (data) \"token_metadata\" 434) (literal (intOrNat 0) 434) 434) (params 430) 434))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1733, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 1737 (spender (literal (local-address (static_id 1 98)) 98)) (value (literal (nat 10) 1715)))", "line_no": 1736, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1736)", "show": true, "valid": "(literal (bool True) 1736)", "voting_powers": "(map 1736 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1748 (address (literal (local-address (static_id 1 98)) 98)) (value (literal (intOrNat 200000000000000000000) 1748)))", "line_no": 1747, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1747)", "show": true, "valid": "(literal (bool True) 1747)", "voting_powers": "(map 1747 )", "export": true}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "deposit_callback", "params": "(literal (intOrNat 200000000000000000000) 1758)", "line_no": 1758, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1bTpviNnyx2PXsNmGpCQTMQsGoYordkUoA\") 26)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1758)", "show": true, "valid": "(literal (bool False) 1758)", "voting_powers": "(map 1758 )", "export": true}], "decompile": false, "kind": "test"}, {"shortname": "redeem_-_fails_in_bad_state", "longname": "redeem - fails in bad state", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 321) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s197\" ((set_type (first (params 89) 1777) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 1777) (contract \"address\") 1777) (set (operations 1777) (cons (transfer (getLocal \"__s197\" 1777) (literal (mutez 0) 1777) (second (params 89) 1777) 89) (operations 1777) 1777) 1777))) (getAllowance True ((bind \"__s198\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 1777) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 1777) \"spender\" 46) 46) 46))) (set_type (second (params 45) 1777) (contract \"nat\") 1777) (set (operations 1777) (cons (transfer (getLocal \"__s198\" 1777) (literal (mutez 0) 1777) (second (params 45) 1777) 45) (operations 1777) 1777) 1777))) (getBalance True ((bind \"__s199\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 1777) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 1777) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 1777) 42) \"balance\" 42) 42))) (set_type (second (params 37) 1777) (contract \"nat\") 1777) (set (operations 1777) (cons (transfer (getLocal \"__s199\" 1777) (literal (mutez 0) 1777) (second (params 37) 1777) 37) (operations 1777) 1777) 1777))) (getTotalSupply True ((bind \"__s200\" ((set_type (first (params 49) 1777) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 1777) (contract \"nat\") 1777) (set (operations 1777) (cons (transfer (getLocal \"__s200\" 1777) (literal (mutez 0) 1777) (second (params 49) 1777) 49) (operations 1777) 1777) 1777))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1777, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 98)", "export": "(storage (record 98 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 102 ) (bigmap (unknown 322) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 102)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 89 ((literal (string \"\") 1784) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 91)) ((literal (string \"data\") 1784) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 88))) (bigmap \"string\" \"bytes\") 89)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 98)) (rewardPercent (literal (nat 1) 54)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 2) 98)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 78 ((literal (nat 0) 65) (tuple 1784 (literal (nat 0) 65) (type_annotation (map 67 ((literal (string \"name\") 1784) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 69)) ((literal (string \"decimals\") 1784) (literal (bytes \"0x3138\") 70)) ((literal (string \"symbol\") 1784) (literal (bytes \"0x6465787465724c6b555344\") 71)) ((literal (string \"icon\") 1784) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 72))) (map \"string\" \"bytes\") 67)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 78)) (totalSupply (literal (intOrNat 0) 98)) (underlyingBalance (literal (nat 0) 119)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 135) \"unit\" 136) (set (operations 140) (cons (transfer (unit) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) (openVariant (contract \"\" \"unit\" (source) 140) \"Some\" \"None\" 140) 140) (operations 140) 140) 140) (set (operations 156) (cons (transfer (tuple 156 (to_address (self) \"None\") (tuple 156 (literal (intOrNat 1) 156) (add_seconds (now) (literal (int 3600) 148) 148))) (sub (balance) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) 143) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 153) 151) \"Some\" \"None\" 151) 156) (operations 156) 156) 156) (set (operations 166) (cons (transfer (unit) (literal (mutez 0) 166) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 161) \"Some\" \"None\" 161) 166) (operations 166) 166) 166))) (deposit True ((set_type (params 195) \"nat\" 196) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 199) 199) (literal (string \"bad state\") 199) 199) (set (attr (data) \"state\" 199) (literal (intOrNat 3) 202) 202) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"Some\" (params 195) 203) 203) (set (attr (data) \"savedState_depositor\" 204) (variant \"Some\" (sender) 204) 204) (set (operations 213) (cons (transfer (tuple 213 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 207)) (literal (mutez 0) 213) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 208) \"Some\" \"None\" 208) 213) (operations 213) 213) 213))) (deposit_callback True ((set_type (params 217) \"nat\" 218) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 221) (literal (string \"bad sender\") 221) 221) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 3) 224) 224) (literal (string \"bad state\") 224) 224) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 203) \"Some\" \"None\" 227) 227) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 228) (literal (intOrNat 1000000000000000000) 228) 228) 228) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 229) 229) ((defineLocal \"newUnderlyingBalance\" (add (params 217) (getLocal \"tokensToDeposit\" 230) 230) 230) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 231) (literal (intOrNat 1000000000000000000) 231) 231) (getLocal \"newUnderlyingBalance\" 231) 231) 231) (set (getLocal \"newTokens\" 1784) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 232) (attr (data) \"totalSupply\" 96) 232) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 232) (getLocal \"fractionOfPoolOwnership\" 232) 232) 232) \"Some\" \"None\" 232) 232) 232)) 229) (set (attr (data) \"underlyingBalance\" 235) (add (params 217) (getLocal \"tokensToDeposit\" 235) 235) 235) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 204) \"Some\" \"None\" 238) 238) (set (operations 249) (cons (transfer (record 239 (from_ (getLocal \"depositor\" 240)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 242))) (literal (mutez 0) 249) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 244) \"Some\" \"None\" 244) 249) (operations 249) 249) 249) (set (operations 261) (cons (transfer (record 252 (address (getLocal \"depositor\" 253)) (value (getLocal \"newTokens\" 254))) (literal (mutez 0) 261) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 256) \"Some\" \"None\" 256) 261) (operations 261) 261) 261) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 264) 264) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"None\" (unit) -1) 265) (set (attr (data) \"savedState_depositor\" 204) (variant \"None\" (unit) -1) 266))) (getAdministrator True ((bind \"__s201\" ((set_type (first (params 108) 1784) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 1784) (contract \"address\") 1784) (set (operations 1784) (cons (transfer (getLocal \"__s201\" 1784) (literal (mutez 0) 1784) (second (params 108) 1784) 108) (operations 1784) 1784) 1784))) (getAllowance True ((bind \"__s202\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 1784) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 1784) \"spender\" 69) 69) 69))) (set_type (second (params 68) 1784) (contract \"nat\") 1784) (set (operations 1784) (cons (transfer (getLocal \"__s202\" 1784) (literal (mutez 0) 1784) (second (params 68) 1784) 68) (operations 1784) 1784) 1784))) (getBalance True ((bind \"__s203\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 1784) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 1784) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 1784) 65) \"balance\" 65) 65))) (set_type (second (params 60) 1784) (contract \"nat\") 1784) (set (operations 1784) (cons (transfer (getLocal \"__s203\" 1784) (literal (mutez 0) 1784) (second (params 60) 1784) 60) (operations 1784) 1784) 1784))) (getTotalSupply True ((bind \"__s204\" ((set_type (first (params 72) 1784) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 1784) (contract \"nat\") 1784) (set (operations 1784) (cons (transfer (getLocal \"__s204\" 1784) (literal (mutez 0) 1784) (second (params 72) 1784) 72) (operations 1784) 1784) 1784))) (liquidate True ((set_type (params 170) \"address\" 171) (set (operations 179) (cons (transfer (params 170) (literal (mutez 0) 179) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 176) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179) (set (operations 187) (cons (transfer (unit) (literal (mutez 0) 187) (openVariant (contract \"liquidate\" \"unit\" (params 170) 182) \"Some\" \"None\" 182) 187) (operations 187) 187) 187))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 270) \"nat\" 271) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 274) 274) (literal (string \"bad state\") 274) 274) (set (attr (data) \"state\" 199) (literal (intOrNat 2) 277) 277) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"Some\" (params 270) 278) 278) (set (attr (data) \"savedState_redeemer\" 279) (variant \"Some\" (sender) 279) 279) (set (operations 288) (cons (transfer (tuple 288 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 282)) (literal (mutez 0) 288) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 283) \"Some\" \"None\" 283) 288) (operations 288) 288) 288))) (redeem_callback True ((set_type (params 292) \"nat\" 293) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 296) (literal (string \"bad sender\") 296) 296) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 2) 299) 299) (literal (string \"bad state\") 299) 299) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 278) \"Some\" \"None\" 302) 302) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 303) (literal (intOrNat 1000000000000000000) 303) 303) (attr (data) \"totalSupply\" 96) 303) 303) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 304) (params 292) 304) (literal (intOrNat 1000000000000000000) 304) 304) 304) (set (attr (data) \"underlyingBalance\" 235) (openVariant (isNat (sub (params 292) (getLocal \"tokensToReceive\" 307) 307) 307) \"Some\" \"None\" 307) 307) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 279) \"Some\" \"None\" 310) 310) (set (operations 320) (cons (transfer (record 311 (address (getLocal \"redeemer\" 312)) (value (getLocal \"tokensToRedeem\" 313))) (literal (mutez 0) 320) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 315) \"Some\" \"None\" 315) 320) (operations 320) 320) 320) (set (operations 333) (cons (transfer (record 323 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 325)) (value (getLocal \"tokensToReceive\" 326))) (literal (mutez 0) 333) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 328) \"Some\" \"None\" 328) 333) (operations 333) 333) 333) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 336) 336) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"None\" (unit) -1) 337) (set (attr (data) \"savedState_redeemer\" 279) (variant \"None\" (unit) -1) 338))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 346) \"unit\" 347) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 350) 350) (literal (string \"bad state\") 350) 350) (set (attr (data) \"state\" 199) (literal (intOrNat 1) 353) 353) (set (operations 362) (cons (transfer (tuple 362 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 356)) (literal (mutez 0) 362) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 357) \"Some\" \"None\" 357) 362) (operations 362) 362) 362))) (updateBalance_callback True ((set_type (params 366) \"nat\" 367) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 370) (literal (string \"bad sender\") 370) 370) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 1) 373) 373) (literal (string \"bad state\") 373) 373) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 376) 376) (set (attr (data) \"underlyingBalance\" 235) (params 366) 379))) (updateContractMetadata True ((set_type (params 419) (tuple \"string\" \"bytes\") 420) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 422) (literal (string \"not governor\") 422) 422) (set (getItem (attr (data) \"metadata\" 426) (first (params 419) 424) 426) (second (params 419) 425) 426))) (updateDexterAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"dexterAddress\" 153) (params 403) 407))) (updateGovernorAddress True ((set_type (params 387) \"address\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"governorAddress\" 422) (params 387) 391))) (updateOvenRegistryAddress True ((set_type (params 411) \"address\" 412) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 414) (literal (string \"not governor\") 414) 414) (set (attr (data) \"ovenRegistryAddress\" 176) (params 411) 415))) (updateRewardPercent True ((set_type (params 395) \"nat\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"rewardPercent\" 139) (params 395) 399))) (updateTokenMetadata True ((set_type (params 430) (tuple \"nat\" (map \"string\" \"bytes\")) 431) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 433) (literal (string \"not governor\") 433) 433) (set (getItem (attr (data) \"token_metadata\" 434) (literal (intOrNat 0) 434) 434) (params 430) 434))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1784, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1789 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)) (value (literal (nat 10) 1787)))", "line_no": 1788, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1788)", "show": true, "valid": "(literal (bool True) 1788)", "voting_powers": "(map 1788 )", "export": true}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "mint", "params": "(record 1799 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)) (value (mul (literal (nat 10) 1787) (literal (intOrNat 1000000000000000000) 1801) 1801)))", "line_no": 1798, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1798)", "show": true, "valid": "(literal (bool True) 1798)", "voting_powers": "(map 1798 )", "export": true}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "redeem", "params": "(mul (literal (nat 10) 1787) (literal (intOrNat 1000000000000000000) 1810) 1810)", "line_no": 1809, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1809)", "show": true, "valid": "(literal (bool False) 1809)", "voting_powers": "(map 1809 )", "export": true}], "decompile": false, "kind": "test"}, {"shortname": "redeem_-_clears_state", "longname": "redeem - clears state", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 332) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s205\" ((set_type (first (params 89) 1824) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 1824) (contract \"address\") 1824) (set (operations 1824) (cons (transfer (getLocal \"__s205\" 1824) (literal (mutez 0) 1824) (second (params 89) 1824) 89) (operations 1824) 1824) 1824))) (getAllowance True ((bind \"__s206\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 1824) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 1824) \"spender\" 46) 46) 46))) (set_type (second (params 45) 1824) (contract \"nat\") 1824) (set (operations 1824) (cons (transfer (getLocal \"__s206\" 1824) (literal (mutez 0) 1824) (second (params 45) 1824) 45) (operations 1824) 1824) 1824))) (getBalance True ((bind \"__s207\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 1824) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 1824) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 1824) 42) \"balance\" 42) 42))) (set_type (second (params 37) 1824) (contract \"nat\") 1824) (set (operations 1824) (cons (transfer (getLocal \"__s207\" 1824) (literal (mutez 0) 1824) (second (params 37) 1824) 37) (operations 1824) 1824) 1824))) (getTotalSupply True ((bind \"__s208\" ((set_type (first (params 49) 1824) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 1824) (contract \"nat\") 1824) (set (operations 1824) (cons (transfer (getLocal \"__s208\" 1824) (literal (mutez 0) 1824) (second (params 49) 1824) 49) (operations 1824) 1824) 1824))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1824, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 98)", "export": "(storage (record 98 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 102 ) (bigmap (unknown 333) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 102)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 89 ((literal (string \"\") 1830) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 91)) ((literal (string \"data\") 1830) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 88))) (bigmap \"string\" \"bytes\") 89)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 98)) (rewardPercent (literal (nat 1) 54)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 98)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 78 ((literal (nat 0) 65) (tuple 1830 (literal (nat 0) 65) (type_annotation (map 67 ((literal (string \"name\") 1830) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 69)) ((literal (string \"decimals\") 1830) (literal (bytes \"0x3138\") 70)) ((literal (string \"symbol\") 1830) (literal (bytes \"0x6465787465724c6b555344\") 71)) ((literal (string \"icon\") 1830) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 72))) (map \"string\" \"bytes\") 67)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 78)) (totalSupply (literal (intOrNat 0) 98)) (underlyingBalance (literal (nat 0) 119)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 135) \"unit\" 136) (set (operations 140) (cons (transfer (unit) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) (openVariant (contract \"\" \"unit\" (source) 140) \"Some\" \"None\" 140) 140) (operations 140) 140) 140) (set (operations 156) (cons (transfer (tuple 156 (to_address (self) \"None\") (tuple 156 (literal (intOrNat 1) 156) (add_seconds (now) (literal (int 3600) 148) 148))) (sub (balance) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) 143) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 153) 151) \"Some\" \"None\" 151) 156) (operations 156) 156) 156) (set (operations 166) (cons (transfer (unit) (literal (mutez 0) 166) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 161) \"Some\" \"None\" 161) 166) (operations 166) 166) 166))) (deposit True ((set_type (params 195) \"nat\" 196) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 199) 199) (literal (string \"bad state\") 199) 199) (set (attr (data) \"state\" 199) (literal (intOrNat 3) 202) 202) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"Some\" (params 195) 203) 203) (set (attr (data) \"savedState_depositor\" 204) (variant \"Some\" (sender) 204) 204) (set (operations 213) (cons (transfer (tuple 213 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 207)) (literal (mutez 0) 213) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 208) \"Some\" \"None\" 208) 213) (operations 213) 213) 213))) (deposit_callback True ((set_type (params 217) \"nat\" 218) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 221) (literal (string \"bad sender\") 221) 221) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 3) 224) 224) (literal (string \"bad state\") 224) 224) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 203) \"Some\" \"None\" 227) 227) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 228) (literal (intOrNat 1000000000000000000) 228) 228) 228) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 229) 229) ((defineLocal \"newUnderlyingBalance\" (add (params 217) (getLocal \"tokensToDeposit\" 230) 230) 230) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 231) (literal (intOrNat 1000000000000000000) 231) 231) (getLocal \"newUnderlyingBalance\" 231) 231) 231) (set (getLocal \"newTokens\" 1830) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 232) (attr (data) \"totalSupply\" 96) 232) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 232) (getLocal \"fractionOfPoolOwnership\" 232) 232) 232) \"Some\" \"None\" 232) 232) 232)) 229) (set (attr (data) \"underlyingBalance\" 235) (add (params 217) (getLocal \"tokensToDeposit\" 235) 235) 235) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 204) \"Some\" \"None\" 238) 238) (set (operations 249) (cons (transfer (record 239 (from_ (getLocal \"depositor\" 240)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 242))) (literal (mutez 0) 249) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 244) \"Some\" \"None\" 244) 249) (operations 249) 249) 249) (set (operations 261) (cons (transfer (record 252 (address (getLocal \"depositor\" 253)) (value (getLocal \"newTokens\" 254))) (literal (mutez 0) 261) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 256) \"Some\" \"None\" 256) 261) (operations 261) 261) 261) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 264) 264) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"None\" (unit) -1) 265) (set (attr (data) \"savedState_depositor\" 204) (variant \"None\" (unit) -1) 266))) (getAdministrator True ((bind \"__s209\" ((set_type (first (params 108) 1830) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 1830) (contract \"address\") 1830) (set (operations 1830) (cons (transfer (getLocal \"__s209\" 1830) (literal (mutez 0) 1830) (second (params 108) 1830) 108) (operations 1830) 1830) 1830))) (getAllowance True ((bind \"__s210\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 1830) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 1830) \"spender\" 69) 69) 69))) (set_type (second (params 68) 1830) (contract \"nat\") 1830) (set (operations 1830) (cons (transfer (getLocal \"__s210\" 1830) (literal (mutez 0) 1830) (second (params 68) 1830) 68) (operations 1830) 1830) 1830))) (getBalance True ((bind \"__s211\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 1830) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 1830) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 1830) 65) \"balance\" 65) 65))) (set_type (second (params 60) 1830) (contract \"nat\") 1830) (set (operations 1830) (cons (transfer (getLocal \"__s211\" 1830) (literal (mutez 0) 1830) (second (params 60) 1830) 60) (operations 1830) 1830) 1830))) (getTotalSupply True ((bind \"__s212\" ((set_type (first (params 72) 1830) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 1830) (contract \"nat\") 1830) (set (operations 1830) (cons (transfer (getLocal \"__s212\" 1830) (literal (mutez 0) 1830) (second (params 72) 1830) 72) (operations 1830) 1830) 1830))) (liquidate True ((set_type (params 170) \"address\" 171) (set (operations 179) (cons (transfer (params 170) (literal (mutez 0) 179) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 176) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179) (set (operations 187) (cons (transfer (unit) (literal (mutez 0) 187) (openVariant (contract \"liquidate\" \"unit\" (params 170) 182) \"Some\" \"None\" 182) 187) (operations 187) 187) 187))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 270) \"nat\" 271) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 274) 274) (literal (string \"bad state\") 274) 274) (set (attr (data) \"state\" 199) (literal (intOrNat 2) 277) 277) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"Some\" (params 270) 278) 278) (set (attr (data) \"savedState_redeemer\" 279) (variant \"Some\" (sender) 279) 279) (set (operations 288) (cons (transfer (tuple 288 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 282)) (literal (mutez 0) 288) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 283) \"Some\" \"None\" 283) 288) (operations 288) 288) 288))) (redeem_callback True ((set_type (params 292) \"nat\" 293) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 296) (literal (string \"bad sender\") 296) 296) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 2) 299) 299) (literal (string \"bad state\") 299) 299) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 278) \"Some\" \"None\" 302) 302) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 303) (literal (intOrNat 1000000000000000000) 303) 303) (attr (data) \"totalSupply\" 96) 303) 303) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 304) (params 292) 304) (literal (intOrNat 1000000000000000000) 304) 304) 304) (set (attr (data) \"underlyingBalance\" 235) (openVariant (isNat (sub (params 292) (getLocal \"tokensToReceive\" 307) 307) 307) \"Some\" \"None\" 307) 307) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 279) \"Some\" \"None\" 310) 310) (set (operations 320) (cons (transfer (record 311 (address (getLocal \"redeemer\" 312)) (value (getLocal \"tokensToRedeem\" 313))) (literal (mutez 0) 320) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 315) \"Some\" \"None\" 315) 320) (operations 320) 320) 320) (set (operations 333) (cons (transfer (record 323 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 325)) (value (getLocal \"tokensToReceive\" 326))) (literal (mutez 0) 333) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 328) \"Some\" \"None\" 328) 333) (operations 333) 333) 333) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 336) 336) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"None\" (unit) -1) 337) (set (attr (data) \"savedState_redeemer\" 279) (variant \"None\" (unit) -1) 338))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 346) \"unit\" 347) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 350) 350) (literal (string \"bad state\") 350) 350) (set (attr (data) \"state\" 199) (literal (intOrNat 1) 353) 353) (set (operations 362) (cons (transfer (tuple 362 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 356)) (literal (mutez 0) 362) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 357) \"Some\" \"None\" 357) 362) (operations 362) 362) 362))) (updateBalance_callback True ((set_type (params 366) \"nat\" 367) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 370) (literal (string \"bad sender\") 370) 370) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 1) 373) 373) (literal (string \"bad state\") 373) 373) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 376) 376) (set (attr (data) \"underlyingBalance\" 235) (params 366) 379))) (updateContractMetadata True ((set_type (params 419) (tuple \"string\" \"bytes\") 420) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 422) (literal (string \"not governor\") 422) 422) (set (getItem (attr (data) \"metadata\" 426) (first (params 419) 424) 426) (second (params 419) 425) 426))) (updateDexterAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"dexterAddress\" 153) (params 403) 407))) (updateGovernorAddress True ((set_type (params 387) \"address\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"governorAddress\" 422) (params 387) 391))) (updateOvenRegistryAddress True ((set_type (params 411) \"address\" 412) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 414) (literal (string \"not governor\") 414) 414) (set (attr (data) \"ovenRegistryAddress\" 176) (params 411) 415))) (updateRewardPercent True ((set_type (params 395) \"nat\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"rewardPercent\" 139) (params 395) 399))) (updateTokenMetadata True ((set_type (params 430) (tuple \"nat\" (map \"string\" \"bytes\")) 431) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 433) (literal (string \"not governor\") 433) 433) (set (getItem (attr (data) \"token_metadata\" 434) (literal (intOrNat 0) 434) 434) (params 430) 434))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1830, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1835 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)) (value (literal (nat 10) 1833)))", "line_no": 1834, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1834)", "show": true, "valid": "(literal (bool True) 1834)", "voting_powers": "(map 1834 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 1845 (spender (literal (local-address (static_id 1 98)) 98)) (value (literal (nat 10) 1833)))", "line_no": 1844, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1844)", "show": true, "valid": "(literal (bool True) 1844)", "voting_powers": "(map 1844 )", "export": true}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "deposit", "params": "(literal (nat 10) 1833)", "line_no": 1854, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1854)", "show": true, "valid": "(literal (bool True) 1854)", "voting_powers": "(map 1854 )", "export": true}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "redeem", "params": "(mul (literal (nat 10) 1833) (literal (intOrNat 1000000000000000000) 1862) 1862)", "line_no": 1861, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1861)", "show": true, "valid": "(literal (bool True) 1861)", "voting_powers": "(map 1861 )", "export": true}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 98) 1861) \"state\" 1868) (literal (intOrNat 0) 1868) 1868)", "line_no": 1868}, {"action": "verify", "condition": "(eq (isVariant (attr (contractData (static_id 1 98) 1861) \"savedState_tokensToRedeem\" 1869) \"Some\" 1869) (literal (bool False) 1869) 1869)", "line_no": 1869}, {"action": "verify", "condition": "(eq (isVariant (attr (contractData (static_id 1 98) 1861) \"savedState_redeemer\" 1870) \"Some\" 1870) (literal (bool False) 1870) 1870)", "line_no": 1870}], "decompile": false, "kind": "test"}, {"shortname": "redeem_-_can_deposit_and_withdraw_from_one_account", "longname": "redeem - can deposit and withdraw from one account", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 343) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s213\" ((set_type (first (params 89) 1880) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 1880) (contract \"address\") 1880) (set (operations 1880) (cons (transfer (getLocal \"__s213\" 1880) (literal (mutez 0) 1880) (second (params 89) 1880) 89) (operations 1880) 1880) 1880))) (getAllowance True ((bind \"__s214\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 1880) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 1880) \"spender\" 46) 46) 46))) (set_type (second (params 45) 1880) (contract \"nat\") 1880) (set (operations 1880) (cons (transfer (getLocal \"__s214\" 1880) (literal (mutez 0) 1880) (second (params 45) 1880) 45) (operations 1880) 1880) 1880))) (getBalance True ((bind \"__s215\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 1880) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 1880) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 1880) 42) \"balance\" 42) 42))) (set_type (second (params 37) 1880) (contract \"nat\") 1880) (set (operations 1880) (cons (transfer (getLocal \"__s215\" 1880) (literal (mutez 0) 1880) (second (params 37) 1880) 37) (operations 1880) 1880) 1880))) (getTotalSupply True ((bind \"__s216\" ((set_type (first (params 49) 1880) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 1880) (contract \"nat\") 1880) (set (operations 1880) (cons (transfer (getLocal \"__s216\" 1880) (literal (mutez 0) 1880) (second (params 49) 1880) 49) (operations 1880) 1880) 1880))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1880, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 98)", "export": "(storage (record 98 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 102 ) (bigmap (unknown 344) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 102)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 89 ((literal (string \"\") 1886) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 91)) ((literal (string \"data\") 1886) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 88))) (bigmap \"string\" \"bytes\") 89)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 98)) (rewardPercent (literal (nat 1) 54)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 98)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 78 ((literal (nat 0) 65) (tuple 1886 (literal (nat 0) 65) (type_annotation (map 67 ((literal (string \"name\") 1886) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 69)) ((literal (string \"decimals\") 1886) (literal (bytes \"0x3138\") 70)) ((literal (string \"symbol\") 1886) (literal (bytes \"0x6465787465724c6b555344\") 71)) ((literal (string \"icon\") 1886) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 72))) (map \"string\" \"bytes\") 67)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 78)) (totalSupply (literal (intOrNat 0) 98)) (underlyingBalance (literal (nat 0) 119)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 135) \"unit\" 136) (set (operations 140) (cons (transfer (unit) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) (openVariant (contract \"\" \"unit\" (source) 140) \"Some\" \"None\" 140) 140) (operations 140) 140) 140) (set (operations 156) (cons (transfer (tuple 156 (to_address (self) \"None\") (tuple 156 (literal (intOrNat 1) 156) (add_seconds (now) (literal (int 3600) 148) 148))) (sub (balance) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) 143) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 153) 151) \"Some\" \"None\" 151) 156) (operations 156) 156) 156) (set (operations 166) (cons (transfer (unit) (literal (mutez 0) 166) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 161) \"Some\" \"None\" 161) 166) (operations 166) 166) 166))) (deposit True ((set_type (params 195) \"nat\" 196) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 199) 199) (literal (string \"bad state\") 199) 199) (set (attr (data) \"state\" 199) (literal (intOrNat 3) 202) 202) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"Some\" (params 195) 203) 203) (set (attr (data) \"savedState_depositor\" 204) (variant \"Some\" (sender) 204) 204) (set (operations 213) (cons (transfer (tuple 213 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 207)) (literal (mutez 0) 213) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 208) \"Some\" \"None\" 208) 213) (operations 213) 213) 213))) (deposit_callback True ((set_type (params 217) \"nat\" 218) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 221) (literal (string \"bad sender\") 221) 221) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 3) 224) 224) (literal (string \"bad state\") 224) 224) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 203) \"Some\" \"None\" 227) 227) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 228) (literal (intOrNat 1000000000000000000) 228) 228) 228) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 229) 229) ((defineLocal \"newUnderlyingBalance\" (add (params 217) (getLocal \"tokensToDeposit\" 230) 230) 230) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 231) (literal (intOrNat 1000000000000000000) 231) 231) (getLocal \"newUnderlyingBalance\" 231) 231) 231) (set (getLocal \"newTokens\" 1886) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 232) (attr (data) \"totalSupply\" 96) 232) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 232) (getLocal \"fractionOfPoolOwnership\" 232) 232) 232) \"Some\" \"None\" 232) 232) 232)) 229) (set (attr (data) \"underlyingBalance\" 235) (add (params 217) (getLocal \"tokensToDeposit\" 235) 235) 235) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 204) \"Some\" \"None\" 238) 238) (set (operations 249) (cons (transfer (record 239 (from_ (getLocal \"depositor\" 240)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 242))) (literal (mutez 0) 249) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 244) \"Some\" \"None\" 244) 249) (operations 249) 249) 249) (set (operations 261) (cons (transfer (record 252 (address (getLocal \"depositor\" 253)) (value (getLocal \"newTokens\" 254))) (literal (mutez 0) 261) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 256) \"Some\" \"None\" 256) 261) (operations 261) 261) 261) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 264) 264) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"None\" (unit) -1) 265) (set (attr (data) \"savedState_depositor\" 204) (variant \"None\" (unit) -1) 266))) (getAdministrator True ((bind \"__s217\" ((set_type (first (params 108) 1886) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 1886) (contract \"address\") 1886) (set (operations 1886) (cons (transfer (getLocal \"__s217\" 1886) (literal (mutez 0) 1886) (second (params 108) 1886) 108) (operations 1886) 1886) 1886))) (getAllowance True ((bind \"__s218\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 1886) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 1886) \"spender\" 69) 69) 69))) (set_type (second (params 68) 1886) (contract \"nat\") 1886) (set (operations 1886) (cons (transfer (getLocal \"__s218\" 1886) (literal (mutez 0) 1886) (second (params 68) 1886) 68) (operations 1886) 1886) 1886))) (getBalance True ((bind \"__s219\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 1886) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 1886) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 1886) 65) \"balance\" 65) 65))) (set_type (second (params 60) 1886) (contract \"nat\") 1886) (set (operations 1886) (cons (transfer (getLocal \"__s219\" 1886) (literal (mutez 0) 1886) (second (params 60) 1886) 60) (operations 1886) 1886) 1886))) (getTotalSupply True ((bind \"__s220\" ((set_type (first (params 72) 1886) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 1886) (contract \"nat\") 1886) (set (operations 1886) (cons (transfer (getLocal \"__s220\" 1886) (literal (mutez 0) 1886) (second (params 72) 1886) 72) (operations 1886) 1886) 1886))) (liquidate True ((set_type (params 170) \"address\" 171) (set (operations 179) (cons (transfer (params 170) (literal (mutez 0) 179) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 176) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179) (set (operations 187) (cons (transfer (unit) (literal (mutez 0) 187) (openVariant (contract \"liquidate\" \"unit\" (params 170) 182) \"Some\" \"None\" 182) 187) (operations 187) 187) 187))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 270) \"nat\" 271) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 274) 274) (literal (string \"bad state\") 274) 274) (set (attr (data) \"state\" 199) (literal (intOrNat 2) 277) 277) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"Some\" (params 270) 278) 278) (set (attr (data) \"savedState_redeemer\" 279) (variant \"Some\" (sender) 279) 279) (set (operations 288) (cons (transfer (tuple 288 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 282)) (literal (mutez 0) 288) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 283) \"Some\" \"None\" 283) 288) (operations 288) 288) 288))) (redeem_callback True ((set_type (params 292) \"nat\" 293) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 296) (literal (string \"bad sender\") 296) 296) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 2) 299) 299) (literal (string \"bad state\") 299) 299) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 278) \"Some\" \"None\" 302) 302) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 303) (literal (intOrNat 1000000000000000000) 303) 303) (attr (data) \"totalSupply\" 96) 303) 303) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 304) (params 292) 304) (literal (intOrNat 1000000000000000000) 304) 304) 304) (set (attr (data) \"underlyingBalance\" 235) (openVariant (isNat (sub (params 292) (getLocal \"tokensToReceive\" 307) 307) 307) \"Some\" \"None\" 307) 307) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 279) \"Some\" \"None\" 310) 310) (set (operations 320) (cons (transfer (record 311 (address (getLocal \"redeemer\" 312)) (value (getLocal \"tokensToRedeem\" 313))) (literal (mutez 0) 320) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 315) \"Some\" \"None\" 315) 320) (operations 320) 320) 320) (set (operations 333) (cons (transfer (record 323 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 325)) (value (getLocal \"tokensToReceive\" 326))) (literal (mutez 0) 333) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 328) \"Some\" \"None\" 328) 333) (operations 333) 333) 333) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 336) 336) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"None\" (unit) -1) 337) (set (attr (data) \"savedState_redeemer\" 279) (variant \"None\" (unit) -1) 338))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 346) \"unit\" 347) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 350) 350) (literal (string \"bad state\") 350) 350) (set (attr (data) \"state\" 199) (literal (intOrNat 1) 353) 353) (set (operations 362) (cons (transfer (tuple 362 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 356)) (literal (mutez 0) 362) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 357) \"Some\" \"None\" 357) 362) (operations 362) 362) 362))) (updateBalance_callback True ((set_type (params 366) \"nat\" 367) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 370) (literal (string \"bad sender\") 370) 370) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 1) 373) 373) (literal (string \"bad state\") 373) 373) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 376) 376) (set (attr (data) \"underlyingBalance\" 235) (params 366) 379))) (updateContractMetadata True ((set_type (params 419) (tuple \"string\" \"bytes\") 420) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 422) (literal (string \"not governor\") 422) 422) (set (getItem (attr (data) \"metadata\" 426) (first (params 419) 424) 426) (second (params 419) 425) 426))) (updateDexterAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"dexterAddress\" 153) (params 403) 407))) (updateGovernorAddress True ((set_type (params 387) \"address\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"governorAddress\" 422) (params 387) 391))) (updateOvenRegistryAddress True ((set_type (params 411) \"address\" 412) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 414) (literal (string \"not governor\") 414) 414) (set (attr (data) \"ovenRegistryAddress\" 176) (params 411) 415))) (updateRewardPercent True ((set_type (params 395) \"nat\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"rewardPercent\" 139) (params 395) 399))) (updateTokenMetadata True ((set_type (params 430) (tuple \"nat\" (map \"string\" \"bytes\")) 431) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 433) (literal (string \"not governor\") 433) 433) (set (getItem (attr (data) \"token_metadata\" 434) (literal (intOrNat 0) 434) 434) (params 430) 434))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1886, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1891 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)) (value (literal (nat 10) 1889)))", "line_no": 1890, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1890)", "show": true, "valid": "(literal (bool True) 1890)", "voting_powers": "(map 1890 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 1901 (spender (literal (local-address (static_id 1 98)) 98)) (value (literal (nat 10) 1889)))", "line_no": 1900, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1900)", "show": true, "valid": "(literal (bool True) 1900)", "voting_powers": "(map 1900 )", "export": true}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "deposit", "params": "(literal (nat 10) 1889)", "line_no": 1910, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1910)", "show": true, "valid": "(literal (bool True) 1910)", "voting_powers": "(map 1910 )", "export": true}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "redeem", "params": "(mul (literal (nat 10) 1889) (literal (intOrNat 1000000000000000000) 1918) 1918)", "line_no": 1917, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1917)", "show": true, "valid": "(literal (bool True) 1917)", "voting_powers": "(map 1917 )", "export": true}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 1900) \"balances\" 1924) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 1924) \"balance\" 1924) (literal (nat 10) 1889) 1924)", "line_no": 1924}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 98) 1917) \"balances\" 1925) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 1925) \"balance\" 1925) (literal (nat 0) 1925) 1925)", "line_no": 1925}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 98) 1917) \"totalSupply\" 1928) (literal (nat 0) 1928) 1928)", "line_no": 1928}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 1900) \"balances\" 1924) (literal (local-address (static_id 1 98)) 98) 1931) \"balance\" 1931) (literal (nat 0) 1931) 1931)", "line_no": 1931}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 98) 1917) \"underlyingBalance\" 1932) (literal (nat 0) 1932) 1932)", "line_no": 1932}], "decompile": false, "kind": "test"}, {"shortname": "redeem_-_can_redeem_from_two_accounts", "longname": "redeem - can redeem from two accounts", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 354) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s221\" ((set_type (first (params 89) 1942) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 1942) (contract \"address\") 1942) (set (operations 1942) (cons (transfer (getLocal \"__s221\" 1942) (literal (mutez 0) 1942) (second (params 89) 1942) 89) (operations 1942) 1942) 1942))) (getAllowance True ((bind \"__s222\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 1942) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 1942) \"spender\" 46) 46) 46))) (set_type (second (params 45) 1942) (contract \"nat\") 1942) (set (operations 1942) (cons (transfer (getLocal \"__s222\" 1942) (literal (mutez 0) 1942) (second (params 45) 1942) 45) (operations 1942) 1942) 1942))) (getBalance True ((bind \"__s223\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 1942) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 1942) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 1942) 42) \"balance\" 42) 42))) (set_type (second (params 37) 1942) (contract \"nat\") 1942) (set (operations 1942) (cons (transfer (getLocal \"__s223\" 1942) (literal (mutez 0) 1942) (second (params 37) 1942) 37) (operations 1942) 1942) 1942))) (getTotalSupply True ((bind \"__s224\" ((set_type (first (params 49) 1942) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 1942) (contract \"nat\") 1942) (set (operations 1942) (cons (transfer (getLocal \"__s224\" 1942) (literal (mutez 0) 1942) (second (params 49) 1942) 49) (operations 1942) 1942) 1942))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1942, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 98)", "export": "(storage (record 98 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 102 ) (bigmap (unknown 355) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 102)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 89 ((literal (string \"\") 1948) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 91)) ((literal (string \"data\") 1948) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 88))) (bigmap \"string\" \"bytes\") 89)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 98)) (rewardPercent (literal (nat 1) 54)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 98)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 78 ((literal (nat 0) 65) (tuple 1948 (literal (nat 0) 65) (type_annotation (map 67 ((literal (string \"name\") 1948) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 69)) ((literal (string \"decimals\") 1948) (literal (bytes \"0x3138\") 70)) ((literal (string \"symbol\") 1948) (literal (bytes \"0x6465787465724c6b555344\") 71)) ((literal (string \"icon\") 1948) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 72))) (map \"string\" \"bytes\") 67)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 78)) (totalSupply (literal (intOrNat 0) 98)) (underlyingBalance (literal (nat 0) 119)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 135) \"unit\" 136) (set (operations 140) (cons (transfer (unit) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) (openVariant (contract \"\" \"unit\" (source) 140) \"Some\" \"None\" 140) 140) (operations 140) 140) 140) (set (operations 156) (cons (transfer (tuple 156 (to_address (self) \"None\") (tuple 156 (literal (intOrNat 1) 156) (add_seconds (now) (literal (int 3600) 148) 148))) (sub (balance) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) 143) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 153) 151) \"Some\" \"None\" 151) 156) (operations 156) 156) 156) (set (operations 166) (cons (transfer (unit) (literal (mutez 0) 166) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 161) \"Some\" \"None\" 161) 166) (operations 166) 166) 166))) (deposit True ((set_type (params 195) \"nat\" 196) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 199) 199) (literal (string \"bad state\") 199) 199) (set (attr (data) \"state\" 199) (literal (intOrNat 3) 202) 202) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"Some\" (params 195) 203) 203) (set (attr (data) \"savedState_depositor\" 204) (variant \"Some\" (sender) 204) 204) (set (operations 213) (cons (transfer (tuple 213 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 207)) (literal (mutez 0) 213) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 208) \"Some\" \"None\" 208) 213) (operations 213) 213) 213))) (deposit_callback True ((set_type (params 217) \"nat\" 218) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 221) (literal (string \"bad sender\") 221) 221) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 3) 224) 224) (literal (string \"bad state\") 224) 224) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 203) \"Some\" \"None\" 227) 227) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 228) (literal (intOrNat 1000000000000000000) 228) 228) 228) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 229) 229) ((defineLocal \"newUnderlyingBalance\" (add (params 217) (getLocal \"tokensToDeposit\" 230) 230) 230) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 231) (literal (intOrNat 1000000000000000000) 231) 231) (getLocal \"newUnderlyingBalance\" 231) 231) 231) (set (getLocal \"newTokens\" 1948) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 232) (attr (data) \"totalSupply\" 96) 232) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 232) (getLocal \"fractionOfPoolOwnership\" 232) 232) 232) \"Some\" \"None\" 232) 232) 232)) 229) (set (attr (data) \"underlyingBalance\" 235) (add (params 217) (getLocal \"tokensToDeposit\" 235) 235) 235) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 204) \"Some\" \"None\" 238) 238) (set (operations 249) (cons (transfer (record 239 (from_ (getLocal \"depositor\" 240)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 242))) (literal (mutez 0) 249) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 244) \"Some\" \"None\" 244) 249) (operations 249) 249) 249) (set (operations 261) (cons (transfer (record 252 (address (getLocal \"depositor\" 253)) (value (getLocal \"newTokens\" 254))) (literal (mutez 0) 261) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 256) \"Some\" \"None\" 256) 261) (operations 261) 261) 261) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 264) 264) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"None\" (unit) -1) 265) (set (attr (data) \"savedState_depositor\" 204) (variant \"None\" (unit) -1) 266))) (getAdministrator True ((bind \"__s225\" ((set_type (first (params 108) 1948) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 1948) (contract \"address\") 1948) (set (operations 1948) (cons (transfer (getLocal \"__s225\" 1948) (literal (mutez 0) 1948) (second (params 108) 1948) 108) (operations 1948) 1948) 1948))) (getAllowance True ((bind \"__s226\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 1948) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 1948) \"spender\" 69) 69) 69))) (set_type (second (params 68) 1948) (contract \"nat\") 1948) (set (operations 1948) (cons (transfer (getLocal \"__s226\" 1948) (literal (mutez 0) 1948) (second (params 68) 1948) 68) (operations 1948) 1948) 1948))) (getBalance True ((bind \"__s227\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 1948) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 1948) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 1948) 65) \"balance\" 65) 65))) (set_type (second (params 60) 1948) (contract \"nat\") 1948) (set (operations 1948) (cons (transfer (getLocal \"__s227\" 1948) (literal (mutez 0) 1948) (second (params 60) 1948) 60) (operations 1948) 1948) 1948))) (getTotalSupply True ((bind \"__s228\" ((set_type (first (params 72) 1948) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 1948) (contract \"nat\") 1948) (set (operations 1948) (cons (transfer (getLocal \"__s228\" 1948) (literal (mutez 0) 1948) (second (params 72) 1948) 72) (operations 1948) 1948) 1948))) (liquidate True ((set_type (params 170) \"address\" 171) (set (operations 179) (cons (transfer (params 170) (literal (mutez 0) 179) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 176) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179) (set (operations 187) (cons (transfer (unit) (literal (mutez 0) 187) (openVariant (contract \"liquidate\" \"unit\" (params 170) 182) \"Some\" \"None\" 182) 187) (operations 187) 187) 187))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 270) \"nat\" 271) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 274) 274) (literal (string \"bad state\") 274) 274) (set (attr (data) \"state\" 199) (literal (intOrNat 2) 277) 277) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"Some\" (params 270) 278) 278) (set (attr (data) \"savedState_redeemer\" 279) (variant \"Some\" (sender) 279) 279) (set (operations 288) (cons (transfer (tuple 288 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 282)) (literal (mutez 0) 288) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 283) \"Some\" \"None\" 283) 288) (operations 288) 288) 288))) (redeem_callback True ((set_type (params 292) \"nat\" 293) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 296) (literal (string \"bad sender\") 296) 296) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 2) 299) 299) (literal (string \"bad state\") 299) 299) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 278) \"Some\" \"None\" 302) 302) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 303) (literal (intOrNat 1000000000000000000) 303) 303) (attr (data) \"totalSupply\" 96) 303) 303) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 304) (params 292) 304) (literal (intOrNat 1000000000000000000) 304) 304) 304) (set (attr (data) \"underlyingBalance\" 235) (openVariant (isNat (sub (params 292) (getLocal \"tokensToReceive\" 307) 307) 307) \"Some\" \"None\" 307) 307) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 279) \"Some\" \"None\" 310) 310) (set (operations 320) (cons (transfer (record 311 (address (getLocal \"redeemer\" 312)) (value (getLocal \"tokensToRedeem\" 313))) (literal (mutez 0) 320) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 315) \"Some\" \"None\" 315) 320) (operations 320) 320) 320) (set (operations 333) (cons (transfer (record 323 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 325)) (value (getLocal \"tokensToReceive\" 326))) (literal (mutez 0) 333) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 328) \"Some\" \"None\" 328) 333) (operations 333) 333) 333) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 336) 336) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"None\" (unit) -1) 337) (set (attr (data) \"savedState_redeemer\" 279) (variant \"None\" (unit) -1) 338))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 346) \"unit\" 347) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 350) 350) (literal (string \"bad state\") 350) 350) (set (attr (data) \"state\" 199) (literal (intOrNat 1) 353) 353) (set (operations 362) (cons (transfer (tuple 362 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 356)) (literal (mutez 0) 362) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 357) \"Some\" \"None\" 357) 362) (operations 362) 362) 362))) (updateBalance_callback True ((set_type (params 366) \"nat\" 367) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 370) (literal (string \"bad sender\") 370) 370) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 1) 373) 373) (literal (string \"bad state\") 373) 373) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 376) 376) (set (attr (data) \"underlyingBalance\" 235) (params 366) 379))) (updateContractMetadata True ((set_type (params 419) (tuple \"string\" \"bytes\") 420) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 422) (literal (string \"not governor\") 422) 422) (set (getItem (attr (data) \"metadata\" 426) (first (params 419) 424) 426) (second (params 419) 425) 426))) (updateDexterAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"dexterAddress\" 153) (params 403) 407))) (updateGovernorAddress True ((set_type (params 387) \"address\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"governorAddress\" 422) (params 387) 391))) (updateOvenRegistryAddress True ((set_type (params 411) \"address\" 412) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 414) (literal (string \"not governor\") 414) 414) (set (attr (data) \"ovenRegistryAddress\" 176) (params 411) 415))) (updateRewardPercent True ((set_type (params 395) \"nat\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"rewardPercent\" 139) (params 395) 399))) (updateTokenMetadata True ((set_type (params 430) (tuple \"nat\" (map \"string\" \"bytes\")) 431) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 433) (literal (string \"not governor\") 433) 433) (set (getItem (attr (data) \"token_metadata\" 434) (literal (intOrNat 0) 434) 434) (params 430) 434))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1948, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1953 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)) (value (literal (nat 10) 1951)))", "line_no": 1952, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1952)", "show": true, "valid": "(literal (bool True) 1952)", "voting_powers": "(map 1952 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1964 (address (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)) (value (literal (nat 40) 1962)))", "line_no": 1963, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1963)", "show": true, "valid": "(literal (bool True) 1963)", "voting_powers": "(map 1963 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 1974 (spender (literal (local-address (static_id 1 98)) 98)) (value (literal (nat 10) 1951)))", "line_no": 1973, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1973)", "show": true, "valid": "(literal (bool True) 1973)", "voting_powers": "(map 1973 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 1984 (spender (literal (local-address (static_id 1 98)) 98)) (value (literal (nat 40) 1962)))", "line_no": 1983, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1983)", "show": true, "valid": "(literal (bool True) 1983)", "voting_powers": "(map 1983 )", "export": true}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "deposit", "params": "(literal (nat 10) 1951)", "line_no": 1993, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1993)", "show": true, "valid": "(literal (bool True) 1993)", "voting_powers": "(map 1993 )", "export": true}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "deposit", "params": "(literal (nat 40) 1962)", "line_no": 1999, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1999)", "show": true, "valid": "(literal (bool True) 1999)", "voting_powers": "(map 1999 )", "export": true}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "redeem", "params": "(mul (literal (nat 10) 1951) (literal (intOrNat 1000000000000000000) 2007) 2007)", "line_no": 2006, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2006)", "show": true, "valid": "(literal (bool True) 2006)", "voting_powers": "(map 2006 )", "export": true}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 1983) \"balances\" 2013) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 2013) \"balance\" 2013) (literal (nat 10) 1951) 2013)", "line_no": 2013}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 98) 2006) \"balances\" 2014) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 2014) \"balance\" 2014) (literal (nat 0) 2014) 2014)", "line_no": 2014}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 1983) \"balances\" 2013) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22) 2017) \"balance\" 2017) (literal (nat 0) 2017) 2017)", "line_no": 2017}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 98) 2006) \"balances\" 2014) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22) 2018) \"balance\" 2018) (mul (mul (literal (nat 10) 1951) (literal (intOrNat 4) 2018) 2018) (literal (intOrNat 1000000000000000000) 2018) 2018) 2018)", "line_no": 2018}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 98) 2006) \"totalSupply\" 2021) (mul (literal (nat 40) 1962) (literal (intOrNat 1000000000000000000) 2021) 2021) 2021)", "line_no": 2021}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 1983) \"balances\" 2013) (literal (local-address (static_id 1 98)) 98) 2024) \"balance\" 2024) (literal (nat 40) 1962) 2024)", "line_no": 2024}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 98) 2006) \"underlyingBalance\" 2025) (literal (nat 40) 1962) 2025)", "line_no": 2025}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "redeem", "params": "(mul (literal (nat 40) 1962) (literal (intOrNat 1000000000000000000) 2029) 2029)", "line_no": 2028, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2028)", "show": true, "valid": "(literal (bool True) 2028)", "voting_powers": "(map 2028 )", "export": true}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 1983) \"balances\" 2013) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 2035) \"balance\" 2035) (literal (nat 10) 1951) 2035)", "line_no": 2035}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 98) 2028) \"balances\" 2036) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 2036) \"balance\" 2036) (literal (nat 0) 2036) 2036)", "line_no": 2036}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 1983) \"balances\" 2013) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22) 2039) \"balance\" 2039) (literal (nat 40) 1962) 2039)", "line_no": 2039}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 98) 2028) \"balances\" 2036) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22) 2040) \"balance\" 2040) (literal (nat 0) 2040) 2040)", "line_no": 2040}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 98) 2028) \"totalSupply\" 2043) (literal (nat 0) 2043) 2043)", "line_no": 2043}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 1983) \"balances\" 2013) (literal (local-address (static_id 1 98)) 98) 2046) \"balance\" 2046) (literal (nat 0) 2046) 2046)", "line_no": 2046}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 98) 2028) \"underlyingBalance\" 2047) (literal (nat 0) 2047) 2047)", "line_no": 2047}], "decompile": false, "kind": "test"}, {"shortname": "redeem_-_can_redeem_from_two_accounts_-_reversed", "longname": "redeem - can redeem from two accounts - reversed", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 365) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s229\" ((set_type (first (params 89) 2057) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 2057) (contract \"address\") 2057) (set (operations 2057) (cons (transfer (getLocal \"__s229\" 2057) (literal (mutez 0) 2057) (second (params 89) 2057) 89) (operations 2057) 2057) 2057))) (getAllowance True ((bind \"__s230\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 2057) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 2057) \"spender\" 46) 46) 46))) (set_type (second (params 45) 2057) (contract \"nat\") 2057) (set (operations 2057) (cons (transfer (getLocal \"__s230\" 2057) (literal (mutez 0) 2057) (second (params 45) 2057) 45) (operations 2057) 2057) 2057))) (getBalance True ((bind \"__s231\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 2057) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 2057) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 2057) 42) \"balance\" 42) 42))) (set_type (second (params 37) 2057) (contract \"nat\") 2057) (set (operations 2057) (cons (transfer (getLocal \"__s231\" 2057) (literal (mutez 0) 2057) (second (params 37) 2057) 37) (operations 2057) 2057) 2057))) (getTotalSupply True ((bind \"__s232\" ((set_type (first (params 49) 2057) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 2057) (contract \"nat\") 2057) (set (operations 2057) (cons (transfer (getLocal \"__s232\" 2057) (literal (mutez 0) 2057) (second (params 49) 2057) 49) (operations 2057) 2057) 2057))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 2057, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 98)", "export": "(storage (record 98 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 102 ) (bigmap (unknown 366) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 102)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 89 ((literal (string \"\") 2063) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 91)) ((literal (string \"data\") 2063) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 88))) (bigmap \"string\" \"bytes\") 89)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 98)) (rewardPercent (literal (nat 1) 54)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 98)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 78 ((literal (nat 0) 65) (tuple 2063 (literal (nat 0) 65) (type_annotation (map 67 ((literal (string \"name\") 2063) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 69)) ((literal (string \"decimals\") 2063) (literal (bytes \"0x3138\") 70)) ((literal (string \"symbol\") 2063) (literal (bytes \"0x6465787465724c6b555344\") 71)) ((literal (string \"icon\") 2063) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 72))) (map \"string\" \"bytes\") 67)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 78)) (totalSupply (literal (intOrNat 0) 98)) (underlyingBalance (literal (nat 0) 119)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 135) \"unit\" 136) (set (operations 140) (cons (transfer (unit) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) (openVariant (contract \"\" \"unit\" (source) 140) \"Some\" \"None\" 140) 140) (operations 140) 140) 140) (set (operations 156) (cons (transfer (tuple 156 (to_address (self) \"None\") (tuple 156 (literal (intOrNat 1) 156) (add_seconds (now) (literal (int 3600) 148) 148))) (sub (balance) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) 143) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 153) 151) \"Some\" \"None\" 151) 156) (operations 156) 156) 156) (set (operations 166) (cons (transfer (unit) (literal (mutez 0) 166) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 161) \"Some\" \"None\" 161) 166) (operations 166) 166) 166))) (deposit True ((set_type (params 195) \"nat\" 196) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 199) 199) (literal (string \"bad state\") 199) 199) (set (attr (data) \"state\" 199) (literal (intOrNat 3) 202) 202) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"Some\" (params 195) 203) 203) (set (attr (data) \"savedState_depositor\" 204) (variant \"Some\" (sender) 204) 204) (set (operations 213) (cons (transfer (tuple 213 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 207)) (literal (mutez 0) 213) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 208) \"Some\" \"None\" 208) 213) (operations 213) 213) 213))) (deposit_callback True ((set_type (params 217) \"nat\" 218) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 221) (literal (string \"bad sender\") 221) 221) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 3) 224) 224) (literal (string \"bad state\") 224) 224) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 203) \"Some\" \"None\" 227) 227) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 228) (literal (intOrNat 1000000000000000000) 228) 228) 228) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 229) 229) ((defineLocal \"newUnderlyingBalance\" (add (params 217) (getLocal \"tokensToDeposit\" 230) 230) 230) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 231) (literal (intOrNat 1000000000000000000) 231) 231) (getLocal \"newUnderlyingBalance\" 231) 231) 231) (set (getLocal \"newTokens\" 2063) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 232) (attr (data) \"totalSupply\" 96) 232) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 232) (getLocal \"fractionOfPoolOwnership\" 232) 232) 232) \"Some\" \"None\" 232) 232) 232)) 229) (set (attr (data) \"underlyingBalance\" 235) (add (params 217) (getLocal \"tokensToDeposit\" 235) 235) 235) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 204) \"Some\" \"None\" 238) 238) (set (operations 249) (cons (transfer (record 239 (from_ (getLocal \"depositor\" 240)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 242))) (literal (mutez 0) 249) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 244) \"Some\" \"None\" 244) 249) (operations 249) 249) 249) (set (operations 261) (cons (transfer (record 252 (address (getLocal \"depositor\" 253)) (value (getLocal \"newTokens\" 254))) (literal (mutez 0) 261) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 256) \"Some\" \"None\" 256) 261) (operations 261) 261) 261) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 264) 264) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"None\" (unit) -1) 265) (set (attr (data) \"savedState_depositor\" 204) (variant \"None\" (unit) -1) 266))) (getAdministrator True ((bind \"__s233\" ((set_type (first (params 108) 2063) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 2063) (contract \"address\") 2063) (set (operations 2063) (cons (transfer (getLocal \"__s233\" 2063) (literal (mutez 0) 2063) (second (params 108) 2063) 108) (operations 2063) 2063) 2063))) (getAllowance True ((bind \"__s234\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 2063) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 2063) \"spender\" 69) 69) 69))) (set_type (second (params 68) 2063) (contract \"nat\") 2063) (set (operations 2063) (cons (transfer (getLocal \"__s234\" 2063) (literal (mutez 0) 2063) (second (params 68) 2063) 68) (operations 2063) 2063) 2063))) (getBalance True ((bind \"__s235\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 2063) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 2063) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 2063) 65) \"balance\" 65) 65))) (set_type (second (params 60) 2063) (contract \"nat\") 2063) (set (operations 2063) (cons (transfer (getLocal \"__s235\" 2063) (literal (mutez 0) 2063) (second (params 60) 2063) 60) (operations 2063) 2063) 2063))) (getTotalSupply True ((bind \"__s236\" ((set_type (first (params 72) 2063) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 2063) (contract \"nat\") 2063) (set (operations 2063) (cons (transfer (getLocal \"__s236\" 2063) (literal (mutez 0) 2063) (second (params 72) 2063) 72) (operations 2063) 2063) 2063))) (liquidate True ((set_type (params 170) \"address\" 171) (set (operations 179) (cons (transfer (params 170) (literal (mutez 0) 179) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 176) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179) (set (operations 187) (cons (transfer (unit) (literal (mutez 0) 187) (openVariant (contract \"liquidate\" \"unit\" (params 170) 182) \"Some\" \"None\" 182) 187) (operations 187) 187) 187))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 270) \"nat\" 271) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 274) 274) (literal (string \"bad state\") 274) 274) (set (attr (data) \"state\" 199) (literal (intOrNat 2) 277) 277) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"Some\" (params 270) 278) 278) (set (attr (data) \"savedState_redeemer\" 279) (variant \"Some\" (sender) 279) 279) (set (operations 288) (cons (transfer (tuple 288 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 282)) (literal (mutez 0) 288) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 283) \"Some\" \"None\" 283) 288) (operations 288) 288) 288))) (redeem_callback True ((set_type (params 292) \"nat\" 293) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 296) (literal (string \"bad sender\") 296) 296) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 2) 299) 299) (literal (string \"bad state\") 299) 299) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 278) \"Some\" \"None\" 302) 302) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 303) (literal (intOrNat 1000000000000000000) 303) 303) (attr (data) \"totalSupply\" 96) 303) 303) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 304) (params 292) 304) (literal (intOrNat 1000000000000000000) 304) 304) 304) (set (attr (data) \"underlyingBalance\" 235) (openVariant (isNat (sub (params 292) (getLocal \"tokensToReceive\" 307) 307) 307) \"Some\" \"None\" 307) 307) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 279) \"Some\" \"None\" 310) 310) (set (operations 320) (cons (transfer (record 311 (address (getLocal \"redeemer\" 312)) (value (getLocal \"tokensToRedeem\" 313))) (literal (mutez 0) 320) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 315) \"Some\" \"None\" 315) 320) (operations 320) 320) 320) (set (operations 333) (cons (transfer (record 323 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 325)) (value (getLocal \"tokensToReceive\" 326))) (literal (mutez 0) 333) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 328) \"Some\" \"None\" 328) 333) (operations 333) 333) 333) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 336) 336) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"None\" (unit) -1) 337) (set (attr (data) \"savedState_redeemer\" 279) (variant \"None\" (unit) -1) 338))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 346) \"unit\" 347) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 350) 350) (literal (string \"bad state\") 350) 350) (set (attr (data) \"state\" 199) (literal (intOrNat 1) 353) 353) (set (operations 362) (cons (transfer (tuple 362 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 356)) (literal (mutez 0) 362) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 357) \"Some\" \"None\" 357) 362) (operations 362) 362) 362))) (updateBalance_callback True ((set_type (params 366) \"nat\" 367) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 370) (literal (string \"bad sender\") 370) 370) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 1) 373) 373) (literal (string \"bad state\") 373) 373) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 376) 376) (set (attr (data) \"underlyingBalance\" 235) (params 366) 379))) (updateContractMetadata True ((set_type (params 419) (tuple \"string\" \"bytes\") 420) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 422) (literal (string \"not governor\") 422) 422) (set (getItem (attr (data) \"metadata\" 426) (first (params 419) 424) 426) (second (params 419) 425) 426))) (updateDexterAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"dexterAddress\" 153) (params 403) 407))) (updateGovernorAddress True ((set_type (params 387) \"address\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"governorAddress\" 422) (params 387) 391))) (updateOvenRegistryAddress True ((set_type (params 411) \"address\" 412) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 414) (literal (string \"not governor\") 414) 414) (set (attr (data) \"ovenRegistryAddress\" 176) (params 411) 415))) (updateRewardPercent True ((set_type (params 395) \"nat\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"rewardPercent\" 139) (params 395) 399))) (updateTokenMetadata True ((set_type (params 430) (tuple \"nat\" (map \"string\" \"bytes\")) 431) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 433) (literal (string \"not governor\") 433) 433) (set (getItem (attr (data) \"token_metadata\" 434) (literal (intOrNat 0) 434) 434) (params 430) 434))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 2063, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 2068 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)) (value (literal (nat 10) 2066)))", "line_no": 2067, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2067)", "show": true, "valid": "(literal (bool True) 2067)", "voting_powers": "(map 2067 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 2079 (address (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)) (value (literal (nat 40) 2077)))", "line_no": 2078, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2078)", "show": true, "valid": "(literal (bool True) 2078)", "voting_powers": "(map 2078 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 2089 (spender (literal (local-address (static_id 1 98)) 98)) (value (literal (nat 10) 2066)))", "line_no": 2088, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2088)", "show": true, "valid": "(literal (bool True) 2088)", "voting_powers": "(map 2088 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 2099 (spender (literal (local-address (static_id 1 98)) 98)) (value (literal (nat 40) 2077)))", "line_no": 2098, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2098)", "show": true, "valid": "(literal (bool True) 2098)", "voting_powers": "(map 2098 )", "export": true}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "deposit", "params": "(literal (nat 10) 2066)", "line_no": 2108, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2108)", "show": true, "valid": "(literal (bool True) 2108)", "voting_powers": "(map 2108 )", "export": true}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "deposit", "params": "(literal (nat 40) 2077)", "line_no": 2114, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2114)", "show": true, "valid": "(literal (bool True) 2114)", "voting_powers": "(map 2114 )", "export": true}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "redeem", "params": "(mul (literal (nat 40) 2077) (literal (intOrNat 1000000000000000000) 2122) 2122)", "line_no": 2121, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2121)", "show": true, "valid": "(literal (bool True) 2121)", "voting_powers": "(map 2121 )", "export": true}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2098) \"balances\" 2128) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 2128) \"balance\" 2128) (literal (nat 0) 2128) 2128)", "line_no": 2128}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 98) 2121) \"balances\" 2129) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 2129) \"balance\" 2129) (mul (literal (nat 10) 2066) (literal (intOrNat 1000000000000000000) 2129) 2129) 2129)", "line_no": 2129}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2098) \"balances\" 2128) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22) 2132) \"balance\" 2132) (literal (nat 40) 2077) 2132)", "line_no": 2132}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 98) 2121) \"balances\" 2129) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22) 2133) \"balance\" 2133) (literal (nat 0) 2133) 2133)", "line_no": 2133}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 98) 2121) \"totalSupply\" 2136) (mul (literal (nat 10) 2066) (literal (intOrNat 1000000000000000000) 2136) 2136) 2136)", "line_no": 2136}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2098) \"balances\" 2128) (literal (local-address (static_id 1 98)) 98) 2139) \"balance\" 2139) (literal (nat 10) 2066) 2139)", "line_no": 2139}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 98) 2121) \"underlyingBalance\" 2140) (literal (nat 10) 2066) 2140)", "line_no": 2140}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "redeem", "params": "(mul (literal (nat 10) 2066) (literal (intOrNat 1000000000000000000) 2144) 2144)", "line_no": 2143, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2143)", "show": true, "valid": "(literal (bool True) 2143)", "voting_powers": "(map 2143 )", "export": true}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2098) \"balances\" 2128) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 2150) \"balance\" 2150) (literal (nat 10) 2066) 2150)", "line_no": 2150}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 98) 2143) \"balances\" 2151) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 2151) \"balance\" 2151) (literal (nat 0) 2151) 2151)", "line_no": 2151}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2098) \"balances\" 2128) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22) 2154) \"balance\" 2154) (literal (nat 40) 2077) 2154)", "line_no": 2154}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 98) 2143) \"balances\" 2151) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22) 2155) \"balance\" 2155) (literal (nat 0) 2155) 2155)", "line_no": 2155}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 98) 2143) \"totalSupply\" 2158) (literal (nat 0) 2158) 2158)", "line_no": 2158}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2098) \"balances\" 2128) (literal (local-address (static_id 1 98)) 98) 2161) \"balance\" 2161) (literal (nat 0) 2161) 2161)", "line_no": 2161}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 98) 2143) \"underlyingBalance\" 2162) (literal (nat 0) 2162) 2162)", "line_no": 2162}], "decompile": false, "kind": "test"}, {"shortname": "redeem_-_can_redeem_partially_from_two_accounts", "longname": "redeem - can redeem partially from two accounts", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 376) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s237\" ((set_type (first (params 89) 2172) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 2172) (contract \"address\") 2172) (set (operations 2172) (cons (transfer (getLocal \"__s237\" 2172) (literal (mutez 0) 2172) (second (params 89) 2172) 89) (operations 2172) 2172) 2172))) (getAllowance True ((bind \"__s238\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 2172) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 2172) \"spender\" 46) 46) 46))) (set_type (second (params 45) 2172) (contract \"nat\") 2172) (set (operations 2172) (cons (transfer (getLocal \"__s238\" 2172) (literal (mutez 0) 2172) (second (params 45) 2172) 45) (operations 2172) 2172) 2172))) (getBalance True ((bind \"__s239\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 2172) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 2172) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 2172) 42) \"balance\" 42) 42))) (set_type (second (params 37) 2172) (contract \"nat\") 2172) (set (operations 2172) (cons (transfer (getLocal \"__s239\" 2172) (literal (mutez 0) 2172) (second (params 37) 2172) 37) (operations 2172) 2172) 2172))) (getTotalSupply True ((bind \"__s240\" ((set_type (first (params 49) 2172) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 2172) (contract \"nat\") 2172) (set (operations 2172) (cons (transfer (getLocal \"__s240\" 2172) (literal (mutez 0) 2172) (second (params 49) 2172) 49) (operations 2172) 2172) 2172))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 2172, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 98)", "export": "(storage (record 98 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 102 ) (bigmap (unknown 377) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 102)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 89 ((literal (string \"\") 2178) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 91)) ((literal (string \"data\") 2178) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 88))) (bigmap \"string\" \"bytes\") 89)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 98)) (rewardPercent (literal (nat 1) 54)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 98)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 78 ((literal (nat 0) 65) (tuple 2178 (literal (nat 0) 65) (type_annotation (map 67 ((literal (string \"name\") 2178) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 69)) ((literal (string \"decimals\") 2178) (literal (bytes \"0x3138\") 70)) ((literal (string \"symbol\") 2178) (literal (bytes \"0x6465787465724c6b555344\") 71)) ((literal (string \"icon\") 2178) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 72))) (map \"string\" \"bytes\") 67)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 78)) (totalSupply (literal (intOrNat 0) 98)) (underlyingBalance (literal (nat 0) 119)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 135) \"unit\" 136) (set (operations 140) (cons (transfer (unit) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) (openVariant (contract \"\" \"unit\" (source) 140) \"Some\" \"None\" 140) 140) (operations 140) 140) 140) (set (operations 156) (cons (transfer (tuple 156 (to_address (self) \"None\") (tuple 156 (literal (intOrNat 1) 156) (add_seconds (now) (literal (int 3600) 148) 148))) (sub (balance) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) 143) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 153) 151) \"Some\" \"None\" 151) 156) (operations 156) 156) 156) (set (operations 166) (cons (transfer (unit) (literal (mutez 0) 166) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 161) \"Some\" \"None\" 161) 166) (operations 166) 166) 166))) (deposit True ((set_type (params 195) \"nat\" 196) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 199) 199) (literal (string \"bad state\") 199) 199) (set (attr (data) \"state\" 199) (literal (intOrNat 3) 202) 202) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"Some\" (params 195) 203) 203) (set (attr (data) \"savedState_depositor\" 204) (variant \"Some\" (sender) 204) 204) (set (operations 213) (cons (transfer (tuple 213 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 207)) (literal (mutez 0) 213) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 208) \"Some\" \"None\" 208) 213) (operations 213) 213) 213))) (deposit_callback True ((set_type (params 217) \"nat\" 218) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 221) (literal (string \"bad sender\") 221) 221) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 3) 224) 224) (literal (string \"bad state\") 224) 224) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 203) \"Some\" \"None\" 227) 227) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 228) (literal (intOrNat 1000000000000000000) 228) 228) 228) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 229) 229) ((defineLocal \"newUnderlyingBalance\" (add (params 217) (getLocal \"tokensToDeposit\" 230) 230) 230) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 231) (literal (intOrNat 1000000000000000000) 231) 231) (getLocal \"newUnderlyingBalance\" 231) 231) 231) (set (getLocal \"newTokens\" 2178) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 232) (attr (data) \"totalSupply\" 96) 232) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 232) (getLocal \"fractionOfPoolOwnership\" 232) 232) 232) \"Some\" \"None\" 232) 232) 232)) 229) (set (attr (data) \"underlyingBalance\" 235) (add (params 217) (getLocal \"tokensToDeposit\" 235) 235) 235) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 204) \"Some\" \"None\" 238) 238) (set (operations 249) (cons (transfer (record 239 (from_ (getLocal \"depositor\" 240)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 242))) (literal (mutez 0) 249) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 244) \"Some\" \"None\" 244) 249) (operations 249) 249) 249) (set (operations 261) (cons (transfer (record 252 (address (getLocal \"depositor\" 253)) (value (getLocal \"newTokens\" 254))) (literal (mutez 0) 261) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 256) \"Some\" \"None\" 256) 261) (operations 261) 261) 261) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 264) 264) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"None\" (unit) -1) 265) (set (attr (data) \"savedState_depositor\" 204) (variant \"None\" (unit) -1) 266))) (getAdministrator True ((bind \"__s241\" ((set_type (first (params 108) 2178) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 2178) (contract \"address\") 2178) (set (operations 2178) (cons (transfer (getLocal \"__s241\" 2178) (literal (mutez 0) 2178) (second (params 108) 2178) 108) (operations 2178) 2178) 2178))) (getAllowance True ((bind \"__s242\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 2178) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 2178) \"spender\" 69) 69) 69))) (set_type (second (params 68) 2178) (contract \"nat\") 2178) (set (operations 2178) (cons (transfer (getLocal \"__s242\" 2178) (literal (mutez 0) 2178) (second (params 68) 2178) 68) (operations 2178) 2178) 2178))) (getBalance True ((bind \"__s243\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 2178) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 2178) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 2178) 65) \"balance\" 65) 65))) (set_type (second (params 60) 2178) (contract \"nat\") 2178) (set (operations 2178) (cons (transfer (getLocal \"__s243\" 2178) (literal (mutez 0) 2178) (second (params 60) 2178) 60) (operations 2178) 2178) 2178))) (getTotalSupply True ((bind \"__s244\" ((set_type (first (params 72) 2178) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 2178) (contract \"nat\") 2178) (set (operations 2178) (cons (transfer (getLocal \"__s244\" 2178) (literal (mutez 0) 2178) (second (params 72) 2178) 72) (operations 2178) 2178) 2178))) (liquidate True ((set_type (params 170) \"address\" 171) (set (operations 179) (cons (transfer (params 170) (literal (mutez 0) 179) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 176) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179) (set (operations 187) (cons (transfer (unit) (literal (mutez 0) 187) (openVariant (contract \"liquidate\" \"unit\" (params 170) 182) \"Some\" \"None\" 182) 187) (operations 187) 187) 187))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 270) \"nat\" 271) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 274) 274) (literal (string \"bad state\") 274) 274) (set (attr (data) \"state\" 199) (literal (intOrNat 2) 277) 277) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"Some\" (params 270) 278) 278) (set (attr (data) \"savedState_redeemer\" 279) (variant \"Some\" (sender) 279) 279) (set (operations 288) (cons (transfer (tuple 288 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 282)) (literal (mutez 0) 288) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 283) \"Some\" \"None\" 283) 288) (operations 288) 288) 288))) (redeem_callback True ((set_type (params 292) \"nat\" 293) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 296) (literal (string \"bad sender\") 296) 296) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 2) 299) 299) (literal (string \"bad state\") 299) 299) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 278) \"Some\" \"None\" 302) 302) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 303) (literal (intOrNat 1000000000000000000) 303) 303) (attr (data) \"totalSupply\" 96) 303) 303) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 304) (params 292) 304) (literal (intOrNat 1000000000000000000) 304) 304) 304) (set (attr (data) \"underlyingBalance\" 235) (openVariant (isNat (sub (params 292) (getLocal \"tokensToReceive\" 307) 307) 307) \"Some\" \"None\" 307) 307) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 279) \"Some\" \"None\" 310) 310) (set (operations 320) (cons (transfer (record 311 (address (getLocal \"redeemer\" 312)) (value (getLocal \"tokensToRedeem\" 313))) (literal (mutez 0) 320) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 315) \"Some\" \"None\" 315) 320) (operations 320) 320) 320) (set (operations 333) (cons (transfer (record 323 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 325)) (value (getLocal \"tokensToReceive\" 326))) (literal (mutez 0) 333) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 328) \"Some\" \"None\" 328) 333) (operations 333) 333) 333) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 336) 336) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"None\" (unit) -1) 337) (set (attr (data) \"savedState_redeemer\" 279) (variant \"None\" (unit) -1) 338))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 346) \"unit\" 347) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 350) 350) (literal (string \"bad state\") 350) 350) (set (attr (data) \"state\" 199) (literal (intOrNat 1) 353) 353) (set (operations 362) (cons (transfer (tuple 362 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 356)) (literal (mutez 0) 362) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 357) \"Some\" \"None\" 357) 362) (operations 362) 362) 362))) (updateBalance_callback True ((set_type (params 366) \"nat\" 367) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 370) (literal (string \"bad sender\") 370) 370) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 1) 373) 373) (literal (string \"bad state\") 373) 373) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 376) 376) (set (attr (data) \"underlyingBalance\" 235) (params 366) 379))) (updateContractMetadata True ((set_type (params 419) (tuple \"string\" \"bytes\") 420) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 422) (literal (string \"not governor\") 422) 422) (set (getItem (attr (data) \"metadata\" 426) (first (params 419) 424) 426) (second (params 419) 425) 426))) (updateDexterAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"dexterAddress\" 153) (params 403) 407))) (updateGovernorAddress True ((set_type (params 387) \"address\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"governorAddress\" 422) (params 387) 391))) (updateOvenRegistryAddress True ((set_type (params 411) \"address\" 412) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 414) (literal (string \"not governor\") 414) 414) (set (attr (data) \"ovenRegistryAddress\" 176) (params 411) 415))) (updateRewardPercent True ((set_type (params 395) \"nat\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"rewardPercent\" 139) (params 395) 399))) (updateTokenMetadata True ((set_type (params 430) (tuple \"nat\" (map \"string\" \"bytes\")) 431) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 433) (literal (string \"not governor\") 433) 433) (set (getItem (attr (data) \"token_metadata\" 434) (literal (intOrNat 0) 434) 434) (params 430) 434))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 2178, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 2183 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)) (value (literal (nat 10) 2181)))", "line_no": 2182, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2182)", "show": true, "valid": "(literal (bool True) 2182)", "voting_powers": "(map 2182 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 2194 (address (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)) (value (literal (nat 40) 2192)))", "line_no": 2193, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2193)", "show": true, "valid": "(literal (bool True) 2193)", "voting_powers": "(map 2193 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 2204 (spender (literal (local-address (static_id 1 98)) 98)) (value (literal (nat 10) 2181)))", "line_no": 2203, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2203)", "show": true, "valid": "(literal (bool True) 2203)", "voting_powers": "(map 2203 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 2214 (spender (literal (local-address (static_id 1 98)) 98)) (value (literal (nat 40) 2192)))", "line_no": 2213, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2213)", "show": true, "valid": "(literal (bool True) 2213)", "voting_powers": "(map 2213 )", "export": true}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "deposit", "params": "(literal (nat 10) 2181)", "line_no": 2223, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2223)", "show": true, "valid": "(literal (bool True) 2223)", "voting_powers": "(map 2223 )", "export": true}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "deposit", "params": "(literal (nat 40) 2192)", "line_no": 2229, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2229)", "show": true, "valid": "(literal (bool True) 2229)", "voting_powers": "(map 2229 )", "export": true}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "redeem", "params": "(mul (truediv (literal (nat 10) 2181) (literal (intOrNat 2) 2237) 2237) (literal (intOrNat 1000000000000000000) 2237) 2237)", "line_no": 2236, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2236)", "show": true, "valid": "(literal (bool True) 2236)", "voting_powers": "(map 2236 )", "export": true}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2213) \"balances\" 2243) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 2243) \"balance\" 2243) (truediv (literal (nat 10) 2181) (literal (intOrNat 2) 2243) 2243) 2243)", "line_no": 2243}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 98) 2236) \"balances\" 2244) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 2244) \"balance\" 2244) (mul (truediv (literal (nat 10) 2181) (literal (intOrNat 2) 2244) 2244) (literal (intOrNat 1000000000000000000) 2244) 2244) 2244)", "line_no": 2244}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2213) \"balances\" 2243) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22) 2247) \"balance\" 2247) (literal (nat 0) 2247) 2247)", "line_no": 2247}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 98) 2236) \"balances\" 2244) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22) 2248) \"balance\" 2248) (mul (mul (literal (nat 10) 2181) (literal (intOrNat 4) 2248) 2248) (literal (intOrNat 1000000000000000000) 2248) 2248) 2248)", "line_no": 2248}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 98) 2236) \"totalSupply\" 2251) (mul (add (literal (nat 40) 2192) (truediv (literal (nat 10) 2181) (literal (intOrNat 2) 2251) 2251) 2251) (literal (intOrNat 1000000000000000000) 2251) 2251) 2251)", "line_no": 2251}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2213) \"balances\" 2243) (literal (local-address (static_id 1 98)) 98) 2254) \"balance\" 2254) (add (literal (nat 40) 2192) (truediv (literal (nat 10) 2181) (literal (intOrNat 2) 2254) 2254) 2254) 2254)", "line_no": 2254}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 98) 2236) \"underlyingBalance\" 2255) (add (literal (nat 40) 2192) (truediv (literal (nat 10) 2181) (literal (intOrNat 2) 2255) 2255) 2255) 2255)", "line_no": 2255}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "redeem", "params": "(mul (truediv (literal (nat 40) 2192) (literal (intOrNat 4) 2259) 2259) (literal (intOrNat 1000000000000000000) 2259) 2259)", "line_no": 2258, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2258)", "show": true, "valid": "(literal (bool True) 2258)", "voting_powers": "(map 2258 )", "export": true}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2213) \"balances\" 2243) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 2265) \"balance\" 2265) (truediv (literal (nat 10) 2181) (literal (intOrNat 2) 2265) 2265) 2265)", "line_no": 2265}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 98) 2258) \"balances\" 2266) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 2266) \"balance\" 2266) (mul (truediv (literal (nat 10) 2181) (literal (intOrNat 2) 2266) 2266) (literal (intOrNat 1000000000000000000) 2266) 2266) 2266)", "line_no": 2266}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2213) \"balances\" 2243) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22) 2269) \"balance\" 2269) (literal (intOrNat 9) 2269) 2269)", "line_no": 2269}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 98) 2258) \"balances\" 2266) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22) 2270) \"balance\" 2270) (literal (intOrNat 30000000000000000000) 2270) 2270)", "line_no": 2270}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 98) 2258) \"totalSupply\" 2274) (mul (literal (nat 35) 2274) (literal (intOrNat 1000000000000000000) 2274) 2274) 2274)", "line_no": 2274}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2213) \"balances\" 2243) (literal (local-address (static_id 1 98)) 98) 2280) \"balance\" 2280) (literal (nat 36) 2279) 2280)", "line_no": 2280}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 98) 2258) \"underlyingBalance\" 2281) (literal (nat 36) 2279) 2281)", "line_no": 2281}], "decompile": false, "kind": "test"}, {"shortname": "redeem_-_can_redeem_from_two_accounts_with_liquidity_added", "longname": "redeem - can redeem from two accounts with liquidity added", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 387) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s245\" ((set_type (first (params 89) 2291) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 2291) (contract \"address\") 2291) (set (operations 2291) (cons (transfer (getLocal \"__s245\" 2291) (literal (mutez 0) 2291) (second (params 89) 2291) 89) (operations 2291) 2291) 2291))) (getAllowance True ((bind \"__s246\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 2291) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 2291) \"spender\" 46) 46) 46))) (set_type (second (params 45) 2291) (contract \"nat\") 2291) (set (operations 2291) (cons (transfer (getLocal \"__s246\" 2291) (literal (mutez 0) 2291) (second (params 45) 2291) 45) (operations 2291) 2291) 2291))) (getBalance True ((bind \"__s247\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 2291) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 2291) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 2291) 42) \"balance\" 42) 42))) (set_type (second (params 37) 2291) (contract \"nat\") 2291) (set (operations 2291) (cons (transfer (getLocal \"__s247\" 2291) (literal (mutez 0) 2291) (second (params 37) 2291) 37) (operations 2291) 2291) 2291))) (getTotalSupply True ((bind \"__s248\" ((set_type (first (params 49) 2291) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 2291) (contract \"nat\") 2291) (set (operations 2291) (cons (transfer (getLocal \"__s248\" 2291) (literal (mutez 0) 2291) (second (params 49) 2291) 49) (operations 2291) 2291) 2291))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 2291, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 98)", "export": "(storage (record 98 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 102 ) (bigmap (unknown 388) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 102)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 89 ((literal (string \"\") 2297) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 91)) ((literal (string \"data\") 2297) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 88))) (bigmap \"string\" \"bytes\") 89)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 98)) (rewardPercent (literal (nat 1) 54)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 98)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 78 ((literal (nat 0) 65) (tuple 2297 (literal (nat 0) 65) (type_annotation (map 67 ((literal (string \"name\") 2297) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 69)) ((literal (string \"decimals\") 2297) (literal (bytes \"0x3138\") 70)) ((literal (string \"symbol\") 2297) (literal (bytes \"0x6465787465724c6b555344\") 71)) ((literal (string \"icon\") 2297) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 72))) (map \"string\" \"bytes\") 67)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 78)) (totalSupply (literal (intOrNat 0) 98)) (underlyingBalance (literal (nat 0) 119)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 135) \"unit\" 136) (set (operations 140) (cons (transfer (unit) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) (openVariant (contract \"\" \"unit\" (source) 140) \"Some\" \"None\" 140) 140) (operations 140) 140) 140) (set (operations 156) (cons (transfer (tuple 156 (to_address (self) \"None\") (tuple 156 (literal (intOrNat 1) 156) (add_seconds (now) (literal (int 3600) 148) 148))) (sub (balance) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) 143) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 153) 151) \"Some\" \"None\" 151) 156) (operations 156) 156) 156) (set (operations 166) (cons (transfer (unit) (literal (mutez 0) 166) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 161) \"Some\" \"None\" 161) 166) (operations 166) 166) 166))) (deposit True ((set_type (params 195) \"nat\" 196) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 199) 199) (literal (string \"bad state\") 199) 199) (set (attr (data) \"state\" 199) (literal (intOrNat 3) 202) 202) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"Some\" (params 195) 203) 203) (set (attr (data) \"savedState_depositor\" 204) (variant \"Some\" (sender) 204) 204) (set (operations 213) (cons (transfer (tuple 213 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 207)) (literal (mutez 0) 213) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 208) \"Some\" \"None\" 208) 213) (operations 213) 213) 213))) (deposit_callback True ((set_type (params 217) \"nat\" 218) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 221) (literal (string \"bad sender\") 221) 221) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 3) 224) 224) (literal (string \"bad state\") 224) 224) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 203) \"Some\" \"None\" 227) 227) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 228) (literal (intOrNat 1000000000000000000) 228) 228) 228) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 229) 229) ((defineLocal \"newUnderlyingBalance\" (add (params 217) (getLocal \"tokensToDeposit\" 230) 230) 230) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 231) (literal (intOrNat 1000000000000000000) 231) 231) (getLocal \"newUnderlyingBalance\" 231) 231) 231) (set (getLocal \"newTokens\" 2297) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 232) (attr (data) \"totalSupply\" 96) 232) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 232) (getLocal \"fractionOfPoolOwnership\" 232) 232) 232) \"Some\" \"None\" 232) 232) 232)) 229) (set (attr (data) \"underlyingBalance\" 235) (add (params 217) (getLocal \"tokensToDeposit\" 235) 235) 235) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 204) \"Some\" \"None\" 238) 238) (set (operations 249) (cons (transfer (record 239 (from_ (getLocal \"depositor\" 240)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 242))) (literal (mutez 0) 249) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 244) \"Some\" \"None\" 244) 249) (operations 249) 249) 249) (set (operations 261) (cons (transfer (record 252 (address (getLocal \"depositor\" 253)) (value (getLocal \"newTokens\" 254))) (literal (mutez 0) 261) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 256) \"Some\" \"None\" 256) 261) (operations 261) 261) 261) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 264) 264) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"None\" (unit) -1) 265) (set (attr (data) \"savedState_depositor\" 204) (variant \"None\" (unit) -1) 266))) (getAdministrator True ((bind \"__s249\" ((set_type (first (params 108) 2297) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 2297) (contract \"address\") 2297) (set (operations 2297) (cons (transfer (getLocal \"__s249\" 2297) (literal (mutez 0) 2297) (second (params 108) 2297) 108) (operations 2297) 2297) 2297))) (getAllowance True ((bind \"__s250\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 2297) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 2297) \"spender\" 69) 69) 69))) (set_type (second (params 68) 2297) (contract \"nat\") 2297) (set (operations 2297) (cons (transfer (getLocal \"__s250\" 2297) (literal (mutez 0) 2297) (second (params 68) 2297) 68) (operations 2297) 2297) 2297))) (getBalance True ((bind \"__s251\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 2297) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 2297) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 2297) 65) \"balance\" 65) 65))) (set_type (second (params 60) 2297) (contract \"nat\") 2297) (set (operations 2297) (cons (transfer (getLocal \"__s251\" 2297) (literal (mutez 0) 2297) (second (params 60) 2297) 60) (operations 2297) 2297) 2297))) (getTotalSupply True ((bind \"__s252\" ((set_type (first (params 72) 2297) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 2297) (contract \"nat\") 2297) (set (operations 2297) (cons (transfer (getLocal \"__s252\" 2297) (literal (mutez 0) 2297) (second (params 72) 2297) 72) (operations 2297) 2297) 2297))) (liquidate True ((set_type (params 170) \"address\" 171) (set (operations 179) (cons (transfer (params 170) (literal (mutez 0) 179) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 176) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179) (set (operations 187) (cons (transfer (unit) (literal (mutez 0) 187) (openVariant (contract \"liquidate\" \"unit\" (params 170) 182) \"Some\" \"None\" 182) 187) (operations 187) 187) 187))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 270) \"nat\" 271) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 274) 274) (literal (string \"bad state\") 274) 274) (set (attr (data) \"state\" 199) (literal (intOrNat 2) 277) 277) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"Some\" (params 270) 278) 278) (set (attr (data) \"savedState_redeemer\" 279) (variant \"Some\" (sender) 279) 279) (set (operations 288) (cons (transfer (tuple 288 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 282)) (literal (mutez 0) 288) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 283) \"Some\" \"None\" 283) 288) (operations 288) 288) 288))) (redeem_callback True ((set_type (params 292) \"nat\" 293) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 296) (literal (string \"bad sender\") 296) 296) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 2) 299) 299) (literal (string \"bad state\") 299) 299) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 278) \"Some\" \"None\" 302) 302) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 303) (literal (intOrNat 1000000000000000000) 303) 303) (attr (data) \"totalSupply\" 96) 303) 303) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 304) (params 292) 304) (literal (intOrNat 1000000000000000000) 304) 304) 304) (set (attr (data) \"underlyingBalance\" 235) (openVariant (isNat (sub (params 292) (getLocal \"tokensToReceive\" 307) 307) 307) \"Some\" \"None\" 307) 307) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 279) \"Some\" \"None\" 310) 310) (set (operations 320) (cons (transfer (record 311 (address (getLocal \"redeemer\" 312)) (value (getLocal \"tokensToRedeem\" 313))) (literal (mutez 0) 320) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 315) \"Some\" \"None\" 315) 320) (operations 320) 320) 320) (set (operations 333) (cons (transfer (record 323 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 325)) (value (getLocal \"tokensToReceive\" 326))) (literal (mutez 0) 333) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 328) \"Some\" \"None\" 328) 333) (operations 333) 333) 333) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 336) 336) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"None\" (unit) -1) 337) (set (attr (data) \"savedState_redeemer\" 279) (variant \"None\" (unit) -1) 338))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 346) \"unit\" 347) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 350) 350) (literal (string \"bad state\") 350) 350) (set (attr (data) \"state\" 199) (literal (intOrNat 1) 353) 353) (set (operations 362) (cons (transfer (tuple 362 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 356)) (literal (mutez 0) 362) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 357) \"Some\" \"None\" 357) 362) (operations 362) 362) 362))) (updateBalance_callback True ((set_type (params 366) \"nat\" 367) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 370) (literal (string \"bad sender\") 370) 370) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 1) 373) 373) (literal (string \"bad state\") 373) 373) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 376) 376) (set (attr (data) \"underlyingBalance\" 235) (params 366) 379))) (updateContractMetadata True ((set_type (params 419) (tuple \"string\" \"bytes\") 420) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 422) (literal (string \"not governor\") 422) 422) (set (getItem (attr (data) \"metadata\" 426) (first (params 419) 424) 426) (second (params 419) 425) 426))) (updateDexterAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"dexterAddress\" 153) (params 403) 407))) (updateGovernorAddress True ((set_type (params 387) \"address\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"governorAddress\" 422) (params 387) 391))) (updateOvenRegistryAddress True ((set_type (params 411) \"address\" 412) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 414) (literal (string \"not governor\") 414) 414) (set (attr (data) \"ovenRegistryAddress\" 176) (params 411) 415))) (updateRewardPercent True ((set_type (params 395) \"nat\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"rewardPercent\" 139) (params 395) 399))) (updateTokenMetadata True ((set_type (params 430) (tuple \"nat\" (map \"string\" \"bytes\")) 431) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 433) (literal (string \"not governor\") 433) 433) (set (getItem (attr (data) \"token_metadata\" 434) (literal (intOrNat 0) 434) 434) (params 430) 434))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 2297, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 2302 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)) (value (literal (nat 10) 2300)))", "line_no": 2301, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2301)", "show": true, "valid": "(literal (bool True) 2301)", "voting_powers": "(map 2301 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 2313 (address (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)) (value (literal (nat 40) 2311)))", "line_no": 2312, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2312)", "show": true, "valid": "(literal (bool True) 2312)", "voting_powers": "(map 2312 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 2323 (spender (literal (local-address (static_id 1 98)) 98)) (value (literal (nat 10) 2300)))", "line_no": 2322, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2322)", "show": true, "valid": "(literal (bool True) 2322)", "voting_powers": "(map 2322 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 2333 (spender (literal (local-address (static_id 1 98)) 98)) (value (literal (nat 40) 2311)))", "line_no": 2332, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2332)", "show": true, "valid": "(literal (bool True) 2332)", "voting_powers": "(map 2332 )", "export": true}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "deposit", "params": "(literal (nat 10) 2300)", "line_no": 2342, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2342)", "show": true, "valid": "(literal (bool True) 2342)", "voting_powers": "(map 2342 )", "export": true}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "deposit", "params": "(literal (nat 40) 2311)", "line_no": 2348, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2348)", "show": true, "valid": "(literal (bool True) 2348)", "voting_powers": "(map 2348 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 2357 (address (literal (local-address (static_id 1 98)) 98)) (value (literal (intOrNat 10) 2357)))", "line_no": 2356, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2356)", "show": true, "valid": "(literal (bool True) 2356)", "voting_powers": "(map 2356 )", "export": true}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "updateBalance", "params": "(unit)", "line_no": 2366, "title": "", "messageClass": "", "source": "none", "sender": "none", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2366)", "show": true, "valid": "(literal (bool True) 2366)", "voting_powers": "(map 2366 )", "export": true}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "redeem", "params": "(mul (literal (nat 10) 2300) (literal (intOrNat 1000000000000000000) 2370) 2370)", "line_no": 2369, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2369)", "show": true, "valid": "(literal (bool True) 2369)", "voting_powers": "(map 2369 )", "export": true}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2356) \"balances\" 2378) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 2378) \"balance\" 2378) (add (literal (nat 10) 2300) (literal (nat 2) 2377) 2378) 2378)", "line_no": 2378}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 98) 2369) \"balances\" 2379) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 2379) \"balance\" 2379) (literal (nat 0) 2379) 2379)", "line_no": 2379}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2356) \"balances\" 2378) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22) 2382) \"balance\" 2382) (literal (nat 0) 2382) 2382)", "line_no": 2382}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 98) 2369) \"balances\" 2379) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22) 2383) \"balance\" 2383) (mul (mul (literal (nat 10) 2300) (literal (intOrNat 4) 2383) 2383) (literal (intOrNat 1000000000000000000) 2383) 2383) 2383)", "line_no": 2383}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 98) 2369) \"totalSupply\" 2386) (mul (literal (nat 40) 2311) (literal (intOrNat 1000000000000000000) 2386) 2386) 2386)", "line_no": 2386}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2356) \"balances\" 2378) (literal (local-address (static_id 1 98)) 98) 2390) \"balance\" 2390) (add (literal (nat 40) 2311) (openVariant (isNat (sub (literal (intOrNat 10) 2390) (literal (nat 2) 2377) 2390) 2390) \"Some\" \"None\" 2390) 2390) 2390)", "line_no": 2390}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 98) 2369) \"underlyingBalance\" 2391) (add (literal (nat 40) 2311) (openVariant (isNat (sub (literal (intOrNat 10) 2391) (literal (nat 2) 2377) 2391) 2391) \"Some\" \"None\" 2391) 2391) 2391)", "line_no": 2391}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "redeem", "params": "(mul (literal (nat 40) 2311) (literal (intOrNat 1000000000000000000) 2395) 2395)", "line_no": 2394, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2394)", "show": true, "valid": "(literal (bool True) 2394)", "voting_powers": "(map 2394 )", "export": true}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2356) \"balances\" 2378) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 2401) \"balance\" 2401) (add (literal (nat 10) 2300) (literal (nat 2) 2377) 2401) 2401)", "line_no": 2401}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 98) 2394) \"balances\" 2402) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 2402) \"balance\" 2402) (literal (nat 0) 2402) 2402)", "line_no": 2402}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2356) \"balances\" 2378) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22) 2407) \"balance\" 2407) (add (literal (nat 40) 2311) (literal (nat 8) 2406) 2407) 2407)", "line_no": 2407}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 98) 2394) \"balances\" 2402) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22) 2408) \"balance\" 2408) (literal (nat 0) 2408) 2408)", "line_no": 2408}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 98) 2394) \"totalSupply\" 2411) (literal (nat 0) 2411) 2411)", "line_no": 2411}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2356) \"balances\" 2378) (literal (local-address (static_id 1 98)) 98) 2414) \"balance\" 2414) (literal (nat 0) 2414) 2414)", "line_no": 2414}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 98) 2394) \"underlyingBalance\" 2415) (literal (nat 0) 2415) 2415)", "line_no": 2415}], "decompile": false, "kind": "test"}, {"shortname": "redeem_-_can_redeem_correctly_from_accounts_joining_after_liquidity_is_added", "longname": "redeem - can redeem correctly from accounts joining after liquidity is added", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 398) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s253\" ((set_type (first (params 89) 2425) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 2425) (contract \"address\") 2425) (set (operations 2425) (cons (transfer (getLocal \"__s253\" 2425) (literal (mutez 0) 2425) (second (params 89) 2425) 89) (operations 2425) 2425) 2425))) (getAllowance True ((bind \"__s254\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 2425) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 2425) \"spender\" 46) 46) 46))) (set_type (second (params 45) 2425) (contract \"nat\") 2425) (set (operations 2425) (cons (transfer (getLocal \"__s254\" 2425) (literal (mutez 0) 2425) (second (params 45) 2425) 45) (operations 2425) 2425) 2425))) (getBalance True ((bind \"__s255\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 2425) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 2425) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 2425) 42) \"balance\" 42) 42))) (set_type (second (params 37) 2425) (contract \"nat\") 2425) (set (operations 2425) (cons (transfer (getLocal \"__s255\" 2425) (literal (mutez 0) 2425) (second (params 37) 2425) 37) (operations 2425) 2425) 2425))) (getTotalSupply True ((bind \"__s256\" ((set_type (first (params 49) 2425) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 2425) (contract \"nat\") 2425) (set (operations 2425) (cons (transfer (getLocal \"__s256\" 2425) (literal (mutez 0) 2425) (second (params 49) 2425) 49) (operations 2425) 2425) 2425))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 2425, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 98)", "export": "(storage (record 98 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 102 ) (bigmap (unknown 399) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 102)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 89 ((literal (string \"\") 2431) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 91)) ((literal (string \"data\") 2431) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 88))) (bigmap \"string\" \"bytes\") 89)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 98)) (rewardPercent (literal (nat 1) 54)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 98)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 78 ((literal (nat 0) 65) (tuple 2431 (literal (nat 0) 65) (type_annotation (map 67 ((literal (string \"name\") 2431) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 69)) ((literal (string \"decimals\") 2431) (literal (bytes \"0x3138\") 70)) ((literal (string \"symbol\") 2431) (literal (bytes \"0x6465787465724c6b555344\") 71)) ((literal (string \"icon\") 2431) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 72))) (map \"string\" \"bytes\") 67)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 78)) (totalSupply (literal (intOrNat 0) 98)) (underlyingBalance (literal (nat 0) 119)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 135) \"unit\" 136) (set (operations 140) (cons (transfer (unit) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) (openVariant (contract \"\" \"unit\" (source) 140) \"Some\" \"None\" 140) 140) (operations 140) 140) 140) (set (operations 156) (cons (transfer (tuple 156 (to_address (self) \"None\") (tuple 156 (literal (intOrNat 1) 156) (add_seconds (now) (literal (int 3600) 148) 148))) (sub (balance) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) 143) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 153) 151) \"Some\" \"None\" 151) 156) (operations 156) 156) 156) (set (operations 166) (cons (transfer (unit) (literal (mutez 0) 166) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 161) \"Some\" \"None\" 161) 166) (operations 166) 166) 166))) (deposit True ((set_type (params 195) \"nat\" 196) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 199) 199) (literal (string \"bad state\") 199) 199) (set (attr (data) \"state\" 199) (literal (intOrNat 3) 202) 202) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"Some\" (params 195) 203) 203) (set (attr (data) \"savedState_depositor\" 204) (variant \"Some\" (sender) 204) 204) (set (operations 213) (cons (transfer (tuple 213 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 207)) (literal (mutez 0) 213) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 208) \"Some\" \"None\" 208) 213) (operations 213) 213) 213))) (deposit_callback True ((set_type (params 217) \"nat\" 218) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 221) (literal (string \"bad sender\") 221) 221) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 3) 224) 224) (literal (string \"bad state\") 224) 224) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 203) \"Some\" \"None\" 227) 227) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 228) (literal (intOrNat 1000000000000000000) 228) 228) 228) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 229) 229) ((defineLocal \"newUnderlyingBalance\" (add (params 217) (getLocal \"tokensToDeposit\" 230) 230) 230) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 231) (literal (intOrNat 1000000000000000000) 231) 231) (getLocal \"newUnderlyingBalance\" 231) 231) 231) (set (getLocal \"newTokens\" 2431) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 232) (attr (data) \"totalSupply\" 96) 232) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 232) (getLocal \"fractionOfPoolOwnership\" 232) 232) 232) \"Some\" \"None\" 232) 232) 232)) 229) (set (attr (data) \"underlyingBalance\" 235) (add (params 217) (getLocal \"tokensToDeposit\" 235) 235) 235) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 204) \"Some\" \"None\" 238) 238) (set (operations 249) (cons (transfer (record 239 (from_ (getLocal \"depositor\" 240)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 242))) (literal (mutez 0) 249) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 244) \"Some\" \"None\" 244) 249) (operations 249) 249) 249) (set (operations 261) (cons (transfer (record 252 (address (getLocal \"depositor\" 253)) (value (getLocal \"newTokens\" 254))) (literal (mutez 0) 261) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 256) \"Some\" \"None\" 256) 261) (operations 261) 261) 261) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 264) 264) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"None\" (unit) -1) 265) (set (attr (data) \"savedState_depositor\" 204) (variant \"None\" (unit) -1) 266))) (getAdministrator True ((bind \"__s257\" ((set_type (first (params 108) 2431) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 2431) (contract \"address\") 2431) (set (operations 2431) (cons (transfer (getLocal \"__s257\" 2431) (literal (mutez 0) 2431) (second (params 108) 2431) 108) (operations 2431) 2431) 2431))) (getAllowance True ((bind \"__s258\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 2431) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 2431) \"spender\" 69) 69) 69))) (set_type (second (params 68) 2431) (contract \"nat\") 2431) (set (operations 2431) (cons (transfer (getLocal \"__s258\" 2431) (literal (mutez 0) 2431) (second (params 68) 2431) 68) (operations 2431) 2431) 2431))) (getBalance True ((bind \"__s259\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 2431) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 2431) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 2431) 65) \"balance\" 65) 65))) (set_type (second (params 60) 2431) (contract \"nat\") 2431) (set (operations 2431) (cons (transfer (getLocal \"__s259\" 2431) (literal (mutez 0) 2431) (second (params 60) 2431) 60) (operations 2431) 2431) 2431))) (getTotalSupply True ((bind \"__s260\" ((set_type (first (params 72) 2431) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 2431) (contract \"nat\") 2431) (set (operations 2431) (cons (transfer (getLocal \"__s260\" 2431) (literal (mutez 0) 2431) (second (params 72) 2431) 72) (operations 2431) 2431) 2431))) (liquidate True ((set_type (params 170) \"address\" 171) (set (operations 179) (cons (transfer (params 170) (literal (mutez 0) 179) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 176) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179) (set (operations 187) (cons (transfer (unit) (literal (mutez 0) 187) (openVariant (contract \"liquidate\" \"unit\" (params 170) 182) \"Some\" \"None\" 182) 187) (operations 187) 187) 187))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 270) \"nat\" 271) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 274) 274) (literal (string \"bad state\") 274) 274) (set (attr (data) \"state\" 199) (literal (intOrNat 2) 277) 277) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"Some\" (params 270) 278) 278) (set (attr (data) \"savedState_redeemer\" 279) (variant \"Some\" (sender) 279) 279) (set (operations 288) (cons (transfer (tuple 288 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 282)) (literal (mutez 0) 288) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 283) \"Some\" \"None\" 283) 288) (operations 288) 288) 288))) (redeem_callback True ((set_type (params 292) \"nat\" 293) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 296) (literal (string \"bad sender\") 296) 296) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 2) 299) 299) (literal (string \"bad state\") 299) 299) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 278) \"Some\" \"None\" 302) 302) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 303) (literal (intOrNat 1000000000000000000) 303) 303) (attr (data) \"totalSupply\" 96) 303) 303) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 304) (params 292) 304) (literal (intOrNat 1000000000000000000) 304) 304) 304) (set (attr (data) \"underlyingBalance\" 235) (openVariant (isNat (sub (params 292) (getLocal \"tokensToReceive\" 307) 307) 307) \"Some\" \"None\" 307) 307) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 279) \"Some\" \"None\" 310) 310) (set (operations 320) (cons (transfer (record 311 (address (getLocal \"redeemer\" 312)) (value (getLocal \"tokensToRedeem\" 313))) (literal (mutez 0) 320) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 315) \"Some\" \"None\" 315) 320) (operations 320) 320) 320) (set (operations 333) (cons (transfer (record 323 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 325)) (value (getLocal \"tokensToReceive\" 326))) (literal (mutez 0) 333) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 328) \"Some\" \"None\" 328) 333) (operations 333) 333) 333) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 336) 336) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"None\" (unit) -1) 337) (set (attr (data) \"savedState_redeemer\" 279) (variant \"None\" (unit) -1) 338))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 346) \"unit\" 347) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 350) 350) (literal (string \"bad state\") 350) 350) (set (attr (data) \"state\" 199) (literal (intOrNat 1) 353) 353) (set (operations 362) (cons (transfer (tuple 362 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 356)) (literal (mutez 0) 362) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 357) \"Some\" \"None\" 357) 362) (operations 362) 362) 362))) (updateBalance_callback True ((set_type (params 366) \"nat\" 367) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 370) (literal (string \"bad sender\") 370) 370) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 1) 373) 373) (literal (string \"bad state\") 373) 373) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 376) 376) (set (attr (data) \"underlyingBalance\" 235) (params 366) 379))) (updateContractMetadata True ((set_type (params 419) (tuple \"string\" \"bytes\") 420) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 422) (literal (string \"not governor\") 422) 422) (set (getItem (attr (data) \"metadata\" 426) (first (params 419) 424) 426) (second (params 419) 425) 426))) (updateDexterAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"dexterAddress\" 153) (params 403) 407))) (updateGovernorAddress True ((set_type (params 387) \"address\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"governorAddress\" 422) (params 387) 391))) (updateOvenRegistryAddress True ((set_type (params 411) \"address\" 412) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 414) (literal (string \"not governor\") 414) 414) (set (attr (data) \"ovenRegistryAddress\" 176) (params 411) 415))) (updateRewardPercent True ((set_type (params 395) \"nat\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"rewardPercent\" 139) (params 395) 399))) (updateTokenMetadata True ((set_type (params 430) (tuple \"nat\" (map \"string\" \"bytes\")) 431) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 433) (literal (string \"not governor\") 433) 433) (set (getItem (attr (data) \"token_metadata\" 434) (literal (intOrNat 0) 434) 434) (params 430) 434))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 2431, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 2436 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)) (value (literal (nat 10) 2434)))", "line_no": 2435, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2435)", "show": true, "valid": "(literal (bool True) 2435)", "voting_powers": "(map 2435 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 2447 (address (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)) (value (literal (nat 40) 2445)))", "line_no": 2446, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2446)", "show": true, "valid": "(literal (bool True) 2446)", "voting_powers": "(map 2446 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 2458 (address (literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 23)) (value (literal (nat 60) 2456)))", "line_no": 2457, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2457)", "show": true, "valid": "(literal (bool True) 2457)", "voting_powers": "(map 2457 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 2468 (spender (literal (local-address (static_id 1 98)) 98)) (value (literal (nat 10) 2434)))", "line_no": 2467, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2467)", "show": true, "valid": "(literal (bool True) 2467)", "voting_powers": "(map 2467 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 2478 (spender (literal (local-address (static_id 1 98)) 98)) (value (literal (nat 40) 2445)))", "line_no": 2477, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2477)", "show": true, "valid": "(literal (bool True) 2477)", "voting_powers": "(map 2477 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 2488 (spender (literal (local-address (static_id 1 98)) 98)) (value (literal (nat 60) 2456)))", "line_no": 2487, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 23)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2487)", "show": true, "valid": "(literal (bool True) 2487)", "voting_powers": "(map 2487 )", "export": true}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "deposit", "params": "(literal (nat 10) 2434)", "line_no": 2497, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2497)", "show": true, "valid": "(literal (bool True) 2497)", "voting_powers": "(map 2497 )", "export": true}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "deposit", "params": "(literal (nat 40) 2445)", "line_no": 2503, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2503)", "show": true, "valid": "(literal (bool True) 2503)", "voting_powers": "(map 2503 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 2512 (address (literal (local-address (static_id 1 98)) 98)) (value (literal (intOrNat 10) 2512)))", "line_no": 2511, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2511)", "show": true, "valid": "(literal (bool True) 2511)", "voting_powers": "(map 2511 )", "export": true}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "updateBalance", "params": "(unit)", "line_no": 2521, "title": "", "messageClass": "", "source": "none", "sender": "none", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2521)", "show": true, "valid": "(literal (bool True) 2521)", "voting_powers": "(map 2521 )", "export": true}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "deposit", "params": "(literal (nat 60) 2456)", "line_no": 2524, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 23)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2524)", "show": true, "valid": "(literal (bool True) 2524)", "voting_powers": "(map 2524 )", "export": true}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "redeem", "params": "(mul (literal (nat 10) 2434) (literal (intOrNat 1000000000000000000) 2532) 2532)", "line_no": 2531, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2531)", "show": true, "valid": "(literal (bool True) 2531)", "voting_powers": "(map 2531 )", "export": true}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "redeem", "params": "(mul (literal (nat 40) 2445) (literal (intOrNat 1000000000000000000) 2538) 2538)", "line_no": 2537, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2537)", "show": true, "valid": "(literal (bool True) 2537)", "voting_powers": "(map 2537 )", "export": true}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "redeem", "params": "(attr (getItem (attr (contractData (static_id 1 98) 2537) \"balances\" 2544) (literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 23) 2544) \"balance\" 2544)", "line_no": 2543, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 23)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2543)", "show": true, "valid": "(literal (bool True) 2543)", "voting_powers": "(map 2543 )", "export": true}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 98) 2543) \"totalSupply\" 2550) (literal (nat 0) 2550) 2550)", "line_no": 2550}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 98) 2543) \"balances\" 2551) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 2551) \"balance\" 2551) (literal (nat 0) 2551) 2551)", "line_no": 2551}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 98) 2543) \"balances\" 2551) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22) 2552) \"balance\" 2552) (literal (nat 0) 2552) 2552)", "line_no": 2552}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 98) 2543) \"balances\" 2551) (literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 23) 2553) \"balance\" 2553) (literal (nat 0) 2553) 2553)", "line_no": 2553}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2511) \"balances\" 2556) (literal (local-address (static_id 1 98)) 98) 2556) \"balance\" 2556) (literal (nat 0) 2556) 2556)", "line_no": 2556}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 98) 2543) \"underlyingBalance\" 2557) (literal (nat 0) 2557) 2557)", "line_no": 2557}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2511) \"balances\" 2556) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 2561) \"balance\" 2561) (literal (nat 12) 2561) 2561)", "line_no": 2561}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2511) \"balances\" 2556) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22) 2562) \"balance\" 2562) (literal (nat 47) 2562) 2562)", "line_no": 2562}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2511) \"balances\" 2556) (literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 23) 2563) \"balance\" 2563) (literal (nat 61) 2563) 2563)", "line_no": 2563}], "decompile": false, "kind": "test"}, {"shortname": "redeem_-_can_redeem_correctly_from_accounts_joining_after_liquidity_is_added_with_fraction_of_pool", "longname": "redeem - can redeem correctly from accounts joining after liquidity is added with fraction of pool", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 409) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s261\" ((set_type (first (params 89) 2573) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 2573) (contract \"address\") 2573) (set (operations 2573) (cons (transfer (getLocal \"__s261\" 2573) (literal (mutez 0) 2573) (second (params 89) 2573) 89) (operations 2573) 2573) 2573))) (getAllowance True ((bind \"__s262\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 2573) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 2573) \"spender\" 46) 46) 46))) (set_type (second (params 45) 2573) (contract \"nat\") 2573) (set (operations 2573) (cons (transfer (getLocal \"__s262\" 2573) (literal (mutez 0) 2573) (second (params 45) 2573) 45) (operations 2573) 2573) 2573))) (getBalance True ((bind \"__s263\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 2573) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 2573) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 2573) 42) \"balance\" 42) 42))) (set_type (second (params 37) 2573) (contract \"nat\") 2573) (set (operations 2573) (cons (transfer (getLocal \"__s263\" 2573) (literal (mutez 0) 2573) (second (params 37) 2573) 37) (operations 2573) 2573) 2573))) (getTotalSupply True ((bind \"__s264\" ((set_type (first (params 49) 2573) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 2573) (contract \"nat\") 2573) (set (operations 2573) (cons (transfer (getLocal \"__s264\" 2573) (literal (mutez 0) 2573) (second (params 49) 2573) 49) (operations 2573) 2573) 2573))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 2573, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 98)", "export": "(storage (record 98 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 102 ) (bigmap (unknown 410) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 102)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 89 ((literal (string \"\") 2579) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 91)) ((literal (string \"data\") 2579) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 88))) (bigmap \"string\" \"bytes\") 89)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 98)) (rewardPercent (literal (nat 1) 54)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 98)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 78 ((literal (nat 0) 65) (tuple 2579 (literal (nat 0) 65) (type_annotation (map 67 ((literal (string \"name\") 2579) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 69)) ((literal (string \"decimals\") 2579) (literal (bytes \"0x3138\") 70)) ((literal (string \"symbol\") 2579) (literal (bytes \"0x6465787465724c6b555344\") 71)) ((literal (string \"icon\") 2579) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 72))) (map \"string\" \"bytes\") 67)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 78)) (totalSupply (literal (intOrNat 0) 98)) (underlyingBalance (literal (nat 0) 119)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 135) \"unit\" 136) (set (operations 140) (cons (transfer (unit) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) (openVariant (contract \"\" \"unit\" (source) 140) \"Some\" \"None\" 140) 140) (operations 140) 140) 140) (set (operations 156) (cons (transfer (tuple 156 (to_address (self) \"None\") (tuple 156 (literal (intOrNat 1) 156) (add_seconds (now) (literal (int 3600) 148) 148))) (sub (balance) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) 143) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 153) 151) \"Some\" \"None\" 151) 156) (operations 156) 156) 156) (set (operations 166) (cons (transfer (unit) (literal (mutez 0) 166) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 161) \"Some\" \"None\" 161) 166) (operations 166) 166) 166))) (deposit True ((set_type (params 195) \"nat\" 196) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 199) 199) (literal (string \"bad state\") 199) 199) (set (attr (data) \"state\" 199) (literal (intOrNat 3) 202) 202) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"Some\" (params 195) 203) 203) (set (attr (data) \"savedState_depositor\" 204) (variant \"Some\" (sender) 204) 204) (set (operations 213) (cons (transfer (tuple 213 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 207)) (literal (mutez 0) 213) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 208) \"Some\" \"None\" 208) 213) (operations 213) 213) 213))) (deposit_callback True ((set_type (params 217) \"nat\" 218) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 221) (literal (string \"bad sender\") 221) 221) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 3) 224) 224) (literal (string \"bad state\") 224) 224) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 203) \"Some\" \"None\" 227) 227) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 228) (literal (intOrNat 1000000000000000000) 228) 228) 228) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 229) 229) ((defineLocal \"newUnderlyingBalance\" (add (params 217) (getLocal \"tokensToDeposit\" 230) 230) 230) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 231) (literal (intOrNat 1000000000000000000) 231) 231) (getLocal \"newUnderlyingBalance\" 231) 231) 231) (set (getLocal \"newTokens\" 2579) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 232) (attr (data) \"totalSupply\" 96) 232) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 232) (getLocal \"fractionOfPoolOwnership\" 232) 232) 232) \"Some\" \"None\" 232) 232) 232)) 229) (set (attr (data) \"underlyingBalance\" 235) (add (params 217) (getLocal \"tokensToDeposit\" 235) 235) 235) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 204) \"Some\" \"None\" 238) 238) (set (operations 249) (cons (transfer (record 239 (from_ (getLocal \"depositor\" 240)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 242))) (literal (mutez 0) 249) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 244) \"Some\" \"None\" 244) 249) (operations 249) 249) 249) (set (operations 261) (cons (transfer (record 252 (address (getLocal \"depositor\" 253)) (value (getLocal \"newTokens\" 254))) (literal (mutez 0) 261) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 256) \"Some\" \"None\" 256) 261) (operations 261) 261) 261) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 264) 264) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"None\" (unit) -1) 265) (set (attr (data) \"savedState_depositor\" 204) (variant \"None\" (unit) -1) 266))) (getAdministrator True ((bind \"__s265\" ((set_type (first (params 108) 2579) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 2579) (contract \"address\") 2579) (set (operations 2579) (cons (transfer (getLocal \"__s265\" 2579) (literal (mutez 0) 2579) (second (params 108) 2579) 108) (operations 2579) 2579) 2579))) (getAllowance True ((bind \"__s266\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 2579) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 2579) \"spender\" 69) 69) 69))) (set_type (second (params 68) 2579) (contract \"nat\") 2579) (set (operations 2579) (cons (transfer (getLocal \"__s266\" 2579) (literal (mutez 0) 2579) (second (params 68) 2579) 68) (operations 2579) 2579) 2579))) (getBalance True ((bind \"__s267\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 2579) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 2579) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 2579) 65) \"balance\" 65) 65))) (set_type (second (params 60) 2579) (contract \"nat\") 2579) (set (operations 2579) (cons (transfer (getLocal \"__s267\" 2579) (literal (mutez 0) 2579) (second (params 60) 2579) 60) (operations 2579) 2579) 2579))) (getTotalSupply True ((bind \"__s268\" ((set_type (first (params 72) 2579) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 2579) (contract \"nat\") 2579) (set (operations 2579) (cons (transfer (getLocal \"__s268\" 2579) (literal (mutez 0) 2579) (second (params 72) 2579) 72) (operations 2579) 2579) 2579))) (liquidate True ((set_type (params 170) \"address\" 171) (set (operations 179) (cons (transfer (params 170) (literal (mutez 0) 179) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 176) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179) (set (operations 187) (cons (transfer (unit) (literal (mutez 0) 187) (openVariant (contract \"liquidate\" \"unit\" (params 170) 182) \"Some\" \"None\" 182) 187) (operations 187) 187) 187))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 270) \"nat\" 271) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 274) 274) (literal (string \"bad state\") 274) 274) (set (attr (data) \"state\" 199) (literal (intOrNat 2) 277) 277) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"Some\" (params 270) 278) 278) (set (attr (data) \"savedState_redeemer\" 279) (variant \"Some\" (sender) 279) 279) (set (operations 288) (cons (transfer (tuple 288 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 282)) (literal (mutez 0) 288) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 283) \"Some\" \"None\" 283) 288) (operations 288) 288) 288))) (redeem_callback True ((set_type (params 292) \"nat\" 293) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 296) (literal (string \"bad sender\") 296) 296) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 2) 299) 299) (literal (string \"bad state\") 299) 299) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 278) \"Some\" \"None\" 302) 302) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 303) (literal (intOrNat 1000000000000000000) 303) 303) (attr (data) \"totalSupply\" 96) 303) 303) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 304) (params 292) 304) (literal (intOrNat 1000000000000000000) 304) 304) 304) (set (attr (data) \"underlyingBalance\" 235) (openVariant (isNat (sub (params 292) (getLocal \"tokensToReceive\" 307) 307) 307) \"Some\" \"None\" 307) 307) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 279) \"Some\" \"None\" 310) 310) (set (operations 320) (cons (transfer (record 311 (address (getLocal \"redeemer\" 312)) (value (getLocal \"tokensToRedeem\" 313))) (literal (mutez 0) 320) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 315) \"Some\" \"None\" 315) 320) (operations 320) 320) 320) (set (operations 333) (cons (transfer (record 323 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 325)) (value (getLocal \"tokensToReceive\" 326))) (literal (mutez 0) 333) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 328) \"Some\" \"None\" 328) 333) (operations 333) 333) 333) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 336) 336) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"None\" (unit) -1) 337) (set (attr (data) \"savedState_redeemer\" 279) (variant \"None\" (unit) -1) 338))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 346) \"unit\" 347) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 350) 350) (literal (string \"bad state\") 350) 350) (set (attr (data) \"state\" 199) (literal (intOrNat 1) 353) 353) (set (operations 362) (cons (transfer (tuple 362 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 356)) (literal (mutez 0) 362) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 357) \"Some\" \"None\" 357) 362) (operations 362) 362) 362))) (updateBalance_callback True ((set_type (params 366) \"nat\" 367) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 370) (literal (string \"bad sender\") 370) 370) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 1) 373) 373) (literal (string \"bad state\") 373) 373) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 376) 376) (set (attr (data) \"underlyingBalance\" 235) (params 366) 379))) (updateContractMetadata True ((set_type (params 419) (tuple \"string\" \"bytes\") 420) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 422) (literal (string \"not governor\") 422) 422) (set (getItem (attr (data) \"metadata\" 426) (first (params 419) 424) 426) (second (params 419) 425) 426))) (updateDexterAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"dexterAddress\" 153) (params 403) 407))) (updateGovernorAddress True ((set_type (params 387) \"address\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"governorAddress\" 422) (params 387) 391))) (updateOvenRegistryAddress True ((set_type (params 411) \"address\" 412) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 414) (literal (string \"not governor\") 414) 414) (set (attr (data) \"ovenRegistryAddress\" 176) (params 411) 415))) (updateRewardPercent True ((set_type (params 395) \"nat\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"rewardPercent\" 139) (params 395) 399))) (updateTokenMetadata True ((set_type (params 430) (tuple \"nat\" (map \"string\" \"bytes\")) 431) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 433) (literal (string \"not governor\") 433) 433) (set (getItem (attr (data) \"token_metadata\" 434) (literal (intOrNat 0) 434) 434) (params 430) 434))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 2579, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 2584 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)) (value (literal (nat 10) 2582)))", "line_no": 2583, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2583)", "show": true, "valid": "(literal (bool True) 2583)", "voting_powers": "(map 2583 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 2595 (address (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)) (value (literal (nat 40) 2593)))", "line_no": 2594, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2594)", "show": true, "valid": "(literal (bool True) 2594)", "voting_powers": "(map 2594 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 2606 (address (literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 23)) (value (literal (nat 20) 2604)))", "line_no": 2605, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2605)", "show": true, "valid": "(literal (bool True) 2605)", "voting_powers": "(map 2605 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 2616 (spender (literal (local-address (static_id 1 98)) 98)) (value (literal (nat 10) 2582)))", "line_no": 2615, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2615)", "show": true, "valid": "(literal (bool True) 2615)", "voting_powers": "(map 2615 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 2626 (spender (literal (local-address (static_id 1 98)) 98)) (value (literal (nat 40) 2593)))", "line_no": 2625, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2625)", "show": true, "valid": "(literal (bool True) 2625)", "voting_powers": "(map 2625 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 2636 (spender (literal (local-address (static_id 1 98)) 98)) (value (literal (nat 20) 2604)))", "line_no": 2635, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 23)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2635)", "show": true, "valid": "(literal (bool True) 2635)", "voting_powers": "(map 2635 )", "export": true}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "deposit", "params": "(literal (nat 10) 2582)", "line_no": 2645, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2645)", "show": true, "valid": "(literal (bool True) 2645)", "voting_powers": "(map 2645 )", "export": true}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "deposit", "params": "(literal (nat 40) 2593)", "line_no": 2651, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2651)", "show": true, "valid": "(literal (bool True) 2651)", "voting_powers": "(map 2651 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 2660 (address (literal (local-address (static_id 1 98)) 98)) (value (literal (intOrNat 10) 2660)))", "line_no": 2659, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2659)", "show": true, "valid": "(literal (bool True) 2659)", "voting_powers": "(map 2659 )", "export": true}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "updateBalance", "params": "(unit)", "line_no": 2669, "title": "", "messageClass": "", "source": "none", "sender": "none", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2669)", "show": true, "valid": "(literal (bool True) 2669)", "voting_powers": "(map 2669 )", "export": true}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "deposit", "params": "(literal (nat 20) 2604)", "line_no": 2672, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 23)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2672)", "show": true, "valid": "(literal (bool True) 2672)", "voting_powers": "(map 2672 )", "export": true}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "redeem", "params": "(mul (literal (nat 10) 2582) (literal (intOrNat 1000000000000000000) 2680) 2680)", "line_no": 2679, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2679)", "show": true, "valid": "(literal (bool True) 2679)", "voting_powers": "(map 2679 )", "export": true}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "redeem", "params": "(mul (literal (nat 40) 2593) (literal (intOrNat 1000000000000000000) 2686) 2686)", "line_no": 2685, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2685)", "show": true, "valid": "(literal (bool True) 2685)", "voting_powers": "(map 2685 )", "export": true}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "redeem", "params": "(attr (getItem (attr (contractData (static_id 1 98) 2685) \"balances\" 2692) (literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 23) 2692) \"balance\" 2692)", "line_no": 2691, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 23)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2691)", "show": true, "valid": "(literal (bool True) 2691)", "voting_powers": "(map 2691 )", "export": true}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 98) 2691) \"totalSupply\" 2698) (literal (nat 0) 2698) 2698)", "line_no": 2698}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 98) 2691) \"balances\" 2699) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 2699) \"balance\" 2699) (literal (nat 0) 2699) 2699)", "line_no": 2699}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 98) 2691) \"balances\" 2699) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22) 2700) \"balance\" 2700) (literal (nat 0) 2700) 2700)", "line_no": 2700}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 98) 2691) \"balances\" 2699) (literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 23) 2701) \"balance\" 2701) (literal (nat 0) 2701) 2701)", "line_no": 2701}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2659) \"balances\" 2704) (literal (local-address (static_id 1 98)) 98) 2704) \"balance\" 2704) (literal (nat 0) 2704) 2704)", "line_no": 2704}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 98) 2691) \"underlyingBalance\" 2705) (literal (nat 0) 2705) 2705)", "line_no": 2705}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2659) \"balances\" 2704) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 2709) \"balance\" 2709) (literal (nat 12) 2709) 2709)", "line_no": 2709}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2659) \"balances\" 2704) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22) 2710) \"balance\" 2710) (literal (nat 47) 2710) 2710)", "line_no": 2710}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2659) \"balances\" 2704) (literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 23) 2711) \"balance\" 2711) (literal (nat 21) 2711) 2711)", "line_no": 2711}], "decompile": false, "kind": "test"}, {"shortname": "redeem_callback_-_can_finish_redeem", "longname": "redeem_callback - can finish redeem", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 420) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s269\" ((set_type (first (params 89) 2725) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 2725) (contract \"address\") 2725) (set (operations 2725) (cons (transfer (getLocal \"__s269\" 2725) (literal (mutez 0) 2725) (second (params 89) 2725) 89) (operations 2725) 2725) 2725))) (getAllowance True ((bind \"__s270\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 2725) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 2725) \"spender\" 46) 46) 46))) (set_type (second (params 45) 2725) (contract \"nat\") 2725) (set (operations 2725) (cons (transfer (getLocal \"__s270\" 2725) (literal (mutez 0) 2725) (second (params 45) 2725) 45) (operations 2725) 2725) 2725))) (getBalance True ((bind \"__s271\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 2725) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 2725) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 2725) 42) \"balance\" 42) 42))) (set_type (second (params 37) 2725) (contract \"nat\") 2725) (set (operations 2725) (cons (transfer (getLocal \"__s271\" 2725) (literal (mutez 0) 2725) (second (params 37) 2725) 37) (operations 2725) 2725) 2725))) (getTotalSupply True ((bind \"__s272\" ((set_type (first (params 49) 2725) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 2725) (contract \"nat\") 2725) (set (operations 2725) (cons (transfer (getLocal \"__s272\" 2725) (literal (mutez 0) 2725) (second (params 49) 2725) 49) (operations 2725) 2725) 2725))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 2725, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 2730 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)) (value (literal (nat 10) 2728)))", "line_no": 2729, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2729)", "show": true, "valid": "(literal (bool True) 2729)", "voting_powers": "(map 2729 )", "export": true}, {"action": "newContract", "id": "(static_id 1 98)", "export": "(storage (record 98 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 102 ) (bigmap (unknown 421) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 102)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 89 ((literal (string \"\") 2746) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 91)) ((literal (string \"data\") 2746) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 88))) (bigmap \"string\" \"bytes\") 89)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 98)) (rewardPercent (literal (nat 1) 54)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"Some\" (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 2741)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"Some\" (mul (literal (nat 10) 2728) (literal (intOrNat 1000000000000000000) 2742) 2742) 2742)) (state (literal (intOrNat 2) 98)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 78 ((literal (nat 0) 65) (tuple 2746 (literal (nat 0) 65) (type_annotation (map 67 ((literal (string \"name\") 2746) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 69)) ((literal (string \"decimals\") 2746) (literal (bytes \"0x3138\") 70)) ((literal (string \"symbol\") 2746) (literal (bytes \"0x6465787465724c6b555344\") 71)) ((literal (string \"icon\") 2746) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 72))) (map \"string\" \"bytes\") 67)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 78)) (totalSupply (literal (intOrNat 0) 98)) (underlyingBalance (literal (nat 0) 119)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 135) \"unit\" 136) (set (operations 140) (cons (transfer (unit) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) (openVariant (contract \"\" \"unit\" (source) 140) \"Some\" \"None\" 140) 140) (operations 140) 140) 140) (set (operations 156) (cons (transfer (tuple 156 (to_address (self) \"None\") (tuple 156 (literal (intOrNat 1) 156) (add_seconds (now) (literal (int 3600) 148) 148))) (sub (balance) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) 143) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 153) 151) \"Some\" \"None\" 151) 156) (operations 156) 156) 156) (set (operations 166) (cons (transfer (unit) (literal (mutez 0) 166) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 161) \"Some\" \"None\" 161) 166) (operations 166) 166) 166))) (deposit True ((set_type (params 195) \"nat\" 196) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 199) 199) (literal (string \"bad state\") 199) 199) (set (attr (data) \"state\" 199) (literal (intOrNat 3) 202) 202) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"Some\" (params 195) 203) 203) (set (attr (data) \"savedState_depositor\" 204) (variant \"Some\" (sender) 204) 204) (set (operations 213) (cons (transfer (tuple 213 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 207)) (literal (mutez 0) 213) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 208) \"Some\" \"None\" 208) 213) (operations 213) 213) 213))) (deposit_callback True ((set_type (params 217) \"nat\" 218) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 221) (literal (string \"bad sender\") 221) 221) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 3) 224) 224) (literal (string \"bad state\") 224) 224) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 203) \"Some\" \"None\" 227) 227) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 228) (literal (intOrNat 1000000000000000000) 228) 228) 228) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 229) 229) ((defineLocal \"newUnderlyingBalance\" (add (params 217) (getLocal \"tokensToDeposit\" 230) 230) 230) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 231) (literal (intOrNat 1000000000000000000) 231) 231) (getLocal \"newUnderlyingBalance\" 231) 231) 231) (set (getLocal \"newTokens\" 2746) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 232) (attr (data) \"totalSupply\" 96) 232) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 232) (getLocal \"fractionOfPoolOwnership\" 232) 232) 232) \"Some\" \"None\" 232) 232) 232)) 229) (set (attr (data) \"underlyingBalance\" 235) (add (params 217) (getLocal \"tokensToDeposit\" 235) 235) 235) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 204) \"Some\" \"None\" 238) 238) (set (operations 249) (cons (transfer (record 239 (from_ (getLocal \"depositor\" 240)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 242))) (literal (mutez 0) 249) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 244) \"Some\" \"None\" 244) 249) (operations 249) 249) 249) (set (operations 261) (cons (transfer (record 252 (address (getLocal \"depositor\" 253)) (value (getLocal \"newTokens\" 254))) (literal (mutez 0) 261) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 256) \"Some\" \"None\" 256) 261) (operations 261) 261) 261) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 264) 264) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"None\" (unit) -1) 265) (set (attr (data) \"savedState_depositor\" 204) (variant \"None\" (unit) -1) 266))) (getAdministrator True ((bind \"__s273\" ((set_type (first (params 108) 2746) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 2746) (contract \"address\") 2746) (set (operations 2746) (cons (transfer (getLocal \"__s273\" 2746) (literal (mutez 0) 2746) (second (params 108) 2746) 108) (operations 2746) 2746) 2746))) (getAllowance True ((bind \"__s274\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 2746) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 2746) \"spender\" 69) 69) 69))) (set_type (second (params 68) 2746) (contract \"nat\") 2746) (set (operations 2746) (cons (transfer (getLocal \"__s274\" 2746) (literal (mutez 0) 2746) (second (params 68) 2746) 68) (operations 2746) 2746) 2746))) (getBalance True ((bind \"__s275\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 2746) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 2746) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 2746) 65) \"balance\" 65) 65))) (set_type (second (params 60) 2746) (contract \"nat\") 2746) (set (operations 2746) (cons (transfer (getLocal \"__s275\" 2746) (literal (mutez 0) 2746) (second (params 60) 2746) 60) (operations 2746) 2746) 2746))) (getTotalSupply True ((bind \"__s276\" ((set_type (first (params 72) 2746) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 2746) (contract \"nat\") 2746) (set (operations 2746) (cons (transfer (getLocal \"__s276\" 2746) (literal (mutez 0) 2746) (second (params 72) 2746) 72) (operations 2746) 2746) 2746))) (liquidate True ((set_type (params 170) \"address\" 171) (set (operations 179) (cons (transfer (params 170) (literal (mutez 0) 179) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 176) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179) (set (operations 187) (cons (transfer (unit) (literal (mutez 0) 187) (openVariant (contract \"liquidate\" \"unit\" (params 170) 182) \"Some\" \"None\" 182) 187) (operations 187) 187) 187))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 270) \"nat\" 271) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 274) 274) (literal (string \"bad state\") 274) 274) (set (attr (data) \"state\" 199) (literal (intOrNat 2) 277) 277) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"Some\" (params 270) 278) 278) (set (attr (data) \"savedState_redeemer\" 279) (variant \"Some\" (sender) 279) 279) (set (operations 288) (cons (transfer (tuple 288 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 282)) (literal (mutez 0) 288) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 283) \"Some\" \"None\" 283) 288) (operations 288) 288) 288))) (redeem_callback True ((set_type (params 292) \"nat\" 293) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 296) (literal (string \"bad sender\") 296) 296) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 2) 299) 299) (literal (string \"bad state\") 299) 299) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 278) \"Some\" \"None\" 302) 302) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 303) (literal (intOrNat 1000000000000000000) 303) 303) (attr (data) \"totalSupply\" 96) 303) 303) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 304) (params 292) 304) (literal (intOrNat 1000000000000000000) 304) 304) 304) (set (attr (data) \"underlyingBalance\" 235) (openVariant (isNat (sub (params 292) (getLocal \"tokensToReceive\" 307) 307) 307) \"Some\" \"None\" 307) 307) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 279) \"Some\" \"None\" 310) 310) (set (operations 320) (cons (transfer (record 311 (address (getLocal \"redeemer\" 312)) (value (getLocal \"tokensToRedeem\" 313))) (literal (mutez 0) 320) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 315) \"Some\" \"None\" 315) 320) (operations 320) 320) 320) (set (operations 333) (cons (transfer (record 323 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 325)) (value (getLocal \"tokensToReceive\" 326))) (literal (mutez 0) 333) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 328) \"Some\" \"None\" 328) 333) (operations 333) 333) 333) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 336) 336) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"None\" (unit) -1) 337) (set (attr (data) \"savedState_redeemer\" 279) (variant \"None\" (unit) -1) 338))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 346) \"unit\" 347) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 350) 350) (literal (string \"bad state\") 350) 350) (set (attr (data) \"state\" 199) (literal (intOrNat 1) 353) 353) (set (operations 362) (cons (transfer (tuple 362 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 356)) (literal (mutez 0) 362) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 357) \"Some\" \"None\" 357) 362) (operations 362) 362) 362))) (updateBalance_callback True ((set_type (params 366) \"nat\" 367) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 370) (literal (string \"bad sender\") 370) 370) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 1) 373) 373) (literal (string \"bad state\") 373) 373) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 376) 376) (set (attr (data) \"underlyingBalance\" 235) (params 366) 379))) (updateContractMetadata True ((set_type (params 419) (tuple \"string\" \"bytes\") 420) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 422) (literal (string \"not governor\") 422) 422) (set (getItem (attr (data) \"metadata\" 426) (first (params 419) 424) 426) (second (params 419) 425) 426))) (updateDexterAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"dexterAddress\" 153) (params 403) 407))) (updateGovernorAddress True ((set_type (params 387) \"address\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"governorAddress\" 422) (params 387) 391))) (updateOvenRegistryAddress True ((set_type (params 411) \"address\" 412) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 414) (literal (string \"not governor\") 414) 414) (set (attr (data) \"ovenRegistryAddress\" 176) (params 411) 415))) (updateRewardPercent True ((set_type (params 395) \"nat\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"rewardPercent\" 139) (params 395) 399))) (updateTokenMetadata True ((set_type (params 430) (tuple \"nat\" (map \"string\" \"bytes\")) 431) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 433) (literal (string \"not governor\") 433) 433) (set (getItem (attr (data) \"token_metadata\" 434) (literal (intOrNat 0) 434) 434) (params 430) 434))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 2746, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "mint", "params": "(record 2750 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)) (value (mul (literal (nat 10) 2728) (literal (intOrNat 1000000000000000000) 2752) 2752)))", "line_no": 2749, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2749)", "show": true, "valid": "(literal (bool True) 2749)", "voting_powers": "(map 2749 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 2761 (address (literal (local-address (static_id 1 98)) 98)) (value (literal (intOrNat 200000000000000000000) 2761)))", "line_no": 2760, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2760)", "show": true, "valid": "(literal (bool True) 2760)", "voting_powers": "(map 2760 )", "export": true}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "redeem_callback", "params": "(literal (intOrNat 200000000000000000000) 2770)", "line_no": 2770, "title": "", "messageClass": "", "source": "none", "sender": "(literal (local-address (static_id 0 8)) 8)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2770)", "show": true, "valid": "(literal (bool True) 2770)", "voting_powers": "(map 2770 )", "export": true}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 98) 2770) \"state\" 2779) (literal (intOrNat 0) 2779) 2779)", "line_no": 2779}], "decompile": false, "kind": "test"}, {"shortname": "redeem_callback_-_fails_in_bad_state", "longname": "redeem_callback - fails in bad state", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 431) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s277\" ((set_type (first (params 89) 2789) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 2789) (contract \"address\") 2789) (set (operations 2789) (cons (transfer (getLocal \"__s277\" 2789) (literal (mutez 0) 2789) (second (params 89) 2789) 89) (operations 2789) 2789) 2789))) (getAllowance True ((bind \"__s278\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 2789) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 2789) \"spender\" 46) 46) 46))) (set_type (second (params 45) 2789) (contract \"nat\") 2789) (set (operations 2789) (cons (transfer (getLocal \"__s278\" 2789) (literal (mutez 0) 2789) (second (params 45) 2789) 45) (operations 2789) 2789) 2789))) (getBalance True ((bind \"__s279\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 2789) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 2789) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 2789) 42) \"balance\" 42) 42))) (set_type (second (params 37) 2789) (contract \"nat\") 2789) (set (operations 2789) (cons (transfer (getLocal \"__s279\" 2789) (literal (mutez 0) 2789) (second (params 37) 2789) 37) (operations 2789) 2789) 2789))) (getTotalSupply True ((bind \"__s280\" ((set_type (first (params 49) 2789) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 2789) (contract \"nat\") 2789) (set (operations 2789) (cons (transfer (getLocal \"__s280\" 2789) (literal (mutez 0) 2789) (second (params 49) 2789) 49) (operations 2789) 2789) 2789))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 2789, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 2794 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)) (value (literal (nat 10) 2792)))", "line_no": 2793, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2793)", "show": true, "valid": "(literal (bool True) 2793)", "voting_powers": "(map 2793 )", "export": true}, {"action": "newContract", "id": "(static_id 1 98)", "export": "(storage (record 98 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 102 ) (bigmap (unknown 432) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 102)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 89 ((literal (string \"\") 2810) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 91)) ((literal (string \"data\") 2810) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 88))) (bigmap \"string\" \"bytes\") 89)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 98)) (rewardPercent (literal (nat 1) 54)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 98)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 78 ((literal (nat 0) 65) (tuple 2810 (literal (nat 0) 65) (type_annotation (map 67 ((literal (string \"name\") 2810) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 69)) ((literal (string \"decimals\") 2810) (literal (bytes \"0x3138\") 70)) ((literal (string \"symbol\") 2810) (literal (bytes \"0x6465787465724c6b555344\") 71)) ((literal (string \"icon\") 2810) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 72))) (map \"string\" \"bytes\") 67)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 78)) (totalSupply (literal (intOrNat 0) 98)) (underlyingBalance (literal (nat 0) 119)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 135) \"unit\" 136) (set (operations 140) (cons (transfer (unit) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) (openVariant (contract \"\" \"unit\" (source) 140) \"Some\" \"None\" 140) 140) (operations 140) 140) 140) (set (operations 156) (cons (transfer (tuple 156 (to_address (self) \"None\") (tuple 156 (literal (intOrNat 1) 156) (add_seconds (now) (literal (int 3600) 148) 148))) (sub (balance) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) 143) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 153) 151) \"Some\" \"None\" 151) 156) (operations 156) 156) 156) (set (operations 166) (cons (transfer (unit) (literal (mutez 0) 166) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 161) \"Some\" \"None\" 161) 166) (operations 166) 166) 166))) (deposit True ((set_type (params 195) \"nat\" 196) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 199) 199) (literal (string \"bad state\") 199) 199) (set (attr (data) \"state\" 199) (literal (intOrNat 3) 202) 202) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"Some\" (params 195) 203) 203) (set (attr (data) \"savedState_depositor\" 204) (variant \"Some\" (sender) 204) 204) (set (operations 213) (cons (transfer (tuple 213 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 207)) (literal (mutez 0) 213) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 208) \"Some\" \"None\" 208) 213) (operations 213) 213) 213))) (deposit_callback True ((set_type (params 217) \"nat\" 218) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 221) (literal (string \"bad sender\") 221) 221) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 3) 224) 224) (literal (string \"bad state\") 224) 224) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 203) \"Some\" \"None\" 227) 227) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 228) (literal (intOrNat 1000000000000000000) 228) 228) 228) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 229) 229) ((defineLocal \"newUnderlyingBalance\" (add (params 217) (getLocal \"tokensToDeposit\" 230) 230) 230) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 231) (literal (intOrNat 1000000000000000000) 231) 231) (getLocal \"newUnderlyingBalance\" 231) 231) 231) (set (getLocal \"newTokens\" 2810) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 232) (attr (data) \"totalSupply\" 96) 232) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 232) (getLocal \"fractionOfPoolOwnership\" 232) 232) 232) \"Some\" \"None\" 232) 232) 232)) 229) (set (attr (data) \"underlyingBalance\" 235) (add (params 217) (getLocal \"tokensToDeposit\" 235) 235) 235) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 204) \"Some\" \"None\" 238) 238) (set (operations 249) (cons (transfer (record 239 (from_ (getLocal \"depositor\" 240)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 242))) (literal (mutez 0) 249) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 244) \"Some\" \"None\" 244) 249) (operations 249) 249) 249) (set (operations 261) (cons (transfer (record 252 (address (getLocal \"depositor\" 253)) (value (getLocal \"newTokens\" 254))) (literal (mutez 0) 261) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 256) \"Some\" \"None\" 256) 261) (operations 261) 261) 261) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 264) 264) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"None\" (unit) -1) 265) (set (attr (data) \"savedState_depositor\" 204) (variant \"None\" (unit) -1) 266))) (getAdministrator True ((bind \"__s281\" ((set_type (first (params 108) 2810) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 2810) (contract \"address\") 2810) (set (operations 2810) (cons (transfer (getLocal \"__s281\" 2810) (literal (mutez 0) 2810) (second (params 108) 2810) 108) (operations 2810) 2810) 2810))) (getAllowance True ((bind \"__s282\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 2810) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 2810) \"spender\" 69) 69) 69))) (set_type (second (params 68) 2810) (contract \"nat\") 2810) (set (operations 2810) (cons (transfer (getLocal \"__s282\" 2810) (literal (mutez 0) 2810) (second (params 68) 2810) 68) (operations 2810) 2810) 2810))) (getBalance True ((bind \"__s283\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 2810) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 2810) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 2810) 65) \"balance\" 65) 65))) (set_type (second (params 60) 2810) (contract \"nat\") 2810) (set (operations 2810) (cons (transfer (getLocal \"__s283\" 2810) (literal (mutez 0) 2810) (second (params 60) 2810) 60) (operations 2810) 2810) 2810))) (getTotalSupply True ((bind \"__s284\" ((set_type (first (params 72) 2810) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 2810) (contract \"nat\") 2810) (set (operations 2810) (cons (transfer (getLocal \"__s284\" 2810) (literal (mutez 0) 2810) (second (params 72) 2810) 72) (operations 2810) 2810) 2810))) (liquidate True ((set_type (params 170) \"address\" 171) (set (operations 179) (cons (transfer (params 170) (literal (mutez 0) 179) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 176) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179) (set (operations 187) (cons (transfer (unit) (literal (mutez 0) 187) (openVariant (contract \"liquidate\" \"unit\" (params 170) 182) \"Some\" \"None\" 182) 187) (operations 187) 187) 187))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 270) \"nat\" 271) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 274) 274) (literal (string \"bad state\") 274) 274) (set (attr (data) \"state\" 199) (literal (intOrNat 2) 277) 277) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"Some\" (params 270) 278) 278) (set (attr (data) \"savedState_redeemer\" 279) (variant \"Some\" (sender) 279) 279) (set (operations 288) (cons (transfer (tuple 288 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 282)) (literal (mutez 0) 288) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 283) \"Some\" \"None\" 283) 288) (operations 288) 288) 288))) (redeem_callback True ((set_type (params 292) \"nat\" 293) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 296) (literal (string \"bad sender\") 296) 296) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 2) 299) 299) (literal (string \"bad state\") 299) 299) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 278) \"Some\" \"None\" 302) 302) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 303) (literal (intOrNat 1000000000000000000) 303) 303) (attr (data) \"totalSupply\" 96) 303) 303) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 304) (params 292) 304) (literal (intOrNat 1000000000000000000) 304) 304) 304) (set (attr (data) \"underlyingBalance\" 235) (openVariant (isNat (sub (params 292) (getLocal \"tokensToReceive\" 307) 307) 307) \"Some\" \"None\" 307) 307) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 279) \"Some\" \"None\" 310) 310) (set (operations 320) (cons (transfer (record 311 (address (getLocal \"redeemer\" 312)) (value (getLocal \"tokensToRedeem\" 313))) (literal (mutez 0) 320) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 315) \"Some\" \"None\" 315) 320) (operations 320) 320) 320) (set (operations 333) (cons (transfer (record 323 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 325)) (value (getLocal \"tokensToReceive\" 326))) (literal (mutez 0) 333) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 328) \"Some\" \"None\" 328) 333) (operations 333) 333) 333) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 336) 336) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"None\" (unit) -1) 337) (set (attr (data) \"savedState_redeemer\" 279) (variant \"None\" (unit) -1) 338))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 346) \"unit\" 347) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 350) 350) (literal (string \"bad state\") 350) 350) (set (attr (data) \"state\" 199) (literal (intOrNat 1) 353) 353) (set (operations 362) (cons (transfer (tuple 362 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 356)) (literal (mutez 0) 362) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 357) \"Some\" \"None\" 357) 362) (operations 362) 362) 362))) (updateBalance_callback True ((set_type (params 366) \"nat\" 367) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 370) (literal (string \"bad sender\") 370) 370) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 1) 373) 373) (literal (string \"bad state\") 373) 373) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 376) 376) (set (attr (data) \"underlyingBalance\" 235) (params 366) 379))) (updateContractMetadata True ((set_type (params 419) (tuple \"string\" \"bytes\") 420) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 422) (literal (string \"not governor\") 422) 422) (set (getItem (attr (data) \"metadata\" 426) (first (params 419) 424) 426) (second (params 419) 425) 426))) (updateDexterAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"dexterAddress\" 153) (params 403) 407))) (updateGovernorAddress True ((set_type (params 387) \"address\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"governorAddress\" 422) (params 387) 391))) (updateOvenRegistryAddress True ((set_type (params 411) \"address\" 412) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 414) (literal (string \"not governor\") 414) 414) (set (attr (data) \"ovenRegistryAddress\" 176) (params 411) 415))) (updateRewardPercent True ((set_type (params 395) \"nat\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"rewardPercent\" 139) (params 395) 399))) (updateTokenMetadata True ((set_type (params 430) (tuple \"nat\" (map \"string\" \"bytes\")) 431) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 433) (literal (string \"not governor\") 433) 433) (set (getItem (attr (data) \"token_metadata\" 434) (literal (intOrNat 0) 434) 434) (params 430) 434))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 2810, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "mint", "params": "(record 2814 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)) (value (mul (literal (nat 10) 2792) (literal (intOrNat 1000000000000000000) 2816) 2816)))", "line_no": 2813, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2813)", "show": true, "valid": "(literal (bool True) 2813)", "voting_powers": "(map 2813 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 2825 (address (literal (local-address (static_id 1 98)) 98)) (value (literal (intOrNat 200000000000000000000) 2825)))", "line_no": 2824, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2824)", "show": true, "valid": "(literal (bool True) 2824)", "voting_powers": "(map 2824 )", "export": true}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "redeem_callback", "params": "(literal (intOrNat 200000000000000000000) 2835)", "line_no": 2835, "title": "", "messageClass": "", "source": "none", "sender": "(literal (local-address (static_id 0 8)) 8)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2835)", "show": true, "valid": "(literal (bool False) 2835)", "voting_powers": "(map 2835 )", "export": true}], "decompile": false, "kind": "test"}, {"shortname": "redeem_callback_-_fails_with_bad_sender", "longname": "redeem_callback - fails with bad sender", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 442) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s285\" ((set_type (first (params 89) 2850) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 2850) (contract \"address\") 2850) (set (operations 2850) (cons (transfer (getLocal \"__s285\" 2850) (literal (mutez 0) 2850) (second (params 89) 2850) 89) (operations 2850) 2850) 2850))) (getAllowance True ((bind \"__s286\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 2850) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 2850) \"spender\" 46) 46) 46))) (set_type (second (params 45) 2850) (contract \"nat\") 2850) (set (operations 2850) (cons (transfer (getLocal \"__s286\" 2850) (literal (mutez 0) 2850) (second (params 45) 2850) 45) (operations 2850) 2850) 2850))) (getBalance True ((bind \"__s287\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 2850) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 2850) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 2850) 42) \"balance\" 42) 42))) (set_type (second (params 37) 2850) (contract \"nat\") 2850) (set (operations 2850) (cons (transfer (getLocal \"__s287\" 2850) (literal (mutez 0) 2850) (second (params 37) 2850) 37) (operations 2850) 2850) 2850))) (getTotalSupply True ((bind \"__s288\" ((set_type (first (params 49) 2850) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 2850) (contract \"nat\") 2850) (set (operations 2850) (cons (transfer (getLocal \"__s288\" 2850) (literal (mutez 0) 2850) (second (params 49) 2850) 49) (operations 2850) 2850) 2850))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 2850, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 2855 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)) (value (literal (nat 10) 2853)))", "line_no": 2854, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2854)", "show": true, "valid": "(literal (bool True) 2854)", "voting_powers": "(map 2854 )", "export": true}, {"action": "newContract", "id": "(static_id 1 98)", "export": "(storage (record 98 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 102 ) (bigmap (unknown 443) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 102)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 89 ((literal (string \"\") 2871) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 91)) ((literal (string \"data\") 2871) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 88))) (bigmap \"string\" \"bytes\") 89)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 98)) (rewardPercent (literal (nat 1) 54)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"Some\" (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 2866)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"Some\" (mul (literal (nat 10) 2853) (literal (intOrNat 1000000000000000000) 2867) 2867) 2867)) (state (literal (intOrNat 2) 98)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 78 ((literal (nat 0) 65) (tuple 2871 (literal (nat 0) 65) (type_annotation (map 67 ((literal (string \"name\") 2871) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 69)) ((literal (string \"decimals\") 2871) (literal (bytes \"0x3138\") 70)) ((literal (string \"symbol\") 2871) (literal (bytes \"0x6465787465724c6b555344\") 71)) ((literal (string \"icon\") 2871) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 72))) (map \"string\" \"bytes\") 67)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 78)) (totalSupply (literal (intOrNat 0) 98)) (underlyingBalance (literal (nat 0) 119)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 135) \"unit\" 136) (set (operations 140) (cons (transfer (unit) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) (openVariant (contract \"\" \"unit\" (source) 140) \"Some\" \"None\" 140) 140) (operations 140) 140) 140) (set (operations 156) (cons (transfer (tuple 156 (to_address (self) \"None\") (tuple 156 (literal (intOrNat 1) 156) (add_seconds (now) (literal (int 3600) 148) 148))) (sub (balance) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) 143) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 153) 151) \"Some\" \"None\" 151) 156) (operations 156) 156) 156) (set (operations 166) (cons (transfer (unit) (literal (mutez 0) 166) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 161) \"Some\" \"None\" 161) 166) (operations 166) 166) 166))) (deposit True ((set_type (params 195) \"nat\" 196) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 199) 199) (literal (string \"bad state\") 199) 199) (set (attr (data) \"state\" 199) (literal (intOrNat 3) 202) 202) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"Some\" (params 195) 203) 203) (set (attr (data) \"savedState_depositor\" 204) (variant \"Some\" (sender) 204) 204) (set (operations 213) (cons (transfer (tuple 213 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 207)) (literal (mutez 0) 213) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 208) \"Some\" \"None\" 208) 213) (operations 213) 213) 213))) (deposit_callback True ((set_type (params 217) \"nat\" 218) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 221) (literal (string \"bad sender\") 221) 221) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 3) 224) 224) (literal (string \"bad state\") 224) 224) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 203) \"Some\" \"None\" 227) 227) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 228) (literal (intOrNat 1000000000000000000) 228) 228) 228) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 229) 229) ((defineLocal \"newUnderlyingBalance\" (add (params 217) (getLocal \"tokensToDeposit\" 230) 230) 230) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 231) (literal (intOrNat 1000000000000000000) 231) 231) (getLocal \"newUnderlyingBalance\" 231) 231) 231) (set (getLocal \"newTokens\" 2871) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 232) (attr (data) \"totalSupply\" 96) 232) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 232) (getLocal \"fractionOfPoolOwnership\" 232) 232) 232) \"Some\" \"None\" 232) 232) 232)) 229) (set (attr (data) \"underlyingBalance\" 235) (add (params 217) (getLocal \"tokensToDeposit\" 235) 235) 235) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 204) \"Some\" \"None\" 238) 238) (set (operations 249) (cons (transfer (record 239 (from_ (getLocal \"depositor\" 240)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 242))) (literal (mutez 0) 249) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 244) \"Some\" \"None\" 244) 249) (operations 249) 249) 249) (set (operations 261) (cons (transfer (record 252 (address (getLocal \"depositor\" 253)) (value (getLocal \"newTokens\" 254))) (literal (mutez 0) 261) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 256) \"Some\" \"None\" 256) 261) (operations 261) 261) 261) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 264) 264) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"None\" (unit) -1) 265) (set (attr (data) \"savedState_depositor\" 204) (variant \"None\" (unit) -1) 266))) (getAdministrator True ((bind \"__s289\" ((set_type (first (params 108) 2871) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 2871) (contract \"address\") 2871) (set (operations 2871) (cons (transfer (getLocal \"__s289\" 2871) (literal (mutez 0) 2871) (second (params 108) 2871) 108) (operations 2871) 2871) 2871))) (getAllowance True ((bind \"__s290\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 2871) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 2871) \"spender\" 69) 69) 69))) (set_type (second (params 68) 2871) (contract \"nat\") 2871) (set (operations 2871) (cons (transfer (getLocal \"__s290\" 2871) (literal (mutez 0) 2871) (second (params 68) 2871) 68) (operations 2871) 2871) 2871))) (getBalance True ((bind \"__s291\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 2871) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 2871) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 2871) 65) \"balance\" 65) 65))) (set_type (second (params 60) 2871) (contract \"nat\") 2871) (set (operations 2871) (cons (transfer (getLocal \"__s291\" 2871) (literal (mutez 0) 2871) (second (params 60) 2871) 60) (operations 2871) 2871) 2871))) (getTotalSupply True ((bind \"__s292\" ((set_type (first (params 72) 2871) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 2871) (contract \"nat\") 2871) (set (operations 2871) (cons (transfer (getLocal \"__s292\" 2871) (literal (mutez 0) 2871) (second (params 72) 2871) 72) (operations 2871) 2871) 2871))) (liquidate True ((set_type (params 170) \"address\" 171) (set (operations 179) (cons (transfer (params 170) (literal (mutez 0) 179) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 176) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179) (set (operations 187) (cons (transfer (unit) (literal (mutez 0) 187) (openVariant (contract \"liquidate\" \"unit\" (params 170) 182) \"Some\" \"None\" 182) 187) (operations 187) 187) 187))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 270) \"nat\" 271) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 274) 274) (literal (string \"bad state\") 274) 274) (set (attr (data) \"state\" 199) (literal (intOrNat 2) 277) 277) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"Some\" (params 270) 278) 278) (set (attr (data) \"savedState_redeemer\" 279) (variant \"Some\" (sender) 279) 279) (set (operations 288) (cons (transfer (tuple 288 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 282)) (literal (mutez 0) 288) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 283) \"Some\" \"None\" 283) 288) (operations 288) 288) 288))) (redeem_callback True ((set_type (params 292) \"nat\" 293) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 296) (literal (string \"bad sender\") 296) 296) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 2) 299) 299) (literal (string \"bad state\") 299) 299) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 278) \"Some\" \"None\" 302) 302) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 303) (literal (intOrNat 1000000000000000000) 303) 303) (attr (data) \"totalSupply\" 96) 303) 303) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 304) (params 292) 304) (literal (intOrNat 1000000000000000000) 304) 304) 304) (set (attr (data) \"underlyingBalance\" 235) (openVariant (isNat (sub (params 292) (getLocal \"tokensToReceive\" 307) 307) 307) \"Some\" \"None\" 307) 307) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 279) \"Some\" \"None\" 310) 310) (set (operations 320) (cons (transfer (record 311 (address (getLocal \"redeemer\" 312)) (value (getLocal \"tokensToRedeem\" 313))) (literal (mutez 0) 320) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 315) \"Some\" \"None\" 315) 320) (operations 320) 320) 320) (set (operations 333) (cons (transfer (record 323 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 325)) (value (getLocal \"tokensToReceive\" 326))) (literal (mutez 0) 333) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 328) \"Some\" \"None\" 328) 333) (operations 333) 333) 333) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 336) 336) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"None\" (unit) -1) 337) (set (attr (data) \"savedState_redeemer\" 279) (variant \"None\" (unit) -1) 338))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 346) \"unit\" 347) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 350) 350) (literal (string \"bad state\") 350) 350) (set (attr (data) \"state\" 199) (literal (intOrNat 1) 353) 353) (set (operations 362) (cons (transfer (tuple 362 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 356)) (literal (mutez 0) 362) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 357) \"Some\" \"None\" 357) 362) (operations 362) 362) 362))) (updateBalance_callback True ((set_type (params 366) \"nat\" 367) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 370) (literal (string \"bad sender\") 370) 370) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 1) 373) 373) (literal (string \"bad state\") 373) 373) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 376) 376) (set (attr (data) \"underlyingBalance\" 235) (params 366) 379))) (updateContractMetadata True ((set_type (params 419) (tuple \"string\" \"bytes\") 420) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 422) (literal (string \"not governor\") 422) 422) (set (getItem (attr (data) \"metadata\" 426) (first (params 419) 424) 426) (second (params 419) 425) 426))) (updateDexterAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"dexterAddress\" 153) (params 403) 407))) (updateGovernorAddress True ((set_type (params 387) \"address\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"governorAddress\" 422) (params 387) 391))) (updateOvenRegistryAddress True ((set_type (params 411) \"address\" 412) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 414) (literal (string \"not governor\") 414) 414) (set (attr (data) \"ovenRegistryAddress\" 176) (params 411) 415))) (updateRewardPercent True ((set_type (params 395) \"nat\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"rewardPercent\" 139) (params 395) 399))) (updateTokenMetadata True ((set_type (params 430) (tuple \"nat\" (map \"string\" \"bytes\")) 431) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 433) (literal (string \"not governor\") 433) 433) (set (getItem (attr (data) \"token_metadata\" 434) (literal (intOrNat 0) 434) 434) (params 430) 434))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 2871, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "mint", "params": "(record 2875 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)) (value (mul (literal (nat 10) 2853) (literal (intOrNat 1000000000000000000) 2877) 2877)))", "line_no": 2874, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2874)", "show": true, "valid": "(literal (bool True) 2874)", "voting_powers": "(map 2874 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 2886 (address (literal (local-address (static_id 1 98)) 98)) (value (literal (intOrNat 200000000000000000000) 2886)))", "line_no": 2885, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2885)", "show": true, "valid": "(literal (bool True) 2885)", "voting_powers": "(map 2885 )", "export": true}, {"action": "message", "id": "(static_id 1 98)", "dynamic": false, "message": "redeem_callback", "params": "(literal (intOrNat 200000000000000000000) 2896)", "line_no": 2896, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1bTpviNnyx2PXsNmGpCQTMQsGoYordkUoA\") 26)", "chain_id": "", "time": "(literal (timestamp 0) 98)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2896)", "show": true, "valid": "(literal (bool False) 2896)", "voting_powers": "(map 2896 )", "export": true}], "decompile": false, "kind": "test"}, {"shortname": "pool", "longname": "pool", "scenario": [{"action": "newContract", "id": "(static_id 0 98)", "export": "(storage (record 98 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 102 ) (bigmap (unknown 1) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 102)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 89 ((literal (string \"\") -1) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 91)) ((literal (string \"data\") -1) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 88))) (bigmap \"string\" \"bytes\") 89)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 98)) (rewardPercent (literal (nat 1) 54)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 98)) (tokenAddress (literal (address \"tz1aJS7Pk9uWR3wWyFf1i3RwhYxN84G7stom\") 17)) (token_metadata (type_annotation (big_map 78 ((literal (nat 0) 65) (tuple -1 (literal (nat 0) 65) (type_annotation (map 67 ((literal (string \"name\") -1) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 69)) ((literal (string \"decimals\") -1) (literal (bytes \"0x3138\") 70)) ((literal (string \"symbol\") -1) (literal (bytes \"0x6465787465724c6b555344\") 71)) ((literal (string \"icon\") -1) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 72))) (map \"string\" \"bytes\") 67)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 78)) (totalSupply (literal (intOrNat 0) 98)) (underlyingBalance (literal (nat 0) 119)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 135) \"unit\" 136) (set (operations 140) (cons (transfer (unit) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) (openVariant (contract \"\" \"unit\" (source) 140) \"Some\" \"None\" 140) 140) (operations 140) 140) 140) (set (operations 156) (cons (transfer (tuple 156 (to_address (self) \"None\") (tuple 156 (literal (intOrNat 1) 156) (add_seconds (now) (literal (int 3600) 148) 148))) (sub (balance) (split_tokens (amount) (attr (data) \"rewardPercent\" 139) (literal (intOrNat 100) 139) 139) 143) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 153) 151) \"Some\" \"None\" 151) 156) (operations 156) 156) 156) (set (operations 166) (cons (transfer (unit) (literal (mutez 0) 166) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 161) \"Some\" \"None\" 161) 166) (operations 166) 166) 166))) (deposit True ((set_type (params 195) \"nat\" 196) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 199) 199) (literal (string \"bad state\") 199) 199) (set (attr (data) \"state\" 199) (literal (intOrNat 3) 202) 202) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"Some\" (params 195) 203) 203) (set (attr (data) \"savedState_depositor\" 204) (variant \"Some\" (sender) 204) 204) (set (operations 213) (cons (transfer (tuple 213 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 207)) (literal (mutez 0) 213) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 208) \"Some\" \"None\" 208) 213) (operations 213) 213) 213))) (deposit_callback True ((set_type (params 217) \"nat\" 218) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 221) (literal (string \"bad sender\") 221) 221) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 3) 224) 224) (literal (string \"bad state\") 224) 224) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 203) \"Some\" \"None\" 227) 227) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 228) (literal (intOrNat 1000000000000000000) 228) 228) 228) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 229) 229) ((defineLocal \"newUnderlyingBalance\" (add (params 217) (getLocal \"tokensToDeposit\" 230) 230) 230) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 231) (literal (intOrNat 1000000000000000000) 231) 231) (getLocal \"newUnderlyingBalance\" 231) 231) 231) (set (getLocal \"newTokens\" -1) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 232) (attr (data) \"totalSupply\" 96) 232) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 232) (getLocal \"fractionOfPoolOwnership\" 232) 232) 232) \"Some\" \"None\" 232) 232) 232)) 229) (set (attr (data) \"underlyingBalance\" 235) (add (params 217) (getLocal \"tokensToDeposit\" 235) 235) 235) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 204) \"Some\" \"None\" 238) 238) (set (operations 249) (cons (transfer (record 239 (from_ (getLocal \"depositor\" 240)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 242))) (literal (mutez 0) 249) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 244) \"Some\" \"None\" 244) 249) (operations 249) 249) 249) (set (operations 261) (cons (transfer (record 252 (address (getLocal \"depositor\" 253)) (value (getLocal \"newTokens\" 254))) (literal (mutez 0) 261) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 256) \"Some\" \"None\" 256) 261) (operations 261) 261) 261) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 264) 264) (set (attr (data) \"savedState_tokensToDeposit\" 203) (variant \"None\" (unit) -1) 265) (set (attr (data) \"savedState_depositor\" 204) (variant \"None\" (unit) -1) 266))) (getAdministrator True ((bind \"__s293\" ((set_type (first (params 108) -1) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) -1) (contract \"address\") -1) (set (operations -1) (cons (transfer (getLocal \"__s293\" -1) (literal (mutez 0) -1) (second (params 108) -1) 108) (operations -1) -1) -1))) (getAllowance True ((bind \"__s294\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) -1) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) -1) \"spender\" 69) 69) 69))) (set_type (second (params 68) -1) (contract \"nat\") -1) (set (operations -1) (cons (transfer (getLocal \"__s294\" -1) (literal (mutez 0) -1) (second (params 68) -1) 68) (operations -1) -1) -1))) (getBalance True ((bind \"__s295\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) -1) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) -1) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) -1) 65) \"balance\" 65) 65))) (set_type (second (params 60) -1) (contract \"nat\") -1) (set (operations -1) (cons (transfer (getLocal \"__s295\" -1) (literal (mutez 0) -1) (second (params 60) -1) 60) (operations -1) -1) -1))) (getTotalSupply True ((bind \"__s296\" ((set_type (first (params 72) -1) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) -1) (contract \"nat\") -1) (set (operations -1) (cons (transfer (getLocal \"__s296\" -1) (literal (mutez 0) -1) (second (params 72) -1) 72) (operations -1) -1) -1))) (liquidate True ((set_type (params 170) \"address\" 171) (set (operations 179) (cons (transfer (params 170) (literal (mutez 0) 179) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 176) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179) (set (operations 187) (cons (transfer (unit) (literal (mutez 0) 187) (openVariant (contract \"liquidate\" \"unit\" (params 170) 182) \"Some\" \"None\" 182) 187) (operations 187) 187) 187))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 270) \"nat\" 271) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 274) 274) (literal (string \"bad state\") 274) 274) (set (attr (data) \"state\" 199) (literal (intOrNat 2) 277) 277) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"Some\" (params 270) 278) 278) (set (attr (data) \"savedState_redeemer\" 279) (variant \"Some\" (sender) 279) 279) (set (operations 288) (cons (transfer (tuple 288 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 282)) (literal (mutez 0) 288) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 283) \"Some\" \"None\" 283) 288) (operations 288) 288) 288))) (redeem_callback True ((set_type (params 292) \"nat\" 293) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 296) (literal (string \"bad sender\") 296) 296) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 2) 299) 299) (literal (string \"bad state\") 299) 299) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 278) \"Some\" \"None\" 302) 302) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 303) (literal (intOrNat 1000000000000000000) 303) 303) (attr (data) \"totalSupply\" 96) 303) 303) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 304) (params 292) 304) (literal (intOrNat 1000000000000000000) 304) 304) 304) (set (attr (data) \"underlyingBalance\" 235) (openVariant (isNat (sub (params 292) (getLocal \"tokensToReceive\" 307) 307) 307) \"Some\" \"None\" 307) 307) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 279) \"Some\" \"None\" 310) 310) (set (operations 320) (cons (transfer (record 311 (address (getLocal \"redeemer\" 312)) (value (getLocal \"tokensToRedeem\" 313))) (literal (mutez 0) 320) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 315) \"Some\" \"None\" 315) 320) (operations 320) 320) 320) (set (operations 333) (cons (transfer (record 323 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 325)) (value (getLocal \"tokensToReceive\" 326))) (literal (mutez 0) 333) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 210) 328) \"Some\" \"None\" 328) 333) (operations 333) 333) 333) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 336) 336) (set (attr (data) \"savedState_tokensToRedeem\" 278) (variant \"None\" (unit) -1) 337) (set (attr (data) \"savedState_redeemer\" 279) (variant \"None\" (unit) -1) 338))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 346) \"unit\" 347) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 0) 350) 350) (literal (string \"bad state\") 350) 350) (set (attr (data) \"state\" 199) (literal (intOrNat 1) 353) 353) (set (operations 362) (cons (transfer (tuple 362 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 356)) (literal (mutez 0) 362) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 210) 357) \"Some\" \"None\" 357) 362) (operations 362) 362) 362))) (updateBalance_callback True ((set_type (params 366) \"nat\" 367) (verify (eq (sender) (attr (data) \"tokenAddress\" 210) 370) (literal (string \"bad sender\") 370) 370) (verify (eq (attr (data) \"state\" 199) (literal (intOrNat 1) 373) 373) (literal (string \"bad state\") 373) 373) (set (attr (data) \"state\" 199) (literal (intOrNat 0) 376) 376) (set (attr (data) \"underlyingBalance\" 235) (params 366) 379))) (updateContractMetadata True ((set_type (params 419) (tuple \"string\" \"bytes\") 420) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 422) (literal (string \"not governor\") 422) 422) (set (getItem (attr (data) \"metadata\" 426) (first (params 419) 424) 426) (second (params 419) 425) 426))) (updateDexterAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"dexterAddress\" 153) (params 403) 407))) (updateGovernorAddress True ((set_type (params 387) \"address\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"governorAddress\" 422) (params 387) 391))) (updateOvenRegistryAddress True ((set_type (params 411) \"address\" 412) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 414) (literal (string \"not governor\") 414) 414) (set (attr (data) \"ovenRegistryAddress\" 176) (params 411) 415))) (updateRewardPercent True ((set_type (params 395) \"nat\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"rewardPercent\" 139) (params 395) 399))) (updateTokenMetadata True ((set_type (params 430) (tuple \"nat\" (map \"string\" \"bytes\")) 431) (verify (eq (sender) (attr (data) \"governorAddress\" 422) 433) (literal (string \"not governor\") 433) 433) (set (getItem (attr (data) \"token_metadata\" 434) (literal (intOrNat 0) 434) 434) (params 430) 434))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": -1, "show": true, "accept_unknown_types": false}], "decompile": false, "kind": "compilation"}]