[{"shortname": "FA12", "longname": "FA12", "scenario": [{"action": "html", "tag": "h1", "inner": "FA1.2 template - Fungible assets", "line_no": 125}, {"action": "html", "tag": "p", "inner": "[[TABLEOFCONTENTS]]", "line_no": 127}, {"action": "html", "tag": "h1", "inner": "Accounts", "line_no": 135}, {"action": "show", "html": true, "stripStrings": false, "expression": "(list 136 (account_of_seed \"Administrator\" 130) (account_of_seed \"Alice\" 131) (account_of_seed \"Robert\" 132))", "compile": false, "line_no": 136}, {"action": "html", "tag": "h1", "inner": "Contract", "line_no": 138}, {"action": "html", "tag": "h1", "inner": "Entry points", "line_no": 141}, {"action": "newContract", "id": "(static_id 0 20)", "export": "(storage (record 20 (administrator (reduce (attr (account_of_seed \"Administrator\" 130) \"address\" 130) 130)) (balances (type_annotation (big_map 23 ) (bigmap (unknown 2) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 23)) (paused (literal (bool False) 20)) (totalSupply (literal (intOrNat 0) 20)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (getAdministrator True ((bind \"__s1\" ((set_type (first (params 108) 142) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 142) (contract \"address\") 142) (set (operations 142) (cons (transfer (getLocal \"__s1\" 142) (literal (mutez 0) 142) (second (params 108) 142) 108) (operations 142) 142) 142))) (getAllowance True ((bind \"__s2\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 142) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 142) \"spender\" 69) 69) 69))) (set_type (second (params 68) 142) (contract \"nat\") 142) (set (operations 142) (cons (transfer (getLocal \"__s2\" 142) (literal (mutez 0) 142) (second (params 68) 142) 68) (operations 142) 142) 142))) (getBalance True ((bind \"__s3\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 142) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 142) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 142) 65) \"balance\" 65) 65))) (set_type (second (params 60) 142) (contract \"nat\") 142) (set (operations 142) (cons (transfer (getLocal \"__s3\" 142) (literal (mutez 0) 142) (second (params 60) 142) 60) (operations 142) 142) 142))) (getTotalSupply True ((bind \"__s4\" ((set_type (first (params 72) 142) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 142) (contract \"nat\") 142) (set (operations 142) (cons (transfer (getLocal \"__s4\" 142) (literal (mutez 0) 142) (second (params 72) 142) 72) (operations 142) 142) 142))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 142, "show": true, "accept_unknown_types": false}, {"action": "html", "tag": "h2", "inner": "Admin mints a few coins", "line_no": 143}, {"action": "message", "id": "(static_id 0 20)", "dynamic": false, "message": "mint", "params": "(record 144 (address (reduce (attr (account_of_seed \"Alice\" 131) \"address\" 131) 131)) (value (literal (intOrNat 12) 144)))", "line_no": 144, "title": "", "messageClass": "", "source": "none", "sender": "seed:Administrator", "chain_id": "", "time": "(literal (timestamp 0) 20)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 144)", "show": true, "valid": "(literal (bool True) 144)", "voting_powers": "(map 144 )", "export": true}, {"action": "message", "id": "(static_id 0 20)", "dynamic": false, "message": "mint", "params": "(record 145 (address (reduce (attr (account_of_seed \"Alice\" 131) \"address\" 131) 131)) (value (literal (intOrNat 3) 145)))", "line_no": 145, "title": "", "messageClass": "", "source": "none", "sender": "seed:Administrator", "chain_id": "", "time": "(literal (timestamp 0) 20)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 145)", "show": true, "valid": "(literal (bool True) 145)", "voting_powers": "(map 145 )", "export": true}, {"action": "message", "id": "(static_id 0 20)", "dynamic": false, "message": "mint", "params": "(record 146 (address (reduce (attr (account_of_seed \"Alice\" 131) \"address\" 131) 131)) (value (literal (intOrNat 3) 146)))", "line_no": 146, "title": "", "messageClass": "", "source": "none", "sender": "seed:Administrator", "chain_id": "", "time": "(literal (timestamp 0) 20)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 146)", "show": true, "valid": "(literal (bool True) 146)", "voting_powers": "(map 146 )", "export": true}, {"action": "html", "tag": "h2", "inner": "Alice transfers to Bob", "line_no": 147}, {"action": "message", "id": "(static_id 0 20)", "dynamic": false, "message": "transfer", "params": "(record 148 (from_ (reduce (attr (account_of_seed \"Alice\" 131) \"address\" 131) 131)) (to_ (reduce (attr (account_of_seed \"Robert\" 132) \"address\" 132) 132)) (value (literal (intOrNat 4) 148)))", "line_no": 148, "title": "", "messageClass": "", "source": "none", "sender": "seed:Alice", "chain_id": "", "time": "(literal (timestamp 0) 20)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 148)", "show": true, "valid": "(literal (bool True) 148)", "voting_powers": "(map 148 )", "export": true}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 20) 148) \"balances\" 149) (reduce (attr (account_of_seed \"Alice\" 131) \"address\" 131) 131) 149) \"balance\" 149) (literal (intOrNat 14) 149) 149)", "line_no": 149}, {"action": "html", "tag": "h2", "inner": "Bob tries to transfer from Alice but he doesn't have her approval", "line_no": 150}, {"action": "message", "id": "(static_id 0 20)", "dynamic": false, "message": "transfer", "params": "(record 151 (from_ (reduce (attr (account_of_seed \"Alice\" 131) \"address\" 131) 131)) (to_ (reduce (attr (account_of_seed \"Robert\" 132) \"address\" 132) 132)) (value (literal (intOrNat 4) 151)))", "line_no": 151, "title": "", "messageClass": "", "source": "none", "sender": "seed:Robert", "chain_id": "", "time": "(literal (timestamp 0) 20)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 151)", "show": true, "valid": "(literal (bool False) 151)", "voting_powers": "(map 151 )", "export": true}, {"action": "html", "tag": "h2", "inner": "Alice approves Bob and Bob transfers", "line_no": 152}, {"action": "message", "id": "(static_id 0 20)", "dynamic": false, "message": "approve", "params": "(record 153 (spender (reduce (attr (account_of_seed \"Robert\" 132) \"address\" 132) 132)) (value (literal (intOrNat 5) 153)))", "line_no": 153, "title": "", "messageClass": "", "source": "none", "sender": "seed:Alice", "chain_id": "", "time": "(literal (timestamp 0) 20)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 153)", "show": true, "valid": "(literal (bool True) 153)", "voting_powers": "(map 153 )", "export": true}, {"action": "message", "id": "(static_id 0 20)", "dynamic": false, "message": "transfer", "params": "(record 154 (from_ (reduce (attr (account_of_seed \"Alice\" 131) \"address\" 131) 131)) (to_ (reduce (attr (account_of_seed \"Robert\" 132) \"address\" 132) 132)) (value (literal (intOrNat 4) 154)))", "line_no": 154, "title": "", "messageClass": "", "source": "none", "sender": "seed:Robert", "chain_id": "", "time": "(literal (timestamp 0) 20)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 154)", "show": true, "valid": "(literal (bool True) 154)", "voting_powers": "(map 154 )", "export": true}, {"action": "html", "tag": "h2", "inner": "Bob tries to over-transfer from Alice", "line_no": 155}, {"action": "message", "id": "(static_id 0 20)", "dynamic": false, "message": "transfer", "params": "(record 156 (from_ (reduce (attr (account_of_seed \"Alice\" 131) \"address\" 131) 131)) (to_ (reduce (attr (account_of_seed \"Robert\" 132) \"address\" 132) 132)) (value (literal (intOrNat 4) 156)))", "line_no": 156, "title": "", "messageClass": "", "source": "none", "sender": "seed:Robert", "chain_id": "", "time": "(literal (timestamp 0) 20)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 156)", "show": true, "valid": "(literal (bool False) 156)", "voting_powers": "(map 156 )", "export": true}, {"action": "html", "tag": "h2", "inner": "Admin burns Bob token", "line_no": 157}, {"action": "message", "id": "(static_id 0 20)", "dynamic": false, "message": "burn", "params": "(record 158 (address (reduce (attr (account_of_seed \"Robert\" 132) \"address\" 132) 132)) (value (literal (intOrNat 1) 158)))", "line_no": 158, "title": "", "messageClass": "", "source": "none", "sender": "seed:Administrator", "chain_id": "", "time": "(literal (timestamp 0) 20)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 158)", "show": true, "valid": "(literal (bool True) 158)", "voting_powers": "(map 158 )", "export": true}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 20) 158) \"balances\" 159) (reduce (attr (account_of_seed \"Alice\" 131) \"address\" 131) 131) 159) \"balance\" 159) (literal (intOrNat 10) 159) 159)", "line_no": 159}, {"action": "html", "tag": "h2", "inner": "Alice tries to burn Bob token", "line_no": 160}, {"action": "message", "id": "(static_id 0 20)", "dynamic": false, "message": "burn", "params": "(record 161 (address (reduce (attr (account_of_seed \"Robert\" 132) \"address\" 132) 132)) (value (literal (intOrNat 1) 161)))", "line_no": 161, "title": "", "messageClass": "", "source": "none", "sender": "seed:Alice", "chain_id": "", "time": "(literal (timestamp 0) 20)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 161)", "show": true, "valid": "(literal (bool False) 161)", "voting_powers": "(map 161 )", "export": true}, {"action": "html", "tag": "h2", "inner": "Admin pauses the contract and Alice cannot transfer anymore", "line_no": 162}, {"action": "message", "id": "(static_id 0 20)", "dynamic": false, "message": "setPause", "params": "(literal (bool True) 163)", "line_no": 163, "title": "", "messageClass": "", "source": "none", "sender": "seed:Administrator", "chain_id": "", "time": "(literal (timestamp 0) 20)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 163)", "show": true, "valid": "(literal (bool True) 163)", "voting_powers": "(map 163 )", "export": true}, {"action": "message", "id": "(static_id 0 20)", "dynamic": false, "message": "transfer", "params": "(record 164 (from_ (reduce (attr (account_of_seed \"Alice\" 131) \"address\" 131) 131)) (to_ (reduce (attr (account_of_seed \"Robert\" 132) \"address\" 132) 132)) (value (literal (intOrNat 4) 164)))", "line_no": 164, "title": "", "messageClass": "", "source": "none", "sender": "seed:Alice", "chain_id": "", "time": "(literal (timestamp 0) 20)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 164)", "show": true, "valid": "(literal (bool False) 164)", "voting_powers": "(map 164 )", "export": true}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 20) 164) \"balances\" 165) (reduce (attr (account_of_seed \"Alice\" 131) \"address\" 131) 131) 165) \"balance\" 165) (literal (intOrNat 10) 165) 165)", "line_no": 165}, {"action": "html", "tag": "h2", "inner": "Admin transfers while on pause", "line_no": 166}, {"action": "message", "id": "(static_id 0 20)", "dynamic": false, "message": "transfer", "params": "(record 167 (from_ (reduce (attr (account_of_seed \"Alice\" 131) \"address\" 131) 131)) (to_ (reduce (attr (account_of_seed \"Robert\" 132) \"address\" 132) 132)) (value (literal (intOrNat 1) 167)))", "line_no": 167, "title": "", "messageClass": "", "source": "none", "sender": "seed:Administrator", "chain_id": "", "time": "(literal (timestamp 0) 20)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 167)", "show": true, "valid": "(literal (bool True) 167)", "voting_powers": "(map 167 )", "export": true}, {"action": "html", "tag": "h2", "inner": "Admin unpauses the contract and transferts are allowed", "line_no": 168}, {"action": "message", "id": "(static_id 0 20)", "dynamic": false, "message": "setPause", "params": "(literal (bool False) 169)", "line_no": 169, "title": "", "messageClass": "", "source": "none", "sender": "seed:Administrator", "chain_id": "", "time": "(literal (timestamp 0) 20)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 169)", "show": true, "valid": "(literal (bool True) 169)", "voting_powers": "(map 169 )", "export": true}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 20) 169) \"balances\" 170) (reduce (attr (account_of_seed \"Alice\" 131) \"address\" 131) 131) 170) \"balance\" 170) (literal (intOrNat 9) 170) 170)", "line_no": 170}, {"action": "message", "id": "(static_id 0 20)", "dynamic": false, "message": "transfer", "params": "(record 171 (from_ (reduce (attr (account_of_seed \"Alice\" 131) \"address\" 131) 131)) (to_ (reduce (attr (account_of_seed \"Robert\" 132) \"address\" 132) 132)) (value (literal (intOrNat 1) 171)))", "line_no": 171, "title": "", "messageClass": "", "source": "none", "sender": "seed:Alice", "chain_id": "", "time": "(literal (timestamp 0) 20)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 171)", "show": true, "valid": "(literal (bool True) 171)", "voting_powers": "(map 171 )", "export": true}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 0 20) 171) \"totalSupply\" 173) (literal (intOrNat 17) 173) 173)", "line_no": 173}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 20) 171) \"balances\" 174) (reduce (attr (account_of_seed \"Alice\" 131) \"address\" 131) 131) 174) \"balance\" 174) (literal (intOrNat 8) 174) 174)", "line_no": 174}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 20) 171) \"balances\" 174) (reduce (attr (account_of_seed \"Robert\" 132) \"address\" 132) 132) 175) \"balance\" 175) (literal (intOrNat 9) 175) 175)", "line_no": 175}], "decompile": false, "kind": "test"}, {"shortname": "updateContractMetadata_-_succeeds_when_called_by_governor", "longname": "updateContractMetadata - succeeds when called by governor", "scenario": [{"action": "newContract", "id": "(static_id 0 82)", "export": "(storage (record 82 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 86 ) (bigmap (unknown 3) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 86)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 73 ((literal (string \"\") 448) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 75)) ((literal (string \"data\") 448) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 72))) (bigmap \"string\" \"bytes\") 73)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 82)) (rewardAmount (literal (intOrNat 1000000000000000000) 82)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 82)) (tokenAddress (literal (address \"tz1aJS7Pk9uWR3wWyFf1i3RwhYxN84G7stom\") 17)) (token_metadata (type_annotation (big_map 62 ((literal (nat 0) 49) (tuple 448 (literal (nat 0) 49) (type_annotation (map 51 ((literal (string \"name\") 448) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 53)) ((literal (string \"decimals\") 448) (literal (bytes \"0x3138\") 54)) ((literal (string \"symbol\") 448) (literal (bytes \"0x6465787465724c6b555344\") 55)) ((literal (string \"icon\") 448) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 56))) (map \"string\" \"bytes\") 51)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 62)) (totalSupply (literal (intOrNat 0) 82)) (underlyingBalance (literal (nat 0) 103)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 119) \"unit\" 120) (set (operations 135) (cons (transfer (tuple 135 (to_address (self) \"None\") (tuple 135 (literal (intOrNat 1) 135) (add_seconds (now) (literal (int 3600) 127) 127))) (balance) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 132) 130) \"Some\" \"None\" 130) 135) (operations 135) 135) 135) (set (operations 145) (cons (transfer (unit) (literal (mutez 0) 145) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 140) \"Some\" \"None\" 140) 145) (operations 145) 145) 145))) (deposit True ((set_type (params 187) \"nat\" 188) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 191) 191) (literal (string \"bad state\") 191) 191) (set (attr (data) \"state\" 191) (literal (intOrNat 3) 194) 194) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"Some\" (params 187) 195) 195) (set (attr (data) \"savedState_depositor\" 196) (variant \"Some\" (sender) 196) 196) (set (operations 205) (cons (transfer (tuple 205 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 199)) (literal (mutez 0) 205) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 200) \"Some\" \"None\" 200) 205) (operations 205) 205) 205))) (deposit_callback True ((set_type (params 209) \"nat\" 210) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 213) (literal (string \"bad sender\") 213) 213) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 3) 216) 216) (literal (string \"bad state\") 216) 216) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 195) \"Some\" \"None\" 219) 219) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 220) (literal (intOrNat 1000000000000000000) 220) 220) 220) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 221) 221) ((defineLocal \"newUnderlyingBalance\" (add (params 209) (getLocal \"tokensToDeposit\" 222) 222) 222) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 223) (literal (intOrNat 1000000000000000000) 223) 223) (getLocal \"newUnderlyingBalance\" 223) 223) 223) (set (getLocal \"newTokens\" 448) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 224) (attr (data) \"totalSupply\" 96) 224) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 224) (getLocal \"fractionOfPoolOwnership\" 224) 224) 224) \"Some\" \"None\" 224) 224) 224)) 221) (set (attr (data) \"underlyingBalance\" 227) (add (params 209) (getLocal \"tokensToDeposit\" 227) 227) 227) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 196) \"Some\" \"None\" 230) 230) (set (operations 241) (cons (transfer (record 231 (from_ (getLocal \"depositor\" 232)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 234))) (literal (mutez 0) 241) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 236) \"Some\" \"None\" 236) 241) (operations 241) 241) 241) (set (operations 253) (cons (transfer (record 244 (address (getLocal \"depositor\" 245)) (value (getLocal \"newTokens\" 246))) (literal (mutez 0) 253) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 248) \"Some\" \"None\" 248) 253) (operations 253) 253) 253) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 256) 256) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"None\" (unit) -1) 257) (set (attr (data) \"savedState_depositor\" 196) (variant \"None\" (unit) -1) 258))) (getAdministrator True ((bind \"__s5\" ((set_type (first (params 108) 448) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 448) (contract \"address\") 448) (set (operations 448) (cons (transfer (getLocal \"__s5\" 448) (literal (mutez 0) 448) (second (params 108) 448) 108) (operations 448) 448) 448))) (getAllowance True ((bind \"__s6\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 448) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 448) \"spender\" 69) 69) 69))) (set_type (second (params 68) 448) (contract \"nat\") 448) (set (operations 448) (cons (transfer (getLocal \"__s6\" 448) (literal (mutez 0) 448) (second (params 68) 448) 68) (operations 448) 448) 448))) (getBalance True ((bind \"__s7\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 448) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 448) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 448) 65) \"balance\" 65) 65))) (set_type (second (params 60) 448) (contract \"nat\") 448) (set (operations 448) (cons (transfer (getLocal \"__s7\" 448) (literal (mutez 0) 448) (second (params 60) 448) 60) (operations 448) 448) 448))) (getTotalSupply True ((bind \"__s8\" ((set_type (first (params 72) 448) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 448) (contract \"nat\") 448) (set (operations 448) (cons (transfer (getLocal \"__s8\" 448) (literal (mutez 0) 448) (second (params 72) 448) 72) (operations 448) 448) 448))) (liquidate True ((set_type (params 149) \"address\" 150) (set (operations 158) (cons (transfer (params 149) (literal (mutez 0) 158) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 155) 153) \"Some\" \"None\" 153) 158) (operations 158) 158) 158) (set (operations 171) (cons (transfer (record 161 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (attr (data) \"rewardAmount\" 164))) (literal (mutez 0) 171) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 166) \"Some\" \"None\" 166) 171) (operations 171) 171) 171) (set (operations 179) (cons (transfer (unit) (literal (mutez 0) 179) (openVariant (contract \"liquidate\" \"unit\" (params 149) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 262) \"nat\" 263) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 266) 266) (literal (string \"bad state\") 266) 266) (set (attr (data) \"state\" 191) (literal (intOrNat 2) 269) 269) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"Some\" (params 262) 270) 270) (set (attr (data) \"savedState_redeemer\" 271) (variant \"Some\" (sender) 271) 271) (set (operations 280) (cons (transfer (tuple 280 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 274)) (literal (mutez 0) 280) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 275) \"Some\" \"None\" 275) 280) (operations 280) 280) 280))) (redeem_callback True ((set_type (params 284) \"nat\" 285) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 288) (literal (string \"bad sender\") 288) 288) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 2) 291) 291) (literal (string \"bad state\") 291) 291) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 270) \"Some\" \"None\" 294) 294) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 295) (literal (intOrNat 1000000000000000000) 295) 295) (attr (data) \"totalSupply\" 96) 295) 295) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 296) (params 284) 296) (literal (intOrNat 1000000000000000000) 296) 296) 296) (set (attr (data) \"underlyingBalance\" 227) (openVariant (isNat (sub (params 284) (getLocal \"tokensToReceive\" 299) 299) 299) \"Some\" \"None\" 299) 299) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 271) \"Some\" \"None\" 302) 302) (set (operations 312) (cons (transfer (record 303 (address (getLocal \"redeemer\" 304)) (value (getLocal \"tokensToRedeem\" 305))) (literal (mutez 0) 312) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 307) \"Some\" \"None\" 307) 312) (operations 312) 312) 312) (set (operations 325) (cons (transfer (record 315 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 317)) (value (getLocal \"tokensToReceive\" 318))) (literal (mutez 0) 325) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 320) \"Some\" \"None\" 320) 325) (operations 325) 325) 325) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 328) 328) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"None\" (unit) -1) 329) (set (attr (data) \"savedState_redeemer\" 271) (variant \"None\" (unit) -1) 330))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 338) \"unit\" 339) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 342) 342) (literal (string \"bad state\") 342) 342) (set (attr (data) \"state\" 191) (literal (intOrNat 1) 345) 345) (set (operations 354) (cons (transfer (tuple 354 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 348)) (literal (mutez 0) 354) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 349) \"Some\" \"None\" 349) 354) (operations 354) 354) 354))) (updateBalance_callback True ((set_type (params 358) \"nat\" 359) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 362) (literal (string \"bad sender\") 362) 362) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 1) 365) 365) (literal (string \"bad state\") 365) 365) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 368) 368) (set (attr (data) \"underlyingBalance\" 227) (params 358) 371))) (updateContractMetadata True ((set_type (params 411) (tuple \"string\" \"bytes\") 412) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 414) (literal (string \"not governor\") 414) 414) (set (getItem (attr (data) \"metadata\" 418) (first (params 411) 416) 418) (second (params 411) 417) 418))) (updateDexterAddress True ((set_type (params 395) \"address\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"dexterAddress\" 132) (params 395) 399))) (updateGovernorAddress True ((set_type (params 379) \"address\" 380) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 382) (literal (string \"not governor\") 382) 382) (set (attr (data) \"governorAddress\" 414) (params 379) 383))) (updateOvenRegistryAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"ovenRegistryAddress\" 155) (params 403) 407))) (updateRewardAmount True ((set_type (params 387) \"nat\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"rewardAmount\" 164) (params 387) 391))) (updateTokenMetadata True ((set_type (params 422) (tuple \"nat\" (map \"string\" \"bytes\")) 423) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 425) (literal (string \"not governor\") 425) 425) (set (getItem (attr (data) \"token_metadata\" 426) (literal (intOrNat 0) 426) 426) (params 422) 426))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 448, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 82)", "dynamic": false, "message": "updateContractMetadata", "params": "(tuple 453 (literal (string \"\") 453) (literal (bytes \"0x1234567890\") 452))", "line_no": 453, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 453)", "show": true, "valid": "(literal (bool True) 453)", "voting_powers": "(map 453 )", "export": true}, {"action": "verify", "condition": "(eq (getItem (attr (contractData (static_id 0 82) 453) \"metadata\" 458) (literal (string \"\") 458) 458) (literal (bytes \"0x1234567890\") 452) 458)", "line_no": 458}], "decompile": false, "kind": "test"}, {"shortname": "updateContractMetadata_-_fails_when_not_called_by_governor", "longname": "updateContractMetadata - fails when not called by governor", "scenario": [{"action": "newContract", "id": "(static_id 0 82)", "export": "(storage (record 82 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 86 ) (bigmap (unknown 13) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 86)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 73 ((literal (string \"\") 468) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 75)) ((literal (string \"data\") 468) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 72))) (bigmap \"string\" \"bytes\") 73)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 82)) (rewardAmount (literal (intOrNat 1000000000000000000) 82)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 82)) (tokenAddress (literal (address \"tz1aJS7Pk9uWR3wWyFf1i3RwhYxN84G7stom\") 17)) (token_metadata (type_annotation (big_map 62 ((literal (nat 0) 49) (tuple 468 (literal (nat 0) 49) (type_annotation (map 51 ((literal (string \"name\") 468) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 53)) ((literal (string \"decimals\") 468) (literal (bytes \"0x3138\") 54)) ((literal (string \"symbol\") 468) (literal (bytes \"0x6465787465724c6b555344\") 55)) ((literal (string \"icon\") 468) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 56))) (map \"string\" \"bytes\") 51)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 62)) (totalSupply (literal (intOrNat 0) 82)) (underlyingBalance (literal (nat 0) 103)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 119) \"unit\" 120) (set (operations 135) (cons (transfer (tuple 135 (to_address (self) \"None\") (tuple 135 (literal (intOrNat 1) 135) (add_seconds (now) (literal (int 3600) 127) 127))) (balance) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 132) 130) \"Some\" \"None\" 130) 135) (operations 135) 135) 135) (set (operations 145) (cons (transfer (unit) (literal (mutez 0) 145) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 140) \"Some\" \"None\" 140) 145) (operations 145) 145) 145))) (deposit True ((set_type (params 187) \"nat\" 188) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 191) 191) (literal (string \"bad state\") 191) 191) (set (attr (data) \"state\" 191) (literal (intOrNat 3) 194) 194) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"Some\" (params 187) 195) 195) (set (attr (data) \"savedState_depositor\" 196) (variant \"Some\" (sender) 196) 196) (set (operations 205) (cons (transfer (tuple 205 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 199)) (literal (mutez 0) 205) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 200) \"Some\" \"None\" 200) 205) (operations 205) 205) 205))) (deposit_callback True ((set_type (params 209) \"nat\" 210) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 213) (literal (string \"bad sender\") 213) 213) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 3) 216) 216) (literal (string \"bad state\") 216) 216) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 195) \"Some\" \"None\" 219) 219) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 220) (literal (intOrNat 1000000000000000000) 220) 220) 220) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 221) 221) ((defineLocal \"newUnderlyingBalance\" (add (params 209) (getLocal \"tokensToDeposit\" 222) 222) 222) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 223) (literal (intOrNat 1000000000000000000) 223) 223) (getLocal \"newUnderlyingBalance\" 223) 223) 223) (set (getLocal \"newTokens\" 468) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 224) (attr (data) \"totalSupply\" 96) 224) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 224) (getLocal \"fractionOfPoolOwnership\" 224) 224) 224) \"Some\" \"None\" 224) 224) 224)) 221) (set (attr (data) \"underlyingBalance\" 227) (add (params 209) (getLocal \"tokensToDeposit\" 227) 227) 227) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 196) \"Some\" \"None\" 230) 230) (set (operations 241) (cons (transfer (record 231 (from_ (getLocal \"depositor\" 232)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 234))) (literal (mutez 0) 241) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 236) \"Some\" \"None\" 236) 241) (operations 241) 241) 241) (set (operations 253) (cons (transfer (record 244 (address (getLocal \"depositor\" 245)) (value (getLocal \"newTokens\" 246))) (literal (mutez 0) 253) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 248) \"Some\" \"None\" 248) 253) (operations 253) 253) 253) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 256) 256) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"None\" (unit) -1) 257) (set (attr (data) \"savedState_depositor\" 196) (variant \"None\" (unit) -1) 258))) (getAdministrator True ((bind \"__s9\" ((set_type (first (params 108) 468) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 468) (contract \"address\") 468) (set (operations 468) (cons (transfer (getLocal \"__s9\" 468) (literal (mutez 0) 468) (second (params 108) 468) 108) (operations 468) 468) 468))) (getAllowance True ((bind \"__s10\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 468) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 468) \"spender\" 69) 69) 69))) (set_type (second (params 68) 468) (contract \"nat\") 468) (set (operations 468) (cons (transfer (getLocal \"__s10\" 468) (literal (mutez 0) 468) (second (params 68) 468) 68) (operations 468) 468) 468))) (getBalance True ((bind \"__s11\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 468) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 468) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 468) 65) \"balance\" 65) 65))) (set_type (second (params 60) 468) (contract \"nat\") 468) (set (operations 468) (cons (transfer (getLocal \"__s11\" 468) (literal (mutez 0) 468) (second (params 60) 468) 60) (operations 468) 468) 468))) (getTotalSupply True ((bind \"__s12\" ((set_type (first (params 72) 468) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 468) (contract \"nat\") 468) (set (operations 468) (cons (transfer (getLocal \"__s12\" 468) (literal (mutez 0) 468) (second (params 72) 468) 72) (operations 468) 468) 468))) (liquidate True ((set_type (params 149) \"address\" 150) (set (operations 158) (cons (transfer (params 149) (literal (mutez 0) 158) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 155) 153) \"Some\" \"None\" 153) 158) (operations 158) 158) 158) (set (operations 171) (cons (transfer (record 161 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (attr (data) \"rewardAmount\" 164))) (literal (mutez 0) 171) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 166) \"Some\" \"None\" 166) 171) (operations 171) 171) 171) (set (operations 179) (cons (transfer (unit) (literal (mutez 0) 179) (openVariant (contract \"liquidate\" \"unit\" (params 149) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 262) \"nat\" 263) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 266) 266) (literal (string \"bad state\") 266) 266) (set (attr (data) \"state\" 191) (literal (intOrNat 2) 269) 269) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"Some\" (params 262) 270) 270) (set (attr (data) \"savedState_redeemer\" 271) (variant \"Some\" (sender) 271) 271) (set (operations 280) (cons (transfer (tuple 280 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 274)) (literal (mutez 0) 280) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 275) \"Some\" \"None\" 275) 280) (operations 280) 280) 280))) (redeem_callback True ((set_type (params 284) \"nat\" 285) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 288) (literal (string \"bad sender\") 288) 288) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 2) 291) 291) (literal (string \"bad state\") 291) 291) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 270) \"Some\" \"None\" 294) 294) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 295) (literal (intOrNat 1000000000000000000) 295) 295) (attr (data) \"totalSupply\" 96) 295) 295) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 296) (params 284) 296) (literal (intOrNat 1000000000000000000) 296) 296) 296) (set (attr (data) \"underlyingBalance\" 227) (openVariant (isNat (sub (params 284) (getLocal \"tokensToReceive\" 299) 299) 299) \"Some\" \"None\" 299) 299) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 271) \"Some\" \"None\" 302) 302) (set (operations 312) (cons (transfer (record 303 (address (getLocal \"redeemer\" 304)) (value (getLocal \"tokensToRedeem\" 305))) (literal (mutez 0) 312) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 307) \"Some\" \"None\" 307) 312) (operations 312) 312) 312) (set (operations 325) (cons (transfer (record 315 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 317)) (value (getLocal \"tokensToReceive\" 318))) (literal (mutez 0) 325) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 320) \"Some\" \"None\" 320) 325) (operations 325) 325) 325) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 328) 328) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"None\" (unit) -1) 329) (set (attr (data) \"savedState_redeemer\" 271) (variant \"None\" (unit) -1) 330))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 338) \"unit\" 339) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 342) 342) (literal (string \"bad state\") 342) 342) (set (attr (data) \"state\" 191) (literal (intOrNat 1) 345) 345) (set (operations 354) (cons (transfer (tuple 354 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 348)) (literal (mutez 0) 354) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 349) \"Some\" \"None\" 349) 354) (operations 354) 354) 354))) (updateBalance_callback True ((set_type (params 358) \"nat\" 359) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 362) (literal (string \"bad sender\") 362) 362) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 1) 365) 365) (literal (string \"bad state\") 365) 365) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 368) 368) (set (attr (data) \"underlyingBalance\" 227) (params 358) 371))) (updateContractMetadata True ((set_type (params 411) (tuple \"string\" \"bytes\") 412) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 414) (literal (string \"not governor\") 414) 414) (set (getItem (attr (data) \"metadata\" 418) (first (params 411) 416) 418) (second (params 411) 417) 418))) (updateDexterAddress True ((set_type (params 395) \"address\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"dexterAddress\" 132) (params 395) 399))) (updateGovernorAddress True ((set_type (params 379) \"address\" 380) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 382) (literal (string \"not governor\") 382) 382) (set (attr (data) \"governorAddress\" 414) (params 379) 383))) (updateOvenRegistryAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"ovenRegistryAddress\" 155) (params 403) 407))) (updateRewardAmount True ((set_type (params 387) \"nat\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"rewardAmount\" 164) (params 387) 391))) (updateTokenMetadata True ((set_type (params 422) (tuple \"nat\" (map \"string\" \"bytes\")) 423) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 425) (literal (string \"not governor\") 425) 425) (set (getItem (attr (data) \"token_metadata\" 426) (literal (intOrNat 0) 426) 426) (params 422) 426))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 468, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 82)", "dynamic": false, "message": "updateContractMetadata", "params": "(tuple 473 (literal (string \"\") 473) (literal (bytes \"0x1234567890\") 472))", "line_no": 473, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1bTpviNnyx2PXsNmGpCQTMQsGoYordkUoA\") 26)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 473)", "show": true, "valid": "(literal (bool False) 473)", "voting_powers": "(map 473 )", "export": true}], "decompile": false, "kind": "test"}, {"shortname": "updateTokenMetadata_-_succeeds_when_called_by_governor", "longname": "updateTokenMetadata - succeeds when called by governor", "scenario": [{"action": "newContract", "id": "(static_id 0 82)", "export": "(storage (record 82 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 86 ) (bigmap (unknown 23) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 86)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 73 ((literal (string \"\") 490) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 75)) ((literal (string \"data\") 490) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 72))) (bigmap \"string\" \"bytes\") 73)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 82)) (rewardAmount (literal (intOrNat 1000000000000000000) 82)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 82)) (tokenAddress (literal (address \"tz1aJS7Pk9uWR3wWyFf1i3RwhYxN84G7stom\") 17)) (token_metadata (type_annotation (big_map 62 ((literal (nat 0) 49) (tuple 490 (literal (nat 0) 49) (type_annotation (map 51 ((literal (string \"name\") 490) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 53)) ((literal (string \"decimals\") 490) (literal (bytes \"0x3138\") 54)) ((literal (string \"symbol\") 490) (literal (bytes \"0x6465787465724c6b555344\") 55)) ((literal (string \"icon\") 490) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 56))) (map \"string\" \"bytes\") 51)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 62)) (totalSupply (literal (intOrNat 0) 82)) (underlyingBalance (literal (nat 0) 103)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 119) \"unit\" 120) (set (operations 135) (cons (transfer (tuple 135 (to_address (self) \"None\") (tuple 135 (literal (intOrNat 1) 135) (add_seconds (now) (literal (int 3600) 127) 127))) (balance) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 132) 130) \"Some\" \"None\" 130) 135) (operations 135) 135) 135) (set (operations 145) (cons (transfer (unit) (literal (mutez 0) 145) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 140) \"Some\" \"None\" 140) 145) (operations 145) 145) 145))) (deposit True ((set_type (params 187) \"nat\" 188) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 191) 191) (literal (string \"bad state\") 191) 191) (set (attr (data) \"state\" 191) (literal (intOrNat 3) 194) 194) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"Some\" (params 187) 195) 195) (set (attr (data) \"savedState_depositor\" 196) (variant \"Some\" (sender) 196) 196) (set (operations 205) (cons (transfer (tuple 205 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 199)) (literal (mutez 0) 205) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 200) \"Some\" \"None\" 200) 205) (operations 205) 205) 205))) (deposit_callback True ((set_type (params 209) \"nat\" 210) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 213) (literal (string \"bad sender\") 213) 213) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 3) 216) 216) (literal (string \"bad state\") 216) 216) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 195) \"Some\" \"None\" 219) 219) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 220) (literal (intOrNat 1000000000000000000) 220) 220) 220) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 221) 221) ((defineLocal \"newUnderlyingBalance\" (add (params 209) (getLocal \"tokensToDeposit\" 222) 222) 222) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 223) (literal (intOrNat 1000000000000000000) 223) 223) (getLocal \"newUnderlyingBalance\" 223) 223) 223) (set (getLocal \"newTokens\" 490) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 224) (attr (data) \"totalSupply\" 96) 224) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 224) (getLocal \"fractionOfPoolOwnership\" 224) 224) 224) \"Some\" \"None\" 224) 224) 224)) 221) (set (attr (data) \"underlyingBalance\" 227) (add (params 209) (getLocal \"tokensToDeposit\" 227) 227) 227) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 196) \"Some\" \"None\" 230) 230) (set (operations 241) (cons (transfer (record 231 (from_ (getLocal \"depositor\" 232)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 234))) (literal (mutez 0) 241) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 236) \"Some\" \"None\" 236) 241) (operations 241) 241) 241) (set (operations 253) (cons (transfer (record 244 (address (getLocal \"depositor\" 245)) (value (getLocal \"newTokens\" 246))) (literal (mutez 0) 253) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 248) \"Some\" \"None\" 248) 253) (operations 253) 253) 253) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 256) 256) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"None\" (unit) -1) 257) (set (attr (data) \"savedState_depositor\" 196) (variant \"None\" (unit) -1) 258))) (getAdministrator True ((bind \"__s13\" ((set_type (first (params 108) 490) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 490) (contract \"address\") 490) (set (operations 490) (cons (transfer (getLocal \"__s13\" 490) (literal (mutez 0) 490) (second (params 108) 490) 108) (operations 490) 490) 490))) (getAllowance True ((bind \"__s14\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 490) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 490) \"spender\" 69) 69) 69))) (set_type (second (params 68) 490) (contract \"nat\") 490) (set (operations 490) (cons (transfer (getLocal \"__s14\" 490) (literal (mutez 0) 490) (second (params 68) 490) 68) (operations 490) 490) 490))) (getBalance True ((bind \"__s15\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 490) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 490) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 490) 65) \"balance\" 65) 65))) (set_type (second (params 60) 490) (contract \"nat\") 490) (set (operations 490) (cons (transfer (getLocal \"__s15\" 490) (literal (mutez 0) 490) (second (params 60) 490) 60) (operations 490) 490) 490))) (getTotalSupply True ((bind \"__s16\" ((set_type (first (params 72) 490) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 490) (contract \"nat\") 490) (set (operations 490) (cons (transfer (getLocal \"__s16\" 490) (literal (mutez 0) 490) (second (params 72) 490) 72) (operations 490) 490) 490))) (liquidate True ((set_type (params 149) \"address\" 150) (set (operations 158) (cons (transfer (params 149) (literal (mutez 0) 158) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 155) 153) \"Some\" \"None\" 153) 158) (operations 158) 158) 158) (set (operations 171) (cons (transfer (record 161 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (attr (data) \"rewardAmount\" 164))) (literal (mutez 0) 171) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 166) \"Some\" \"None\" 166) 171) (operations 171) 171) 171) (set (operations 179) (cons (transfer (unit) (literal (mutez 0) 179) (openVariant (contract \"liquidate\" \"unit\" (params 149) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 262) \"nat\" 263) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 266) 266) (literal (string \"bad state\") 266) 266) (set (attr (data) \"state\" 191) (literal (intOrNat 2) 269) 269) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"Some\" (params 262) 270) 270) (set (attr (data) \"savedState_redeemer\" 271) (variant \"Some\" (sender) 271) 271) (set (operations 280) (cons (transfer (tuple 280 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 274)) (literal (mutez 0) 280) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 275) \"Some\" \"None\" 275) 280) (operations 280) 280) 280))) (redeem_callback True ((set_type (params 284) \"nat\" 285) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 288) (literal (string \"bad sender\") 288) 288) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 2) 291) 291) (literal (string \"bad state\") 291) 291) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 270) \"Some\" \"None\" 294) 294) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 295) (literal (intOrNat 1000000000000000000) 295) 295) (attr (data) \"totalSupply\" 96) 295) 295) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 296) (params 284) 296) (literal (intOrNat 1000000000000000000) 296) 296) 296) (set (attr (data) \"underlyingBalance\" 227) (openVariant (isNat (sub (params 284) (getLocal \"tokensToReceive\" 299) 299) 299) \"Some\" \"None\" 299) 299) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 271) \"Some\" \"None\" 302) 302) (set (operations 312) (cons (transfer (record 303 (address (getLocal \"redeemer\" 304)) (value (getLocal \"tokensToRedeem\" 305))) (literal (mutez 0) 312) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 307) \"Some\" \"None\" 307) 312) (operations 312) 312) 312) (set (operations 325) (cons (transfer (record 315 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 317)) (value (getLocal \"tokensToReceive\" 318))) (literal (mutez 0) 325) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 320) \"Some\" \"None\" 320) 325) (operations 325) 325) 325) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 328) 328) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"None\" (unit) -1) 329) (set (attr (data) \"savedState_redeemer\" 271) (variant \"None\" (unit) -1) 330))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 338) \"unit\" 339) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 342) 342) (literal (string \"bad state\") 342) 342) (set (attr (data) \"state\" 191) (literal (intOrNat 1) 345) 345) (set (operations 354) (cons (transfer (tuple 354 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 348)) (literal (mutez 0) 354) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 349) \"Some\" \"None\" 349) 354) (operations 354) 354) 354))) (updateBalance_callback True ((set_type (params 358) \"nat\" 359) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 362) (literal (string \"bad sender\") 362) 362) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 1) 365) 365) (literal (string \"bad state\") 365) 365) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 368) 368) (set (attr (data) \"underlyingBalance\" 227) (params 358) 371))) (updateContractMetadata True ((set_type (params 411) (tuple \"string\" \"bytes\") 412) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 414) (literal (string \"not governor\") 414) 414) (set (getItem (attr (data) \"metadata\" 418) (first (params 411) 416) 418) (second (params 411) 417) 418))) (updateDexterAddress True ((set_type (params 395) \"address\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"dexterAddress\" 132) (params 395) 399))) (updateGovernorAddress True ((set_type (params 379) \"address\" 380) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 382) (literal (string \"not governor\") 382) 382) (set (attr (data) \"governorAddress\" 414) (params 379) 383))) (updateOvenRegistryAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"ovenRegistryAddress\" 155) (params 403) 407))) (updateRewardAmount True ((set_type (params 387) \"nat\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"rewardAmount\" 164) (params 387) 391))) (updateTokenMetadata True ((set_type (params 422) (tuple \"nat\" (map \"string\" \"bytes\")) 423) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 425) (literal (string \"not governor\") 425) 425) (set (getItem (attr (data) \"token_metadata\" 426) (literal (intOrNat 0) 426) 426) (params 422) 426))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 490, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 82)", "dynamic": false, "message": "updateTokenMetadata", "params": "(tuple 504 (literal (nat 0) 502) (type_annotation (map 495 ((literal (string \"new\") 504) (literal (bytes \"0x123456\") 494))) (map \"string\" \"bytes\") 495))", "line_no": 504, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 504)", "show": true, "valid": "(literal (bool True) 504)", "voting_powers": "(map 504 )", "export": true}, {"action": "verify", "condition": "(eq (first (getItem (attr (contractData (static_id 0 82) 504) \"token_metadata\" 509) (literal (intOrNat 0) 509) 509) 510) (literal (nat 0) 513) 513)", "line_no": 513}, {"action": "verify", "condition": "(eq (getItem (second (getItem (attr (contractData (static_id 0 82) 504) \"token_metadata\" 509) (literal (intOrNat 0) 509) 509) 511) (literal (string \"new\") 514) 514) (literal (bytes \"0x123456\") 494) 514)", "line_no": 514}], "decompile": false, "kind": "test"}, {"shortname": "updateTokenMetadata_-_fails_when_not_called_by_governor", "longname": "updateTokenMetadata - fails when not called by governor", "scenario": [{"action": "newContract", "id": "(static_id 0 82)", "export": "(storage (record 82 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 86 ) (bigmap (unknown 33) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 86)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 73 ((literal (string \"\") 524) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 75)) ((literal (string \"data\") 524) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 72))) (bigmap \"string\" \"bytes\") 73)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 82)) (rewardAmount (literal (intOrNat 1000000000000000000) 82)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 82)) (tokenAddress (literal (address \"tz1aJS7Pk9uWR3wWyFf1i3RwhYxN84G7stom\") 17)) (token_metadata (type_annotation (big_map 62 ((literal (nat 0) 49) (tuple 524 (literal (nat 0) 49) (type_annotation (map 51 ((literal (string \"name\") 524) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 53)) ((literal (string \"decimals\") 524) (literal (bytes \"0x3138\") 54)) ((literal (string \"symbol\") 524) (literal (bytes \"0x6465787465724c6b555344\") 55)) ((literal (string \"icon\") 524) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 56))) (map \"string\" \"bytes\") 51)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 62)) (totalSupply (literal (intOrNat 0) 82)) (underlyingBalance (literal (nat 0) 103)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 119) \"unit\" 120) (set (operations 135) (cons (transfer (tuple 135 (to_address (self) \"None\") (tuple 135 (literal (intOrNat 1) 135) (add_seconds (now) (literal (int 3600) 127) 127))) (balance) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 132) 130) \"Some\" \"None\" 130) 135) (operations 135) 135) 135) (set (operations 145) (cons (transfer (unit) (literal (mutez 0) 145) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 140) \"Some\" \"None\" 140) 145) (operations 145) 145) 145))) (deposit True ((set_type (params 187) \"nat\" 188) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 191) 191) (literal (string \"bad state\") 191) 191) (set (attr (data) \"state\" 191) (literal (intOrNat 3) 194) 194) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"Some\" (params 187) 195) 195) (set (attr (data) \"savedState_depositor\" 196) (variant \"Some\" (sender) 196) 196) (set (operations 205) (cons (transfer (tuple 205 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 199)) (literal (mutez 0) 205) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 200) \"Some\" \"None\" 200) 205) (operations 205) 205) 205))) (deposit_callback True ((set_type (params 209) \"nat\" 210) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 213) (literal (string \"bad sender\") 213) 213) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 3) 216) 216) (literal (string \"bad state\") 216) 216) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 195) \"Some\" \"None\" 219) 219) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 220) (literal (intOrNat 1000000000000000000) 220) 220) 220) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 221) 221) ((defineLocal \"newUnderlyingBalance\" (add (params 209) (getLocal \"tokensToDeposit\" 222) 222) 222) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 223) (literal (intOrNat 1000000000000000000) 223) 223) (getLocal \"newUnderlyingBalance\" 223) 223) 223) (set (getLocal \"newTokens\" 524) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 224) (attr (data) \"totalSupply\" 96) 224) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 224) (getLocal \"fractionOfPoolOwnership\" 224) 224) 224) \"Some\" \"None\" 224) 224) 224)) 221) (set (attr (data) \"underlyingBalance\" 227) (add (params 209) (getLocal \"tokensToDeposit\" 227) 227) 227) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 196) \"Some\" \"None\" 230) 230) (set (operations 241) (cons (transfer (record 231 (from_ (getLocal \"depositor\" 232)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 234))) (literal (mutez 0) 241) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 236) \"Some\" \"None\" 236) 241) (operations 241) 241) 241) (set (operations 253) (cons (transfer (record 244 (address (getLocal \"depositor\" 245)) (value (getLocal \"newTokens\" 246))) (literal (mutez 0) 253) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 248) \"Some\" \"None\" 248) 253) (operations 253) 253) 253) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 256) 256) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"None\" (unit) -1) 257) (set (attr (data) \"savedState_depositor\" 196) (variant \"None\" (unit) -1) 258))) (getAdministrator True ((bind \"__s17\" ((set_type (first (params 108) 524) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 524) (contract \"address\") 524) (set (operations 524) (cons (transfer (getLocal \"__s17\" 524) (literal (mutez 0) 524) (second (params 108) 524) 108) (operations 524) 524) 524))) (getAllowance True ((bind \"__s18\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 524) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 524) \"spender\" 69) 69) 69))) (set_type (second (params 68) 524) (contract \"nat\") 524) (set (operations 524) (cons (transfer (getLocal \"__s18\" 524) (literal (mutez 0) 524) (second (params 68) 524) 68) (operations 524) 524) 524))) (getBalance True ((bind \"__s19\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 524) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 524) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 524) 65) \"balance\" 65) 65))) (set_type (second (params 60) 524) (contract \"nat\") 524) (set (operations 524) (cons (transfer (getLocal \"__s19\" 524) (literal (mutez 0) 524) (second (params 60) 524) 60) (operations 524) 524) 524))) (getTotalSupply True ((bind \"__s20\" ((set_type (first (params 72) 524) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 524) (contract \"nat\") 524) (set (operations 524) (cons (transfer (getLocal \"__s20\" 524) (literal (mutez 0) 524) (second (params 72) 524) 72) (operations 524) 524) 524))) (liquidate True ((set_type (params 149) \"address\" 150) (set (operations 158) (cons (transfer (params 149) (literal (mutez 0) 158) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 155) 153) \"Some\" \"None\" 153) 158) (operations 158) 158) 158) (set (operations 171) (cons (transfer (record 161 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (attr (data) \"rewardAmount\" 164))) (literal (mutez 0) 171) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 166) \"Some\" \"None\" 166) 171) (operations 171) 171) 171) (set (operations 179) (cons (transfer (unit) (literal (mutez 0) 179) (openVariant (contract \"liquidate\" \"unit\" (params 149) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 262) \"nat\" 263) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 266) 266) (literal (string \"bad state\") 266) 266) (set (attr (data) \"state\" 191) (literal (intOrNat 2) 269) 269) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"Some\" (params 262) 270) 270) (set (attr (data) \"savedState_redeemer\" 271) (variant \"Some\" (sender) 271) 271) (set (operations 280) (cons (transfer (tuple 280 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 274)) (literal (mutez 0) 280) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 275) \"Some\" \"None\" 275) 280) (operations 280) 280) 280))) (redeem_callback True ((set_type (params 284) \"nat\" 285) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 288) (literal (string \"bad sender\") 288) 288) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 2) 291) 291) (literal (string \"bad state\") 291) 291) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 270) \"Some\" \"None\" 294) 294) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 295) (literal (intOrNat 1000000000000000000) 295) 295) (attr (data) \"totalSupply\" 96) 295) 295) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 296) (params 284) 296) (literal (intOrNat 1000000000000000000) 296) 296) 296) (set (attr (data) \"underlyingBalance\" 227) (openVariant (isNat (sub (params 284) (getLocal \"tokensToReceive\" 299) 299) 299) \"Some\" \"None\" 299) 299) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 271) \"Some\" \"None\" 302) 302) (set (operations 312) (cons (transfer (record 303 (address (getLocal \"redeemer\" 304)) (value (getLocal \"tokensToRedeem\" 305))) (literal (mutez 0) 312) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 307) \"Some\" \"None\" 307) 312) (operations 312) 312) 312) (set (operations 325) (cons (transfer (record 315 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 317)) (value (getLocal \"tokensToReceive\" 318))) (literal (mutez 0) 325) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 320) \"Some\" \"None\" 320) 325) (operations 325) 325) 325) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 328) 328) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"None\" (unit) -1) 329) (set (attr (data) \"savedState_redeemer\" 271) (variant \"None\" (unit) -1) 330))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 338) \"unit\" 339) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 342) 342) (literal (string \"bad state\") 342) 342) (set (attr (data) \"state\" 191) (literal (intOrNat 1) 345) 345) (set (operations 354) (cons (transfer (tuple 354 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 348)) (literal (mutez 0) 354) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 349) \"Some\" \"None\" 349) 354) (operations 354) 354) 354))) (updateBalance_callback True ((set_type (params 358) \"nat\" 359) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 362) (literal (string \"bad sender\") 362) 362) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 1) 365) 365) (literal (string \"bad state\") 365) 365) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 368) 368) (set (attr (data) \"underlyingBalance\" 227) (params 358) 371))) (updateContractMetadata True ((set_type (params 411) (tuple \"string\" \"bytes\") 412) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 414) (literal (string \"not governor\") 414) 414) (set (getItem (attr (data) \"metadata\" 418) (first (params 411) 416) 418) (second (params 411) 417) 418))) (updateDexterAddress True ((set_type (params 395) \"address\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"dexterAddress\" 132) (params 395) 399))) (updateGovernorAddress True ((set_type (params 379) \"address\" 380) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 382) (literal (string \"not governor\") 382) 382) (set (attr (data) \"governorAddress\" 414) (params 379) 383))) (updateOvenRegistryAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"ovenRegistryAddress\" 155) (params 403) 407))) (updateRewardAmount True ((set_type (params 387) \"nat\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"rewardAmount\" 164) (params 387) 391))) (updateTokenMetadata True ((set_type (params 422) (tuple \"nat\" (map \"string\" \"bytes\")) 423) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 425) (literal (string \"not governor\") 425) 425) (set (getItem (attr (data) \"token_metadata\" 426) (literal (intOrNat 0) 426) 426) (params 422) 426))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 524, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 82)", "dynamic": false, "message": "updateTokenMetadata", "params": "(tuple 535 (literal (nat 0) 534) (type_annotation (map 527 ((literal (string \"new\") 535) (literal (bytes \"0x123456\") 529))) (map \"string\" \"bytes\") 527))", "line_no": 535, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1bTpviNnyx2PXsNmGpCQTMQsGoYordkUoA\") 26)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 535)", "show": true, "valid": "(literal (bool False) 535)", "voting_powers": "(map 535 )", "export": true}], "decompile": false, "kind": "test"}, {"shortname": "updateRewardAmount_-_fails_if_sender_is_not_governor", "longname": "updateRewardAmount - fails if sender is not governor", "scenario": [{"action": "newContract", "id": "(static_id 0 82)", "export": "(storage (record 82 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 86 ) (bigmap (unknown 43) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 86)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 73 ((literal (string \"\") 550) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 75)) ((literal (string \"data\") 550) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 72))) (bigmap \"string\" \"bytes\") 73)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 82)) (rewardAmount (literal (intOrNat 1000000000000000000) 82)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 82)) (tokenAddress (literal (address \"tz1aJS7Pk9uWR3wWyFf1i3RwhYxN84G7stom\") 17)) (token_metadata (type_annotation (big_map 62 ((literal (nat 0) 49) (tuple 550 (literal (nat 0) 49) (type_annotation (map 51 ((literal (string \"name\") 550) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 53)) ((literal (string \"decimals\") 550) (literal (bytes \"0x3138\") 54)) ((literal (string \"symbol\") 550) (literal (bytes \"0x6465787465724c6b555344\") 55)) ((literal (string \"icon\") 550) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 56))) (map \"string\" \"bytes\") 51)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 62)) (totalSupply (literal (intOrNat 0) 82)) (underlyingBalance (literal (nat 0) 103)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 119) \"unit\" 120) (set (operations 135) (cons (transfer (tuple 135 (to_address (self) \"None\") (tuple 135 (literal (intOrNat 1) 135) (add_seconds (now) (literal (int 3600) 127) 127))) (balance) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 132) 130) \"Some\" \"None\" 130) 135) (operations 135) 135) 135) (set (operations 145) (cons (transfer (unit) (literal (mutez 0) 145) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 140) \"Some\" \"None\" 140) 145) (operations 145) 145) 145))) (deposit True ((set_type (params 187) \"nat\" 188) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 191) 191) (literal (string \"bad state\") 191) 191) (set (attr (data) \"state\" 191) (literal (intOrNat 3) 194) 194) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"Some\" (params 187) 195) 195) (set (attr (data) \"savedState_depositor\" 196) (variant \"Some\" (sender) 196) 196) (set (operations 205) (cons (transfer (tuple 205 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 199)) (literal (mutez 0) 205) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 200) \"Some\" \"None\" 200) 205) (operations 205) 205) 205))) (deposit_callback True ((set_type (params 209) \"nat\" 210) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 213) (literal (string \"bad sender\") 213) 213) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 3) 216) 216) (literal (string \"bad state\") 216) 216) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 195) \"Some\" \"None\" 219) 219) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 220) (literal (intOrNat 1000000000000000000) 220) 220) 220) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 221) 221) ((defineLocal \"newUnderlyingBalance\" (add (params 209) (getLocal \"tokensToDeposit\" 222) 222) 222) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 223) (literal (intOrNat 1000000000000000000) 223) 223) (getLocal \"newUnderlyingBalance\" 223) 223) 223) (set (getLocal \"newTokens\" 550) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 224) (attr (data) \"totalSupply\" 96) 224) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 224) (getLocal \"fractionOfPoolOwnership\" 224) 224) 224) \"Some\" \"None\" 224) 224) 224)) 221) (set (attr (data) \"underlyingBalance\" 227) (add (params 209) (getLocal \"tokensToDeposit\" 227) 227) 227) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 196) \"Some\" \"None\" 230) 230) (set (operations 241) (cons (transfer (record 231 (from_ (getLocal \"depositor\" 232)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 234))) (literal (mutez 0) 241) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 236) \"Some\" \"None\" 236) 241) (operations 241) 241) 241) (set (operations 253) (cons (transfer (record 244 (address (getLocal \"depositor\" 245)) (value (getLocal \"newTokens\" 246))) (literal (mutez 0) 253) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 248) \"Some\" \"None\" 248) 253) (operations 253) 253) 253) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 256) 256) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"None\" (unit) -1) 257) (set (attr (data) \"savedState_depositor\" 196) (variant \"None\" (unit) -1) 258))) (getAdministrator True ((bind \"__s21\" ((set_type (first (params 108) 550) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 550) (contract \"address\") 550) (set (operations 550) (cons (transfer (getLocal \"__s21\" 550) (literal (mutez 0) 550) (second (params 108) 550) 108) (operations 550) 550) 550))) (getAllowance True ((bind \"__s22\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 550) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 550) \"spender\" 69) 69) 69))) (set_type (second (params 68) 550) (contract \"nat\") 550) (set (operations 550) (cons (transfer (getLocal \"__s22\" 550) (literal (mutez 0) 550) (second (params 68) 550) 68) (operations 550) 550) 550))) (getBalance True ((bind \"__s23\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 550) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 550) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 550) 65) \"balance\" 65) 65))) (set_type (second (params 60) 550) (contract \"nat\") 550) (set (operations 550) (cons (transfer (getLocal \"__s23\" 550) (literal (mutez 0) 550) (second (params 60) 550) 60) (operations 550) 550) 550))) (getTotalSupply True ((bind \"__s24\" ((set_type (first (params 72) 550) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 550) (contract \"nat\") 550) (set (operations 550) (cons (transfer (getLocal \"__s24\" 550) (literal (mutez 0) 550) (second (params 72) 550) 72) (operations 550) 550) 550))) (liquidate True ((set_type (params 149) \"address\" 150) (set (operations 158) (cons (transfer (params 149) (literal (mutez 0) 158) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 155) 153) \"Some\" \"None\" 153) 158) (operations 158) 158) 158) (set (operations 171) (cons (transfer (record 161 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (attr (data) \"rewardAmount\" 164))) (literal (mutez 0) 171) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 166) \"Some\" \"None\" 166) 171) (operations 171) 171) 171) (set (operations 179) (cons (transfer (unit) (literal (mutez 0) 179) (openVariant (contract \"liquidate\" \"unit\" (params 149) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 262) \"nat\" 263) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 266) 266) (literal (string \"bad state\") 266) 266) (set (attr (data) \"state\" 191) (literal (intOrNat 2) 269) 269) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"Some\" (params 262) 270) 270) (set (attr (data) \"savedState_redeemer\" 271) (variant \"Some\" (sender) 271) 271) (set (operations 280) (cons (transfer (tuple 280 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 274)) (literal (mutez 0) 280) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 275) \"Some\" \"None\" 275) 280) (operations 280) 280) 280))) (redeem_callback True ((set_type (params 284) \"nat\" 285) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 288) (literal (string \"bad sender\") 288) 288) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 2) 291) 291) (literal (string \"bad state\") 291) 291) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 270) \"Some\" \"None\" 294) 294) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 295) (literal (intOrNat 1000000000000000000) 295) 295) (attr (data) \"totalSupply\" 96) 295) 295) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 296) (params 284) 296) (literal (intOrNat 1000000000000000000) 296) 296) 296) (set (attr (data) \"underlyingBalance\" 227) (openVariant (isNat (sub (params 284) (getLocal \"tokensToReceive\" 299) 299) 299) \"Some\" \"None\" 299) 299) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 271) \"Some\" \"None\" 302) 302) (set (operations 312) (cons (transfer (record 303 (address (getLocal \"redeemer\" 304)) (value (getLocal \"tokensToRedeem\" 305))) (literal (mutez 0) 312) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 307) \"Some\" \"None\" 307) 312) (operations 312) 312) 312) (set (operations 325) (cons (transfer (record 315 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 317)) (value (getLocal \"tokensToReceive\" 318))) (literal (mutez 0) 325) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 320) \"Some\" \"None\" 320) 325) (operations 325) 325) 325) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 328) 328) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"None\" (unit) -1) 329) (set (attr (data) \"savedState_redeemer\" 271) (variant \"None\" (unit) -1) 330))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 338) \"unit\" 339) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 342) 342) (literal (string \"bad state\") 342) 342) (set (attr (data) \"state\" 191) (literal (intOrNat 1) 345) 345) (set (operations 354) (cons (transfer (tuple 354 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 348)) (literal (mutez 0) 354) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 349) \"Some\" \"None\" 349) 354) (operations 354) 354) 354))) (updateBalance_callback True ((set_type (params 358) \"nat\" 359) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 362) (literal (string \"bad sender\") 362) 362) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 1) 365) 365) (literal (string \"bad state\") 365) 365) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 368) 368) (set (attr (data) \"underlyingBalance\" 227) (params 358) 371))) (updateContractMetadata True ((set_type (params 411) (tuple \"string\" \"bytes\") 412) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 414) (literal (string \"not governor\") 414) 414) (set (getItem (attr (data) \"metadata\" 418) (first (params 411) 416) 418) (second (params 411) 417) 418))) (updateDexterAddress True ((set_type (params 395) \"address\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"dexterAddress\" 132) (params 395) 399))) (updateGovernorAddress True ((set_type (params 379) \"address\" 380) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 382) (literal (string \"not governor\") 382) 382) (set (attr (data) \"governorAddress\" 414) (params 379) 383))) (updateOvenRegistryAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"ovenRegistryAddress\" 155) (params 403) 407))) (updateRewardAmount True ((set_type (params 387) \"nat\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"rewardAmount\" 164) (params 387) 391))) (updateTokenMetadata True ((set_type (params 422) (tuple \"nat\" (map \"string\" \"bytes\")) 423) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 425) (literal (string \"not governor\") 425) 425) (set (getItem (attr (data) \"token_metadata\" 426) (literal (intOrNat 0) 426) 426) (params 422) 426))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 550, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 82)", "dynamic": false, "message": "updateRewardAmount", "params": "(literal (nat 123) 555)", "line_no": 556, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1bTpviNnyx2PXsNmGpCQTMQsGoYordkUoA\") 26)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 556)", "show": true, "valid": "(literal (bool False) 556)", "voting_powers": "(map 556 )", "export": true}], "decompile": false, "kind": "test"}, {"shortname": "updateRewardAmount_-_can_update_reward_amount", "longname": "updateRewardAmount - can update reward amount", "scenario": [{"action": "newContract", "id": "(static_id 0 82)", "export": "(storage (record 82 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 86 ) (bigmap (unknown 53) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 86)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 73 ((literal (string \"\") 567) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 75)) ((literal (string \"data\") 567) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 72))) (bigmap \"string\" \"bytes\") 73)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 82)) (rewardAmount (literal (intOrNat 1000000000000000000) 82)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 82)) (tokenAddress (literal (address \"tz1aJS7Pk9uWR3wWyFf1i3RwhYxN84G7stom\") 17)) (token_metadata (type_annotation (big_map 62 ((literal (nat 0) 49) (tuple 567 (literal (nat 0) 49) (type_annotation (map 51 ((literal (string \"name\") 567) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 53)) ((literal (string \"decimals\") 567) (literal (bytes \"0x3138\") 54)) ((literal (string \"symbol\") 567) (literal (bytes \"0x6465787465724c6b555344\") 55)) ((literal (string \"icon\") 567) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 56))) (map \"string\" \"bytes\") 51)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 62)) (totalSupply (literal (intOrNat 0) 82)) (underlyingBalance (literal (nat 0) 103)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 119) \"unit\" 120) (set (operations 135) (cons (transfer (tuple 135 (to_address (self) \"None\") (tuple 135 (literal (intOrNat 1) 135) (add_seconds (now) (literal (int 3600) 127) 127))) (balance) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 132) 130) \"Some\" \"None\" 130) 135) (operations 135) 135) 135) (set (operations 145) (cons (transfer (unit) (literal (mutez 0) 145) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 140) \"Some\" \"None\" 140) 145) (operations 145) 145) 145))) (deposit True ((set_type (params 187) \"nat\" 188) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 191) 191) (literal (string \"bad state\") 191) 191) (set (attr (data) \"state\" 191) (literal (intOrNat 3) 194) 194) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"Some\" (params 187) 195) 195) (set (attr (data) \"savedState_depositor\" 196) (variant \"Some\" (sender) 196) 196) (set (operations 205) (cons (transfer (tuple 205 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 199)) (literal (mutez 0) 205) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 200) \"Some\" \"None\" 200) 205) (operations 205) 205) 205))) (deposit_callback True ((set_type (params 209) \"nat\" 210) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 213) (literal (string \"bad sender\") 213) 213) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 3) 216) 216) (literal (string \"bad state\") 216) 216) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 195) \"Some\" \"None\" 219) 219) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 220) (literal (intOrNat 1000000000000000000) 220) 220) 220) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 221) 221) ((defineLocal \"newUnderlyingBalance\" (add (params 209) (getLocal \"tokensToDeposit\" 222) 222) 222) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 223) (literal (intOrNat 1000000000000000000) 223) 223) (getLocal \"newUnderlyingBalance\" 223) 223) 223) (set (getLocal \"newTokens\" 567) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 224) (attr (data) \"totalSupply\" 96) 224) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 224) (getLocal \"fractionOfPoolOwnership\" 224) 224) 224) \"Some\" \"None\" 224) 224) 224)) 221) (set (attr (data) \"underlyingBalance\" 227) (add (params 209) (getLocal \"tokensToDeposit\" 227) 227) 227) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 196) \"Some\" \"None\" 230) 230) (set (operations 241) (cons (transfer (record 231 (from_ (getLocal \"depositor\" 232)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 234))) (literal (mutez 0) 241) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 236) \"Some\" \"None\" 236) 241) (operations 241) 241) 241) (set (operations 253) (cons (transfer (record 244 (address (getLocal \"depositor\" 245)) (value (getLocal \"newTokens\" 246))) (literal (mutez 0) 253) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 248) \"Some\" \"None\" 248) 253) (operations 253) 253) 253) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 256) 256) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"None\" (unit) -1) 257) (set (attr (data) \"savedState_depositor\" 196) (variant \"None\" (unit) -1) 258))) (getAdministrator True ((bind \"__s25\" ((set_type (first (params 108) 567) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 567) (contract \"address\") 567) (set (operations 567) (cons (transfer (getLocal \"__s25\" 567) (literal (mutez 0) 567) (second (params 108) 567) 108) (operations 567) 567) 567))) (getAllowance True ((bind \"__s26\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 567) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 567) \"spender\" 69) 69) 69))) (set_type (second (params 68) 567) (contract \"nat\") 567) (set (operations 567) (cons (transfer (getLocal \"__s26\" 567) (literal (mutez 0) 567) (second (params 68) 567) 68) (operations 567) 567) 567))) (getBalance True ((bind \"__s27\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 567) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 567) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 567) 65) \"balance\" 65) 65))) (set_type (second (params 60) 567) (contract \"nat\") 567) (set (operations 567) (cons (transfer (getLocal \"__s27\" 567) (literal (mutez 0) 567) (second (params 60) 567) 60) (operations 567) 567) 567))) (getTotalSupply True ((bind \"__s28\" ((set_type (first (params 72) 567) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 567) (contract \"nat\") 567) (set (operations 567) (cons (transfer (getLocal \"__s28\" 567) (literal (mutez 0) 567) (second (params 72) 567) 72) (operations 567) 567) 567))) (liquidate True ((set_type (params 149) \"address\" 150) (set (operations 158) (cons (transfer (params 149) (literal (mutez 0) 158) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 155) 153) \"Some\" \"None\" 153) 158) (operations 158) 158) 158) (set (operations 171) (cons (transfer (record 161 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (attr (data) \"rewardAmount\" 164))) (literal (mutez 0) 171) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 166) \"Some\" \"None\" 166) 171) (operations 171) 171) 171) (set (operations 179) (cons (transfer (unit) (literal (mutez 0) 179) (openVariant (contract \"liquidate\" \"unit\" (params 149) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 262) \"nat\" 263) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 266) 266) (literal (string \"bad state\") 266) 266) (set (attr (data) \"state\" 191) (literal (intOrNat 2) 269) 269) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"Some\" (params 262) 270) 270) (set (attr (data) \"savedState_redeemer\" 271) (variant \"Some\" (sender) 271) 271) (set (operations 280) (cons (transfer (tuple 280 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 274)) (literal (mutez 0) 280) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 275) \"Some\" \"None\" 275) 280) (operations 280) 280) 280))) (redeem_callback True ((set_type (params 284) \"nat\" 285) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 288) (literal (string \"bad sender\") 288) 288) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 2) 291) 291) (literal (string \"bad state\") 291) 291) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 270) \"Some\" \"None\" 294) 294) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 295) (literal (intOrNat 1000000000000000000) 295) 295) (attr (data) \"totalSupply\" 96) 295) 295) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 296) (params 284) 296) (literal (intOrNat 1000000000000000000) 296) 296) 296) (set (attr (data) \"underlyingBalance\" 227) (openVariant (isNat (sub (params 284) (getLocal \"tokensToReceive\" 299) 299) 299) \"Some\" \"None\" 299) 299) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 271) \"Some\" \"None\" 302) 302) (set (operations 312) (cons (transfer (record 303 (address (getLocal \"redeemer\" 304)) (value (getLocal \"tokensToRedeem\" 305))) (literal (mutez 0) 312) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 307) \"Some\" \"None\" 307) 312) (operations 312) 312) 312) (set (operations 325) (cons (transfer (record 315 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 317)) (value (getLocal \"tokensToReceive\" 318))) (literal (mutez 0) 325) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 320) \"Some\" \"None\" 320) 325) (operations 325) 325) 325) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 328) 328) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"None\" (unit) -1) 329) (set (attr (data) \"savedState_redeemer\" 271) (variant \"None\" (unit) -1) 330))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 338) \"unit\" 339) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 342) 342) (literal (string \"bad state\") 342) 342) (set (attr (data) \"state\" 191) (literal (intOrNat 1) 345) 345) (set (operations 354) (cons (transfer (tuple 354 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 348)) (literal (mutez 0) 354) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 349) \"Some\" \"None\" 349) 354) (operations 354) 354) 354))) (updateBalance_callback True ((set_type (params 358) \"nat\" 359) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 362) (literal (string \"bad sender\") 362) 362) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 1) 365) 365) (literal (string \"bad state\") 365) 365) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 368) 368) (set (attr (data) \"underlyingBalance\" 227) (params 358) 371))) (updateContractMetadata True ((set_type (params 411) (tuple \"string\" \"bytes\") 412) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 414) (literal (string \"not governor\") 414) 414) (set (getItem (attr (data) \"metadata\" 418) (first (params 411) 416) 418) (second (params 411) 417) 418))) (updateDexterAddress True ((set_type (params 395) \"address\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"dexterAddress\" 132) (params 395) 399))) (updateGovernorAddress True ((set_type (params 379) \"address\" 380) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 382) (literal (string \"not governor\") 382) 382) (set (attr (data) \"governorAddress\" 414) (params 379) 383))) (updateOvenRegistryAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"ovenRegistryAddress\" 155) (params 403) 407))) (updateRewardAmount True ((set_type (params 387) \"nat\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"rewardAmount\" 164) (params 387) 391))) (updateTokenMetadata True ((set_type (params 422) (tuple \"nat\" (map \"string\" \"bytes\")) 423) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 425) (literal (string \"not governor\") 425) 425) (set (getItem (attr (data) \"token_metadata\" 426) (literal (intOrNat 0) 426) 426) (params 422) 426))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 567, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 82)", "dynamic": false, "message": "updateRewardAmount", "params": "(literal (nat 123) 570)", "line_no": 571, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 571)", "show": true, "valid": "(literal (bool True) 571)", "voting_powers": "(map 571 )", "export": true}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 0 82) 571) \"rewardAmount\" 576) (literal (nat 123) 570) 576)", "line_no": 576}], "decompile": false, "kind": "test"}, {"shortname": "updateDexterAddress_-_fails_if_sender_is_not_governor", "longname": "updateDexterAddress - fails if sender is not governor", "scenario": [{"action": "newContract", "id": "(static_id 0 82)", "export": "(storage (record 82 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 86 ) (bigmap (unknown 63) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 86)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 73 ((literal (string \"\") 588) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 75)) ((literal (string \"data\") 588) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 72))) (bigmap \"string\" \"bytes\") 73)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 82)) (rewardAmount (literal (intOrNat 1000000000000000000) 82)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 82)) (tokenAddress (literal (address \"tz1aJS7Pk9uWR3wWyFf1i3RwhYxN84G7stom\") 17)) (token_metadata (type_annotation (big_map 62 ((literal (nat 0) 49) (tuple 588 (literal (nat 0) 49) (type_annotation (map 51 ((literal (string \"name\") 588) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 53)) ((literal (string \"decimals\") 588) (literal (bytes \"0x3138\") 54)) ((literal (string \"symbol\") 588) (literal (bytes \"0x6465787465724c6b555344\") 55)) ((literal (string \"icon\") 588) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 56))) (map \"string\" \"bytes\") 51)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 62)) (totalSupply (literal (intOrNat 0) 82)) (underlyingBalance (literal (nat 0) 103)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 119) \"unit\" 120) (set (operations 135) (cons (transfer (tuple 135 (to_address (self) \"None\") (tuple 135 (literal (intOrNat 1) 135) (add_seconds (now) (literal (int 3600) 127) 127))) (balance) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 132) 130) \"Some\" \"None\" 130) 135) (operations 135) 135) 135) (set (operations 145) (cons (transfer (unit) (literal (mutez 0) 145) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 140) \"Some\" \"None\" 140) 145) (operations 145) 145) 145))) (deposit True ((set_type (params 187) \"nat\" 188) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 191) 191) (literal (string \"bad state\") 191) 191) (set (attr (data) \"state\" 191) (literal (intOrNat 3) 194) 194) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"Some\" (params 187) 195) 195) (set (attr (data) \"savedState_depositor\" 196) (variant \"Some\" (sender) 196) 196) (set (operations 205) (cons (transfer (tuple 205 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 199)) (literal (mutez 0) 205) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 200) \"Some\" \"None\" 200) 205) (operations 205) 205) 205))) (deposit_callback True ((set_type (params 209) \"nat\" 210) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 213) (literal (string \"bad sender\") 213) 213) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 3) 216) 216) (literal (string \"bad state\") 216) 216) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 195) \"Some\" \"None\" 219) 219) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 220) (literal (intOrNat 1000000000000000000) 220) 220) 220) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 221) 221) ((defineLocal \"newUnderlyingBalance\" (add (params 209) (getLocal \"tokensToDeposit\" 222) 222) 222) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 223) (literal (intOrNat 1000000000000000000) 223) 223) (getLocal \"newUnderlyingBalance\" 223) 223) 223) (set (getLocal \"newTokens\" 588) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 224) (attr (data) \"totalSupply\" 96) 224) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 224) (getLocal \"fractionOfPoolOwnership\" 224) 224) 224) \"Some\" \"None\" 224) 224) 224)) 221) (set (attr (data) \"underlyingBalance\" 227) (add (params 209) (getLocal \"tokensToDeposit\" 227) 227) 227) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 196) \"Some\" \"None\" 230) 230) (set (operations 241) (cons (transfer (record 231 (from_ (getLocal \"depositor\" 232)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 234))) (literal (mutez 0) 241) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 236) \"Some\" \"None\" 236) 241) (operations 241) 241) 241) (set (operations 253) (cons (transfer (record 244 (address (getLocal \"depositor\" 245)) (value (getLocal \"newTokens\" 246))) (literal (mutez 0) 253) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 248) \"Some\" \"None\" 248) 253) (operations 253) 253) 253) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 256) 256) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"None\" (unit) -1) 257) (set (attr (data) \"savedState_depositor\" 196) (variant \"None\" (unit) -1) 258))) (getAdministrator True ((bind \"__s29\" ((set_type (first (params 108) 588) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 588) (contract \"address\") 588) (set (operations 588) (cons (transfer (getLocal \"__s29\" 588) (literal (mutez 0) 588) (second (params 108) 588) 108) (operations 588) 588) 588))) (getAllowance True ((bind \"__s30\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 588) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 588) \"spender\" 69) 69) 69))) (set_type (second (params 68) 588) (contract \"nat\") 588) (set (operations 588) (cons (transfer (getLocal \"__s30\" 588) (literal (mutez 0) 588) (second (params 68) 588) 68) (operations 588) 588) 588))) (getBalance True ((bind \"__s31\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 588) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 588) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 588) 65) \"balance\" 65) 65))) (set_type (second (params 60) 588) (contract \"nat\") 588) (set (operations 588) (cons (transfer (getLocal \"__s31\" 588) (literal (mutez 0) 588) (second (params 60) 588) 60) (operations 588) 588) 588))) (getTotalSupply True ((bind \"__s32\" ((set_type (first (params 72) 588) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 588) (contract \"nat\") 588) (set (operations 588) (cons (transfer (getLocal \"__s32\" 588) (literal (mutez 0) 588) (second (params 72) 588) 72) (operations 588) 588) 588))) (liquidate True ((set_type (params 149) \"address\" 150) (set (operations 158) (cons (transfer (params 149) (literal (mutez 0) 158) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 155) 153) \"Some\" \"None\" 153) 158) (operations 158) 158) 158) (set (operations 171) (cons (transfer (record 161 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (attr (data) \"rewardAmount\" 164))) (literal (mutez 0) 171) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 166) \"Some\" \"None\" 166) 171) (operations 171) 171) 171) (set (operations 179) (cons (transfer (unit) (literal (mutez 0) 179) (openVariant (contract \"liquidate\" \"unit\" (params 149) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 262) \"nat\" 263) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 266) 266) (literal (string \"bad state\") 266) 266) (set (attr (data) \"state\" 191) (literal (intOrNat 2) 269) 269) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"Some\" (params 262) 270) 270) (set (attr (data) \"savedState_redeemer\" 271) (variant \"Some\" (sender) 271) 271) (set (operations 280) (cons (transfer (tuple 280 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 274)) (literal (mutez 0) 280) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 275) \"Some\" \"None\" 275) 280) (operations 280) 280) 280))) (redeem_callback True ((set_type (params 284) \"nat\" 285) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 288) (literal (string \"bad sender\") 288) 288) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 2) 291) 291) (literal (string \"bad state\") 291) 291) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 270) \"Some\" \"None\" 294) 294) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 295) (literal (intOrNat 1000000000000000000) 295) 295) (attr (data) \"totalSupply\" 96) 295) 295) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 296) (params 284) 296) (literal (intOrNat 1000000000000000000) 296) 296) 296) (set (attr (data) \"underlyingBalance\" 227) (openVariant (isNat (sub (params 284) (getLocal \"tokensToReceive\" 299) 299) 299) \"Some\" \"None\" 299) 299) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 271) \"Some\" \"None\" 302) 302) (set (operations 312) (cons (transfer (record 303 (address (getLocal \"redeemer\" 304)) (value (getLocal \"tokensToRedeem\" 305))) (literal (mutez 0) 312) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 307) \"Some\" \"None\" 307) 312) (operations 312) 312) 312) (set (operations 325) (cons (transfer (record 315 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 317)) (value (getLocal \"tokensToReceive\" 318))) (literal (mutez 0) 325) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 320) \"Some\" \"None\" 320) 325) (operations 325) 325) 325) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 328) 328) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"None\" (unit) -1) 329) (set (attr (data) \"savedState_redeemer\" 271) (variant \"None\" (unit) -1) 330))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 338) \"unit\" 339) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 342) 342) (literal (string \"bad state\") 342) 342) (set (attr (data) \"state\" 191) (literal (intOrNat 1) 345) 345) (set (operations 354) (cons (transfer (tuple 354 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 348)) (literal (mutez 0) 354) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 349) \"Some\" \"None\" 349) 354) (operations 354) 354) 354))) (updateBalance_callback True ((set_type (params 358) \"nat\" 359) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 362) (literal (string \"bad sender\") 362) 362) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 1) 365) 365) (literal (string \"bad state\") 365) 365) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 368) 368) (set (attr (data) \"underlyingBalance\" 227) (params 358) 371))) (updateContractMetadata True ((set_type (params 411) (tuple \"string\" \"bytes\") 412) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 414) (literal (string \"not governor\") 414) 414) (set (getItem (attr (data) \"metadata\" 418) (first (params 411) 416) 418) (second (params 411) 417) 418))) (updateDexterAddress True ((set_type (params 395) \"address\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"dexterAddress\" 132) (params 395) 399))) (updateGovernorAddress True ((set_type (params 379) \"address\" 380) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 382) (literal (string \"not governor\") 382) 382) (set (attr (data) \"governorAddress\" 414) (params 379) 383))) (updateOvenRegistryAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"ovenRegistryAddress\" 155) (params 403) 407))) (updateRewardAmount True ((set_type (params 387) \"nat\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"rewardAmount\" 164) (params 387) 391))) (updateTokenMetadata True ((set_type (params 422) (tuple \"nat\" (map \"string\" \"bytes\")) 423) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 425) (literal (string \"not governor\") 425) 425) (set (getItem (attr (data) \"token_metadata\" 426) (literal (intOrNat 0) 426) 426) (params 422) 426))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 588, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 82)", "dynamic": false, "message": "updateDexterAddress", "params": "(literal (address \"tz1eibLoCDot2w2QWyR7kMoVDTto9fYs2mnJ\") 12)", "line_no": 593, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1bTpviNnyx2PXsNmGpCQTMQsGoYordkUoA\") 26)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 593)", "show": true, "valid": "(literal (bool False) 593)", "voting_powers": "(map 593 )", "export": true}], "decompile": false, "kind": "test"}, {"shortname": "updateDexterAddress_-_can_rotate_governor", "longname": "updateDexterAddress - can rotate governor", "scenario": [{"action": "newContract", "id": "(static_id 0 82)", "export": "(storage (record 82 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 86 ) (bigmap (unknown 73) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 86)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 73 ((literal (string \"\") 604) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 75)) ((literal (string \"data\") 604) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 72))) (bigmap \"string\" \"bytes\") 73)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 82)) (rewardAmount (literal (intOrNat 1000000000000000000) 82)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 82)) (tokenAddress (literal (address \"tz1aJS7Pk9uWR3wWyFf1i3RwhYxN84G7stom\") 17)) (token_metadata (type_annotation (big_map 62 ((literal (nat 0) 49) (tuple 604 (literal (nat 0) 49) (type_annotation (map 51 ((literal (string \"name\") 604) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 53)) ((literal (string \"decimals\") 604) (literal (bytes \"0x3138\") 54)) ((literal (string \"symbol\") 604) (literal (bytes \"0x6465787465724c6b555344\") 55)) ((literal (string \"icon\") 604) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 56))) (map \"string\" \"bytes\") 51)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 62)) (totalSupply (literal (intOrNat 0) 82)) (underlyingBalance (literal (nat 0) 103)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 119) \"unit\" 120) (set (operations 135) (cons (transfer (tuple 135 (to_address (self) \"None\") (tuple 135 (literal (intOrNat 1) 135) (add_seconds (now) (literal (int 3600) 127) 127))) (balance) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 132) 130) \"Some\" \"None\" 130) 135) (operations 135) 135) 135) (set (operations 145) (cons (transfer (unit) (literal (mutez 0) 145) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 140) \"Some\" \"None\" 140) 145) (operations 145) 145) 145))) (deposit True ((set_type (params 187) \"nat\" 188) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 191) 191) (literal (string \"bad state\") 191) 191) (set (attr (data) \"state\" 191) (literal (intOrNat 3) 194) 194) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"Some\" (params 187) 195) 195) (set (attr (data) \"savedState_depositor\" 196) (variant \"Some\" (sender) 196) 196) (set (operations 205) (cons (transfer (tuple 205 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 199)) (literal (mutez 0) 205) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 200) \"Some\" \"None\" 200) 205) (operations 205) 205) 205))) (deposit_callback True ((set_type (params 209) \"nat\" 210) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 213) (literal (string \"bad sender\") 213) 213) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 3) 216) 216) (literal (string \"bad state\") 216) 216) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 195) \"Some\" \"None\" 219) 219) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 220) (literal (intOrNat 1000000000000000000) 220) 220) 220) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 221) 221) ((defineLocal \"newUnderlyingBalance\" (add (params 209) (getLocal \"tokensToDeposit\" 222) 222) 222) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 223) (literal (intOrNat 1000000000000000000) 223) 223) (getLocal \"newUnderlyingBalance\" 223) 223) 223) (set (getLocal \"newTokens\" 604) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 224) (attr (data) \"totalSupply\" 96) 224) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 224) (getLocal \"fractionOfPoolOwnership\" 224) 224) 224) \"Some\" \"None\" 224) 224) 224)) 221) (set (attr (data) \"underlyingBalance\" 227) (add (params 209) (getLocal \"tokensToDeposit\" 227) 227) 227) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 196) \"Some\" \"None\" 230) 230) (set (operations 241) (cons (transfer (record 231 (from_ (getLocal \"depositor\" 232)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 234))) (literal (mutez 0) 241) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 236) \"Some\" \"None\" 236) 241) (operations 241) 241) 241) (set (operations 253) (cons (transfer (record 244 (address (getLocal \"depositor\" 245)) (value (getLocal \"newTokens\" 246))) (literal (mutez 0) 253) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 248) \"Some\" \"None\" 248) 253) (operations 253) 253) 253) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 256) 256) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"None\" (unit) -1) 257) (set (attr (data) \"savedState_depositor\" 196) (variant \"None\" (unit) -1) 258))) (getAdministrator True ((bind \"__s33\" ((set_type (first (params 108) 604) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 604) (contract \"address\") 604) (set (operations 604) (cons (transfer (getLocal \"__s33\" 604) (literal (mutez 0) 604) (second (params 108) 604) 108) (operations 604) 604) 604))) (getAllowance True ((bind \"__s34\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 604) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 604) \"spender\" 69) 69) 69))) (set_type (second (params 68) 604) (contract \"nat\") 604) (set (operations 604) (cons (transfer (getLocal \"__s34\" 604) (literal (mutez 0) 604) (second (params 68) 604) 68) (operations 604) 604) 604))) (getBalance True ((bind \"__s35\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 604) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 604) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 604) 65) \"balance\" 65) 65))) (set_type (second (params 60) 604) (contract \"nat\") 604) (set (operations 604) (cons (transfer (getLocal \"__s35\" 604) (literal (mutez 0) 604) (second (params 60) 604) 60) (operations 604) 604) 604))) (getTotalSupply True ((bind \"__s36\" ((set_type (first (params 72) 604) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 604) (contract \"nat\") 604) (set (operations 604) (cons (transfer (getLocal \"__s36\" 604) (literal (mutez 0) 604) (second (params 72) 604) 72) (operations 604) 604) 604))) (liquidate True ((set_type (params 149) \"address\" 150) (set (operations 158) (cons (transfer (params 149) (literal (mutez 0) 158) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 155) 153) \"Some\" \"None\" 153) 158) (operations 158) 158) 158) (set (operations 171) (cons (transfer (record 161 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (attr (data) \"rewardAmount\" 164))) (literal (mutez 0) 171) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 166) \"Some\" \"None\" 166) 171) (operations 171) 171) 171) (set (operations 179) (cons (transfer (unit) (literal (mutez 0) 179) (openVariant (contract \"liquidate\" \"unit\" (params 149) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 262) \"nat\" 263) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 266) 266) (literal (string \"bad state\") 266) 266) (set (attr (data) \"state\" 191) (literal (intOrNat 2) 269) 269) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"Some\" (params 262) 270) 270) (set (attr (data) \"savedState_redeemer\" 271) (variant \"Some\" (sender) 271) 271) (set (operations 280) (cons (transfer (tuple 280 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 274)) (literal (mutez 0) 280) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 275) \"Some\" \"None\" 275) 280) (operations 280) 280) 280))) (redeem_callback True ((set_type (params 284) \"nat\" 285) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 288) (literal (string \"bad sender\") 288) 288) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 2) 291) 291) (literal (string \"bad state\") 291) 291) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 270) \"Some\" \"None\" 294) 294) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 295) (literal (intOrNat 1000000000000000000) 295) 295) (attr (data) \"totalSupply\" 96) 295) 295) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 296) (params 284) 296) (literal (intOrNat 1000000000000000000) 296) 296) 296) (set (attr (data) \"underlyingBalance\" 227) (openVariant (isNat (sub (params 284) (getLocal \"tokensToReceive\" 299) 299) 299) \"Some\" \"None\" 299) 299) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 271) \"Some\" \"None\" 302) 302) (set (operations 312) (cons (transfer (record 303 (address (getLocal \"redeemer\" 304)) (value (getLocal \"tokensToRedeem\" 305))) (literal (mutez 0) 312) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 307) \"Some\" \"None\" 307) 312) (operations 312) 312) 312) (set (operations 325) (cons (transfer (record 315 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 317)) (value (getLocal \"tokensToReceive\" 318))) (literal (mutez 0) 325) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 320) \"Some\" \"None\" 320) 325) (operations 325) 325) 325) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 328) 328) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"None\" (unit) -1) 329) (set (attr (data) \"savedState_redeemer\" 271) (variant \"None\" (unit) -1) 330))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 338) \"unit\" 339) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 342) 342) (literal (string \"bad state\") 342) 342) (set (attr (data) \"state\" 191) (literal (intOrNat 1) 345) 345) (set (operations 354) (cons (transfer (tuple 354 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 348)) (literal (mutez 0) 354) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 349) \"Some\" \"None\" 349) 354) (operations 354) 354) 354))) (updateBalance_callback True ((set_type (params 358) \"nat\" 359) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 362) (literal (string \"bad sender\") 362) 362) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 1) 365) 365) (literal (string \"bad state\") 365) 365) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 368) 368) (set (attr (data) \"underlyingBalance\" 227) (params 358) 371))) (updateContractMetadata True ((set_type (params 411) (tuple \"string\" \"bytes\") 412) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 414) (literal (string \"not governor\") 414) 414) (set (getItem (attr (data) \"metadata\" 418) (first (params 411) 416) 418) (second (params 411) 417) 418))) (updateDexterAddress True ((set_type (params 395) \"address\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"dexterAddress\" 132) (params 395) 399))) (updateGovernorAddress True ((set_type (params 379) \"address\" 380) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 382) (literal (string \"not governor\") 382) 382) (set (attr (data) \"governorAddress\" 414) (params 379) 383))) (updateOvenRegistryAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"ovenRegistryAddress\" 155) (params 403) 407))) (updateRewardAmount True ((set_type (params 387) \"nat\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"rewardAmount\" 164) (params 387) 391))) (updateTokenMetadata True ((set_type (params 422) (tuple \"nat\" (map \"string\" \"bytes\")) 423) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 425) (literal (string \"not governor\") 425) 425) (set (getItem (attr (data) \"token_metadata\" 426) (literal (intOrNat 0) 426) 426) (params 422) 426))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 604, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 82)", "dynamic": false, "message": "updateDexterAddress", "params": "(literal (address \"tz1eibLoCDot2w2QWyR7kMoVDTto9fYs2mnJ\") 12)", "line_no": 607, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 607)", "show": true, "valid": "(literal (bool True) 607)", "voting_powers": "(map 607 )", "export": true}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 0 82) 607) \"dexterAddress\" 612) (literal (address \"tz1eibLoCDot2w2QWyR7kMoVDTto9fYs2mnJ\") 12) 612)", "line_no": 612}], "decompile": false, "kind": "test"}, {"shortname": "updateOvenRegistryAddress_-_fails_if_sender_is_not_governor", "longname": "updateOvenRegistryAddress - fails if sender is not governor", "scenario": [{"action": "newContract", "id": "(static_id 0 82)", "export": "(storage (record 82 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 86 ) (bigmap (unknown 83) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 86)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 73 ((literal (string \"\") 624) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 75)) ((literal (string \"data\") 624) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 72))) (bigmap \"string\" \"bytes\") 73)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 82)) (rewardAmount (literal (intOrNat 1000000000000000000) 82)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 82)) (tokenAddress (literal (address \"tz1aJS7Pk9uWR3wWyFf1i3RwhYxN84G7stom\") 17)) (token_metadata (type_annotation (big_map 62 ((literal (nat 0) 49) (tuple 624 (literal (nat 0) 49) (type_annotation (map 51 ((literal (string \"name\") 624) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 53)) ((literal (string \"decimals\") 624) (literal (bytes \"0x3138\") 54)) ((literal (string \"symbol\") 624) (literal (bytes \"0x6465787465724c6b555344\") 55)) ((literal (string \"icon\") 624) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 56))) (map \"string\" \"bytes\") 51)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 62)) (totalSupply (literal (intOrNat 0) 82)) (underlyingBalance (literal (nat 0) 103)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 119) \"unit\" 120) (set (operations 135) (cons (transfer (tuple 135 (to_address (self) \"None\") (tuple 135 (literal (intOrNat 1) 135) (add_seconds (now) (literal (int 3600) 127) 127))) (balance) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 132) 130) \"Some\" \"None\" 130) 135) (operations 135) 135) 135) (set (operations 145) (cons (transfer (unit) (literal (mutez 0) 145) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 140) \"Some\" \"None\" 140) 145) (operations 145) 145) 145))) (deposit True ((set_type (params 187) \"nat\" 188) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 191) 191) (literal (string \"bad state\") 191) 191) (set (attr (data) \"state\" 191) (literal (intOrNat 3) 194) 194) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"Some\" (params 187) 195) 195) (set (attr (data) \"savedState_depositor\" 196) (variant \"Some\" (sender) 196) 196) (set (operations 205) (cons (transfer (tuple 205 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 199)) (literal (mutez 0) 205) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 200) \"Some\" \"None\" 200) 205) (operations 205) 205) 205))) (deposit_callback True ((set_type (params 209) \"nat\" 210) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 213) (literal (string \"bad sender\") 213) 213) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 3) 216) 216) (literal (string \"bad state\") 216) 216) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 195) \"Some\" \"None\" 219) 219) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 220) (literal (intOrNat 1000000000000000000) 220) 220) 220) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 221) 221) ((defineLocal \"newUnderlyingBalance\" (add (params 209) (getLocal \"tokensToDeposit\" 222) 222) 222) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 223) (literal (intOrNat 1000000000000000000) 223) 223) (getLocal \"newUnderlyingBalance\" 223) 223) 223) (set (getLocal \"newTokens\" 624) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 224) (attr (data) \"totalSupply\" 96) 224) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 224) (getLocal \"fractionOfPoolOwnership\" 224) 224) 224) \"Some\" \"None\" 224) 224) 224)) 221) (set (attr (data) \"underlyingBalance\" 227) (add (params 209) (getLocal \"tokensToDeposit\" 227) 227) 227) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 196) \"Some\" \"None\" 230) 230) (set (operations 241) (cons (transfer (record 231 (from_ (getLocal \"depositor\" 232)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 234))) (literal (mutez 0) 241) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 236) \"Some\" \"None\" 236) 241) (operations 241) 241) 241) (set (operations 253) (cons (transfer (record 244 (address (getLocal \"depositor\" 245)) (value (getLocal \"newTokens\" 246))) (literal (mutez 0) 253) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 248) \"Some\" \"None\" 248) 253) (operations 253) 253) 253) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 256) 256) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"None\" (unit) -1) 257) (set (attr (data) \"savedState_depositor\" 196) (variant \"None\" (unit) -1) 258))) (getAdministrator True ((bind \"__s37\" ((set_type (first (params 108) 624) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 624) (contract \"address\") 624) (set (operations 624) (cons (transfer (getLocal \"__s37\" 624) (literal (mutez 0) 624) (second (params 108) 624) 108) (operations 624) 624) 624))) (getAllowance True ((bind \"__s38\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 624) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 624) \"spender\" 69) 69) 69))) (set_type (second (params 68) 624) (contract \"nat\") 624) (set (operations 624) (cons (transfer (getLocal \"__s38\" 624) (literal (mutez 0) 624) (second (params 68) 624) 68) (operations 624) 624) 624))) (getBalance True ((bind \"__s39\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 624) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 624) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 624) 65) \"balance\" 65) 65))) (set_type (second (params 60) 624) (contract \"nat\") 624) (set (operations 624) (cons (transfer (getLocal \"__s39\" 624) (literal (mutez 0) 624) (second (params 60) 624) 60) (operations 624) 624) 624))) (getTotalSupply True ((bind \"__s40\" ((set_type (first (params 72) 624) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 624) (contract \"nat\") 624) (set (operations 624) (cons (transfer (getLocal \"__s40\" 624) (literal (mutez 0) 624) (second (params 72) 624) 72) (operations 624) 624) 624))) (liquidate True ((set_type (params 149) \"address\" 150) (set (operations 158) (cons (transfer (params 149) (literal (mutez 0) 158) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 155) 153) \"Some\" \"None\" 153) 158) (operations 158) 158) 158) (set (operations 171) (cons (transfer (record 161 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (attr (data) \"rewardAmount\" 164))) (literal (mutez 0) 171) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 166) \"Some\" \"None\" 166) 171) (operations 171) 171) 171) (set (operations 179) (cons (transfer (unit) (literal (mutez 0) 179) (openVariant (contract \"liquidate\" \"unit\" (params 149) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 262) \"nat\" 263) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 266) 266) (literal (string \"bad state\") 266) 266) (set (attr (data) \"state\" 191) (literal (intOrNat 2) 269) 269) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"Some\" (params 262) 270) 270) (set (attr (data) \"savedState_redeemer\" 271) (variant \"Some\" (sender) 271) 271) (set (operations 280) (cons (transfer (tuple 280 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 274)) (literal (mutez 0) 280) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 275) \"Some\" \"None\" 275) 280) (operations 280) 280) 280))) (redeem_callback True ((set_type (params 284) \"nat\" 285) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 288) (literal (string \"bad sender\") 288) 288) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 2) 291) 291) (literal (string \"bad state\") 291) 291) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 270) \"Some\" \"None\" 294) 294) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 295) (literal (intOrNat 1000000000000000000) 295) 295) (attr (data) \"totalSupply\" 96) 295) 295) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 296) (params 284) 296) (literal (intOrNat 1000000000000000000) 296) 296) 296) (set (attr (data) \"underlyingBalance\" 227) (openVariant (isNat (sub (params 284) (getLocal \"tokensToReceive\" 299) 299) 299) \"Some\" \"None\" 299) 299) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 271) \"Some\" \"None\" 302) 302) (set (operations 312) (cons (transfer (record 303 (address (getLocal \"redeemer\" 304)) (value (getLocal \"tokensToRedeem\" 305))) (literal (mutez 0) 312) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 307) \"Some\" \"None\" 307) 312) (operations 312) 312) 312) (set (operations 325) (cons (transfer (record 315 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 317)) (value (getLocal \"tokensToReceive\" 318))) (literal (mutez 0) 325) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 320) \"Some\" \"None\" 320) 325) (operations 325) 325) 325) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 328) 328) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"None\" (unit) -1) 329) (set (attr (data) \"savedState_redeemer\" 271) (variant \"None\" (unit) -1) 330))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 338) \"unit\" 339) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 342) 342) (literal (string \"bad state\") 342) 342) (set (attr (data) \"state\" 191) (literal (intOrNat 1) 345) 345) (set (operations 354) (cons (transfer (tuple 354 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 348)) (literal (mutez 0) 354) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 349) \"Some\" \"None\" 349) 354) (operations 354) 354) 354))) (updateBalance_callback True ((set_type (params 358) \"nat\" 359) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 362) (literal (string \"bad sender\") 362) 362) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 1) 365) 365) (literal (string \"bad state\") 365) 365) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 368) 368) (set (attr (data) \"underlyingBalance\" 227) (params 358) 371))) (updateContractMetadata True ((set_type (params 411) (tuple \"string\" \"bytes\") 412) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 414) (literal (string \"not governor\") 414) 414) (set (getItem (attr (data) \"metadata\" 418) (first (params 411) 416) 418) (second (params 411) 417) 418))) (updateDexterAddress True ((set_type (params 395) \"address\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"dexterAddress\" 132) (params 395) 399))) (updateGovernorAddress True ((set_type (params 379) \"address\" 380) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 382) (literal (string \"not governor\") 382) 382) (set (attr (data) \"governorAddress\" 414) (params 379) 383))) (updateOvenRegistryAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"ovenRegistryAddress\" 155) (params 403) 407))) (updateRewardAmount True ((set_type (params 387) \"nat\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"rewardAmount\" 164) (params 387) 391))) (updateTokenMetadata True ((set_type (params 422) (tuple \"nat\" (map \"string\" \"bytes\")) 423) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 425) (literal (string \"not governor\") 425) 425) (set (getItem (attr (data) \"token_metadata\" 426) (literal (intOrNat 0) 426) 426) (params 422) 426))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 624, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 82)", "dynamic": false, "message": "updateOvenRegistryAddress", "params": "(literal (address \"tz1eibLoCDot2w2QWyR7kMoVDTto9fYs2mnJ\") 12)", "line_no": 629, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1bTpviNnyx2PXsNmGpCQTMQsGoYordkUoA\") 26)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 629)", "show": true, "valid": "(literal (bool False) 629)", "voting_powers": "(map 629 )", "export": true}], "decompile": false, "kind": "test"}, {"shortname": "updateOvenRegistryAddress_-_can_rotate_governor", "longname": "updateOvenRegistryAddress - can rotate governor", "scenario": [{"action": "newContract", "id": "(static_id 0 82)", "export": "(storage (record 82 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 86 ) (bigmap (unknown 93) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 86)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 73 ((literal (string \"\") 640) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 75)) ((literal (string \"data\") 640) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 72))) (bigmap \"string\" \"bytes\") 73)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 82)) (rewardAmount (literal (intOrNat 1000000000000000000) 82)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 82)) (tokenAddress (literal (address \"tz1aJS7Pk9uWR3wWyFf1i3RwhYxN84G7stom\") 17)) (token_metadata (type_annotation (big_map 62 ((literal (nat 0) 49) (tuple 640 (literal (nat 0) 49) (type_annotation (map 51 ((literal (string \"name\") 640) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 53)) ((literal (string \"decimals\") 640) (literal (bytes \"0x3138\") 54)) ((literal (string \"symbol\") 640) (literal (bytes \"0x6465787465724c6b555344\") 55)) ((literal (string \"icon\") 640) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 56))) (map \"string\" \"bytes\") 51)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 62)) (totalSupply (literal (intOrNat 0) 82)) (underlyingBalance (literal (nat 0) 103)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 119) \"unit\" 120) (set (operations 135) (cons (transfer (tuple 135 (to_address (self) \"None\") (tuple 135 (literal (intOrNat 1) 135) (add_seconds (now) (literal (int 3600) 127) 127))) (balance) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 132) 130) \"Some\" \"None\" 130) 135) (operations 135) 135) 135) (set (operations 145) (cons (transfer (unit) (literal (mutez 0) 145) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 140) \"Some\" \"None\" 140) 145) (operations 145) 145) 145))) (deposit True ((set_type (params 187) \"nat\" 188) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 191) 191) (literal (string \"bad state\") 191) 191) (set (attr (data) \"state\" 191) (literal (intOrNat 3) 194) 194) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"Some\" (params 187) 195) 195) (set (attr (data) \"savedState_depositor\" 196) (variant \"Some\" (sender) 196) 196) (set (operations 205) (cons (transfer (tuple 205 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 199)) (literal (mutez 0) 205) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 200) \"Some\" \"None\" 200) 205) (operations 205) 205) 205))) (deposit_callback True ((set_type (params 209) \"nat\" 210) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 213) (literal (string \"bad sender\") 213) 213) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 3) 216) 216) (literal (string \"bad state\") 216) 216) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 195) \"Some\" \"None\" 219) 219) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 220) (literal (intOrNat 1000000000000000000) 220) 220) 220) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 221) 221) ((defineLocal \"newUnderlyingBalance\" (add (params 209) (getLocal \"tokensToDeposit\" 222) 222) 222) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 223) (literal (intOrNat 1000000000000000000) 223) 223) (getLocal \"newUnderlyingBalance\" 223) 223) 223) (set (getLocal \"newTokens\" 640) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 224) (attr (data) \"totalSupply\" 96) 224) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 224) (getLocal \"fractionOfPoolOwnership\" 224) 224) 224) \"Some\" \"None\" 224) 224) 224)) 221) (set (attr (data) \"underlyingBalance\" 227) (add (params 209) (getLocal \"tokensToDeposit\" 227) 227) 227) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 196) \"Some\" \"None\" 230) 230) (set (operations 241) (cons (transfer (record 231 (from_ (getLocal \"depositor\" 232)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 234))) (literal (mutez 0) 241) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 236) \"Some\" \"None\" 236) 241) (operations 241) 241) 241) (set (operations 253) (cons (transfer (record 244 (address (getLocal \"depositor\" 245)) (value (getLocal \"newTokens\" 246))) (literal (mutez 0) 253) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 248) \"Some\" \"None\" 248) 253) (operations 253) 253) 253) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 256) 256) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"None\" (unit) -1) 257) (set (attr (data) \"savedState_depositor\" 196) (variant \"None\" (unit) -1) 258))) (getAdministrator True ((bind \"__s41\" ((set_type (first (params 108) 640) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 640) (contract \"address\") 640) (set (operations 640) (cons (transfer (getLocal \"__s41\" 640) (literal (mutez 0) 640) (second (params 108) 640) 108) (operations 640) 640) 640))) (getAllowance True ((bind \"__s42\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 640) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 640) \"spender\" 69) 69) 69))) (set_type (second (params 68) 640) (contract \"nat\") 640) (set (operations 640) (cons (transfer (getLocal \"__s42\" 640) (literal (mutez 0) 640) (second (params 68) 640) 68) (operations 640) 640) 640))) (getBalance True ((bind \"__s43\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 640) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 640) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 640) 65) \"balance\" 65) 65))) (set_type (second (params 60) 640) (contract \"nat\") 640) (set (operations 640) (cons (transfer (getLocal \"__s43\" 640) (literal (mutez 0) 640) (second (params 60) 640) 60) (operations 640) 640) 640))) (getTotalSupply True ((bind \"__s44\" ((set_type (first (params 72) 640) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 640) (contract \"nat\") 640) (set (operations 640) (cons (transfer (getLocal \"__s44\" 640) (literal (mutez 0) 640) (second (params 72) 640) 72) (operations 640) 640) 640))) (liquidate True ((set_type (params 149) \"address\" 150) (set (operations 158) (cons (transfer (params 149) (literal (mutez 0) 158) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 155) 153) \"Some\" \"None\" 153) 158) (operations 158) 158) 158) (set (operations 171) (cons (transfer (record 161 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (attr (data) \"rewardAmount\" 164))) (literal (mutez 0) 171) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 166) \"Some\" \"None\" 166) 171) (operations 171) 171) 171) (set (operations 179) (cons (transfer (unit) (literal (mutez 0) 179) (openVariant (contract \"liquidate\" \"unit\" (params 149) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 262) \"nat\" 263) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 266) 266) (literal (string \"bad state\") 266) 266) (set (attr (data) \"state\" 191) (literal (intOrNat 2) 269) 269) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"Some\" (params 262) 270) 270) (set (attr (data) \"savedState_redeemer\" 271) (variant \"Some\" (sender) 271) 271) (set (operations 280) (cons (transfer (tuple 280 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 274)) (literal (mutez 0) 280) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 275) \"Some\" \"None\" 275) 280) (operations 280) 280) 280))) (redeem_callback True ((set_type (params 284) \"nat\" 285) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 288) (literal (string \"bad sender\") 288) 288) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 2) 291) 291) (literal (string \"bad state\") 291) 291) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 270) \"Some\" \"None\" 294) 294) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 295) (literal (intOrNat 1000000000000000000) 295) 295) (attr (data) \"totalSupply\" 96) 295) 295) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 296) (params 284) 296) (literal (intOrNat 1000000000000000000) 296) 296) 296) (set (attr (data) \"underlyingBalance\" 227) (openVariant (isNat (sub (params 284) (getLocal \"tokensToReceive\" 299) 299) 299) \"Some\" \"None\" 299) 299) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 271) \"Some\" \"None\" 302) 302) (set (operations 312) (cons (transfer (record 303 (address (getLocal \"redeemer\" 304)) (value (getLocal \"tokensToRedeem\" 305))) (literal (mutez 0) 312) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 307) \"Some\" \"None\" 307) 312) (operations 312) 312) 312) (set (operations 325) (cons (transfer (record 315 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 317)) (value (getLocal \"tokensToReceive\" 318))) (literal (mutez 0) 325) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 320) \"Some\" \"None\" 320) 325) (operations 325) 325) 325) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 328) 328) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"None\" (unit) -1) 329) (set (attr (data) \"savedState_redeemer\" 271) (variant \"None\" (unit) -1) 330))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 338) \"unit\" 339) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 342) 342) (literal (string \"bad state\") 342) 342) (set (attr (data) \"state\" 191) (literal (intOrNat 1) 345) 345) (set (operations 354) (cons (transfer (tuple 354 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 348)) (literal (mutez 0) 354) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 349) \"Some\" \"None\" 349) 354) (operations 354) 354) 354))) (updateBalance_callback True ((set_type (params 358) \"nat\" 359) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 362) (literal (string \"bad sender\") 362) 362) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 1) 365) 365) (literal (string \"bad state\") 365) 365) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 368) 368) (set (attr (data) \"underlyingBalance\" 227) (params 358) 371))) (updateContractMetadata True ((set_type (params 411) (tuple \"string\" \"bytes\") 412) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 414) (literal (string \"not governor\") 414) 414) (set (getItem (attr (data) \"metadata\" 418) (first (params 411) 416) 418) (second (params 411) 417) 418))) (updateDexterAddress True ((set_type (params 395) \"address\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"dexterAddress\" 132) (params 395) 399))) (updateGovernorAddress True ((set_type (params 379) \"address\" 380) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 382) (literal (string \"not governor\") 382) 382) (set (attr (data) \"governorAddress\" 414) (params 379) 383))) (updateOvenRegistryAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"ovenRegistryAddress\" 155) (params 403) 407))) (updateRewardAmount True ((set_type (params 387) \"nat\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"rewardAmount\" 164) (params 387) 391))) (updateTokenMetadata True ((set_type (params 422) (tuple \"nat\" (map \"string\" \"bytes\")) 423) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 425) (literal (string \"not governor\") 425) 425) (set (getItem (attr (data) \"token_metadata\" 426) (literal (intOrNat 0) 426) 426) (params 422) 426))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 640, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 82)", "dynamic": false, "message": "updateOvenRegistryAddress", "params": "(literal (address \"tz1eibLoCDot2w2QWyR7kMoVDTto9fYs2mnJ\") 12)", "line_no": 643, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 643)", "show": true, "valid": "(literal (bool True) 643)", "voting_powers": "(map 643 )", "export": true}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 0 82) 643) \"ovenRegistryAddress\" 648) (literal (address \"tz1eibLoCDot2w2QWyR7kMoVDTto9fYs2mnJ\") 12) 648)", "line_no": 648}], "decompile": false, "kind": "test"}, {"shortname": "updateGovernorAddress_-_fails_if_sender_is_not_governor", "longname": "updateGovernorAddress - fails if sender is not governor", "scenario": [{"action": "newContract", "id": "(static_id 0 82)", "export": "(storage (record 82 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 86 ) (bigmap (unknown 103) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 86)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 73 ((literal (string \"\") 660) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 75)) ((literal (string \"data\") 660) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 72))) (bigmap \"string\" \"bytes\") 73)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 82)) (rewardAmount (literal (intOrNat 1000000000000000000) 82)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 82)) (tokenAddress (literal (address \"tz1aJS7Pk9uWR3wWyFf1i3RwhYxN84G7stom\") 17)) (token_metadata (type_annotation (big_map 62 ((literal (nat 0) 49) (tuple 660 (literal (nat 0) 49) (type_annotation (map 51 ((literal (string \"name\") 660) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 53)) ((literal (string \"decimals\") 660) (literal (bytes \"0x3138\") 54)) ((literal (string \"symbol\") 660) (literal (bytes \"0x6465787465724c6b555344\") 55)) ((literal (string \"icon\") 660) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 56))) (map \"string\" \"bytes\") 51)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 62)) (totalSupply (literal (intOrNat 0) 82)) (underlyingBalance (literal (nat 0) 103)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 119) \"unit\" 120) (set (operations 135) (cons (transfer (tuple 135 (to_address (self) \"None\") (tuple 135 (literal (intOrNat 1) 135) (add_seconds (now) (literal (int 3600) 127) 127))) (balance) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 132) 130) \"Some\" \"None\" 130) 135) (operations 135) 135) 135) (set (operations 145) (cons (transfer (unit) (literal (mutez 0) 145) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 140) \"Some\" \"None\" 140) 145) (operations 145) 145) 145))) (deposit True ((set_type (params 187) \"nat\" 188) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 191) 191) (literal (string \"bad state\") 191) 191) (set (attr (data) \"state\" 191) (literal (intOrNat 3) 194) 194) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"Some\" (params 187) 195) 195) (set (attr (data) \"savedState_depositor\" 196) (variant \"Some\" (sender) 196) 196) (set (operations 205) (cons (transfer (tuple 205 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 199)) (literal (mutez 0) 205) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 200) \"Some\" \"None\" 200) 205) (operations 205) 205) 205))) (deposit_callback True ((set_type (params 209) \"nat\" 210) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 213) (literal (string \"bad sender\") 213) 213) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 3) 216) 216) (literal (string \"bad state\") 216) 216) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 195) \"Some\" \"None\" 219) 219) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 220) (literal (intOrNat 1000000000000000000) 220) 220) 220) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 221) 221) ((defineLocal \"newUnderlyingBalance\" (add (params 209) (getLocal \"tokensToDeposit\" 222) 222) 222) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 223) (literal (intOrNat 1000000000000000000) 223) 223) (getLocal \"newUnderlyingBalance\" 223) 223) 223) (set (getLocal \"newTokens\" 660) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 224) (attr (data) \"totalSupply\" 96) 224) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 224) (getLocal \"fractionOfPoolOwnership\" 224) 224) 224) \"Some\" \"None\" 224) 224) 224)) 221) (set (attr (data) \"underlyingBalance\" 227) (add (params 209) (getLocal \"tokensToDeposit\" 227) 227) 227) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 196) \"Some\" \"None\" 230) 230) (set (operations 241) (cons (transfer (record 231 (from_ (getLocal \"depositor\" 232)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 234))) (literal (mutez 0) 241) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 236) \"Some\" \"None\" 236) 241) (operations 241) 241) 241) (set (operations 253) (cons (transfer (record 244 (address (getLocal \"depositor\" 245)) (value (getLocal \"newTokens\" 246))) (literal (mutez 0) 253) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 248) \"Some\" \"None\" 248) 253) (operations 253) 253) 253) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 256) 256) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"None\" (unit) -1) 257) (set (attr (data) \"savedState_depositor\" 196) (variant \"None\" (unit) -1) 258))) (getAdministrator True ((bind \"__s45\" ((set_type (first (params 108) 660) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 660) (contract \"address\") 660) (set (operations 660) (cons (transfer (getLocal \"__s45\" 660) (literal (mutez 0) 660) (second (params 108) 660) 108) (operations 660) 660) 660))) (getAllowance True ((bind \"__s46\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 660) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 660) \"spender\" 69) 69) 69))) (set_type (second (params 68) 660) (contract \"nat\") 660) (set (operations 660) (cons (transfer (getLocal \"__s46\" 660) (literal (mutez 0) 660) (second (params 68) 660) 68) (operations 660) 660) 660))) (getBalance True ((bind \"__s47\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 660) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 660) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 660) 65) \"balance\" 65) 65))) (set_type (second (params 60) 660) (contract \"nat\") 660) (set (operations 660) (cons (transfer (getLocal \"__s47\" 660) (literal (mutez 0) 660) (second (params 60) 660) 60) (operations 660) 660) 660))) (getTotalSupply True ((bind \"__s48\" ((set_type (first (params 72) 660) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 660) (contract \"nat\") 660) (set (operations 660) (cons (transfer (getLocal \"__s48\" 660) (literal (mutez 0) 660) (second (params 72) 660) 72) (operations 660) 660) 660))) (liquidate True ((set_type (params 149) \"address\" 150) (set (operations 158) (cons (transfer (params 149) (literal (mutez 0) 158) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 155) 153) \"Some\" \"None\" 153) 158) (operations 158) 158) 158) (set (operations 171) (cons (transfer (record 161 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (attr (data) \"rewardAmount\" 164))) (literal (mutez 0) 171) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 166) \"Some\" \"None\" 166) 171) (operations 171) 171) 171) (set (operations 179) (cons (transfer (unit) (literal (mutez 0) 179) (openVariant (contract \"liquidate\" \"unit\" (params 149) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 262) \"nat\" 263) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 266) 266) (literal (string \"bad state\") 266) 266) (set (attr (data) \"state\" 191) (literal (intOrNat 2) 269) 269) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"Some\" (params 262) 270) 270) (set (attr (data) \"savedState_redeemer\" 271) (variant \"Some\" (sender) 271) 271) (set (operations 280) (cons (transfer (tuple 280 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 274)) (literal (mutez 0) 280) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 275) \"Some\" \"None\" 275) 280) (operations 280) 280) 280))) (redeem_callback True ((set_type (params 284) \"nat\" 285) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 288) (literal (string \"bad sender\") 288) 288) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 2) 291) 291) (literal (string \"bad state\") 291) 291) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 270) \"Some\" \"None\" 294) 294) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 295) (literal (intOrNat 1000000000000000000) 295) 295) (attr (data) \"totalSupply\" 96) 295) 295) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 296) (params 284) 296) (literal (intOrNat 1000000000000000000) 296) 296) 296) (set (attr (data) \"underlyingBalance\" 227) (openVariant (isNat (sub (params 284) (getLocal \"tokensToReceive\" 299) 299) 299) \"Some\" \"None\" 299) 299) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 271) \"Some\" \"None\" 302) 302) (set (operations 312) (cons (transfer (record 303 (address (getLocal \"redeemer\" 304)) (value (getLocal \"tokensToRedeem\" 305))) (literal (mutez 0) 312) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 307) \"Some\" \"None\" 307) 312) (operations 312) 312) 312) (set (operations 325) (cons (transfer (record 315 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 317)) (value (getLocal \"tokensToReceive\" 318))) (literal (mutez 0) 325) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 320) \"Some\" \"None\" 320) 325) (operations 325) 325) 325) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 328) 328) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"None\" (unit) -1) 329) (set (attr (data) \"savedState_redeemer\" 271) (variant \"None\" (unit) -1) 330))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 338) \"unit\" 339) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 342) 342) (literal (string \"bad state\") 342) 342) (set (attr (data) \"state\" 191) (literal (intOrNat 1) 345) 345) (set (operations 354) (cons (transfer (tuple 354 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 348)) (literal (mutez 0) 354) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 349) \"Some\" \"None\" 349) 354) (operations 354) 354) 354))) (updateBalance_callback True ((set_type (params 358) \"nat\" 359) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 362) (literal (string \"bad sender\") 362) 362) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 1) 365) 365) (literal (string \"bad state\") 365) 365) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 368) 368) (set (attr (data) \"underlyingBalance\" 227) (params 358) 371))) (updateContractMetadata True ((set_type (params 411) (tuple \"string\" \"bytes\") 412) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 414) (literal (string \"not governor\") 414) 414) (set (getItem (attr (data) \"metadata\" 418) (first (params 411) 416) 418) (second (params 411) 417) 418))) (updateDexterAddress True ((set_type (params 395) \"address\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"dexterAddress\" 132) (params 395) 399))) (updateGovernorAddress True ((set_type (params 379) \"address\" 380) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 382) (literal (string \"not governor\") 382) 382) (set (attr (data) \"governorAddress\" 414) (params 379) 383))) (updateOvenRegistryAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"ovenRegistryAddress\" 155) (params 403) 407))) (updateRewardAmount True ((set_type (params 387) \"nat\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"rewardAmount\" 164) (params 387) 391))) (updateTokenMetadata True ((set_type (params 422) (tuple \"nat\" (map \"string\" \"bytes\")) 423) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 425) (literal (string \"not governor\") 425) 425) (set (getItem (attr (data) \"token_metadata\" 426) (literal (intOrNat 0) 426) 426) (params 422) 426))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 660, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 82)", "dynamic": false, "message": "updateGovernorAddress", "params": "(literal (address \"tz1eibLoCDot2w2QWyR7kMoVDTto9fYs2mnJ\") 12)", "line_no": 665, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1bTpviNnyx2PXsNmGpCQTMQsGoYordkUoA\") 26)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 665)", "show": true, "valid": "(literal (bool False) 665)", "voting_powers": "(map 665 )", "export": true}], "decompile": false, "kind": "test"}, {"shortname": "updateGovernorAddress_-_can_rotate_governor", "longname": "updateGovernorAddress - can rotate governor", "scenario": [{"action": "newContract", "id": "(static_id 0 82)", "export": "(storage (record 82 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 86 ) (bigmap (unknown 113) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 86)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 73 ((literal (string \"\") 676) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 75)) ((literal (string \"data\") 676) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 72))) (bigmap \"string\" \"bytes\") 73)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 82)) (rewardAmount (literal (intOrNat 1000000000000000000) 82)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 82)) (tokenAddress (literal (address \"tz1aJS7Pk9uWR3wWyFf1i3RwhYxN84G7stom\") 17)) (token_metadata (type_annotation (big_map 62 ((literal (nat 0) 49) (tuple 676 (literal (nat 0) 49) (type_annotation (map 51 ((literal (string \"name\") 676) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 53)) ((literal (string \"decimals\") 676) (literal (bytes \"0x3138\") 54)) ((literal (string \"symbol\") 676) (literal (bytes \"0x6465787465724c6b555344\") 55)) ((literal (string \"icon\") 676) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 56))) (map \"string\" \"bytes\") 51)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 62)) (totalSupply (literal (intOrNat 0) 82)) (underlyingBalance (literal (nat 0) 103)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 119) \"unit\" 120) (set (operations 135) (cons (transfer (tuple 135 (to_address (self) \"None\") (tuple 135 (literal (intOrNat 1) 135) (add_seconds (now) (literal (int 3600) 127) 127))) (balance) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 132) 130) \"Some\" \"None\" 130) 135) (operations 135) 135) 135) (set (operations 145) (cons (transfer (unit) (literal (mutez 0) 145) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 140) \"Some\" \"None\" 140) 145) (operations 145) 145) 145))) (deposit True ((set_type (params 187) \"nat\" 188) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 191) 191) (literal (string \"bad state\") 191) 191) (set (attr (data) \"state\" 191) (literal (intOrNat 3) 194) 194) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"Some\" (params 187) 195) 195) (set (attr (data) \"savedState_depositor\" 196) (variant \"Some\" (sender) 196) 196) (set (operations 205) (cons (transfer (tuple 205 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 199)) (literal (mutez 0) 205) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 200) \"Some\" \"None\" 200) 205) (operations 205) 205) 205))) (deposit_callback True ((set_type (params 209) \"nat\" 210) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 213) (literal (string \"bad sender\") 213) 213) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 3) 216) 216) (literal (string \"bad state\") 216) 216) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 195) \"Some\" \"None\" 219) 219) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 220) (literal (intOrNat 1000000000000000000) 220) 220) 220) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 221) 221) ((defineLocal \"newUnderlyingBalance\" (add (params 209) (getLocal \"tokensToDeposit\" 222) 222) 222) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 223) (literal (intOrNat 1000000000000000000) 223) 223) (getLocal \"newUnderlyingBalance\" 223) 223) 223) (set (getLocal \"newTokens\" 676) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 224) (attr (data) \"totalSupply\" 96) 224) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 224) (getLocal \"fractionOfPoolOwnership\" 224) 224) 224) \"Some\" \"None\" 224) 224) 224)) 221) (set (attr (data) \"underlyingBalance\" 227) (add (params 209) (getLocal \"tokensToDeposit\" 227) 227) 227) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 196) \"Some\" \"None\" 230) 230) (set (operations 241) (cons (transfer (record 231 (from_ (getLocal \"depositor\" 232)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 234))) (literal (mutez 0) 241) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 236) \"Some\" \"None\" 236) 241) (operations 241) 241) 241) (set (operations 253) (cons (transfer (record 244 (address (getLocal \"depositor\" 245)) (value (getLocal \"newTokens\" 246))) (literal (mutez 0) 253) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 248) \"Some\" \"None\" 248) 253) (operations 253) 253) 253) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 256) 256) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"None\" (unit) -1) 257) (set (attr (data) \"savedState_depositor\" 196) (variant \"None\" (unit) -1) 258))) (getAdministrator True ((bind \"__s49\" ((set_type (first (params 108) 676) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 676) (contract \"address\") 676) (set (operations 676) (cons (transfer (getLocal \"__s49\" 676) (literal (mutez 0) 676) (second (params 108) 676) 108) (operations 676) 676) 676))) (getAllowance True ((bind \"__s50\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 676) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 676) \"spender\" 69) 69) 69))) (set_type (second (params 68) 676) (contract \"nat\") 676) (set (operations 676) (cons (transfer (getLocal \"__s50\" 676) (literal (mutez 0) 676) (second (params 68) 676) 68) (operations 676) 676) 676))) (getBalance True ((bind \"__s51\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 676) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 676) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 676) 65) \"balance\" 65) 65))) (set_type (second (params 60) 676) (contract \"nat\") 676) (set (operations 676) (cons (transfer (getLocal \"__s51\" 676) (literal (mutez 0) 676) (second (params 60) 676) 60) (operations 676) 676) 676))) (getTotalSupply True ((bind \"__s52\" ((set_type (first (params 72) 676) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 676) (contract \"nat\") 676) (set (operations 676) (cons (transfer (getLocal \"__s52\" 676) (literal (mutez 0) 676) (second (params 72) 676) 72) (operations 676) 676) 676))) (liquidate True ((set_type (params 149) \"address\" 150) (set (operations 158) (cons (transfer (params 149) (literal (mutez 0) 158) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 155) 153) \"Some\" \"None\" 153) 158) (operations 158) 158) 158) (set (operations 171) (cons (transfer (record 161 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (attr (data) \"rewardAmount\" 164))) (literal (mutez 0) 171) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 166) \"Some\" \"None\" 166) 171) (operations 171) 171) 171) (set (operations 179) (cons (transfer (unit) (literal (mutez 0) 179) (openVariant (contract \"liquidate\" \"unit\" (params 149) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 262) \"nat\" 263) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 266) 266) (literal (string \"bad state\") 266) 266) (set (attr (data) \"state\" 191) (literal (intOrNat 2) 269) 269) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"Some\" (params 262) 270) 270) (set (attr (data) \"savedState_redeemer\" 271) (variant \"Some\" (sender) 271) 271) (set (operations 280) (cons (transfer (tuple 280 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 274)) (literal (mutez 0) 280) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 275) \"Some\" \"None\" 275) 280) (operations 280) 280) 280))) (redeem_callback True ((set_type (params 284) \"nat\" 285) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 288) (literal (string \"bad sender\") 288) 288) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 2) 291) 291) (literal (string \"bad state\") 291) 291) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 270) \"Some\" \"None\" 294) 294) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 295) (literal (intOrNat 1000000000000000000) 295) 295) (attr (data) \"totalSupply\" 96) 295) 295) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 296) (params 284) 296) (literal (intOrNat 1000000000000000000) 296) 296) 296) (set (attr (data) \"underlyingBalance\" 227) (openVariant (isNat (sub (params 284) (getLocal \"tokensToReceive\" 299) 299) 299) \"Some\" \"None\" 299) 299) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 271) \"Some\" \"None\" 302) 302) (set (operations 312) (cons (transfer (record 303 (address (getLocal \"redeemer\" 304)) (value (getLocal \"tokensToRedeem\" 305))) (literal (mutez 0) 312) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 307) \"Some\" \"None\" 307) 312) (operations 312) 312) 312) (set (operations 325) (cons (transfer (record 315 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 317)) (value (getLocal \"tokensToReceive\" 318))) (literal (mutez 0) 325) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 320) \"Some\" \"None\" 320) 325) (operations 325) 325) 325) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 328) 328) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"None\" (unit) -1) 329) (set (attr (data) \"savedState_redeemer\" 271) (variant \"None\" (unit) -1) 330))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 338) \"unit\" 339) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 342) 342) (literal (string \"bad state\") 342) 342) (set (attr (data) \"state\" 191) (literal (intOrNat 1) 345) 345) (set (operations 354) (cons (transfer (tuple 354 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 348)) (literal (mutez 0) 354) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 349) \"Some\" \"None\" 349) 354) (operations 354) 354) 354))) (updateBalance_callback True ((set_type (params 358) \"nat\" 359) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 362) (literal (string \"bad sender\") 362) 362) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 1) 365) 365) (literal (string \"bad state\") 365) 365) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 368) 368) (set (attr (data) \"underlyingBalance\" 227) (params 358) 371))) (updateContractMetadata True ((set_type (params 411) (tuple \"string\" \"bytes\") 412) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 414) (literal (string \"not governor\") 414) 414) (set (getItem (attr (data) \"metadata\" 418) (first (params 411) 416) 418) (second (params 411) 417) 418))) (updateDexterAddress True ((set_type (params 395) \"address\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"dexterAddress\" 132) (params 395) 399))) (updateGovernorAddress True ((set_type (params 379) \"address\" 380) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 382) (literal (string \"not governor\") 382) 382) (set (attr (data) \"governorAddress\" 414) (params 379) 383))) (updateOvenRegistryAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"ovenRegistryAddress\" 155) (params 403) 407))) (updateRewardAmount True ((set_type (params 387) \"nat\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"rewardAmount\" 164) (params 387) 391))) (updateTokenMetadata True ((set_type (params 422) (tuple \"nat\" (map \"string\" \"bytes\")) 423) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 425) (literal (string \"not governor\") 425) 425) (set (getItem (attr (data) \"token_metadata\" 426) (literal (intOrNat 0) 426) 426) (params 422) 426))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 676, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 82)", "dynamic": false, "message": "updateGovernorAddress", "params": "(literal (address \"tz1eibLoCDot2w2QWyR7kMoVDTto9fYs2mnJ\") 12)", "line_no": 679, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 679)", "show": true, "valid": "(literal (bool True) 679)", "voting_powers": "(map 679 )", "export": true}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 0 82) 679) \"governorAddress\" 684) (literal (address \"tz1eibLoCDot2w2QWyR7kMoVDTto9fYs2mnJ\") 12) 684)", "line_no": 684}], "decompile": false, "kind": "test"}, {"shortname": "liquidate_-_fails_if_given_address_is_not_oven", "longname": "liquidate - fails if given address is not oven", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 123) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s53\" ((set_type (first (params 89) 698) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 698) (contract \"address\") 698) (set (operations 698) (cons (transfer (getLocal \"__s53\" 698) (literal (mutez 0) 698) (second (params 89) 698) 89) (operations 698) 698) 698))) (getAllowance True ((bind \"__s54\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 698) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 698) \"spender\" 46) 46) 46))) (set_type (second (params 45) 698) (contract \"nat\") 698) (set (operations 698) (cons (transfer (getLocal \"__s54\" 698) (literal (mutez 0) 698) (second (params 45) 698) 45) (operations 698) 698) 698))) (getBalance True ((bind \"__s55\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 698) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 698) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 698) 42) \"balance\" 42) 42))) (set_type (second (params 37) 698) (contract \"nat\") 698) (set (operations 698) (cons (transfer (getLocal \"__s55\" 698) (literal (mutez 0) 698) (second (params 37) 698) 37) (operations 698) 698) 698))) (getTotalSupply True ((bind \"__s56\" ((set_type (first (params 49) 698) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 698) (contract \"nat\") 698) (set (operations 698) (cons (transfer (getLocal \"__s56\" 698) (literal (mutez 0) 698) (second (params 49) 698) 49) (operations 698) 698) 698))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 698, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 9)", "export": "(storage (record 9 (isOvenValue (literal (bool False) 9)))\nstorage_type (())\nmessages ((default True ((set_type (params 14) \"unit\" 15))) (isOven True ((set_type (params 20) \"address\" 21) (verify (attr (data) \"isOvenValue\" 23) (literal (string \"NOT OVEN\") 23) 23))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 704, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 2 82)", "export": "(storage (record 82 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 86 ) (bigmap (unknown 124) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 86)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 73 ((literal (string \"\") 711) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 75)) ((literal (string \"data\") 711) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 72))) (bigmap \"string\" \"bytes\") 73)) (ovenRegistryAddress (literal (local-address (static_id 1 9)) 9)) (paused (literal (bool False) 82)) (rewardAmount (literal (intOrNat 1000000000000000000) 82)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 82)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 62 ((literal (nat 0) 49) (tuple 711 (literal (nat 0) 49) (type_annotation (map 51 ((literal (string \"name\") 711) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 53)) ((literal (string \"decimals\") 711) (literal (bytes \"0x3138\") 54)) ((literal (string \"symbol\") 711) (literal (bytes \"0x6465787465724c6b555344\") 55)) ((literal (string \"icon\") 711) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 56))) (map \"string\" \"bytes\") 51)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 62)) (totalSupply (literal (intOrNat 0) 82)) (underlyingBalance (literal (nat 0) 103)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 119) \"unit\" 120) (set (operations 135) (cons (transfer (tuple 135 (to_address (self) \"None\") (tuple 135 (literal (intOrNat 1) 135) (add_seconds (now) (literal (int 3600) 127) 127))) (balance) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 132) 130) \"Some\" \"None\" 130) 135) (operations 135) 135) 135) (set (operations 145) (cons (transfer (unit) (literal (mutez 0) 145) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 140) \"Some\" \"None\" 140) 145) (operations 145) 145) 145))) (deposit True ((set_type (params 187) \"nat\" 188) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 191) 191) (literal (string \"bad state\") 191) 191) (set (attr (data) \"state\" 191) (literal (intOrNat 3) 194) 194) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"Some\" (params 187) 195) 195) (set (attr (data) \"savedState_depositor\" 196) (variant \"Some\" (sender) 196) 196) (set (operations 205) (cons (transfer (tuple 205 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 199)) (literal (mutez 0) 205) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 200) \"Some\" \"None\" 200) 205) (operations 205) 205) 205))) (deposit_callback True ((set_type (params 209) \"nat\" 210) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 213) (literal (string \"bad sender\") 213) 213) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 3) 216) 216) (literal (string \"bad state\") 216) 216) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 195) \"Some\" \"None\" 219) 219) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 220) (literal (intOrNat 1000000000000000000) 220) 220) 220) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 221) 221) ((defineLocal \"newUnderlyingBalance\" (add (params 209) (getLocal \"tokensToDeposit\" 222) 222) 222) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 223) (literal (intOrNat 1000000000000000000) 223) 223) (getLocal \"newUnderlyingBalance\" 223) 223) 223) (set (getLocal \"newTokens\" 711) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 224) (attr (data) \"totalSupply\" 96) 224) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 224) (getLocal \"fractionOfPoolOwnership\" 224) 224) 224) \"Some\" \"None\" 224) 224) 224)) 221) (set (attr (data) \"underlyingBalance\" 227) (add (params 209) (getLocal \"tokensToDeposit\" 227) 227) 227) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 196) \"Some\" \"None\" 230) 230) (set (operations 241) (cons (transfer (record 231 (from_ (getLocal \"depositor\" 232)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 234))) (literal (mutez 0) 241) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 236) \"Some\" \"None\" 236) 241) (operations 241) 241) 241) (set (operations 253) (cons (transfer (record 244 (address (getLocal \"depositor\" 245)) (value (getLocal \"newTokens\" 246))) (literal (mutez 0) 253) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 248) \"Some\" \"None\" 248) 253) (operations 253) 253) 253) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 256) 256) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"None\" (unit) -1) 257) (set (attr (data) \"savedState_depositor\" 196) (variant \"None\" (unit) -1) 258))) (getAdministrator True ((bind \"__s57\" ((set_type (first (params 108) 711) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 711) (contract \"address\") 711) (set (operations 711) (cons (transfer (getLocal \"__s57\" 711) (literal (mutez 0) 711) (second (params 108) 711) 108) (operations 711) 711) 711))) (getAllowance True ((bind \"__s58\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 711) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 711) \"spender\" 69) 69) 69))) (set_type (second (params 68) 711) (contract \"nat\") 711) (set (operations 711) (cons (transfer (getLocal \"__s58\" 711) (literal (mutez 0) 711) (second (params 68) 711) 68) (operations 711) 711) 711))) (getBalance True ((bind \"__s59\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 711) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 711) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 711) 65) \"balance\" 65) 65))) (set_type (second (params 60) 711) (contract \"nat\") 711) (set (operations 711) (cons (transfer (getLocal \"__s59\" 711) (literal (mutez 0) 711) (second (params 60) 711) 60) (operations 711) 711) 711))) (getTotalSupply True ((bind \"__s60\" ((set_type (first (params 72) 711) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 711) (contract \"nat\") 711) (set (operations 711) (cons (transfer (getLocal \"__s60\" 711) (literal (mutez 0) 711) (second (params 72) 711) 72) (operations 711) 711) 711))) (liquidate True ((set_type (params 149) \"address\" 150) (set (operations 158) (cons (transfer (params 149) (literal (mutez 0) 158) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 155) 153) \"Some\" \"None\" 153) 158) (operations 158) 158) 158) (set (operations 171) (cons (transfer (record 161 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (attr (data) \"rewardAmount\" 164))) (literal (mutez 0) 171) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 166) \"Some\" \"None\" 166) 171) (operations 171) 171) 171) (set (operations 179) (cons (transfer (unit) (literal (mutez 0) 179) (openVariant (contract \"liquidate\" \"unit\" (params 149) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 262) \"nat\" 263) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 266) 266) (literal (string \"bad state\") 266) 266) (set (attr (data) \"state\" 191) (literal (intOrNat 2) 269) 269) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"Some\" (params 262) 270) 270) (set (attr (data) \"savedState_redeemer\" 271) (variant \"Some\" (sender) 271) 271) (set (operations 280) (cons (transfer (tuple 280 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 274)) (literal (mutez 0) 280) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 275) \"Some\" \"None\" 275) 280) (operations 280) 280) 280))) (redeem_callback True ((set_type (params 284) \"nat\" 285) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 288) (literal (string \"bad sender\") 288) 288) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 2) 291) 291) (literal (string \"bad state\") 291) 291) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 270) \"Some\" \"None\" 294) 294) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 295) (literal (intOrNat 1000000000000000000) 295) 295) (attr (data) \"totalSupply\" 96) 295) 295) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 296) (params 284) 296) (literal (intOrNat 1000000000000000000) 296) 296) 296) (set (attr (data) \"underlyingBalance\" 227) (openVariant (isNat (sub (params 284) (getLocal \"tokensToReceive\" 299) 299) 299) \"Some\" \"None\" 299) 299) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 271) \"Some\" \"None\" 302) 302) (set (operations 312) (cons (transfer (record 303 (address (getLocal \"redeemer\" 304)) (value (getLocal \"tokensToRedeem\" 305))) (literal (mutez 0) 312) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 307) \"Some\" \"None\" 307) 312) (operations 312) 312) 312) (set (operations 325) (cons (transfer (record 315 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 317)) (value (getLocal \"tokensToReceive\" 318))) (literal (mutez 0) 325) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 320) \"Some\" \"None\" 320) 325) (operations 325) 325) 325) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 328) 328) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"None\" (unit) -1) 329) (set (attr (data) \"savedState_redeemer\" 271) (variant \"None\" (unit) -1) 330))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 338) \"unit\" 339) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 342) 342) (literal (string \"bad state\") 342) 342) (set (attr (data) \"state\" 191) (literal (intOrNat 1) 345) 345) (set (operations 354) (cons (transfer (tuple 354 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 348)) (literal (mutez 0) 354) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 349) \"Some\" \"None\" 349) 354) (operations 354) 354) 354))) (updateBalance_callback True ((set_type (params 358) \"nat\" 359) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 362) (literal (string \"bad sender\") 362) 362) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 1) 365) 365) (literal (string \"bad state\") 365) 365) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 368) 368) (set (attr (data) \"underlyingBalance\" 227) (params 358) 371))) (updateContractMetadata True ((set_type (params 411) (tuple \"string\" \"bytes\") 412) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 414) (literal (string \"not governor\") 414) 414) (set (getItem (attr (data) \"metadata\" 418) (first (params 411) 416) 418) (second (params 411) 417) 418))) (updateDexterAddress True ((set_type (params 395) \"address\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"dexterAddress\" 132) (params 395) 399))) (updateGovernorAddress True ((set_type (params 379) \"address\" 380) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 382) (literal (string \"not governor\") 382) 382) (set (attr (data) \"governorAddress\" 414) (params 379) 383))) (updateOvenRegistryAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"ovenRegistryAddress\" 155) (params 403) 407))) (updateRewardAmount True ((set_type (params 387) \"nat\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"rewardAmount\" 164) (params 387) 391))) (updateTokenMetadata True ((set_type (params 422) (tuple \"nat\" (map \"string\" \"bytes\")) 423) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 425) (literal (string \"not governor\") 425) 425) (set (getItem (attr (data) \"token_metadata\" 426) (literal (intOrNat 0) 426) 426) (params 422) 426))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 711, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 715 (address (literal (local-address (static_id 2 82)) 82)) (value (literal (nat 10000000000) 717)))", "line_no": 714, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 714)", "show": true, "valid": "(literal (bool True) 714)", "voting_powers": "(map 714 )", "export": true}, {"action": "newContract", "id": "(static_id 3 8)", "export": "(storage (record 8 (isLiquidated (literal (bool False) 8)))\nstorage_type (())\nmessages ((default True ((set_type (params 13) \"unit\" 14))) (liquidate True ((set_type (params 19) \"unit\" 20) (set (attr (data) \"isLiquidated\" 21) (literal (bool True) 21) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 725, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 2 82)", "dynamic": false, "message": "liquidate", "params": "(literal (local-address (static_id 3 8)) 8)", "line_no": 729, "title": "", "messageClass": "", "source": "none", "sender": "none", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 729)", "show": true, "valid": "(literal (bool False) 729)", "voting_powers": "(map 729 )", "export": true}], "decompile": false, "kind": "test"}, {"shortname": "liquidate_-_rewards_sender", "longname": "liquidate - rewards sender", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 134) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s61\" ((set_type (first (params 89) 741) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 741) (contract \"address\") 741) (set (operations 741) (cons (transfer (getLocal \"__s61\" 741) (literal (mutez 0) 741) (second (params 89) 741) 89) (operations 741) 741) 741))) (getAllowance True ((bind \"__s62\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 741) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 741) \"spender\" 46) 46) 46))) (set_type (second (params 45) 741) (contract \"nat\") 741) (set (operations 741) (cons (transfer (getLocal \"__s62\" 741) (literal (mutez 0) 741) (second (params 45) 741) 45) (operations 741) 741) 741))) (getBalance True ((bind \"__s63\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 741) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 741) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 741) 42) \"balance\" 42) 42))) (set_type (second (params 37) 741) (contract \"nat\") 741) (set (operations 741) (cons (transfer (getLocal \"__s63\" 741) (literal (mutez 0) 741) (second (params 37) 741) 37) (operations 741) 741) 741))) (getTotalSupply True ((bind \"__s64\" ((set_type (first (params 49) 741) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 741) (contract \"nat\") 741) (set (operations 741) (cons (transfer (getLocal \"__s64\" 741) (literal (mutez 0) 741) (second (params 49) 741) 49) (operations 741) 741) 741))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 741, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 9)", "export": "(storage (record 9 (isOvenValue (literal (bool True) 9)))\nstorage_type (())\nmessages ((default True ((set_type (params 14) \"unit\" 15))) (isOven True ((set_type (params 20) \"address\" 21) (verify (attr (data) \"isOvenValue\" 23) (literal (string \"NOT OVEN\") 23) 23))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 747, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 2 82)", "export": "(storage (record 82 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 86 ) (bigmap (unknown 135) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 86)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 73 ((literal (string \"\") 756) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 75)) ((literal (string \"data\") 756) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 72))) (bigmap \"string\" \"bytes\") 73)) (ovenRegistryAddress (literal (local-address (static_id 1 9)) 9)) (paused (literal (bool False) 82)) (rewardAmount (literal (nat 123) 750)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 82)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 62 ((literal (nat 0) 49) (tuple 756 (literal (nat 0) 49) (type_annotation (map 51 ((literal (string \"name\") 756) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 53)) ((literal (string \"decimals\") 756) (literal (bytes \"0x3138\") 54)) ((literal (string \"symbol\") 756) (literal (bytes \"0x6465787465724c6b555344\") 55)) ((literal (string \"icon\") 756) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 56))) (map \"string\" \"bytes\") 51)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 62)) (totalSupply (literal (intOrNat 0) 82)) (underlyingBalance (literal (nat 0) 103)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 119) \"unit\" 120) (set (operations 135) (cons (transfer (tuple 135 (to_address (self) \"None\") (tuple 135 (literal (intOrNat 1) 135) (add_seconds (now) (literal (int 3600) 127) 127))) (balance) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 132) 130) \"Some\" \"None\" 130) 135) (operations 135) 135) 135) (set (operations 145) (cons (transfer (unit) (literal (mutez 0) 145) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 140) \"Some\" \"None\" 140) 145) (operations 145) 145) 145))) (deposit True ((set_type (params 187) \"nat\" 188) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 191) 191) (literal (string \"bad state\") 191) 191) (set (attr (data) \"state\" 191) (literal (intOrNat 3) 194) 194) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"Some\" (params 187) 195) 195) (set (attr (data) \"savedState_depositor\" 196) (variant \"Some\" (sender) 196) 196) (set (operations 205) (cons (transfer (tuple 205 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 199)) (literal (mutez 0) 205) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 200) \"Some\" \"None\" 200) 205) (operations 205) 205) 205))) (deposit_callback True ((set_type (params 209) \"nat\" 210) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 213) (literal (string \"bad sender\") 213) 213) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 3) 216) 216) (literal (string \"bad state\") 216) 216) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 195) \"Some\" \"None\" 219) 219) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 220) (literal (intOrNat 1000000000000000000) 220) 220) 220) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 221) 221) ((defineLocal \"newUnderlyingBalance\" (add (params 209) (getLocal \"tokensToDeposit\" 222) 222) 222) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 223) (literal (intOrNat 1000000000000000000) 223) 223) (getLocal \"newUnderlyingBalance\" 223) 223) 223) (set (getLocal \"newTokens\" 756) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 224) (attr (data) \"totalSupply\" 96) 224) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 224) (getLocal \"fractionOfPoolOwnership\" 224) 224) 224) \"Some\" \"None\" 224) 224) 224)) 221) (set (attr (data) \"underlyingBalance\" 227) (add (params 209) (getLocal \"tokensToDeposit\" 227) 227) 227) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 196) \"Some\" \"None\" 230) 230) (set (operations 241) (cons (transfer (record 231 (from_ (getLocal \"depositor\" 232)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 234))) (literal (mutez 0) 241) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 236) \"Some\" \"None\" 236) 241) (operations 241) 241) 241) (set (operations 253) (cons (transfer (record 244 (address (getLocal \"depositor\" 245)) (value (getLocal \"newTokens\" 246))) (literal (mutez 0) 253) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 248) \"Some\" \"None\" 248) 253) (operations 253) 253) 253) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 256) 256) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"None\" (unit) -1) 257) (set (attr (data) \"savedState_depositor\" 196) (variant \"None\" (unit) -1) 258))) (getAdministrator True ((bind \"__s65\" ((set_type (first (params 108) 756) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 756) (contract \"address\") 756) (set (operations 756) (cons (transfer (getLocal \"__s65\" 756) (literal (mutez 0) 756) (second (params 108) 756) 108) (operations 756) 756) 756))) (getAllowance True ((bind \"__s66\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 756) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 756) \"spender\" 69) 69) 69))) (set_type (second (params 68) 756) (contract \"nat\") 756) (set (operations 756) (cons (transfer (getLocal \"__s66\" 756) (literal (mutez 0) 756) (second (params 68) 756) 68) (operations 756) 756) 756))) (getBalance True ((bind \"__s67\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 756) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 756) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 756) 65) \"balance\" 65) 65))) (set_type (second (params 60) 756) (contract \"nat\") 756) (set (operations 756) (cons (transfer (getLocal \"__s67\" 756) (literal (mutez 0) 756) (second (params 60) 756) 60) (operations 756) 756) 756))) (getTotalSupply True ((bind \"__s68\" ((set_type (first (params 72) 756) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 756) (contract \"nat\") 756) (set (operations 756) (cons (transfer (getLocal \"__s68\" 756) (literal (mutez 0) 756) (second (params 72) 756) 72) (operations 756) 756) 756))) (liquidate True ((set_type (params 149) \"address\" 150) (set (operations 158) (cons (transfer (params 149) (literal (mutez 0) 158) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 155) 153) \"Some\" \"None\" 153) 158) (operations 158) 158) 158) (set (operations 171) (cons (transfer (record 161 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (attr (data) \"rewardAmount\" 164))) (literal (mutez 0) 171) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 166) \"Some\" \"None\" 166) 171) (operations 171) 171) 171) (set (operations 179) (cons (transfer (unit) (literal (mutez 0) 179) (openVariant (contract \"liquidate\" \"unit\" (params 149) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 262) \"nat\" 263) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 266) 266) (literal (string \"bad state\") 266) 266) (set (attr (data) \"state\" 191) (literal (intOrNat 2) 269) 269) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"Some\" (params 262) 270) 270) (set (attr (data) \"savedState_redeemer\" 271) (variant \"Some\" (sender) 271) 271) (set (operations 280) (cons (transfer (tuple 280 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 274)) (literal (mutez 0) 280) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 275) \"Some\" \"None\" 275) 280) (operations 280) 280) 280))) (redeem_callback True ((set_type (params 284) \"nat\" 285) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 288) (literal (string \"bad sender\") 288) 288) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 2) 291) 291) (literal (string \"bad state\") 291) 291) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 270) \"Some\" \"None\" 294) 294) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 295) (literal (intOrNat 1000000000000000000) 295) 295) (attr (data) \"totalSupply\" 96) 295) 295) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 296) (params 284) 296) (literal (intOrNat 1000000000000000000) 296) 296) 296) (set (attr (data) \"underlyingBalance\" 227) (openVariant (isNat (sub (params 284) (getLocal \"tokensToReceive\" 299) 299) 299) \"Some\" \"None\" 299) 299) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 271) \"Some\" \"None\" 302) 302) (set (operations 312) (cons (transfer (record 303 (address (getLocal \"redeemer\" 304)) (value (getLocal \"tokensToRedeem\" 305))) (literal (mutez 0) 312) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 307) \"Some\" \"None\" 307) 312) (operations 312) 312) 312) (set (operations 325) (cons (transfer (record 315 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 317)) (value (getLocal \"tokensToReceive\" 318))) (literal (mutez 0) 325) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 320) \"Some\" \"None\" 320) 325) (operations 325) 325) 325) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 328) 328) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"None\" (unit) -1) 329) (set (attr (data) \"savedState_redeemer\" 271) (variant \"None\" (unit) -1) 330))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 338) \"unit\" 339) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 342) 342) (literal (string \"bad state\") 342) 342) (set (attr (data) \"state\" 191) (literal (intOrNat 1) 345) 345) (set (operations 354) (cons (transfer (tuple 354 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 348)) (literal (mutez 0) 354) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 349) \"Some\" \"None\" 349) 354) (operations 354) 354) 354))) (updateBalance_callback True ((set_type (params 358) \"nat\" 359) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 362) (literal (string \"bad sender\") 362) 362) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 1) 365) 365) (literal (string \"bad state\") 365) 365) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 368) 368) (set (attr (data) \"underlyingBalance\" 227) (params 358) 371))) (updateContractMetadata True ((set_type (params 411) (tuple \"string\" \"bytes\") 412) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 414) (literal (string \"not governor\") 414) 414) (set (getItem (attr (data) \"metadata\" 418) (first (params 411) 416) 418) (second (params 411) 417) 418))) (updateDexterAddress True ((set_type (params 395) \"address\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"dexterAddress\" 132) (params 395) 399))) (updateGovernorAddress True ((set_type (params 379) \"address\" 380) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 382) (literal (string \"not governor\") 382) 382) (set (attr (data) \"governorAddress\" 414) (params 379) 383))) (updateOvenRegistryAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"ovenRegistryAddress\" 155) (params 403) 407))) (updateRewardAmount True ((set_type (params 387) \"nat\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"rewardAmount\" 164) (params 387) 391))) (updateTokenMetadata True ((set_type (params 422) (tuple \"nat\" (map \"string\" \"bytes\")) 423) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 425) (literal (string \"not governor\") 425) 425) (set (getItem (attr (data) \"token_metadata\" 426) (literal (intOrNat 0) 426) 426) (params 422) 426))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 756, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 760 (address (literal (local-address (static_id 2 82)) 82)) (value (literal (nat 10000000000) 762)))", "line_no": 759, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 759)", "show": true, "valid": "(literal (bool True) 759)", "voting_powers": "(map 759 )", "export": true}, {"action": "newContract", "id": "(static_id 3 8)", "export": "(storage (record 8 (isLiquidated (literal (bool False) 8)))\nstorage_type (())\nmessages ((default True ((set_type (params 13) \"unit\" 14))) (liquidate True ((set_type (params 19) \"unit\" 20) (set (attr (data) \"isLiquidated\" 21) (literal (bool True) 21) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 770, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 2 82)", "dynamic": false, "message": "liquidate", "params": "(literal (local-address (static_id 3 8)) 8)", "line_no": 773, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 773)", "show": true, "valid": "(literal (bool True) 773)", "voting_powers": "(map 773 )", "export": true}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 759) \"balances\" 778) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 778) \"balance\" 778) (literal (nat 123) 750) 778)", "line_no": 778}], "decompile": false, "kind": "test"}, {"shortname": "liquidate_-_liqudates_oven", "longname": "liquidate - liqudates oven", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 145) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s69\" ((set_type (first (params 89) 788) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 788) (contract \"address\") 788) (set (operations 788) (cons (transfer (getLocal \"__s69\" 788) (literal (mutez 0) 788) (second (params 89) 788) 89) (operations 788) 788) 788))) (getAllowance True ((bind \"__s70\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 788) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 788) \"spender\" 46) 46) 46))) (set_type (second (params 45) 788) (contract \"nat\") 788) (set (operations 788) (cons (transfer (getLocal \"__s70\" 788) (literal (mutez 0) 788) (second (params 45) 788) 45) (operations 788) 788) 788))) (getBalance True ((bind \"__s71\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 788) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 788) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 788) 42) \"balance\" 42) 42))) (set_type (second (params 37) 788) (contract \"nat\") 788) (set (operations 788) (cons (transfer (getLocal \"__s71\" 788) (literal (mutez 0) 788) (second (params 37) 788) 37) (operations 788) 788) 788))) (getTotalSupply True ((bind \"__s72\" ((set_type (first (params 49) 788) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 788) (contract \"nat\") 788) (set (operations 788) (cons (transfer (getLocal \"__s72\" 788) (literal (mutez 0) 788) (second (params 49) 788) 49) (operations 788) 788) 788))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 788, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 9)", "export": "(storage (record 9 (isOvenValue (literal (bool True) 9)))\nstorage_type (())\nmessages ((default True ((set_type (params 14) \"unit\" 15))) (isOven True ((set_type (params 20) \"address\" 21) (verify (attr (data) \"isOvenValue\" 23) (literal (string \"NOT OVEN\") 23) 23))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 794, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 2 82)", "export": "(storage (record 82 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 86 ) (bigmap (unknown 146) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 86)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 73 ((literal (string \"\") 803) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 75)) ((literal (string \"data\") 803) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 72))) (bigmap \"string\" \"bytes\") 73)) (ovenRegistryAddress (literal (local-address (static_id 1 9)) 9)) (paused (literal (bool False) 82)) (rewardAmount (literal (nat 123) 797)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 82)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 62 ((literal (nat 0) 49) (tuple 803 (literal (nat 0) 49) (type_annotation (map 51 ((literal (string \"name\") 803) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 53)) ((literal (string \"decimals\") 803) (literal (bytes \"0x3138\") 54)) ((literal (string \"symbol\") 803) (literal (bytes \"0x6465787465724c6b555344\") 55)) ((literal (string \"icon\") 803) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 56))) (map \"string\" \"bytes\") 51)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 62)) (totalSupply (literal (intOrNat 0) 82)) (underlyingBalance (literal (nat 0) 103)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 119) \"unit\" 120) (set (operations 135) (cons (transfer (tuple 135 (to_address (self) \"None\") (tuple 135 (literal (intOrNat 1) 135) (add_seconds (now) (literal (int 3600) 127) 127))) (balance) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 132) 130) \"Some\" \"None\" 130) 135) (operations 135) 135) 135) (set (operations 145) (cons (transfer (unit) (literal (mutez 0) 145) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 140) \"Some\" \"None\" 140) 145) (operations 145) 145) 145))) (deposit True ((set_type (params 187) \"nat\" 188) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 191) 191) (literal (string \"bad state\") 191) 191) (set (attr (data) \"state\" 191) (literal (intOrNat 3) 194) 194) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"Some\" (params 187) 195) 195) (set (attr (data) \"savedState_depositor\" 196) (variant \"Some\" (sender) 196) 196) (set (operations 205) (cons (transfer (tuple 205 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 199)) (literal (mutez 0) 205) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 200) \"Some\" \"None\" 200) 205) (operations 205) 205) 205))) (deposit_callback True ((set_type (params 209) \"nat\" 210) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 213) (literal (string \"bad sender\") 213) 213) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 3) 216) 216) (literal (string \"bad state\") 216) 216) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 195) \"Some\" \"None\" 219) 219) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 220) (literal (intOrNat 1000000000000000000) 220) 220) 220) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 221) 221) ((defineLocal \"newUnderlyingBalance\" (add (params 209) (getLocal \"tokensToDeposit\" 222) 222) 222) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 223) (literal (intOrNat 1000000000000000000) 223) 223) (getLocal \"newUnderlyingBalance\" 223) 223) 223) (set (getLocal \"newTokens\" 803) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 224) (attr (data) \"totalSupply\" 96) 224) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 224) (getLocal \"fractionOfPoolOwnership\" 224) 224) 224) \"Some\" \"None\" 224) 224) 224)) 221) (set (attr (data) \"underlyingBalance\" 227) (add (params 209) (getLocal \"tokensToDeposit\" 227) 227) 227) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 196) \"Some\" \"None\" 230) 230) (set (operations 241) (cons (transfer (record 231 (from_ (getLocal \"depositor\" 232)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 234))) (literal (mutez 0) 241) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 236) \"Some\" \"None\" 236) 241) (operations 241) 241) 241) (set (operations 253) (cons (transfer (record 244 (address (getLocal \"depositor\" 245)) (value (getLocal \"newTokens\" 246))) (literal (mutez 0) 253) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 248) \"Some\" \"None\" 248) 253) (operations 253) 253) 253) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 256) 256) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"None\" (unit) -1) 257) (set (attr (data) \"savedState_depositor\" 196) (variant \"None\" (unit) -1) 258))) (getAdministrator True ((bind \"__s73\" ((set_type (first (params 108) 803) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 803) (contract \"address\") 803) (set (operations 803) (cons (transfer (getLocal \"__s73\" 803) (literal (mutez 0) 803) (second (params 108) 803) 108) (operations 803) 803) 803))) (getAllowance True ((bind \"__s74\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 803) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 803) \"spender\" 69) 69) 69))) (set_type (second (params 68) 803) (contract \"nat\") 803) (set (operations 803) (cons (transfer (getLocal \"__s74\" 803) (literal (mutez 0) 803) (second (params 68) 803) 68) (operations 803) 803) 803))) (getBalance True ((bind \"__s75\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 803) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 803) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 803) 65) \"balance\" 65) 65))) (set_type (second (params 60) 803) (contract \"nat\") 803) (set (operations 803) (cons (transfer (getLocal \"__s75\" 803) (literal (mutez 0) 803) (second (params 60) 803) 60) (operations 803) 803) 803))) (getTotalSupply True ((bind \"__s76\" ((set_type (first (params 72) 803) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 803) (contract \"nat\") 803) (set (operations 803) (cons (transfer (getLocal \"__s76\" 803) (literal (mutez 0) 803) (second (params 72) 803) 72) (operations 803) 803) 803))) (liquidate True ((set_type (params 149) \"address\" 150) (set (operations 158) (cons (transfer (params 149) (literal (mutez 0) 158) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 155) 153) \"Some\" \"None\" 153) 158) (operations 158) 158) 158) (set (operations 171) (cons (transfer (record 161 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (attr (data) \"rewardAmount\" 164))) (literal (mutez 0) 171) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 166) \"Some\" \"None\" 166) 171) (operations 171) 171) 171) (set (operations 179) (cons (transfer (unit) (literal (mutez 0) 179) (openVariant (contract \"liquidate\" \"unit\" (params 149) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 262) \"nat\" 263) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 266) 266) (literal (string \"bad state\") 266) 266) (set (attr (data) \"state\" 191) (literal (intOrNat 2) 269) 269) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"Some\" (params 262) 270) 270) (set (attr (data) \"savedState_redeemer\" 271) (variant \"Some\" (sender) 271) 271) (set (operations 280) (cons (transfer (tuple 280 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 274)) (literal (mutez 0) 280) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 275) \"Some\" \"None\" 275) 280) (operations 280) 280) 280))) (redeem_callback True ((set_type (params 284) \"nat\" 285) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 288) (literal (string \"bad sender\") 288) 288) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 2) 291) 291) (literal (string \"bad state\") 291) 291) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 270) \"Some\" \"None\" 294) 294) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 295) (literal (intOrNat 1000000000000000000) 295) 295) (attr (data) \"totalSupply\" 96) 295) 295) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 296) (params 284) 296) (literal (intOrNat 1000000000000000000) 296) 296) 296) (set (attr (data) \"underlyingBalance\" 227) (openVariant (isNat (sub (params 284) (getLocal \"tokensToReceive\" 299) 299) 299) \"Some\" \"None\" 299) 299) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 271) \"Some\" \"None\" 302) 302) (set (operations 312) (cons (transfer (record 303 (address (getLocal \"redeemer\" 304)) (value (getLocal \"tokensToRedeem\" 305))) (literal (mutez 0) 312) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 307) \"Some\" \"None\" 307) 312) (operations 312) 312) 312) (set (operations 325) (cons (transfer (record 315 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 317)) (value (getLocal \"tokensToReceive\" 318))) (literal (mutez 0) 325) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 320) \"Some\" \"None\" 320) 325) (operations 325) 325) 325) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 328) 328) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"None\" (unit) -1) 329) (set (attr (data) \"savedState_redeemer\" 271) (variant \"None\" (unit) -1) 330))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 338) \"unit\" 339) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 342) 342) (literal (string \"bad state\") 342) 342) (set (attr (data) \"state\" 191) (literal (intOrNat 1) 345) 345) (set (operations 354) (cons (transfer (tuple 354 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 348)) (literal (mutez 0) 354) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 349) \"Some\" \"None\" 349) 354) (operations 354) 354) 354))) (updateBalance_callback True ((set_type (params 358) \"nat\" 359) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 362) (literal (string \"bad sender\") 362) 362) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 1) 365) 365) (literal (string \"bad state\") 365) 365) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 368) 368) (set (attr (data) \"underlyingBalance\" 227) (params 358) 371))) (updateContractMetadata True ((set_type (params 411) (tuple \"string\" \"bytes\") 412) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 414) (literal (string \"not governor\") 414) 414) (set (getItem (attr (data) \"metadata\" 418) (first (params 411) 416) 418) (second (params 411) 417) 418))) (updateDexterAddress True ((set_type (params 395) \"address\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"dexterAddress\" 132) (params 395) 399))) (updateGovernorAddress True ((set_type (params 379) \"address\" 380) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 382) (literal (string \"not governor\") 382) 382) (set (attr (data) \"governorAddress\" 414) (params 379) 383))) (updateOvenRegistryAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"ovenRegistryAddress\" 155) (params 403) 407))) (updateRewardAmount True ((set_type (params 387) \"nat\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"rewardAmount\" 164) (params 387) 391))) (updateTokenMetadata True ((set_type (params 422) (tuple \"nat\" (map \"string\" \"bytes\")) 423) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 425) (literal (string \"not governor\") 425) 425) (set (getItem (attr (data) \"token_metadata\" 426) (literal (intOrNat 0) 426) 426) (params 422) 426))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 803, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 807 (address (literal (local-address (static_id 2 82)) 82)) (value (literal (nat 10000000000) 809)))", "line_no": 806, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 806)", "show": true, "valid": "(literal (bool True) 806)", "voting_powers": "(map 806 )", "export": true}, {"action": "newContract", "id": "(static_id 3 8)", "export": "(storage (record 8 (isLiquidated (literal (bool False) 8)))\nstorage_type (())\nmessages ((default True ((set_type (params 13) \"unit\" 14))) (liquidate True ((set_type (params 19) \"unit\" 20) (set (attr (data) \"isLiquidated\" 21) (literal (bool True) 21) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 817, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 2 82)", "dynamic": false, "message": "liquidate", "params": "(literal (local-address (static_id 3 8)) 8)", "line_no": 820, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 820)", "show": true, "valid": "(literal (bool True) 820)", "voting_powers": "(map 820 )", "export": true}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 3 8) 817) \"isLiquidated\" 824) (literal (bool True) 824) 824)", "line_no": 824}], "decompile": false, "kind": "test"}, {"shortname": "updateBalance_-_updates_balance", "longname": "updateBalance - updates balance", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 156) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s77\" ((set_type (first (params 89) 838) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 838) (contract \"address\") 838) (set (operations 838) (cons (transfer (getLocal \"__s77\" 838) (literal (mutez 0) 838) (second (params 89) 838) 89) (operations 838) 838) 838))) (getAllowance True ((bind \"__s78\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 838) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 838) \"spender\" 46) 46) 46))) (set_type (second (params 45) 838) (contract \"nat\") 838) (set (operations 838) (cons (transfer (getLocal \"__s78\" 838) (literal (mutez 0) 838) (second (params 45) 838) 45) (operations 838) 838) 838))) (getBalance True ((bind \"__s79\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 838) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 838) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 838) 42) \"balance\" 42) 42))) (set_type (second (params 37) 838) (contract \"nat\") 838) (set (operations 838) (cons (transfer (getLocal \"__s79\" 838) (literal (mutez 0) 838) (second (params 37) 838) 37) (operations 838) 838) 838))) (getTotalSupply True ((bind \"__s80\" ((set_type (first (params 49) 838) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 838) (contract \"nat\") 838) (set (operations 838) (cons (transfer (getLocal \"__s80\" 838) (literal (mutez 0) 838) (second (params 49) 838) 49) (operations 838) 838) 838))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 838, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 82)", "export": "(storage (record 82 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 86 ) (bigmap (unknown 157) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 86)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 73 ((literal (string \"\") 844) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 75)) ((literal (string \"data\") 844) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 72))) (bigmap \"string\" \"bytes\") 73)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 82)) (rewardAmount (literal (intOrNat 1000000000000000000) 82)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 82)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 62 ((literal (nat 0) 49) (tuple 844 (literal (nat 0) 49) (type_annotation (map 51 ((literal (string \"name\") 844) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 53)) ((literal (string \"decimals\") 844) (literal (bytes \"0x3138\") 54)) ((literal (string \"symbol\") 844) (literal (bytes \"0x6465787465724c6b555344\") 55)) ((literal (string \"icon\") 844) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 56))) (map \"string\" \"bytes\") 51)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 62)) (totalSupply (literal (intOrNat 0) 82)) (underlyingBalance (literal (nat 0) 103)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 119) \"unit\" 120) (set (operations 135) (cons (transfer (tuple 135 (to_address (self) \"None\") (tuple 135 (literal (intOrNat 1) 135) (add_seconds (now) (literal (int 3600) 127) 127))) (balance) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 132) 130) \"Some\" \"None\" 130) 135) (operations 135) 135) 135) (set (operations 145) (cons (transfer (unit) (literal (mutez 0) 145) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 140) \"Some\" \"None\" 140) 145) (operations 145) 145) 145))) (deposit True ((set_type (params 187) \"nat\" 188) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 191) 191) (literal (string \"bad state\") 191) 191) (set (attr (data) \"state\" 191) (literal (intOrNat 3) 194) 194) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"Some\" (params 187) 195) 195) (set (attr (data) \"savedState_depositor\" 196) (variant \"Some\" (sender) 196) 196) (set (operations 205) (cons (transfer (tuple 205 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 199)) (literal (mutez 0) 205) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 200) \"Some\" \"None\" 200) 205) (operations 205) 205) 205))) (deposit_callback True ((set_type (params 209) \"nat\" 210) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 213) (literal (string \"bad sender\") 213) 213) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 3) 216) 216) (literal (string \"bad state\") 216) 216) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 195) \"Some\" \"None\" 219) 219) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 220) (literal (intOrNat 1000000000000000000) 220) 220) 220) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 221) 221) ((defineLocal \"newUnderlyingBalance\" (add (params 209) (getLocal \"tokensToDeposit\" 222) 222) 222) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 223) (literal (intOrNat 1000000000000000000) 223) 223) (getLocal \"newUnderlyingBalance\" 223) 223) 223) (set (getLocal \"newTokens\" 844) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 224) (attr (data) \"totalSupply\" 96) 224) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 224) (getLocal \"fractionOfPoolOwnership\" 224) 224) 224) \"Some\" \"None\" 224) 224) 224)) 221) (set (attr (data) \"underlyingBalance\" 227) (add (params 209) (getLocal \"tokensToDeposit\" 227) 227) 227) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 196) \"Some\" \"None\" 230) 230) (set (operations 241) (cons (transfer (record 231 (from_ (getLocal \"depositor\" 232)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 234))) (literal (mutez 0) 241) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 236) \"Some\" \"None\" 236) 241) (operations 241) 241) 241) (set (operations 253) (cons (transfer (record 244 (address (getLocal \"depositor\" 245)) (value (getLocal \"newTokens\" 246))) (literal (mutez 0) 253) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 248) \"Some\" \"None\" 248) 253) (operations 253) 253) 253) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 256) 256) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"None\" (unit) -1) 257) (set (attr (data) \"savedState_depositor\" 196) (variant \"None\" (unit) -1) 258))) (getAdministrator True ((bind \"__s81\" ((set_type (first (params 108) 844) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 844) (contract \"address\") 844) (set (operations 844) (cons (transfer (getLocal \"__s81\" 844) (literal (mutez 0) 844) (second (params 108) 844) 108) (operations 844) 844) 844))) (getAllowance True ((bind \"__s82\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 844) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 844) \"spender\" 69) 69) 69))) (set_type (second (params 68) 844) (contract \"nat\") 844) (set (operations 844) (cons (transfer (getLocal \"__s82\" 844) (literal (mutez 0) 844) (second (params 68) 844) 68) (operations 844) 844) 844))) (getBalance True ((bind \"__s83\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 844) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 844) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 844) 65) \"balance\" 65) 65))) (set_type (second (params 60) 844) (contract \"nat\") 844) (set (operations 844) (cons (transfer (getLocal \"__s83\" 844) (literal (mutez 0) 844) (second (params 60) 844) 60) (operations 844) 844) 844))) (getTotalSupply True ((bind \"__s84\" ((set_type (first (params 72) 844) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 844) (contract \"nat\") 844) (set (operations 844) (cons (transfer (getLocal \"__s84\" 844) (literal (mutez 0) 844) (second (params 72) 844) 72) (operations 844) 844) 844))) (liquidate True ((set_type (params 149) \"address\" 150) (set (operations 158) (cons (transfer (params 149) (literal (mutez 0) 158) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 155) 153) \"Some\" \"None\" 153) 158) (operations 158) 158) 158) (set (operations 171) (cons (transfer (record 161 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (attr (data) \"rewardAmount\" 164))) (literal (mutez 0) 171) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 166) \"Some\" \"None\" 166) 171) (operations 171) 171) 171) (set (operations 179) (cons (transfer (unit) (literal (mutez 0) 179) (openVariant (contract \"liquidate\" \"unit\" (params 149) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 262) \"nat\" 263) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 266) 266) (literal (string \"bad state\") 266) 266) (set (attr (data) \"state\" 191) (literal (intOrNat 2) 269) 269) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"Some\" (params 262) 270) 270) (set (attr (data) \"savedState_redeemer\" 271) (variant \"Some\" (sender) 271) 271) (set (operations 280) (cons (transfer (tuple 280 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 274)) (literal (mutez 0) 280) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 275) \"Some\" \"None\" 275) 280) (operations 280) 280) 280))) (redeem_callback True ((set_type (params 284) \"nat\" 285) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 288) (literal (string \"bad sender\") 288) 288) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 2) 291) 291) (literal (string \"bad state\") 291) 291) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 270) \"Some\" \"None\" 294) 294) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 295) (literal (intOrNat 1000000000000000000) 295) 295) (attr (data) \"totalSupply\" 96) 295) 295) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 296) (params 284) 296) (literal (intOrNat 1000000000000000000) 296) 296) 296) (set (attr (data) \"underlyingBalance\" 227) (openVariant (isNat (sub (params 284) (getLocal \"tokensToReceive\" 299) 299) 299) \"Some\" \"None\" 299) 299) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 271) \"Some\" \"None\" 302) 302) (set (operations 312) (cons (transfer (record 303 (address (getLocal \"redeemer\" 304)) (value (getLocal \"tokensToRedeem\" 305))) (literal (mutez 0) 312) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 307) \"Some\" \"None\" 307) 312) (operations 312) 312) 312) (set (operations 325) (cons (transfer (record 315 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 317)) (value (getLocal \"tokensToReceive\" 318))) (literal (mutez 0) 325) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 320) \"Some\" \"None\" 320) 325) (operations 325) 325) 325) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 328) 328) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"None\" (unit) -1) 329) (set (attr (data) \"savedState_redeemer\" 271) (variant \"None\" (unit) -1) 330))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 338) \"unit\" 339) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 342) 342) (literal (string \"bad state\") 342) 342) (set (attr (data) \"state\" 191) (literal (intOrNat 1) 345) 345) (set (operations 354) (cons (transfer (tuple 354 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 348)) (literal (mutez 0) 354) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 349) \"Some\" \"None\" 349) 354) (operations 354) 354) 354))) (updateBalance_callback True ((set_type (params 358) \"nat\" 359) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 362) (literal (string \"bad sender\") 362) 362) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 1) 365) 365) (literal (string \"bad state\") 365) 365) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 368) 368) (set (attr (data) \"underlyingBalance\" 227) (params 358) 371))) (updateContractMetadata True ((set_type (params 411) (tuple \"string\" \"bytes\") 412) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 414) (literal (string \"not governor\") 414) 414) (set (getItem (attr (data) \"metadata\" 418) (first (params 411) 416) 418) (second (params 411) 417) 418))) (updateDexterAddress True ((set_type (params 395) \"address\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"dexterAddress\" 132) (params 395) 399))) (updateGovernorAddress True ((set_type (params 379) \"address\" 380) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 382) (literal (string \"not governor\") 382) 382) (set (attr (data) \"governorAddress\" 414) (params 379) 383))) (updateOvenRegistryAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"ovenRegistryAddress\" 155) (params 403) 407))) (updateRewardAmount True ((set_type (params 387) \"nat\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"rewardAmount\" 164) (params 387) 391))) (updateTokenMetadata True ((set_type (params 422) (tuple \"nat\" (map \"string\" \"bytes\")) 423) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 425) (literal (string \"not governor\") 425) 425) (set (getItem (attr (data) \"token_metadata\" 426) (literal (intOrNat 0) 426) 426) (params 422) 426))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 844, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 849 (address (literal (local-address (static_id 1 82)) 82)) (value (literal (intOrNat 10) 849)))", "line_no": 848, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 848)", "show": true, "valid": "(literal (bool True) 848)", "voting_powers": "(map 848 )", "export": true}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "updateBalance", "params": "(unit)", "line_no": 858, "title": "", "messageClass": "", "source": "none", "sender": "none", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 858)", "show": true, "valid": "(literal (bool True) 858)", "voting_powers": "(map 858 )", "export": true}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 82) 858) \"underlyingBalance\" 861) (literal (intOrNat 10) 861) 861)", "line_no": 861}], "decompile": false, "kind": "test"}, {"shortname": "updateBalance_-_fails_if_not_in_idle_state", "longname": "updateBalance - fails if not in idle state", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 167) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s85\" ((set_type (first (params 89) 871) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 871) (contract \"address\") 871) (set (operations 871) (cons (transfer (getLocal \"__s85\" 871) (literal (mutez 0) 871) (second (params 89) 871) 89) (operations 871) 871) 871))) (getAllowance True ((bind \"__s86\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 871) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 871) \"spender\" 46) 46) 46))) (set_type (second (params 45) 871) (contract \"nat\") 871) (set (operations 871) (cons (transfer (getLocal \"__s86\" 871) (literal (mutez 0) 871) (second (params 45) 871) 45) (operations 871) 871) 871))) (getBalance True ((bind \"__s87\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 871) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 871) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 871) 42) \"balance\" 42) 42))) (set_type (second (params 37) 871) (contract \"nat\") 871) (set (operations 871) (cons (transfer (getLocal \"__s87\" 871) (literal (mutez 0) 871) (second (params 37) 871) 37) (operations 871) 871) 871))) (getTotalSupply True ((bind \"__s88\" ((set_type (first (params 49) 871) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 871) (contract \"nat\") 871) (set (operations 871) (cons (transfer (getLocal \"__s88\" 871) (literal (mutez 0) 871) (second (params 49) 871) 49) (operations 871) 871) 871))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 871, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 82)", "export": "(storage (record 82 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 86 ) (bigmap (unknown 168) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 86)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 73 ((literal (string \"\") 878) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 75)) ((literal (string \"data\") 878) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 72))) (bigmap \"string\" \"bytes\") 73)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 82)) (rewardAmount (literal (intOrNat 1000000000000000000) 82)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 1) 82)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 62 ((literal (nat 0) 49) (tuple 878 (literal (nat 0) 49) (type_annotation (map 51 ((literal (string \"name\") 878) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 53)) ((literal (string \"decimals\") 878) (literal (bytes \"0x3138\") 54)) ((literal (string \"symbol\") 878) (literal (bytes \"0x6465787465724c6b555344\") 55)) ((literal (string \"icon\") 878) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 56))) (map \"string\" \"bytes\") 51)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 62)) (totalSupply (literal (intOrNat 0) 82)) (underlyingBalance (literal (nat 0) 103)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 119) \"unit\" 120) (set (operations 135) (cons (transfer (tuple 135 (to_address (self) \"None\") (tuple 135 (literal (intOrNat 1) 135) (add_seconds (now) (literal (int 3600) 127) 127))) (balance) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 132) 130) \"Some\" \"None\" 130) 135) (operations 135) 135) 135) (set (operations 145) (cons (transfer (unit) (literal (mutez 0) 145) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 140) \"Some\" \"None\" 140) 145) (operations 145) 145) 145))) (deposit True ((set_type (params 187) \"nat\" 188) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 191) 191) (literal (string \"bad state\") 191) 191) (set (attr (data) \"state\" 191) (literal (intOrNat 3) 194) 194) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"Some\" (params 187) 195) 195) (set (attr (data) \"savedState_depositor\" 196) (variant \"Some\" (sender) 196) 196) (set (operations 205) (cons (transfer (tuple 205 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 199)) (literal (mutez 0) 205) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 200) \"Some\" \"None\" 200) 205) (operations 205) 205) 205))) (deposit_callback True ((set_type (params 209) \"nat\" 210) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 213) (literal (string \"bad sender\") 213) 213) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 3) 216) 216) (literal (string \"bad state\") 216) 216) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 195) \"Some\" \"None\" 219) 219) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 220) (literal (intOrNat 1000000000000000000) 220) 220) 220) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 221) 221) ((defineLocal \"newUnderlyingBalance\" (add (params 209) (getLocal \"tokensToDeposit\" 222) 222) 222) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 223) (literal (intOrNat 1000000000000000000) 223) 223) (getLocal \"newUnderlyingBalance\" 223) 223) 223) (set (getLocal \"newTokens\" 878) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 224) (attr (data) \"totalSupply\" 96) 224) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 224) (getLocal \"fractionOfPoolOwnership\" 224) 224) 224) \"Some\" \"None\" 224) 224) 224)) 221) (set (attr (data) \"underlyingBalance\" 227) (add (params 209) (getLocal \"tokensToDeposit\" 227) 227) 227) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 196) \"Some\" \"None\" 230) 230) (set (operations 241) (cons (transfer (record 231 (from_ (getLocal \"depositor\" 232)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 234))) (literal (mutez 0) 241) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 236) \"Some\" \"None\" 236) 241) (operations 241) 241) 241) (set (operations 253) (cons (transfer (record 244 (address (getLocal \"depositor\" 245)) (value (getLocal \"newTokens\" 246))) (literal (mutez 0) 253) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 248) \"Some\" \"None\" 248) 253) (operations 253) 253) 253) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 256) 256) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"None\" (unit) -1) 257) (set (attr (data) \"savedState_depositor\" 196) (variant \"None\" (unit) -1) 258))) (getAdministrator True ((bind \"__s89\" ((set_type (first (params 108) 878) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 878) (contract \"address\") 878) (set (operations 878) (cons (transfer (getLocal \"__s89\" 878) (literal (mutez 0) 878) (second (params 108) 878) 108) (operations 878) 878) 878))) (getAllowance True ((bind \"__s90\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 878) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 878) \"spender\" 69) 69) 69))) (set_type (second (params 68) 878) (contract \"nat\") 878) (set (operations 878) (cons (transfer (getLocal \"__s90\" 878) (literal (mutez 0) 878) (second (params 68) 878) 68) (operations 878) 878) 878))) (getBalance True ((bind \"__s91\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 878) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 878) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 878) 65) \"balance\" 65) 65))) (set_type (second (params 60) 878) (contract \"nat\") 878) (set (operations 878) (cons (transfer (getLocal \"__s91\" 878) (literal (mutez 0) 878) (second (params 60) 878) 60) (operations 878) 878) 878))) (getTotalSupply True ((bind \"__s92\" ((set_type (first (params 72) 878) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 878) (contract \"nat\") 878) (set (operations 878) (cons (transfer (getLocal \"__s92\" 878) (literal (mutez 0) 878) (second (params 72) 878) 72) (operations 878) 878) 878))) (liquidate True ((set_type (params 149) \"address\" 150) (set (operations 158) (cons (transfer (params 149) (literal (mutez 0) 158) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 155) 153) \"Some\" \"None\" 153) 158) (operations 158) 158) 158) (set (operations 171) (cons (transfer (record 161 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (attr (data) \"rewardAmount\" 164))) (literal (mutez 0) 171) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 166) \"Some\" \"None\" 166) 171) (operations 171) 171) 171) (set (operations 179) (cons (transfer (unit) (literal (mutez 0) 179) (openVariant (contract \"liquidate\" \"unit\" (params 149) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 262) \"nat\" 263) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 266) 266) (literal (string \"bad state\") 266) 266) (set (attr (data) \"state\" 191) (literal (intOrNat 2) 269) 269) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"Some\" (params 262) 270) 270) (set (attr (data) \"savedState_redeemer\" 271) (variant \"Some\" (sender) 271) 271) (set (operations 280) (cons (transfer (tuple 280 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 274)) (literal (mutez 0) 280) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 275) \"Some\" \"None\" 275) 280) (operations 280) 280) 280))) (redeem_callback True ((set_type (params 284) \"nat\" 285) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 288) (literal (string \"bad sender\") 288) 288) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 2) 291) 291) (literal (string \"bad state\") 291) 291) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 270) \"Some\" \"None\" 294) 294) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 295) (literal (intOrNat 1000000000000000000) 295) 295) (attr (data) \"totalSupply\" 96) 295) 295) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 296) (params 284) 296) (literal (intOrNat 1000000000000000000) 296) 296) 296) (set (attr (data) \"underlyingBalance\" 227) (openVariant (isNat (sub (params 284) (getLocal \"tokensToReceive\" 299) 299) 299) \"Some\" \"None\" 299) 299) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 271) \"Some\" \"None\" 302) 302) (set (operations 312) (cons (transfer (record 303 (address (getLocal \"redeemer\" 304)) (value (getLocal \"tokensToRedeem\" 305))) (literal (mutez 0) 312) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 307) \"Some\" \"None\" 307) 312) (operations 312) 312) 312) (set (operations 325) (cons (transfer (record 315 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 317)) (value (getLocal \"tokensToReceive\" 318))) (literal (mutez 0) 325) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 320) \"Some\" \"None\" 320) 325) (operations 325) 325) 325) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 328) 328) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"None\" (unit) -1) 329) (set (attr (data) \"savedState_redeemer\" 271) (variant \"None\" (unit) -1) 330))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 338) \"unit\" 339) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 342) 342) (literal (string \"bad state\") 342) 342) (set (attr (data) \"state\" 191) (literal (intOrNat 1) 345) 345) (set (operations 354) (cons (transfer (tuple 354 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 348)) (literal (mutez 0) 354) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 349) \"Some\" \"None\" 349) 354) (operations 354) 354) 354))) (updateBalance_callback True ((set_type (params 358) \"nat\" 359) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 362) (literal (string \"bad sender\") 362) 362) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 1) 365) 365) (literal (string \"bad state\") 365) 365) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 368) 368) (set (attr (data) \"underlyingBalance\" 227) (params 358) 371))) (updateContractMetadata True ((set_type (params 411) (tuple \"string\" \"bytes\") 412) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 414) (literal (string \"not governor\") 414) 414) (set (getItem (attr (data) \"metadata\" 418) (first (params 411) 416) 418) (second (params 411) 417) 418))) (updateDexterAddress True ((set_type (params 395) \"address\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"dexterAddress\" 132) (params 395) 399))) (updateGovernorAddress True ((set_type (params 379) \"address\" 380) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 382) (literal (string \"not governor\") 382) 382) (set (attr (data) \"governorAddress\" 414) (params 379) 383))) (updateOvenRegistryAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"ovenRegistryAddress\" 155) (params 403) 407))) (updateRewardAmount True ((set_type (params 387) \"nat\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"rewardAmount\" 164) (params 387) 391))) (updateTokenMetadata True ((set_type (params 422) (tuple \"nat\" (map \"string\" \"bytes\")) 423) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 425) (literal (string \"not governor\") 425) 425) (set (getItem (attr (data) \"token_metadata\" 426) (literal (intOrNat 0) 426) 426) (params 422) 426))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 878, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 883 (address (literal (local-address (static_id 1 82)) 82)) (value (literal (intOrNat 10) 883)))", "line_no": 882, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 882)", "show": true, "valid": "(literal (bool True) 882)", "voting_powers": "(map 882 )", "export": true}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "updateBalance", "params": "(unit)", "line_no": 893, "title": "", "messageClass": "", "source": "none", "sender": "none", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 893)", "show": true, "valid": "(literal (bool False) 893)", "voting_powers": "(map 893 )", "export": true}], "decompile": false, "kind": "test"}, {"shortname": "updateBalance_callback_-_updates_balance", "longname": "updateBalance_callback - updates balance", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 178) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s93\" ((set_type (first (params 89) 909) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 909) (contract \"address\") 909) (set (operations 909) (cons (transfer (getLocal \"__s93\" 909) (literal (mutez 0) 909) (second (params 89) 909) 89) (operations 909) 909) 909))) (getAllowance True ((bind \"__s94\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 909) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 909) \"spender\" 46) 46) 46))) (set_type (second (params 45) 909) (contract \"nat\") 909) (set (operations 909) (cons (transfer (getLocal \"__s94\" 909) (literal (mutez 0) 909) (second (params 45) 909) 45) (operations 909) 909) 909))) (getBalance True ((bind \"__s95\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 909) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 909) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 909) 42) \"balance\" 42) 42))) (set_type (second (params 37) 909) (contract \"nat\") 909) (set (operations 909) (cons (transfer (getLocal \"__s95\" 909) (literal (mutez 0) 909) (second (params 37) 909) 37) (operations 909) 909) 909))) (getTotalSupply True ((bind \"__s96\" ((set_type (first (params 49) 909) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 909) (contract \"nat\") 909) (set (operations 909) (cons (transfer (getLocal \"__s96\" 909) (literal (mutez 0) 909) (second (params 49) 909) 49) (operations 909) 909) 909))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 909, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 82)", "export": "(storage (record 82 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 86 ) (bigmap (unknown 179) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 86)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 73 ((literal (string \"\") 916) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 75)) ((literal (string \"data\") 916) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 72))) (bigmap \"string\" \"bytes\") 73)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 82)) (rewardAmount (literal (intOrNat 1000000000000000000) 82)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 1) 82)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 62 ((literal (nat 0) 49) (tuple 916 (literal (nat 0) 49) (type_annotation (map 51 ((literal (string \"name\") 916) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 53)) ((literal (string \"decimals\") 916) (literal (bytes \"0x3138\") 54)) ((literal (string \"symbol\") 916) (literal (bytes \"0x6465787465724c6b555344\") 55)) ((literal (string \"icon\") 916) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 56))) (map \"string\" \"bytes\") 51)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 62)) (totalSupply (literal (intOrNat 0) 82)) (underlyingBalance (literal (nat 0) 103)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 119) \"unit\" 120) (set (operations 135) (cons (transfer (tuple 135 (to_address (self) \"None\") (tuple 135 (literal (intOrNat 1) 135) (add_seconds (now) (literal (int 3600) 127) 127))) (balance) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 132) 130) \"Some\" \"None\" 130) 135) (operations 135) 135) 135) (set (operations 145) (cons (transfer (unit) (literal (mutez 0) 145) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 140) \"Some\" \"None\" 140) 145) (operations 145) 145) 145))) (deposit True ((set_type (params 187) \"nat\" 188) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 191) 191) (literal (string \"bad state\") 191) 191) (set (attr (data) \"state\" 191) (literal (intOrNat 3) 194) 194) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"Some\" (params 187) 195) 195) (set (attr (data) \"savedState_depositor\" 196) (variant \"Some\" (sender) 196) 196) (set (operations 205) (cons (transfer (tuple 205 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 199)) (literal (mutez 0) 205) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 200) \"Some\" \"None\" 200) 205) (operations 205) 205) 205))) (deposit_callback True ((set_type (params 209) \"nat\" 210) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 213) (literal (string \"bad sender\") 213) 213) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 3) 216) 216) (literal (string \"bad state\") 216) 216) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 195) \"Some\" \"None\" 219) 219) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 220) (literal (intOrNat 1000000000000000000) 220) 220) 220) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 221) 221) ((defineLocal \"newUnderlyingBalance\" (add (params 209) (getLocal \"tokensToDeposit\" 222) 222) 222) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 223) (literal (intOrNat 1000000000000000000) 223) 223) (getLocal \"newUnderlyingBalance\" 223) 223) 223) (set (getLocal \"newTokens\" 916) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 224) (attr (data) \"totalSupply\" 96) 224) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 224) (getLocal \"fractionOfPoolOwnership\" 224) 224) 224) \"Some\" \"None\" 224) 224) 224)) 221) (set (attr (data) \"underlyingBalance\" 227) (add (params 209) (getLocal \"tokensToDeposit\" 227) 227) 227) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 196) \"Some\" \"None\" 230) 230) (set (operations 241) (cons (transfer (record 231 (from_ (getLocal \"depositor\" 232)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 234))) (literal (mutez 0) 241) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 236) \"Some\" \"None\" 236) 241) (operations 241) 241) 241) (set (operations 253) (cons (transfer (record 244 (address (getLocal \"depositor\" 245)) (value (getLocal \"newTokens\" 246))) (literal (mutez 0) 253) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 248) \"Some\" \"None\" 248) 253) (operations 253) 253) 253) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 256) 256) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"None\" (unit) -1) 257) (set (attr (data) \"savedState_depositor\" 196) (variant \"None\" (unit) -1) 258))) (getAdministrator True ((bind \"__s97\" ((set_type (first (params 108) 916) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 916) (contract \"address\") 916) (set (operations 916) (cons (transfer (getLocal \"__s97\" 916) (literal (mutez 0) 916) (second (params 108) 916) 108) (operations 916) 916) 916))) (getAllowance True ((bind \"__s98\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 916) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 916) \"spender\" 69) 69) 69))) (set_type (second (params 68) 916) (contract \"nat\") 916) (set (operations 916) (cons (transfer (getLocal \"__s98\" 916) (literal (mutez 0) 916) (second (params 68) 916) 68) (operations 916) 916) 916))) (getBalance True ((bind \"__s99\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 916) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 916) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 916) 65) \"balance\" 65) 65))) (set_type (second (params 60) 916) (contract \"nat\") 916) (set (operations 916) (cons (transfer (getLocal \"__s99\" 916) (literal (mutez 0) 916) (second (params 60) 916) 60) (operations 916) 916) 916))) (getTotalSupply True ((bind \"__s100\" ((set_type (first (params 72) 916) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 916) (contract \"nat\") 916) (set (operations 916) (cons (transfer (getLocal \"__s100\" 916) (literal (mutez 0) 916) (second (params 72) 916) 72) (operations 916) 916) 916))) (liquidate True ((set_type (params 149) \"address\" 150) (set (operations 158) (cons (transfer (params 149) (literal (mutez 0) 158) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 155) 153) \"Some\" \"None\" 153) 158) (operations 158) 158) 158) (set (operations 171) (cons (transfer (record 161 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (attr (data) \"rewardAmount\" 164))) (literal (mutez 0) 171) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 166) \"Some\" \"None\" 166) 171) (operations 171) 171) 171) (set (operations 179) (cons (transfer (unit) (literal (mutez 0) 179) (openVariant (contract \"liquidate\" \"unit\" (params 149) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 262) \"nat\" 263) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 266) 266) (literal (string \"bad state\") 266) 266) (set (attr (data) \"state\" 191) (literal (intOrNat 2) 269) 269) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"Some\" (params 262) 270) 270) (set (attr (data) \"savedState_redeemer\" 271) (variant \"Some\" (sender) 271) 271) (set (operations 280) (cons (transfer (tuple 280 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 274)) (literal (mutez 0) 280) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 275) \"Some\" \"None\" 275) 280) (operations 280) 280) 280))) (redeem_callback True ((set_type (params 284) \"nat\" 285) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 288) (literal (string \"bad sender\") 288) 288) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 2) 291) 291) (literal (string \"bad state\") 291) 291) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 270) \"Some\" \"None\" 294) 294) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 295) (literal (intOrNat 1000000000000000000) 295) 295) (attr (data) \"totalSupply\" 96) 295) 295) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 296) (params 284) 296) (literal (intOrNat 1000000000000000000) 296) 296) 296) (set (attr (data) \"underlyingBalance\" 227) (openVariant (isNat (sub (params 284) (getLocal \"tokensToReceive\" 299) 299) 299) \"Some\" \"None\" 299) 299) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 271) \"Some\" \"None\" 302) 302) (set (operations 312) (cons (transfer (record 303 (address (getLocal \"redeemer\" 304)) (value (getLocal \"tokensToRedeem\" 305))) (literal (mutez 0) 312) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 307) \"Some\" \"None\" 307) 312) (operations 312) 312) 312) (set (operations 325) (cons (transfer (record 315 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 317)) (value (getLocal \"tokensToReceive\" 318))) (literal (mutez 0) 325) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 320) \"Some\" \"None\" 320) 325) (operations 325) 325) 325) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 328) 328) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"None\" (unit) -1) 329) (set (attr (data) \"savedState_redeemer\" 271) (variant \"None\" (unit) -1) 330))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 338) \"unit\" 339) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 342) 342) (literal (string \"bad state\") 342) 342) (set (attr (data) \"state\" 191) (literal (intOrNat 1) 345) 345) (set (operations 354) (cons (transfer (tuple 354 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 348)) (literal (mutez 0) 354) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 349) \"Some\" \"None\" 349) 354) (operations 354) 354) 354))) (updateBalance_callback True ((set_type (params 358) \"nat\" 359) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 362) (literal (string \"bad sender\") 362) 362) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 1) 365) 365) (literal (string \"bad state\") 365) 365) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 368) 368) (set (attr (data) \"underlyingBalance\" 227) (params 358) 371))) (updateContractMetadata True ((set_type (params 411) (tuple \"string\" \"bytes\") 412) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 414) (literal (string \"not governor\") 414) 414) (set (getItem (attr (data) \"metadata\" 418) (first (params 411) 416) 418) (second (params 411) 417) 418))) (updateDexterAddress True ((set_type (params 395) \"address\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"dexterAddress\" 132) (params 395) 399))) (updateGovernorAddress True ((set_type (params 379) \"address\" 380) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 382) (literal (string \"not governor\") 382) 382) (set (attr (data) \"governorAddress\" 414) (params 379) 383))) (updateOvenRegistryAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"ovenRegistryAddress\" 155) (params 403) 407))) (updateRewardAmount True ((set_type (params 387) \"nat\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"rewardAmount\" 164) (params 387) 391))) (updateTokenMetadata True ((set_type (params 422) (tuple \"nat\" (map \"string\" \"bytes\")) 423) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 425) (literal (string \"not governor\") 425) 425) (set (getItem (attr (data) \"token_metadata\" 426) (literal (intOrNat 0) 426) 426) (params 422) 426))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 916, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "updateBalance_callback", "params": "(literal (nat 15) 919)", "line_no": 920, "title": "", "messageClass": "", "source": "none", "sender": "(literal (local-address (static_id 0 8)) 8)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 920)", "show": true, "valid": "(literal (bool True) 920)", "voting_powers": "(map 920 )", "export": true}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 82) 920) \"underlyingBalance\" 925) (literal (nat 15) 919) 925)", "line_no": 925}], "decompile": false, "kind": "test"}, {"shortname": "updateBalance_callback_-_fails_if_not_called_from_token_contract", "longname": "updateBalance_callback - fails if not called from token contract", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 189) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s101\" ((set_type (first (params 89) 935) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 935) (contract \"address\") 935) (set (operations 935) (cons (transfer (getLocal \"__s101\" 935) (literal (mutez 0) 935) (second (params 89) 935) 89) (operations 935) 935) 935))) (getAllowance True ((bind \"__s102\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 935) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 935) \"spender\" 46) 46) 46))) (set_type (second (params 45) 935) (contract \"nat\") 935) (set (operations 935) (cons (transfer (getLocal \"__s102\" 935) (literal (mutez 0) 935) (second (params 45) 935) 45) (operations 935) 935) 935))) (getBalance True ((bind \"__s103\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 935) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 935) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 935) 42) \"balance\" 42) 42))) (set_type (second (params 37) 935) (contract \"nat\") 935) (set (operations 935) (cons (transfer (getLocal \"__s103\" 935) (literal (mutez 0) 935) (second (params 37) 935) 37) (operations 935) 935) 935))) (getTotalSupply True ((bind \"__s104\" ((set_type (first (params 49) 935) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 935) (contract \"nat\") 935) (set (operations 935) (cons (transfer (getLocal \"__s104\" 935) (literal (mutez 0) 935) (second (params 49) 935) 49) (operations 935) 935) 935))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 935, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 82)", "export": "(storage (record 82 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 86 ) (bigmap (unknown 190) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 86)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 73 ((literal (string \"\") 942) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 75)) ((literal (string \"data\") 942) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 72))) (bigmap \"string\" \"bytes\") 73)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 82)) (rewardAmount (literal (intOrNat 1000000000000000000) 82)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 1) 82)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 62 ((literal (nat 0) 49) (tuple 942 (literal (nat 0) 49) (type_annotation (map 51 ((literal (string \"name\") 942) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 53)) ((literal (string \"decimals\") 942) (literal (bytes \"0x3138\") 54)) ((literal (string \"symbol\") 942) (literal (bytes \"0x6465787465724c6b555344\") 55)) ((literal (string \"icon\") 942) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 56))) (map \"string\" \"bytes\") 51)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 62)) (totalSupply (literal (intOrNat 0) 82)) (underlyingBalance (literal (nat 0) 103)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 119) \"unit\" 120) (set (operations 135) (cons (transfer (tuple 135 (to_address (self) \"None\") (tuple 135 (literal (intOrNat 1) 135) (add_seconds (now) (literal (int 3600) 127) 127))) (balance) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 132) 130) \"Some\" \"None\" 130) 135) (operations 135) 135) 135) (set (operations 145) (cons (transfer (unit) (literal (mutez 0) 145) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 140) \"Some\" \"None\" 140) 145) (operations 145) 145) 145))) (deposit True ((set_type (params 187) \"nat\" 188) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 191) 191) (literal (string \"bad state\") 191) 191) (set (attr (data) \"state\" 191) (literal (intOrNat 3) 194) 194) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"Some\" (params 187) 195) 195) (set (attr (data) \"savedState_depositor\" 196) (variant \"Some\" (sender) 196) 196) (set (operations 205) (cons (transfer (tuple 205 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 199)) (literal (mutez 0) 205) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 200) \"Some\" \"None\" 200) 205) (operations 205) 205) 205))) (deposit_callback True ((set_type (params 209) \"nat\" 210) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 213) (literal (string \"bad sender\") 213) 213) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 3) 216) 216) (literal (string \"bad state\") 216) 216) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 195) \"Some\" \"None\" 219) 219) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 220) (literal (intOrNat 1000000000000000000) 220) 220) 220) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 221) 221) ((defineLocal \"newUnderlyingBalance\" (add (params 209) (getLocal \"tokensToDeposit\" 222) 222) 222) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 223) (literal (intOrNat 1000000000000000000) 223) 223) (getLocal \"newUnderlyingBalance\" 223) 223) 223) (set (getLocal \"newTokens\" 942) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 224) (attr (data) \"totalSupply\" 96) 224) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 224) (getLocal \"fractionOfPoolOwnership\" 224) 224) 224) \"Some\" \"None\" 224) 224) 224)) 221) (set (attr (data) \"underlyingBalance\" 227) (add (params 209) (getLocal \"tokensToDeposit\" 227) 227) 227) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 196) \"Some\" \"None\" 230) 230) (set (operations 241) (cons (transfer (record 231 (from_ (getLocal \"depositor\" 232)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 234))) (literal (mutez 0) 241) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 236) \"Some\" \"None\" 236) 241) (operations 241) 241) 241) (set (operations 253) (cons (transfer (record 244 (address (getLocal \"depositor\" 245)) (value (getLocal \"newTokens\" 246))) (literal (mutez 0) 253) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 248) \"Some\" \"None\" 248) 253) (operations 253) 253) 253) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 256) 256) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"None\" (unit) -1) 257) (set (attr (data) \"savedState_depositor\" 196) (variant \"None\" (unit) -1) 258))) (getAdministrator True ((bind \"__s105\" ((set_type (first (params 108) 942) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 942) (contract \"address\") 942) (set (operations 942) (cons (transfer (getLocal \"__s105\" 942) (literal (mutez 0) 942) (second (params 108) 942) 108) (operations 942) 942) 942))) (getAllowance True ((bind \"__s106\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 942) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 942) \"spender\" 69) 69) 69))) (set_type (second (params 68) 942) (contract \"nat\") 942) (set (operations 942) (cons (transfer (getLocal \"__s106\" 942) (literal (mutez 0) 942) (second (params 68) 942) 68) (operations 942) 942) 942))) (getBalance True ((bind \"__s107\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 942) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 942) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 942) 65) \"balance\" 65) 65))) (set_type (second (params 60) 942) (contract \"nat\") 942) (set (operations 942) (cons (transfer (getLocal \"__s107\" 942) (literal (mutez 0) 942) (second (params 60) 942) 60) (operations 942) 942) 942))) (getTotalSupply True ((bind \"__s108\" ((set_type (first (params 72) 942) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 942) (contract \"nat\") 942) (set (operations 942) (cons (transfer (getLocal \"__s108\" 942) (literal (mutez 0) 942) (second (params 72) 942) 72) (operations 942) 942) 942))) (liquidate True ((set_type (params 149) \"address\" 150) (set (operations 158) (cons (transfer (params 149) (literal (mutez 0) 158) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 155) 153) \"Some\" \"None\" 153) 158) (operations 158) 158) 158) (set (operations 171) (cons (transfer (record 161 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (attr (data) \"rewardAmount\" 164))) (literal (mutez 0) 171) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 166) \"Some\" \"None\" 166) 171) (operations 171) 171) 171) (set (operations 179) (cons (transfer (unit) (literal (mutez 0) 179) (openVariant (contract \"liquidate\" \"unit\" (params 149) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 262) \"nat\" 263) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 266) 266) (literal (string \"bad state\") 266) 266) (set (attr (data) \"state\" 191) (literal (intOrNat 2) 269) 269) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"Some\" (params 262) 270) 270) (set (attr (data) \"savedState_redeemer\" 271) (variant \"Some\" (sender) 271) 271) (set (operations 280) (cons (transfer (tuple 280 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 274)) (literal (mutez 0) 280) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 275) \"Some\" \"None\" 275) 280) (operations 280) 280) 280))) (redeem_callback True ((set_type (params 284) \"nat\" 285) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 288) (literal (string \"bad sender\") 288) 288) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 2) 291) 291) (literal (string \"bad state\") 291) 291) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 270) \"Some\" \"None\" 294) 294) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 295) (literal (intOrNat 1000000000000000000) 295) 295) (attr (data) \"totalSupply\" 96) 295) 295) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 296) (params 284) 296) (literal (intOrNat 1000000000000000000) 296) 296) 296) (set (attr (data) \"underlyingBalance\" 227) (openVariant (isNat (sub (params 284) (getLocal \"tokensToReceive\" 299) 299) 299) \"Some\" \"None\" 299) 299) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 271) \"Some\" \"None\" 302) 302) (set (operations 312) (cons (transfer (record 303 (address (getLocal \"redeemer\" 304)) (value (getLocal \"tokensToRedeem\" 305))) (literal (mutez 0) 312) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 307) \"Some\" \"None\" 307) 312) (operations 312) 312) 312) (set (operations 325) (cons (transfer (record 315 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 317)) (value (getLocal \"tokensToReceive\" 318))) (literal (mutez 0) 325) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 320) \"Some\" \"None\" 320) 325) (operations 325) 325) 325) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 328) 328) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"None\" (unit) -1) 329) (set (attr (data) \"savedState_redeemer\" 271) (variant \"None\" (unit) -1) 330))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 338) \"unit\" 339) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 342) 342) (literal (string \"bad state\") 342) 342) (set (attr (data) \"state\" 191) (literal (intOrNat 1) 345) 345) (set (operations 354) (cons (transfer (tuple 354 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 348)) (literal (mutez 0) 354) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 349) \"Some\" \"None\" 349) 354) (operations 354) 354) 354))) (updateBalance_callback True ((set_type (params 358) \"nat\" 359) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 362) (literal (string \"bad sender\") 362) 362) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 1) 365) 365) (literal (string \"bad state\") 365) 365) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 368) 368) (set (attr (data) \"underlyingBalance\" 227) (params 358) 371))) (updateContractMetadata True ((set_type (params 411) (tuple \"string\" \"bytes\") 412) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 414) (literal (string \"not governor\") 414) 414) (set (getItem (attr (data) \"metadata\" 418) (first (params 411) 416) 418) (second (params 411) 417) 418))) (updateDexterAddress True ((set_type (params 395) \"address\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"dexterAddress\" 132) (params 395) 399))) (updateGovernorAddress True ((set_type (params 379) \"address\" 380) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 382) (literal (string \"not governor\") 382) 382) (set (attr (data) \"governorAddress\" 414) (params 379) 383))) (updateOvenRegistryAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"ovenRegistryAddress\" 155) (params 403) 407))) (updateRewardAmount True ((set_type (params 387) \"nat\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"rewardAmount\" 164) (params 387) 391))) (updateTokenMetadata True ((set_type (params 422) (tuple \"nat\" (map \"string\" \"bytes\")) 423) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 425) (literal (string \"not governor\") 425) 425) (set (getItem (attr (data) \"token_metadata\" 426) (literal (intOrNat 0) 426) 426) (params 422) 426))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 942, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "updateBalance_callback", "params": "(literal (nat 15) 945)", "line_no": 946, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1bTpviNnyx2PXsNmGpCQTMQsGoYordkUoA\") 26)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 946)", "show": true, "valid": "(literal (bool False) 946)", "voting_powers": "(map 946 )", "export": true}], "decompile": false, "kind": "test"}, {"shortname": "updateBalance_callback_-_fails_if_not_called_from_IDLE_state", "longname": "updateBalance_callback - fails if not called from IDLE state", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 200) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s109\" ((set_type (first (params 89) 959) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 959) (contract \"address\") 959) (set (operations 959) (cons (transfer (getLocal \"__s109\" 959) (literal (mutez 0) 959) (second (params 89) 959) 89) (operations 959) 959) 959))) (getAllowance True ((bind \"__s110\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 959) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 959) \"spender\" 46) 46) 46))) (set_type (second (params 45) 959) (contract \"nat\") 959) (set (operations 959) (cons (transfer (getLocal \"__s110\" 959) (literal (mutez 0) 959) (second (params 45) 959) 45) (operations 959) 959) 959))) (getBalance True ((bind \"__s111\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 959) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 959) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 959) 42) \"balance\" 42) 42))) (set_type (second (params 37) 959) (contract \"nat\") 959) (set (operations 959) (cons (transfer (getLocal \"__s111\" 959) (literal (mutez 0) 959) (second (params 37) 959) 37) (operations 959) 959) 959))) (getTotalSupply True ((bind \"__s112\" ((set_type (first (params 49) 959) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 959) (contract \"nat\") 959) (set (operations 959) (cons (transfer (getLocal \"__s112\" 959) (literal (mutez 0) 959) (second (params 49) 959) 49) (operations 959) 959) 959))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 959, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 82)", "export": "(storage (record 82 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 86 ) (bigmap (unknown 201) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 86)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 73 ((literal (string \"\") 966) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 75)) ((literal (string \"data\") 966) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 72))) (bigmap \"string\" \"bytes\") 73)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 82)) (rewardAmount (literal (intOrNat 1000000000000000000) 82)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 82)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 62 ((literal (nat 0) 49) (tuple 966 (literal (nat 0) 49) (type_annotation (map 51 ((literal (string \"name\") 966) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 53)) ((literal (string \"decimals\") 966) (literal (bytes \"0x3138\") 54)) ((literal (string \"symbol\") 966) (literal (bytes \"0x6465787465724c6b555344\") 55)) ((literal (string \"icon\") 966) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 56))) (map \"string\" \"bytes\") 51)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 62)) (totalSupply (literal (intOrNat 0) 82)) (underlyingBalance (literal (nat 0) 103)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 119) \"unit\" 120) (set (operations 135) (cons (transfer (tuple 135 (to_address (self) \"None\") (tuple 135 (literal (intOrNat 1) 135) (add_seconds (now) (literal (int 3600) 127) 127))) (balance) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 132) 130) \"Some\" \"None\" 130) 135) (operations 135) 135) 135) (set (operations 145) (cons (transfer (unit) (literal (mutez 0) 145) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 140) \"Some\" \"None\" 140) 145) (operations 145) 145) 145))) (deposit True ((set_type (params 187) \"nat\" 188) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 191) 191) (literal (string \"bad state\") 191) 191) (set (attr (data) \"state\" 191) (literal (intOrNat 3) 194) 194) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"Some\" (params 187) 195) 195) (set (attr (data) \"savedState_depositor\" 196) (variant \"Some\" (sender) 196) 196) (set (operations 205) (cons (transfer (tuple 205 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 199)) (literal (mutez 0) 205) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 200) \"Some\" \"None\" 200) 205) (operations 205) 205) 205))) (deposit_callback True ((set_type (params 209) \"nat\" 210) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 213) (literal (string \"bad sender\") 213) 213) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 3) 216) 216) (literal (string \"bad state\") 216) 216) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 195) \"Some\" \"None\" 219) 219) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 220) (literal (intOrNat 1000000000000000000) 220) 220) 220) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 221) 221) ((defineLocal \"newUnderlyingBalance\" (add (params 209) (getLocal \"tokensToDeposit\" 222) 222) 222) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 223) (literal (intOrNat 1000000000000000000) 223) 223) (getLocal \"newUnderlyingBalance\" 223) 223) 223) (set (getLocal \"newTokens\" 966) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 224) (attr (data) \"totalSupply\" 96) 224) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 224) (getLocal \"fractionOfPoolOwnership\" 224) 224) 224) \"Some\" \"None\" 224) 224) 224)) 221) (set (attr (data) \"underlyingBalance\" 227) (add (params 209) (getLocal \"tokensToDeposit\" 227) 227) 227) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 196) \"Some\" \"None\" 230) 230) (set (operations 241) (cons (transfer (record 231 (from_ (getLocal \"depositor\" 232)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 234))) (literal (mutez 0) 241) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 236) \"Some\" \"None\" 236) 241) (operations 241) 241) 241) (set (operations 253) (cons (transfer (record 244 (address (getLocal \"depositor\" 245)) (value (getLocal \"newTokens\" 246))) (literal (mutez 0) 253) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 248) \"Some\" \"None\" 248) 253) (operations 253) 253) 253) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 256) 256) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"None\" (unit) -1) 257) (set (attr (data) \"savedState_depositor\" 196) (variant \"None\" (unit) -1) 258))) (getAdministrator True ((bind \"__s113\" ((set_type (first (params 108) 966) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 966) (contract \"address\") 966) (set (operations 966) (cons (transfer (getLocal \"__s113\" 966) (literal (mutez 0) 966) (second (params 108) 966) 108) (operations 966) 966) 966))) (getAllowance True ((bind \"__s114\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 966) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 966) \"spender\" 69) 69) 69))) (set_type (second (params 68) 966) (contract \"nat\") 966) (set (operations 966) (cons (transfer (getLocal \"__s114\" 966) (literal (mutez 0) 966) (second (params 68) 966) 68) (operations 966) 966) 966))) (getBalance True ((bind \"__s115\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 966) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 966) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 966) 65) \"balance\" 65) 65))) (set_type (second (params 60) 966) (contract \"nat\") 966) (set (operations 966) (cons (transfer (getLocal \"__s115\" 966) (literal (mutez 0) 966) (second (params 60) 966) 60) (operations 966) 966) 966))) (getTotalSupply True ((bind \"__s116\" ((set_type (first (params 72) 966) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 966) (contract \"nat\") 966) (set (operations 966) (cons (transfer (getLocal \"__s116\" 966) (literal (mutez 0) 966) (second (params 72) 966) 72) (operations 966) 966) 966))) (liquidate True ((set_type (params 149) \"address\" 150) (set (operations 158) (cons (transfer (params 149) (literal (mutez 0) 158) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 155) 153) \"Some\" \"None\" 153) 158) (operations 158) 158) 158) (set (operations 171) (cons (transfer (record 161 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (attr (data) \"rewardAmount\" 164))) (literal (mutez 0) 171) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 166) \"Some\" \"None\" 166) 171) (operations 171) 171) 171) (set (operations 179) (cons (transfer (unit) (literal (mutez 0) 179) (openVariant (contract \"liquidate\" \"unit\" (params 149) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 262) \"nat\" 263) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 266) 266) (literal (string \"bad state\") 266) 266) (set (attr (data) \"state\" 191) (literal (intOrNat 2) 269) 269) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"Some\" (params 262) 270) 270) (set (attr (data) \"savedState_redeemer\" 271) (variant \"Some\" (sender) 271) 271) (set (operations 280) (cons (transfer (tuple 280 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 274)) (literal (mutez 0) 280) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 275) \"Some\" \"None\" 275) 280) (operations 280) 280) 280))) (redeem_callback True ((set_type (params 284) \"nat\" 285) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 288) (literal (string \"bad sender\") 288) 288) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 2) 291) 291) (literal (string \"bad state\") 291) 291) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 270) \"Some\" \"None\" 294) 294) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 295) (literal (intOrNat 1000000000000000000) 295) 295) (attr (data) \"totalSupply\" 96) 295) 295) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 296) (params 284) 296) (literal (intOrNat 1000000000000000000) 296) 296) 296) (set (attr (data) \"underlyingBalance\" 227) (openVariant (isNat (sub (params 284) (getLocal \"tokensToReceive\" 299) 299) 299) \"Some\" \"None\" 299) 299) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 271) \"Some\" \"None\" 302) 302) (set (operations 312) (cons (transfer (record 303 (address (getLocal \"redeemer\" 304)) (value (getLocal \"tokensToRedeem\" 305))) (literal (mutez 0) 312) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 307) \"Some\" \"None\" 307) 312) (operations 312) 312) 312) (set (operations 325) (cons (transfer (record 315 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 317)) (value (getLocal \"tokensToReceive\" 318))) (literal (mutez 0) 325) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 320) \"Some\" \"None\" 320) 325) (operations 325) 325) 325) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 328) 328) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"None\" (unit) -1) 329) (set (attr (data) \"savedState_redeemer\" 271) (variant \"None\" (unit) -1) 330))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 338) \"unit\" 339) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 342) 342) (literal (string \"bad state\") 342) 342) (set (attr (data) \"state\" 191) (literal (intOrNat 1) 345) 345) (set (operations 354) (cons (transfer (tuple 354 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 348)) (literal (mutez 0) 354) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 349) \"Some\" \"None\" 349) 354) (operations 354) 354) 354))) (updateBalance_callback True ((set_type (params 358) \"nat\" 359) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 362) (literal (string \"bad sender\") 362) 362) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 1) 365) 365) (literal (string \"bad state\") 365) 365) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 368) 368) (set (attr (data) \"underlyingBalance\" 227) (params 358) 371))) (updateContractMetadata True ((set_type (params 411) (tuple \"string\" \"bytes\") 412) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 414) (literal (string \"not governor\") 414) 414) (set (getItem (attr (data) \"metadata\" 418) (first (params 411) 416) 418) (second (params 411) 417) 418))) (updateDexterAddress True ((set_type (params 395) \"address\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"dexterAddress\" 132) (params 395) 399))) (updateGovernorAddress True ((set_type (params 379) \"address\" 380) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 382) (literal (string \"not governor\") 382) 382) (set (attr (data) \"governorAddress\" 414) (params 379) 383))) (updateOvenRegistryAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"ovenRegistryAddress\" 155) (params 403) 407))) (updateRewardAmount True ((set_type (params 387) \"nat\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"rewardAmount\" 164) (params 387) 391))) (updateTokenMetadata True ((set_type (params 422) (tuple \"nat\" (map \"string\" \"bytes\")) 423) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 425) (literal (string \"not governor\") 425) 425) (set (getItem (attr (data) \"token_metadata\" 426) (literal (intOrNat 0) 426) 426) (params 422) 426))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 966, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "updateBalance_callback", "params": "(literal (nat 15) 969)", "line_no": 970, "title": "", "messageClass": "", "source": "none", "sender": "(literal (local-address (static_id 0 8)) 8)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 970)", "show": true, "valid": "(literal (bool False) 970)", "voting_powers": "(map 970 )", "export": true}], "decompile": false, "kind": "test"}, {"shortname": "default_-_can_swap_tokens", "longname": "default - can swap tokens", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 211) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s117\" ((set_type (first (params 89) 987) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 987) (contract \"address\") 987) (set (operations 987) (cons (transfer (getLocal \"__s117\" 987) (literal (mutez 0) 987) (second (params 89) 987) 89) (operations 987) 987) 987))) (getAllowance True ((bind \"__s118\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 987) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 987) \"spender\" 46) 46) 46))) (set_type (second (params 45) 987) (contract \"nat\") 987) (set (operations 987) (cons (transfer (getLocal \"__s118\" 987) (literal (mutez 0) 987) (second (params 45) 987) 45) (operations 987) 987) 987))) (getBalance True ((bind \"__s119\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 987) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 987) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 987) 42) \"balance\" 42) 42))) (set_type (second (params 37) 987) (contract \"nat\") 987) (set (operations 987) (cons (transfer (getLocal \"__s119\" 987) (literal (mutez 0) 987) (second (params 37) 987) 37) (operations 987) 987) 987))) (getTotalSupply True ((bind \"__s120\" ((set_type (first (params 49) 987) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 987) (contract \"nat\") 987) (set (operations 987) (cons (transfer (getLocal \"__s120\" 987) (literal (mutez 0) 987) (second (params 49) 987) 49) (operations 987) 987) 987))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 987, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 11)", "export": "(storage (record 11 (tokenAddress (literal (local-address (static_id 0 8)) 8)))\nstorage_type (())\nmessages ((default True ((set_type (params 16) \"unit\" 17))) (xtzToToken True ((set_type (params 22) (tuple \"address\" (tuple \"nat\" \"timestamp\")) 23) (set (operations 43) (cons (transfer (record 33 (from_ (to_address (self) \"None\")) (to_ (first (params 22) 26)) (value (first (openVariant (ediv (amount) (literal (mutez 1) 30) 30) \"Some\" \"None\" 30) 30))) (literal (mutez 0) 43) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 40) 38) \"Some\" \"None\" 38) 43) (operations 43) 43) 43))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 993, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 2 82)", "export": "(storage (record 82 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 86 ) (bigmap (unknown 212) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 86)) (dexterAddress (literal (local-address (static_id 1 11)) 11)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 73 ((literal (string \"\") 1000) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 75)) ((literal (string \"data\") 1000) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 72))) (bigmap \"string\" \"bytes\") 73)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 82)) (rewardAmount (literal (intOrNat 1000000000000000000) 82)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 82)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 62 ((literal (nat 0) 49) (tuple 1000 (literal (nat 0) 49) (type_annotation (map 51 ((literal (string \"name\") 1000) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 53)) ((literal (string \"decimals\") 1000) (literal (bytes \"0x3138\") 54)) ((literal (string \"symbol\") 1000) (literal (bytes \"0x6465787465724c6b555344\") 55)) ((literal (string \"icon\") 1000) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 56))) (map \"string\" \"bytes\") 51)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 62)) (totalSupply (literal (intOrNat 0) 82)) (underlyingBalance (literal (nat 0) 103)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 119) \"unit\" 120) (set (operations 135) (cons (transfer (tuple 135 (to_address (self) \"None\") (tuple 135 (literal (intOrNat 1) 135) (add_seconds (now) (literal (int 3600) 127) 127))) (balance) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 132) 130) \"Some\" \"None\" 130) 135) (operations 135) 135) 135) (set (operations 145) (cons (transfer (unit) (literal (mutez 0) 145) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 140) \"Some\" \"None\" 140) 145) (operations 145) 145) 145))) (deposit True ((set_type (params 187) \"nat\" 188) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 191) 191) (literal (string \"bad state\") 191) 191) (set (attr (data) \"state\" 191) (literal (intOrNat 3) 194) 194) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"Some\" (params 187) 195) 195) (set (attr (data) \"savedState_depositor\" 196) (variant \"Some\" (sender) 196) 196) (set (operations 205) (cons (transfer (tuple 205 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 199)) (literal (mutez 0) 205) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 200) \"Some\" \"None\" 200) 205) (operations 205) 205) 205))) (deposit_callback True ((set_type (params 209) \"nat\" 210) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 213) (literal (string \"bad sender\") 213) 213) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 3) 216) 216) (literal (string \"bad state\") 216) 216) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 195) \"Some\" \"None\" 219) 219) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 220) (literal (intOrNat 1000000000000000000) 220) 220) 220) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 221) 221) ((defineLocal \"newUnderlyingBalance\" (add (params 209) (getLocal \"tokensToDeposit\" 222) 222) 222) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 223) (literal (intOrNat 1000000000000000000) 223) 223) (getLocal \"newUnderlyingBalance\" 223) 223) 223) (set (getLocal \"newTokens\" 1000) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 224) (attr (data) \"totalSupply\" 96) 224) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 224) (getLocal \"fractionOfPoolOwnership\" 224) 224) 224) \"Some\" \"None\" 224) 224) 224)) 221) (set (attr (data) \"underlyingBalance\" 227) (add (params 209) (getLocal \"tokensToDeposit\" 227) 227) 227) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 196) \"Some\" \"None\" 230) 230) (set (operations 241) (cons (transfer (record 231 (from_ (getLocal \"depositor\" 232)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 234))) (literal (mutez 0) 241) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 236) \"Some\" \"None\" 236) 241) (operations 241) 241) 241) (set (operations 253) (cons (transfer (record 244 (address (getLocal \"depositor\" 245)) (value (getLocal \"newTokens\" 246))) (literal (mutez 0) 253) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 248) \"Some\" \"None\" 248) 253) (operations 253) 253) 253) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 256) 256) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"None\" (unit) -1) 257) (set (attr (data) \"savedState_depositor\" 196) (variant \"None\" (unit) -1) 258))) (getAdministrator True ((bind \"__s121\" ((set_type (first (params 108) 1000) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 1000) (contract \"address\") 1000) (set (operations 1000) (cons (transfer (getLocal \"__s121\" 1000) (literal (mutez 0) 1000) (second (params 108) 1000) 108) (operations 1000) 1000) 1000))) (getAllowance True ((bind \"__s122\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 1000) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 1000) \"spender\" 69) 69) 69))) (set_type (second (params 68) 1000) (contract \"nat\") 1000) (set (operations 1000) (cons (transfer (getLocal \"__s122\" 1000) (literal (mutez 0) 1000) (second (params 68) 1000) 68) (operations 1000) 1000) 1000))) (getBalance True ((bind \"__s123\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 1000) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 1000) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 1000) 65) \"balance\" 65) 65))) (set_type (second (params 60) 1000) (contract \"nat\") 1000) (set (operations 1000) (cons (transfer (getLocal \"__s123\" 1000) (literal (mutez 0) 1000) (second (params 60) 1000) 60) (operations 1000) 1000) 1000))) (getTotalSupply True ((bind \"__s124\" ((set_type (first (params 72) 1000) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 1000) (contract \"nat\") 1000) (set (operations 1000) (cons (transfer (getLocal \"__s124\" 1000) (literal (mutez 0) 1000) (second (params 72) 1000) 72) (operations 1000) 1000) 1000))) (liquidate True ((set_type (params 149) \"address\" 150) (set (operations 158) (cons (transfer (params 149) (literal (mutez 0) 158) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 155) 153) \"Some\" \"None\" 153) 158) (operations 158) 158) 158) (set (operations 171) (cons (transfer (record 161 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (attr (data) \"rewardAmount\" 164))) (literal (mutez 0) 171) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 166) \"Some\" \"None\" 166) 171) (operations 171) 171) 171) (set (operations 179) (cons (transfer (unit) (literal (mutez 0) 179) (openVariant (contract \"liquidate\" \"unit\" (params 149) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 262) \"nat\" 263) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 266) 266) (literal (string \"bad state\") 266) 266) (set (attr (data) \"state\" 191) (literal (intOrNat 2) 269) 269) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"Some\" (params 262) 270) 270) (set (attr (data) \"savedState_redeemer\" 271) (variant \"Some\" (sender) 271) 271) (set (operations 280) (cons (transfer (tuple 280 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 274)) (literal (mutez 0) 280) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 275) \"Some\" \"None\" 275) 280) (operations 280) 280) 280))) (redeem_callback True ((set_type (params 284) \"nat\" 285) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 288) (literal (string \"bad sender\") 288) 288) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 2) 291) 291) (literal (string \"bad state\") 291) 291) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 270) \"Some\" \"None\" 294) 294) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 295) (literal (intOrNat 1000000000000000000) 295) 295) (attr (data) \"totalSupply\" 96) 295) 295) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 296) (params 284) 296) (literal (intOrNat 1000000000000000000) 296) 296) 296) (set (attr (data) \"underlyingBalance\" 227) (openVariant (isNat (sub (params 284) (getLocal \"tokensToReceive\" 299) 299) 299) \"Some\" \"None\" 299) 299) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 271) \"Some\" \"None\" 302) 302) (set (operations 312) (cons (transfer (record 303 (address (getLocal \"redeemer\" 304)) (value (getLocal \"tokensToRedeem\" 305))) (literal (mutez 0) 312) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 307) \"Some\" \"None\" 307) 312) (operations 312) 312) 312) (set (operations 325) (cons (transfer (record 315 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 317)) (value (getLocal \"tokensToReceive\" 318))) (literal (mutez 0) 325) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 320) \"Some\" \"None\" 320) 325) (operations 325) 325) 325) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 328) 328) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"None\" (unit) -1) 329) (set (attr (data) \"savedState_redeemer\" 271) (variant \"None\" (unit) -1) 330))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 338) \"unit\" 339) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 342) 342) (literal (string \"bad state\") 342) 342) (set (attr (data) \"state\" 191) (literal (intOrNat 1) 345) 345) (set (operations 354) (cons (transfer (tuple 354 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 348)) (literal (mutez 0) 354) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 349) \"Some\" \"None\" 349) 354) (operations 354) 354) 354))) (updateBalance_callback True ((set_type (params 358) \"nat\" 359) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 362) (literal (string \"bad sender\") 362) 362) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 1) 365) 365) (literal (string \"bad state\") 365) 365) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 368) 368) (set (attr (data) \"underlyingBalance\" 227) (params 358) 371))) (updateContractMetadata True ((set_type (params 411) (tuple \"string\" \"bytes\") 412) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 414) (literal (string \"not governor\") 414) 414) (set (getItem (attr (data) \"metadata\" 418) (first (params 411) 416) 418) (second (params 411) 417) 418))) (updateDexterAddress True ((set_type (params 395) \"address\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"dexterAddress\" 132) (params 395) 399))) (updateGovernorAddress True ((set_type (params 379) \"address\" 380) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 382) (literal (string \"not governor\") 382) 382) (set (attr (data) \"governorAddress\" 414) (params 379) 383))) (updateOvenRegistryAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"ovenRegistryAddress\" 155) (params 403) 407))) (updateRewardAmount True ((set_type (params 387) \"nat\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"rewardAmount\" 164) (params 387) 391))) (updateTokenMetadata True ((set_type (params 422) (tuple \"nat\" (map \"string\" \"bytes\")) 423) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 425) (literal (string \"not governor\") 425) 425) (set (getItem (attr (data) \"token_metadata\" 426) (literal (intOrNat 0) 426) 426) (params 422) 426))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1000, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1004 (address (literal (local-address (static_id 1 11)) 11)) (value (literal (nat 10000000000) 1006)))", "line_no": 1003, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1003)", "show": true, "valid": "(literal (bool True) 1003)", "voting_powers": "(map 1003 )", "export": true}, {"action": "message", "id": "(static_id 2 82)", "dynamic": false, "message": "default", "params": "(unit)", "line_no": 1015, "title": "", "messageClass": "", "source": "none", "sender": "none", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 123456) 1013)", "level": "(literal (intOrNat 0) 1015)", "show": true, "valid": "(literal (bool True) 1015)", "voting_powers": "(map 1015 )", "export": true}, {"action": "verify", "condition": "(eq (contractBalance (static_id 1 11) 993) (literal (mutez 123456) 1013) 1020)", "line_no": 1020}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 1003) \"balances\" 1023) (literal (local-address (static_id 2 82)) 82) 1023) \"balance\" 1023) (literal (nat 123456) 1014) 1023)", "line_no": 1023}, {"action": "verify", "condition": "(eq (contractBalance (static_id 2 82) 1000) (literal (mutez 0) 1026) 1026)", "line_no": 1026}], "decompile": false, "kind": "test"}, {"shortname": "deposit_-_fails_in_bad_state", "longname": "deposit - fails in bad state", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 222) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s125\" ((set_type (first (params 89) 1040) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 1040) (contract \"address\") 1040) (set (operations 1040) (cons (transfer (getLocal \"__s125\" 1040) (literal (mutez 0) 1040) (second (params 89) 1040) 89) (operations 1040) 1040) 1040))) (getAllowance True ((bind \"__s126\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 1040) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 1040) \"spender\" 46) 46) 46))) (set_type (second (params 45) 1040) (contract \"nat\") 1040) (set (operations 1040) (cons (transfer (getLocal \"__s126\" 1040) (literal (mutez 0) 1040) (second (params 45) 1040) 45) (operations 1040) 1040) 1040))) (getBalance True ((bind \"__s127\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 1040) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 1040) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 1040) 42) \"balance\" 42) 42))) (set_type (second (params 37) 1040) (contract \"nat\") 1040) (set (operations 1040) (cons (transfer (getLocal \"__s127\" 1040) (literal (mutez 0) 1040) (second (params 37) 1040) 37) (operations 1040) 1040) 1040))) (getTotalSupply True ((bind \"__s128\" ((set_type (first (params 49) 1040) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 1040) (contract \"nat\") 1040) (set (operations 1040) (cons (transfer (getLocal \"__s128\" 1040) (literal (mutez 0) 1040) (second (params 49) 1040) 49) (operations 1040) 1040) 1040))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1040, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 82)", "export": "(storage (record 82 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 86 ) (bigmap (unknown 223) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 86)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 73 ((literal (string \"\") 1047) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 75)) ((literal (string \"data\") 1047) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 72))) (bigmap \"string\" \"bytes\") 73)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 82)) (rewardAmount (literal (intOrNat 1000000000000000000) 82)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 3) 82)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 62 ((literal (nat 0) 49) (tuple 1047 (literal (nat 0) 49) (type_annotation (map 51 ((literal (string \"name\") 1047) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 53)) ((literal (string \"decimals\") 1047) (literal (bytes \"0x3138\") 54)) ((literal (string \"symbol\") 1047) (literal (bytes \"0x6465787465724c6b555344\") 55)) ((literal (string \"icon\") 1047) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 56))) (map \"string\" \"bytes\") 51)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 62)) (totalSupply (literal (intOrNat 0) 82)) (underlyingBalance (literal (nat 0) 103)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 119) \"unit\" 120) (set (operations 135) (cons (transfer (tuple 135 (to_address (self) \"None\") (tuple 135 (literal (intOrNat 1) 135) (add_seconds (now) (literal (int 3600) 127) 127))) (balance) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 132) 130) \"Some\" \"None\" 130) 135) (operations 135) 135) 135) (set (operations 145) (cons (transfer (unit) (literal (mutez 0) 145) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 140) \"Some\" \"None\" 140) 145) (operations 145) 145) 145))) (deposit True ((set_type (params 187) \"nat\" 188) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 191) 191) (literal (string \"bad state\") 191) 191) (set (attr (data) \"state\" 191) (literal (intOrNat 3) 194) 194) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"Some\" (params 187) 195) 195) (set (attr (data) \"savedState_depositor\" 196) (variant \"Some\" (sender) 196) 196) (set (operations 205) (cons (transfer (tuple 205 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 199)) (literal (mutez 0) 205) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 200) \"Some\" \"None\" 200) 205) (operations 205) 205) 205))) (deposit_callback True ((set_type (params 209) \"nat\" 210) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 213) (literal (string \"bad sender\") 213) 213) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 3) 216) 216) (literal (string \"bad state\") 216) 216) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 195) \"Some\" \"None\" 219) 219) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 220) (literal (intOrNat 1000000000000000000) 220) 220) 220) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 221) 221) ((defineLocal \"newUnderlyingBalance\" (add (params 209) (getLocal \"tokensToDeposit\" 222) 222) 222) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 223) (literal (intOrNat 1000000000000000000) 223) 223) (getLocal \"newUnderlyingBalance\" 223) 223) 223) (set (getLocal \"newTokens\" 1047) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 224) (attr (data) \"totalSupply\" 96) 224) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 224) (getLocal \"fractionOfPoolOwnership\" 224) 224) 224) \"Some\" \"None\" 224) 224) 224)) 221) (set (attr (data) \"underlyingBalance\" 227) (add (params 209) (getLocal \"tokensToDeposit\" 227) 227) 227) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 196) \"Some\" \"None\" 230) 230) (set (operations 241) (cons (transfer (record 231 (from_ (getLocal \"depositor\" 232)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 234))) (literal (mutez 0) 241) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 236) \"Some\" \"None\" 236) 241) (operations 241) 241) 241) (set (operations 253) (cons (transfer (record 244 (address (getLocal \"depositor\" 245)) (value (getLocal \"newTokens\" 246))) (literal (mutez 0) 253) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 248) \"Some\" \"None\" 248) 253) (operations 253) 253) 253) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 256) 256) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"None\" (unit) -1) 257) (set (attr (data) \"savedState_depositor\" 196) (variant \"None\" (unit) -1) 258))) (getAdministrator True ((bind \"__s129\" ((set_type (first (params 108) 1047) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 1047) (contract \"address\") 1047) (set (operations 1047) (cons (transfer (getLocal \"__s129\" 1047) (literal (mutez 0) 1047) (second (params 108) 1047) 108) (operations 1047) 1047) 1047))) (getAllowance True ((bind \"__s130\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 1047) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 1047) \"spender\" 69) 69) 69))) (set_type (second (params 68) 1047) (contract \"nat\") 1047) (set (operations 1047) (cons (transfer (getLocal \"__s130\" 1047) (literal (mutez 0) 1047) (second (params 68) 1047) 68) (operations 1047) 1047) 1047))) (getBalance True ((bind \"__s131\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 1047) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 1047) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 1047) 65) \"balance\" 65) 65))) (set_type (second (params 60) 1047) (contract \"nat\") 1047) (set (operations 1047) (cons (transfer (getLocal \"__s131\" 1047) (literal (mutez 0) 1047) (second (params 60) 1047) 60) (operations 1047) 1047) 1047))) (getTotalSupply True ((bind \"__s132\" ((set_type (first (params 72) 1047) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 1047) (contract \"nat\") 1047) (set (operations 1047) (cons (transfer (getLocal \"__s132\" 1047) (literal (mutez 0) 1047) (second (params 72) 1047) 72) (operations 1047) 1047) 1047))) (liquidate True ((set_type (params 149) \"address\" 150) (set (operations 158) (cons (transfer (params 149) (literal (mutez 0) 158) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 155) 153) \"Some\" \"None\" 153) 158) (operations 158) 158) 158) (set (operations 171) (cons (transfer (record 161 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (attr (data) \"rewardAmount\" 164))) (literal (mutez 0) 171) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 166) \"Some\" \"None\" 166) 171) (operations 171) 171) 171) (set (operations 179) (cons (transfer (unit) (literal (mutez 0) 179) (openVariant (contract \"liquidate\" \"unit\" (params 149) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 262) \"nat\" 263) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 266) 266) (literal (string \"bad state\") 266) 266) (set (attr (data) \"state\" 191) (literal (intOrNat 2) 269) 269) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"Some\" (params 262) 270) 270) (set (attr (data) \"savedState_redeemer\" 271) (variant \"Some\" (sender) 271) 271) (set (operations 280) (cons (transfer (tuple 280 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 274)) (literal (mutez 0) 280) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 275) \"Some\" \"None\" 275) 280) (operations 280) 280) 280))) (redeem_callback True ((set_type (params 284) \"nat\" 285) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 288) (literal (string \"bad sender\") 288) 288) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 2) 291) 291) (literal (string \"bad state\") 291) 291) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 270) \"Some\" \"None\" 294) 294) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 295) (literal (intOrNat 1000000000000000000) 295) 295) (attr (data) \"totalSupply\" 96) 295) 295) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 296) (params 284) 296) (literal (intOrNat 1000000000000000000) 296) 296) 296) (set (attr (data) \"underlyingBalance\" 227) (openVariant (isNat (sub (params 284) (getLocal \"tokensToReceive\" 299) 299) 299) \"Some\" \"None\" 299) 299) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 271) \"Some\" \"None\" 302) 302) (set (operations 312) (cons (transfer (record 303 (address (getLocal \"redeemer\" 304)) (value (getLocal \"tokensToRedeem\" 305))) (literal (mutez 0) 312) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 307) \"Some\" \"None\" 307) 312) (operations 312) 312) 312) (set (operations 325) (cons (transfer (record 315 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 317)) (value (getLocal \"tokensToReceive\" 318))) (literal (mutez 0) 325) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 320) \"Some\" \"None\" 320) 325) (operations 325) 325) 325) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 328) 328) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"None\" (unit) -1) 329) (set (attr (data) \"savedState_redeemer\" 271) (variant \"None\" (unit) -1) 330))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 338) \"unit\" 339) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 342) 342) (literal (string \"bad state\") 342) 342) (set (attr (data) \"state\" 191) (literal (intOrNat 1) 345) 345) (set (operations 354) (cons (transfer (tuple 354 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 348)) (literal (mutez 0) 354) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 349) \"Some\" \"None\" 349) 354) (operations 354) 354) 354))) (updateBalance_callback True ((set_type (params 358) \"nat\" 359) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 362) (literal (string \"bad sender\") 362) 362) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 1) 365) 365) (literal (string \"bad state\") 365) 365) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 368) 368) (set (attr (data) \"underlyingBalance\" 227) (params 358) 371))) (updateContractMetadata True ((set_type (params 411) (tuple \"string\" \"bytes\") 412) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 414) (literal (string \"not governor\") 414) 414) (set (getItem (attr (data) \"metadata\" 418) (first (params 411) 416) 418) (second (params 411) 417) 418))) (updateDexterAddress True ((set_type (params 395) \"address\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"dexterAddress\" 132) (params 395) 399))) (updateGovernorAddress True ((set_type (params 379) \"address\" 380) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 382) (literal (string \"not governor\") 382) 382) (set (attr (data) \"governorAddress\" 414) (params 379) 383))) (updateOvenRegistryAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"ovenRegistryAddress\" 155) (params 403) 407))) (updateRewardAmount True ((set_type (params 387) \"nat\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"rewardAmount\" 164) (params 387) 391))) (updateTokenMetadata True ((set_type (params 422) (tuple \"nat\" (map \"string\" \"bytes\")) 423) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 425) (literal (string \"not governor\") 425) 425) (set (getItem (attr (data) \"token_metadata\" 426) (literal (intOrNat 0) 426) 426) (params 422) 426))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1047, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1052 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)) (value (literal (nat 10) 1050)))", "line_no": 1051, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1051)", "show": true, "valid": "(literal (bool True) 1051)", "voting_powers": "(map 1051 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 1062 (spender (literal (local-address (static_id 1 82)) 82)) (value (literal (nat 10) 1050)))", "line_no": 1061, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1061)", "show": true, "valid": "(literal (bool True) 1061)", "voting_powers": "(map 1061 )", "export": true}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "deposit", "params": "(literal (nat 10) 1050)", "line_no": 1072, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1072)", "show": true, "valid": "(literal (bool False) 1072)", "voting_powers": "(map 1072 )", "export": true}], "decompile": false, "kind": "test"}, {"shortname": "deposit_-_resets_state", "longname": "deposit - resets state", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 233) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s133\" ((set_type (first (params 89) 1087) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 1087) (contract \"address\") 1087) (set (operations 1087) (cons (transfer (getLocal \"__s133\" 1087) (literal (mutez 0) 1087) (second (params 89) 1087) 89) (operations 1087) 1087) 1087))) (getAllowance True ((bind \"__s134\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 1087) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 1087) \"spender\" 46) 46) 46))) (set_type (second (params 45) 1087) (contract \"nat\") 1087) (set (operations 1087) (cons (transfer (getLocal \"__s134\" 1087) (literal (mutez 0) 1087) (second (params 45) 1087) 45) (operations 1087) 1087) 1087))) (getBalance True ((bind \"__s135\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 1087) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 1087) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 1087) 42) \"balance\" 42) 42))) (set_type (second (params 37) 1087) (contract \"nat\") 1087) (set (operations 1087) (cons (transfer (getLocal \"__s135\" 1087) (literal (mutez 0) 1087) (second (params 37) 1087) 37) (operations 1087) 1087) 1087))) (getTotalSupply True ((bind \"__s136\" ((set_type (first (params 49) 1087) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 1087) (contract \"nat\") 1087) (set (operations 1087) (cons (transfer (getLocal \"__s136\" 1087) (literal (mutez 0) 1087) (second (params 49) 1087) 49) (operations 1087) 1087) 1087))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1087, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 82)", "export": "(storage (record 82 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 86 ) (bigmap (unknown 234) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 86)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 73 ((literal (string \"\") 1093) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 75)) ((literal (string \"data\") 1093) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 72))) (bigmap \"string\" \"bytes\") 73)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 82)) (rewardAmount (literal (intOrNat 1000000000000000000) 82)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 82)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 62 ((literal (nat 0) 49) (tuple 1093 (literal (nat 0) 49) (type_annotation (map 51 ((literal (string \"name\") 1093) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 53)) ((literal (string \"decimals\") 1093) (literal (bytes \"0x3138\") 54)) ((literal (string \"symbol\") 1093) (literal (bytes \"0x6465787465724c6b555344\") 55)) ((literal (string \"icon\") 1093) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 56))) (map \"string\" \"bytes\") 51)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 62)) (totalSupply (literal (intOrNat 0) 82)) (underlyingBalance (literal (nat 0) 103)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 119) \"unit\" 120) (set (operations 135) (cons (transfer (tuple 135 (to_address (self) \"None\") (tuple 135 (literal (intOrNat 1) 135) (add_seconds (now) (literal (int 3600) 127) 127))) (balance) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 132) 130) \"Some\" \"None\" 130) 135) (operations 135) 135) 135) (set (operations 145) (cons (transfer (unit) (literal (mutez 0) 145) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 140) \"Some\" \"None\" 140) 145) (operations 145) 145) 145))) (deposit True ((set_type (params 187) \"nat\" 188) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 191) 191) (literal (string \"bad state\") 191) 191) (set (attr (data) \"state\" 191) (literal (intOrNat 3) 194) 194) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"Some\" (params 187) 195) 195) (set (attr (data) \"savedState_depositor\" 196) (variant \"Some\" (sender) 196) 196) (set (operations 205) (cons (transfer (tuple 205 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 199)) (literal (mutez 0) 205) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 200) \"Some\" \"None\" 200) 205) (operations 205) 205) 205))) (deposit_callback True ((set_type (params 209) \"nat\" 210) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 213) (literal (string \"bad sender\") 213) 213) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 3) 216) 216) (literal (string \"bad state\") 216) 216) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 195) \"Some\" \"None\" 219) 219) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 220) (literal (intOrNat 1000000000000000000) 220) 220) 220) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 221) 221) ((defineLocal \"newUnderlyingBalance\" (add (params 209) (getLocal \"tokensToDeposit\" 222) 222) 222) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 223) (literal (intOrNat 1000000000000000000) 223) 223) (getLocal \"newUnderlyingBalance\" 223) 223) 223) (set (getLocal \"newTokens\" 1093) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 224) (attr (data) \"totalSupply\" 96) 224) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 224) (getLocal \"fractionOfPoolOwnership\" 224) 224) 224) \"Some\" \"None\" 224) 224) 224)) 221) (set (attr (data) \"underlyingBalance\" 227) (add (params 209) (getLocal \"tokensToDeposit\" 227) 227) 227) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 196) \"Some\" \"None\" 230) 230) (set (operations 241) (cons (transfer (record 231 (from_ (getLocal \"depositor\" 232)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 234))) (literal (mutez 0) 241) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 236) \"Some\" \"None\" 236) 241) (operations 241) 241) 241) (set (operations 253) (cons (transfer (record 244 (address (getLocal \"depositor\" 245)) (value (getLocal \"newTokens\" 246))) (literal (mutez 0) 253) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 248) \"Some\" \"None\" 248) 253) (operations 253) 253) 253) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 256) 256) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"None\" (unit) -1) 257) (set (attr (data) \"savedState_depositor\" 196) (variant \"None\" (unit) -1) 258))) (getAdministrator True ((bind \"__s137\" ((set_type (first (params 108) 1093) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 1093) (contract \"address\") 1093) (set (operations 1093) (cons (transfer (getLocal \"__s137\" 1093) (literal (mutez 0) 1093) (second (params 108) 1093) 108) (operations 1093) 1093) 1093))) (getAllowance True ((bind \"__s138\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 1093) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 1093) \"spender\" 69) 69) 69))) (set_type (second (params 68) 1093) (contract \"nat\") 1093) (set (operations 1093) (cons (transfer (getLocal \"__s138\" 1093) (literal (mutez 0) 1093) (second (params 68) 1093) 68) (operations 1093) 1093) 1093))) (getBalance True ((bind \"__s139\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 1093) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 1093) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 1093) 65) \"balance\" 65) 65))) (set_type (second (params 60) 1093) (contract \"nat\") 1093) (set (operations 1093) (cons (transfer (getLocal \"__s139\" 1093) (literal (mutez 0) 1093) (second (params 60) 1093) 60) (operations 1093) 1093) 1093))) (getTotalSupply True ((bind \"__s140\" ((set_type (first (params 72) 1093) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 1093) (contract \"nat\") 1093) (set (operations 1093) (cons (transfer (getLocal \"__s140\" 1093) (literal (mutez 0) 1093) (second (params 72) 1093) 72) (operations 1093) 1093) 1093))) (liquidate True ((set_type (params 149) \"address\" 150) (set (operations 158) (cons (transfer (params 149) (literal (mutez 0) 158) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 155) 153) \"Some\" \"None\" 153) 158) (operations 158) 158) 158) (set (operations 171) (cons (transfer (record 161 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (attr (data) \"rewardAmount\" 164))) (literal (mutez 0) 171) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 166) \"Some\" \"None\" 166) 171) (operations 171) 171) 171) (set (operations 179) (cons (transfer (unit) (literal (mutez 0) 179) (openVariant (contract \"liquidate\" \"unit\" (params 149) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 262) \"nat\" 263) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 266) 266) (literal (string \"bad state\") 266) 266) (set (attr (data) \"state\" 191) (literal (intOrNat 2) 269) 269) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"Some\" (params 262) 270) 270) (set (attr (data) \"savedState_redeemer\" 271) (variant \"Some\" (sender) 271) 271) (set (operations 280) (cons (transfer (tuple 280 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 274)) (literal (mutez 0) 280) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 275) \"Some\" \"None\" 275) 280) (operations 280) 280) 280))) (redeem_callback True ((set_type (params 284) \"nat\" 285) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 288) (literal (string \"bad sender\") 288) 288) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 2) 291) 291) (literal (string \"bad state\") 291) 291) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 270) \"Some\" \"None\" 294) 294) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 295) (literal (intOrNat 1000000000000000000) 295) 295) (attr (data) \"totalSupply\" 96) 295) 295) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 296) (params 284) 296) (literal (intOrNat 1000000000000000000) 296) 296) 296) (set (attr (data) \"underlyingBalance\" 227) (openVariant (isNat (sub (params 284) (getLocal \"tokensToReceive\" 299) 299) 299) \"Some\" \"None\" 299) 299) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 271) \"Some\" \"None\" 302) 302) (set (operations 312) (cons (transfer (record 303 (address (getLocal \"redeemer\" 304)) (value (getLocal \"tokensToRedeem\" 305))) (literal (mutez 0) 312) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 307) \"Some\" \"None\" 307) 312) (operations 312) 312) 312) (set (operations 325) (cons (transfer (record 315 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 317)) (value (getLocal \"tokensToReceive\" 318))) (literal (mutez 0) 325) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 320) \"Some\" \"None\" 320) 325) (operations 325) 325) 325) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 328) 328) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"None\" (unit) -1) 329) (set (attr (data) \"savedState_redeemer\" 271) (variant \"None\" (unit) -1) 330))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 338) \"unit\" 339) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 342) 342) (literal (string \"bad state\") 342) 342) (set (attr (data) \"state\" 191) (literal (intOrNat 1) 345) 345) (set (operations 354) (cons (transfer (tuple 354 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 348)) (literal (mutez 0) 354) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 349) \"Some\" \"None\" 349) 354) (operations 354) 354) 354))) (updateBalance_callback True ((set_type (params 358) \"nat\" 359) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 362) (literal (string \"bad sender\") 362) 362) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 1) 365) 365) (literal (string \"bad state\") 365) 365) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 368) 368) (set (attr (data) \"underlyingBalance\" 227) (params 358) 371))) (updateContractMetadata True ((set_type (params 411) (tuple \"string\" \"bytes\") 412) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 414) (literal (string \"not governor\") 414) 414) (set (getItem (attr (data) \"metadata\" 418) (first (params 411) 416) 418) (second (params 411) 417) 418))) (updateDexterAddress True ((set_type (params 395) \"address\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"dexterAddress\" 132) (params 395) 399))) (updateGovernorAddress True ((set_type (params 379) \"address\" 380) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 382) (literal (string \"not governor\") 382) 382) (set (attr (data) \"governorAddress\" 414) (params 379) 383))) (updateOvenRegistryAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"ovenRegistryAddress\" 155) (params 403) 407))) (updateRewardAmount True ((set_type (params 387) \"nat\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"rewardAmount\" 164) (params 387) 391))) (updateTokenMetadata True ((set_type (params 422) (tuple \"nat\" (map \"string\" \"bytes\")) 423) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 425) (literal (string \"not governor\") 425) 425) (set (getItem (attr (data) \"token_metadata\" 426) (literal (intOrNat 0) 426) 426) (params 422) 426))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1093, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1098 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)) (value (literal (nat 10) 1096)))", "line_no": 1097, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1097)", "show": true, "valid": "(literal (bool True) 1097)", "voting_powers": "(map 1097 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 1108 (spender (literal (local-address (static_id 1 82)) 82)) (value (literal (nat 10) 1096)))", "line_no": 1107, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1107)", "show": true, "valid": "(literal (bool True) 1107)", "voting_powers": "(map 1107 )", "export": true}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "deposit", "params": "(literal (nat 10) 1096)", "line_no": 1117, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1117)", "show": true, "valid": "(literal (bool True) 1117)", "voting_powers": "(map 1117 )", "export": true}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 82) 1117) \"state\" 1124) (literal (intOrNat 0) 1124) 1124)", "line_no": 1124}, {"action": "verify", "condition": "(eq (isVariant (attr (contractData (static_id 1 82) 1117) \"savedState_tokensToDeposit\" 1125) \"Some\" 1125) (literal (bool False) 1125) 1125)", "line_no": 1125}, {"action": "verify", "condition": "(eq (isVariant (attr (contractData (static_id 1 82) 1117) \"savedState_depositor\" 1126) \"Some\" 1126) (literal (bool False) 1126) 1126)", "line_no": 1126}], "decompile": false, "kind": "test"}, {"shortname": "deposit_-_can_deposit_from_one_account", "longname": "deposit - can deposit from one account", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 244) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s141\" ((set_type (first (params 89) 1136) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 1136) (contract \"address\") 1136) (set (operations 1136) (cons (transfer (getLocal \"__s141\" 1136) (literal (mutez 0) 1136) (second (params 89) 1136) 89) (operations 1136) 1136) 1136))) (getAllowance True ((bind \"__s142\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 1136) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 1136) \"spender\" 46) 46) 46))) (set_type (second (params 45) 1136) (contract \"nat\") 1136) (set (operations 1136) (cons (transfer (getLocal \"__s142\" 1136) (literal (mutez 0) 1136) (second (params 45) 1136) 45) (operations 1136) 1136) 1136))) (getBalance True ((bind \"__s143\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 1136) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 1136) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 1136) 42) \"balance\" 42) 42))) (set_type (second (params 37) 1136) (contract \"nat\") 1136) (set (operations 1136) (cons (transfer (getLocal \"__s143\" 1136) (literal (mutez 0) 1136) (second (params 37) 1136) 37) (operations 1136) 1136) 1136))) (getTotalSupply True ((bind \"__s144\" ((set_type (first (params 49) 1136) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 1136) (contract \"nat\") 1136) (set (operations 1136) (cons (transfer (getLocal \"__s144\" 1136) (literal (mutez 0) 1136) (second (params 49) 1136) 49) (operations 1136) 1136) 1136))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1136, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 82)", "export": "(storage (record 82 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 86 ) (bigmap (unknown 245) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 86)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 73 ((literal (string \"\") 1142) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 75)) ((literal (string \"data\") 1142) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 72))) (bigmap \"string\" \"bytes\") 73)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 82)) (rewardAmount (literal (intOrNat 1000000000000000000) 82)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 82)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 62 ((literal (nat 0) 49) (tuple 1142 (literal (nat 0) 49) (type_annotation (map 51 ((literal (string \"name\") 1142) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 53)) ((literal (string \"decimals\") 1142) (literal (bytes \"0x3138\") 54)) ((literal (string \"symbol\") 1142) (literal (bytes \"0x6465787465724c6b555344\") 55)) ((literal (string \"icon\") 1142) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 56))) (map \"string\" \"bytes\") 51)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 62)) (totalSupply (literal (intOrNat 0) 82)) (underlyingBalance (literal (nat 0) 103)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 119) \"unit\" 120) (set (operations 135) (cons (transfer (tuple 135 (to_address (self) \"None\") (tuple 135 (literal (intOrNat 1) 135) (add_seconds (now) (literal (int 3600) 127) 127))) (balance) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 132) 130) \"Some\" \"None\" 130) 135) (operations 135) 135) 135) (set (operations 145) (cons (transfer (unit) (literal (mutez 0) 145) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 140) \"Some\" \"None\" 140) 145) (operations 145) 145) 145))) (deposit True ((set_type (params 187) \"nat\" 188) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 191) 191) (literal (string \"bad state\") 191) 191) (set (attr (data) \"state\" 191) (literal (intOrNat 3) 194) 194) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"Some\" (params 187) 195) 195) (set (attr (data) \"savedState_depositor\" 196) (variant \"Some\" (sender) 196) 196) (set (operations 205) (cons (transfer (tuple 205 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 199)) (literal (mutez 0) 205) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 200) \"Some\" \"None\" 200) 205) (operations 205) 205) 205))) (deposit_callback True ((set_type (params 209) \"nat\" 210) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 213) (literal (string \"bad sender\") 213) 213) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 3) 216) 216) (literal (string \"bad state\") 216) 216) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 195) \"Some\" \"None\" 219) 219) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 220) (literal (intOrNat 1000000000000000000) 220) 220) 220) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 221) 221) ((defineLocal \"newUnderlyingBalance\" (add (params 209) (getLocal \"tokensToDeposit\" 222) 222) 222) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 223) (literal (intOrNat 1000000000000000000) 223) 223) (getLocal \"newUnderlyingBalance\" 223) 223) 223) (set (getLocal \"newTokens\" 1142) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 224) (attr (data) \"totalSupply\" 96) 224) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 224) (getLocal \"fractionOfPoolOwnership\" 224) 224) 224) \"Some\" \"None\" 224) 224) 224)) 221) (set (attr (data) \"underlyingBalance\" 227) (add (params 209) (getLocal \"tokensToDeposit\" 227) 227) 227) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 196) \"Some\" \"None\" 230) 230) (set (operations 241) (cons (transfer (record 231 (from_ (getLocal \"depositor\" 232)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 234))) (literal (mutez 0) 241) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 236) \"Some\" \"None\" 236) 241) (operations 241) 241) 241) (set (operations 253) (cons (transfer (record 244 (address (getLocal \"depositor\" 245)) (value (getLocal \"newTokens\" 246))) (literal (mutez 0) 253) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 248) \"Some\" \"None\" 248) 253) (operations 253) 253) 253) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 256) 256) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"None\" (unit) -1) 257) (set (attr (data) \"savedState_depositor\" 196) (variant \"None\" (unit) -1) 258))) (getAdministrator True ((bind \"__s145\" ((set_type (first (params 108) 1142) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 1142) (contract \"address\") 1142) (set (operations 1142) (cons (transfer (getLocal \"__s145\" 1142) (literal (mutez 0) 1142) (second (params 108) 1142) 108) (operations 1142) 1142) 1142))) (getAllowance True ((bind \"__s146\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 1142) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 1142) \"spender\" 69) 69) 69))) (set_type (second (params 68) 1142) (contract \"nat\") 1142) (set (operations 1142) (cons (transfer (getLocal \"__s146\" 1142) (literal (mutez 0) 1142) (second (params 68) 1142) 68) (operations 1142) 1142) 1142))) (getBalance True ((bind \"__s147\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 1142) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 1142) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 1142) 65) \"balance\" 65) 65))) (set_type (second (params 60) 1142) (contract \"nat\") 1142) (set (operations 1142) (cons (transfer (getLocal \"__s147\" 1142) (literal (mutez 0) 1142) (second (params 60) 1142) 60) (operations 1142) 1142) 1142))) (getTotalSupply True ((bind \"__s148\" ((set_type (first (params 72) 1142) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 1142) (contract \"nat\") 1142) (set (operations 1142) (cons (transfer (getLocal \"__s148\" 1142) (literal (mutez 0) 1142) (second (params 72) 1142) 72) (operations 1142) 1142) 1142))) (liquidate True ((set_type (params 149) \"address\" 150) (set (operations 158) (cons (transfer (params 149) (literal (mutez 0) 158) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 155) 153) \"Some\" \"None\" 153) 158) (operations 158) 158) 158) (set (operations 171) (cons (transfer (record 161 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (attr (data) \"rewardAmount\" 164))) (literal (mutez 0) 171) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 166) \"Some\" \"None\" 166) 171) (operations 171) 171) 171) (set (operations 179) (cons (transfer (unit) (literal (mutez 0) 179) (openVariant (contract \"liquidate\" \"unit\" (params 149) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 262) \"nat\" 263) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 266) 266) (literal (string \"bad state\") 266) 266) (set (attr (data) \"state\" 191) (literal (intOrNat 2) 269) 269) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"Some\" (params 262) 270) 270) (set (attr (data) \"savedState_redeemer\" 271) (variant \"Some\" (sender) 271) 271) (set (operations 280) (cons (transfer (tuple 280 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 274)) (literal (mutez 0) 280) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 275) \"Some\" \"None\" 275) 280) (operations 280) 280) 280))) (redeem_callback True ((set_type (params 284) \"nat\" 285) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 288) (literal (string \"bad sender\") 288) 288) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 2) 291) 291) (literal (string \"bad state\") 291) 291) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 270) \"Some\" \"None\" 294) 294) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 295) (literal (intOrNat 1000000000000000000) 295) 295) (attr (data) \"totalSupply\" 96) 295) 295) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 296) (params 284) 296) (literal (intOrNat 1000000000000000000) 296) 296) 296) (set (attr (data) \"underlyingBalance\" 227) (openVariant (isNat (sub (params 284) (getLocal \"tokensToReceive\" 299) 299) 299) \"Some\" \"None\" 299) 299) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 271) \"Some\" \"None\" 302) 302) (set (operations 312) (cons (transfer (record 303 (address (getLocal \"redeemer\" 304)) (value (getLocal \"tokensToRedeem\" 305))) (literal (mutez 0) 312) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 307) \"Some\" \"None\" 307) 312) (operations 312) 312) 312) (set (operations 325) (cons (transfer (record 315 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 317)) (value (getLocal \"tokensToReceive\" 318))) (literal (mutez 0) 325) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 320) \"Some\" \"None\" 320) 325) (operations 325) 325) 325) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 328) 328) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"None\" (unit) -1) 329) (set (attr (data) \"savedState_redeemer\" 271) (variant \"None\" (unit) -1) 330))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 338) \"unit\" 339) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 342) 342) (literal (string \"bad state\") 342) 342) (set (attr (data) \"state\" 191) (literal (intOrNat 1) 345) 345) (set (operations 354) (cons (transfer (tuple 354 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 348)) (literal (mutez 0) 354) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 349) \"Some\" \"None\" 349) 354) (operations 354) 354) 354))) (updateBalance_callback True ((set_type (params 358) \"nat\" 359) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 362) (literal (string \"bad sender\") 362) 362) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 1) 365) 365) (literal (string \"bad state\") 365) 365) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 368) 368) (set (attr (data) \"underlyingBalance\" 227) (params 358) 371))) (updateContractMetadata True ((set_type (params 411) (tuple \"string\" \"bytes\") 412) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 414) (literal (string \"not governor\") 414) 414) (set (getItem (attr (data) \"metadata\" 418) (first (params 411) 416) 418) (second (params 411) 417) 418))) (updateDexterAddress True ((set_type (params 395) \"address\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"dexterAddress\" 132) (params 395) 399))) (updateGovernorAddress True ((set_type (params 379) \"address\" 380) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 382) (literal (string \"not governor\") 382) 382) (set (attr (data) \"governorAddress\" 414) (params 379) 383))) (updateOvenRegistryAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"ovenRegistryAddress\" 155) (params 403) 407))) (updateRewardAmount True ((set_type (params 387) \"nat\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"rewardAmount\" 164) (params 387) 391))) (updateTokenMetadata True ((set_type (params 422) (tuple \"nat\" (map \"string\" \"bytes\")) 423) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 425) (literal (string \"not governor\") 425) 425) (set (getItem (attr (data) \"token_metadata\" 426) (literal (intOrNat 0) 426) 426) (params 422) 426))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1142, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1147 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)) (value (literal (nat 10) 1145)))", "line_no": 1146, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1146)", "show": true, "valid": "(literal (bool True) 1146)", "voting_powers": "(map 1146 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 1157 (spender (literal (local-address (static_id 1 82)) 82)) (value (literal (nat 10) 1145)))", "line_no": 1156, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1156)", "show": true, "valid": "(literal (bool True) 1156)", "voting_powers": "(map 1156 )", "export": true}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "deposit", "params": "(literal (nat 10) 1145)", "line_no": 1166, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1166)", "show": true, "valid": "(literal (bool True) 1166)", "voting_powers": "(map 1166 )", "export": true}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 1156) \"balances\" 1173) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 1173) \"balance\" 1173) (literal (nat 0) 1173) 1173)", "line_no": 1173}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 82) 1166) \"balances\" 1174) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 1174) \"balance\" 1174) (mul (literal (nat 10) 1145) (literal (intOrNat 1000000000000000000) 1174) 1174) 1174)", "line_no": 1174}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 82) 1166) \"totalSupply\" 1177) (mul (literal (nat 10) 1145) (literal (intOrNat 1000000000000000000) 1177) 1177) 1177)", "line_no": 1177}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 1156) \"balances\" 1173) (literal (local-address (static_id 1 82)) 82) 1180) \"balance\" 1180) (literal (nat 10) 1145) 1180)", "line_no": 1180}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 82) 1166) \"underlyingBalance\" 1181) (literal (nat 10) 1145) 1181)", "line_no": 1181}], "decompile": false, "kind": "test"}, {"shortname": "deposit_-_can_deposit_from_two_accounts", "longname": "deposit - can deposit from two accounts", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 255) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s149\" ((set_type (first (params 89) 1191) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 1191) (contract \"address\") 1191) (set (operations 1191) (cons (transfer (getLocal \"__s149\" 1191) (literal (mutez 0) 1191) (second (params 89) 1191) 89) (operations 1191) 1191) 1191))) (getAllowance True ((bind \"__s150\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 1191) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 1191) \"spender\" 46) 46) 46))) (set_type (second (params 45) 1191) (contract \"nat\") 1191) (set (operations 1191) (cons (transfer (getLocal \"__s150\" 1191) (literal (mutez 0) 1191) (second (params 45) 1191) 45) (operations 1191) 1191) 1191))) (getBalance True ((bind \"__s151\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 1191) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 1191) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 1191) 42) \"balance\" 42) 42))) (set_type (second (params 37) 1191) (contract \"nat\") 1191) (set (operations 1191) (cons (transfer (getLocal \"__s151\" 1191) (literal (mutez 0) 1191) (second (params 37) 1191) 37) (operations 1191) 1191) 1191))) (getTotalSupply True ((bind \"__s152\" ((set_type (first (params 49) 1191) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 1191) (contract \"nat\") 1191) (set (operations 1191) (cons (transfer (getLocal \"__s152\" 1191) (literal (mutez 0) 1191) (second (params 49) 1191) 49) (operations 1191) 1191) 1191))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1191, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 82)", "export": "(storage (record 82 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 86 ) (bigmap (unknown 256) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 86)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 73 ((literal (string \"\") 1197) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 75)) ((literal (string \"data\") 1197) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 72))) (bigmap \"string\" \"bytes\") 73)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 82)) (rewardAmount (literal (intOrNat 1000000000000000000) 82)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 82)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 62 ((literal (nat 0) 49) (tuple 1197 (literal (nat 0) 49) (type_annotation (map 51 ((literal (string \"name\") 1197) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 53)) ((literal (string \"decimals\") 1197) (literal (bytes \"0x3138\") 54)) ((literal (string \"symbol\") 1197) (literal (bytes \"0x6465787465724c6b555344\") 55)) ((literal (string \"icon\") 1197) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 56))) (map \"string\" \"bytes\") 51)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 62)) (totalSupply (literal (intOrNat 0) 82)) (underlyingBalance (literal (nat 0) 103)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 119) \"unit\" 120) (set (operations 135) (cons (transfer (tuple 135 (to_address (self) \"None\") (tuple 135 (literal (intOrNat 1) 135) (add_seconds (now) (literal (int 3600) 127) 127))) (balance) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 132) 130) \"Some\" \"None\" 130) 135) (operations 135) 135) 135) (set (operations 145) (cons (transfer (unit) (literal (mutez 0) 145) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 140) \"Some\" \"None\" 140) 145) (operations 145) 145) 145))) (deposit True ((set_type (params 187) \"nat\" 188) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 191) 191) (literal (string \"bad state\") 191) 191) (set (attr (data) \"state\" 191) (literal (intOrNat 3) 194) 194) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"Some\" (params 187) 195) 195) (set (attr (data) \"savedState_depositor\" 196) (variant \"Some\" (sender) 196) 196) (set (operations 205) (cons (transfer (tuple 205 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 199)) (literal (mutez 0) 205) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 200) \"Some\" \"None\" 200) 205) (operations 205) 205) 205))) (deposit_callback True ((set_type (params 209) \"nat\" 210) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 213) (literal (string \"bad sender\") 213) 213) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 3) 216) 216) (literal (string \"bad state\") 216) 216) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 195) \"Some\" \"None\" 219) 219) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 220) (literal (intOrNat 1000000000000000000) 220) 220) 220) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 221) 221) ((defineLocal \"newUnderlyingBalance\" (add (params 209) (getLocal \"tokensToDeposit\" 222) 222) 222) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 223) (literal (intOrNat 1000000000000000000) 223) 223) (getLocal \"newUnderlyingBalance\" 223) 223) 223) (set (getLocal \"newTokens\" 1197) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 224) (attr (data) \"totalSupply\" 96) 224) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 224) (getLocal \"fractionOfPoolOwnership\" 224) 224) 224) \"Some\" \"None\" 224) 224) 224)) 221) (set (attr (data) \"underlyingBalance\" 227) (add (params 209) (getLocal \"tokensToDeposit\" 227) 227) 227) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 196) \"Some\" \"None\" 230) 230) (set (operations 241) (cons (transfer (record 231 (from_ (getLocal \"depositor\" 232)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 234))) (literal (mutez 0) 241) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 236) \"Some\" \"None\" 236) 241) (operations 241) 241) 241) (set (operations 253) (cons (transfer (record 244 (address (getLocal \"depositor\" 245)) (value (getLocal \"newTokens\" 246))) (literal (mutez 0) 253) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 248) \"Some\" \"None\" 248) 253) (operations 253) 253) 253) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 256) 256) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"None\" (unit) -1) 257) (set (attr (data) \"savedState_depositor\" 196) (variant \"None\" (unit) -1) 258))) (getAdministrator True ((bind \"__s153\" ((set_type (first (params 108) 1197) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 1197) (contract \"address\") 1197) (set (operations 1197) (cons (transfer (getLocal \"__s153\" 1197) (literal (mutez 0) 1197) (second (params 108) 1197) 108) (operations 1197) 1197) 1197))) (getAllowance True ((bind \"__s154\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 1197) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 1197) \"spender\" 69) 69) 69))) (set_type (second (params 68) 1197) (contract \"nat\") 1197) (set (operations 1197) (cons (transfer (getLocal \"__s154\" 1197) (literal (mutez 0) 1197) (second (params 68) 1197) 68) (operations 1197) 1197) 1197))) (getBalance True ((bind \"__s155\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 1197) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 1197) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 1197) 65) \"balance\" 65) 65))) (set_type (second (params 60) 1197) (contract \"nat\") 1197) (set (operations 1197) (cons (transfer (getLocal \"__s155\" 1197) (literal (mutez 0) 1197) (second (params 60) 1197) 60) (operations 1197) 1197) 1197))) (getTotalSupply True ((bind \"__s156\" ((set_type (first (params 72) 1197) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 1197) (contract \"nat\") 1197) (set (operations 1197) (cons (transfer (getLocal \"__s156\" 1197) (literal (mutez 0) 1197) (second (params 72) 1197) 72) (operations 1197) 1197) 1197))) (liquidate True ((set_type (params 149) \"address\" 150) (set (operations 158) (cons (transfer (params 149) (literal (mutez 0) 158) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 155) 153) \"Some\" \"None\" 153) 158) (operations 158) 158) 158) (set (operations 171) (cons (transfer (record 161 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (attr (data) \"rewardAmount\" 164))) (literal (mutez 0) 171) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 166) \"Some\" \"None\" 166) 171) (operations 171) 171) 171) (set (operations 179) (cons (transfer (unit) (literal (mutez 0) 179) (openVariant (contract \"liquidate\" \"unit\" (params 149) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 262) \"nat\" 263) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 266) 266) (literal (string \"bad state\") 266) 266) (set (attr (data) \"state\" 191) (literal (intOrNat 2) 269) 269) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"Some\" (params 262) 270) 270) (set (attr (data) \"savedState_redeemer\" 271) (variant \"Some\" (sender) 271) 271) (set (operations 280) (cons (transfer (tuple 280 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 274)) (literal (mutez 0) 280) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 275) \"Some\" \"None\" 275) 280) (operations 280) 280) 280))) (redeem_callback True ((set_type (params 284) \"nat\" 285) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 288) (literal (string \"bad sender\") 288) 288) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 2) 291) 291) (literal (string \"bad state\") 291) 291) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 270) \"Some\" \"None\" 294) 294) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 295) (literal (intOrNat 1000000000000000000) 295) 295) (attr (data) \"totalSupply\" 96) 295) 295) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 296) (params 284) 296) (literal (intOrNat 1000000000000000000) 296) 296) 296) (set (attr (data) \"underlyingBalance\" 227) (openVariant (isNat (sub (params 284) (getLocal \"tokensToReceive\" 299) 299) 299) \"Some\" \"None\" 299) 299) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 271) \"Some\" \"None\" 302) 302) (set (operations 312) (cons (transfer (record 303 (address (getLocal \"redeemer\" 304)) (value (getLocal \"tokensToRedeem\" 305))) (literal (mutez 0) 312) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 307) \"Some\" \"None\" 307) 312) (operations 312) 312) 312) (set (operations 325) (cons (transfer (record 315 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 317)) (value (getLocal \"tokensToReceive\" 318))) (literal (mutez 0) 325) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 320) \"Some\" \"None\" 320) 325) (operations 325) 325) 325) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 328) 328) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"None\" (unit) -1) 329) (set (attr (data) \"savedState_redeemer\" 271) (variant \"None\" (unit) -1) 330))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 338) \"unit\" 339) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 342) 342) (literal (string \"bad state\") 342) 342) (set (attr (data) \"state\" 191) (literal (intOrNat 1) 345) 345) (set (operations 354) (cons (transfer (tuple 354 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 348)) (literal (mutez 0) 354) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 349) \"Some\" \"None\" 349) 354) (operations 354) 354) 354))) (updateBalance_callback True ((set_type (params 358) \"nat\" 359) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 362) (literal (string \"bad sender\") 362) 362) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 1) 365) 365) (literal (string \"bad state\") 365) 365) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 368) 368) (set (attr (data) \"underlyingBalance\" 227) (params 358) 371))) (updateContractMetadata True ((set_type (params 411) (tuple \"string\" \"bytes\") 412) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 414) (literal (string \"not governor\") 414) 414) (set (getItem (attr (data) \"metadata\" 418) (first (params 411) 416) 418) (second (params 411) 417) 418))) (updateDexterAddress True ((set_type (params 395) \"address\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"dexterAddress\" 132) (params 395) 399))) (updateGovernorAddress True ((set_type (params 379) \"address\" 380) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 382) (literal (string \"not governor\") 382) 382) (set (attr (data) \"governorAddress\" 414) (params 379) 383))) (updateOvenRegistryAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"ovenRegistryAddress\" 155) (params 403) 407))) (updateRewardAmount True ((set_type (params 387) \"nat\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"rewardAmount\" 164) (params 387) 391))) (updateTokenMetadata True ((set_type (params 422) (tuple \"nat\" (map \"string\" \"bytes\")) 423) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 425) (literal (string \"not governor\") 425) 425) (set (getItem (attr (data) \"token_metadata\" 426) (literal (intOrNat 0) 426) 426) (params 422) 426))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1197, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1202 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)) (value (literal (nat 10) 1200)))", "line_no": 1201, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1201)", "show": true, "valid": "(literal (bool True) 1201)", "voting_powers": "(map 1201 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1213 (address (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)) (value (literal (nat 40) 1211)))", "line_no": 1212, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1212)", "show": true, "valid": "(literal (bool True) 1212)", "voting_powers": "(map 1212 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 1223 (spender (literal (local-address (static_id 1 82)) 82)) (value (literal (nat 10) 1200)))", "line_no": 1222, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1222)", "show": true, "valid": "(literal (bool True) 1222)", "voting_powers": "(map 1222 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 1233 (spender (literal (local-address (static_id 1 82)) 82)) (value (literal (nat 40) 1211)))", "line_no": 1232, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1232)", "show": true, "valid": "(literal (bool True) 1232)", "voting_powers": "(map 1232 )", "export": true}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "deposit", "params": "(literal (nat 10) 1200)", "line_no": 1242, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1242)", "show": true, "valid": "(literal (bool True) 1242)", "voting_powers": "(map 1242 )", "export": true}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "deposit", "params": "(literal (nat 40) 1211)", "line_no": 1248, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1248)", "show": true, "valid": "(literal (bool True) 1248)", "voting_powers": "(map 1248 )", "export": true}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 1232) \"balances\" 1255) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 1255) \"balance\" 1255) (literal (nat 0) 1255) 1255)", "line_no": 1255}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 82) 1248) \"balances\" 1256) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 1256) \"balance\" 1256) (mul (literal (nat 10) 1200) (literal (intOrNat 1000000000000000000) 1256) 1256) 1256)", "line_no": 1256}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 1232) \"balances\" 1255) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22) 1259) \"balance\" 1259) (literal (nat 0) 1259) 1259)", "line_no": 1259}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 82) 1248) \"balances\" 1256) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22) 1260) \"balance\" 1260) (mul (mul (literal (nat 10) 1200) (literal (intOrNat 4) 1260) 1260) (literal (intOrNat 1000000000000000000) 1260) 1260) 1260)", "line_no": 1260}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 82) 1248) \"totalSupply\" 1263) (mul (add (literal (nat 10) 1200) (literal (nat 40) 1211) 1263) (literal (intOrNat 1000000000000000000) 1263) 1263) 1263)", "line_no": 1263}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 1232) \"balances\" 1255) (literal (local-address (static_id 1 82)) 82) 1266) \"balance\" 1266) (add (literal (nat 10) 1200) (literal (nat 40) 1211) 1266) 1266)", "line_no": 1266}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 82) 1248) \"underlyingBalance\" 1267) (add (literal (nat 10) 1200) (literal (nat 40) 1211) 1267) 1267)", "line_no": 1267}], "decompile": false, "kind": "test"}, {"shortname": "deposit_-_can_deposit_from_two_accounts_-_reversed", "longname": "deposit - can deposit from two accounts - reversed", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 266) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s157\" ((set_type (first (params 89) 1277) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 1277) (contract \"address\") 1277) (set (operations 1277) (cons (transfer (getLocal \"__s157\" 1277) (literal (mutez 0) 1277) (second (params 89) 1277) 89) (operations 1277) 1277) 1277))) (getAllowance True ((bind \"__s158\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 1277) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 1277) \"spender\" 46) 46) 46))) (set_type (second (params 45) 1277) (contract \"nat\") 1277) (set (operations 1277) (cons (transfer (getLocal \"__s158\" 1277) (literal (mutez 0) 1277) (second (params 45) 1277) 45) (operations 1277) 1277) 1277))) (getBalance True ((bind \"__s159\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 1277) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 1277) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 1277) 42) \"balance\" 42) 42))) (set_type (second (params 37) 1277) (contract \"nat\") 1277) (set (operations 1277) (cons (transfer (getLocal \"__s159\" 1277) (literal (mutez 0) 1277) (second (params 37) 1277) 37) (operations 1277) 1277) 1277))) (getTotalSupply True ((bind \"__s160\" ((set_type (first (params 49) 1277) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 1277) (contract \"nat\") 1277) (set (operations 1277) (cons (transfer (getLocal \"__s160\" 1277) (literal (mutez 0) 1277) (second (params 49) 1277) 49) (operations 1277) 1277) 1277))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1277, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 82)", "export": "(storage (record 82 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 86 ) (bigmap (unknown 267) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 86)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 73 ((literal (string \"\") 1283) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 75)) ((literal (string \"data\") 1283) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 72))) (bigmap \"string\" \"bytes\") 73)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 82)) (rewardAmount (literal (intOrNat 1000000000000000000) 82)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 82)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 62 ((literal (nat 0) 49) (tuple 1283 (literal (nat 0) 49) (type_annotation (map 51 ((literal (string \"name\") 1283) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 53)) ((literal (string \"decimals\") 1283) (literal (bytes \"0x3138\") 54)) ((literal (string \"symbol\") 1283) (literal (bytes \"0x6465787465724c6b555344\") 55)) ((literal (string \"icon\") 1283) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 56))) (map \"string\" \"bytes\") 51)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 62)) (totalSupply (literal (intOrNat 0) 82)) (underlyingBalance (literal (nat 0) 103)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 119) \"unit\" 120) (set (operations 135) (cons (transfer (tuple 135 (to_address (self) \"None\") (tuple 135 (literal (intOrNat 1) 135) (add_seconds (now) (literal (int 3600) 127) 127))) (balance) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 132) 130) \"Some\" \"None\" 130) 135) (operations 135) 135) 135) (set (operations 145) (cons (transfer (unit) (literal (mutez 0) 145) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 140) \"Some\" \"None\" 140) 145) (operations 145) 145) 145))) (deposit True ((set_type (params 187) \"nat\" 188) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 191) 191) (literal (string \"bad state\") 191) 191) (set (attr (data) \"state\" 191) (literal (intOrNat 3) 194) 194) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"Some\" (params 187) 195) 195) (set (attr (data) \"savedState_depositor\" 196) (variant \"Some\" (sender) 196) 196) (set (operations 205) (cons (transfer (tuple 205 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 199)) (literal (mutez 0) 205) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 200) \"Some\" \"None\" 200) 205) (operations 205) 205) 205))) (deposit_callback True ((set_type (params 209) \"nat\" 210) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 213) (literal (string \"bad sender\") 213) 213) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 3) 216) 216) (literal (string \"bad state\") 216) 216) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 195) \"Some\" \"None\" 219) 219) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 220) (literal (intOrNat 1000000000000000000) 220) 220) 220) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 221) 221) ((defineLocal \"newUnderlyingBalance\" (add (params 209) (getLocal \"tokensToDeposit\" 222) 222) 222) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 223) (literal (intOrNat 1000000000000000000) 223) 223) (getLocal \"newUnderlyingBalance\" 223) 223) 223) (set (getLocal \"newTokens\" 1283) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 224) (attr (data) \"totalSupply\" 96) 224) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 224) (getLocal \"fractionOfPoolOwnership\" 224) 224) 224) \"Some\" \"None\" 224) 224) 224)) 221) (set (attr (data) \"underlyingBalance\" 227) (add (params 209) (getLocal \"tokensToDeposit\" 227) 227) 227) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 196) \"Some\" \"None\" 230) 230) (set (operations 241) (cons (transfer (record 231 (from_ (getLocal \"depositor\" 232)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 234))) (literal (mutez 0) 241) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 236) \"Some\" \"None\" 236) 241) (operations 241) 241) 241) (set (operations 253) (cons (transfer (record 244 (address (getLocal \"depositor\" 245)) (value (getLocal \"newTokens\" 246))) (literal (mutez 0) 253) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 248) \"Some\" \"None\" 248) 253) (operations 253) 253) 253) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 256) 256) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"None\" (unit) -1) 257) (set (attr (data) \"savedState_depositor\" 196) (variant \"None\" (unit) -1) 258))) (getAdministrator True ((bind \"__s161\" ((set_type (first (params 108) 1283) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 1283) (contract \"address\") 1283) (set (operations 1283) (cons (transfer (getLocal \"__s161\" 1283) (literal (mutez 0) 1283) (second (params 108) 1283) 108) (operations 1283) 1283) 1283))) (getAllowance True ((bind \"__s162\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 1283) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 1283) \"spender\" 69) 69) 69))) (set_type (second (params 68) 1283) (contract \"nat\") 1283) (set (operations 1283) (cons (transfer (getLocal \"__s162\" 1283) (literal (mutez 0) 1283) (second (params 68) 1283) 68) (operations 1283) 1283) 1283))) (getBalance True ((bind \"__s163\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 1283) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 1283) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 1283) 65) \"balance\" 65) 65))) (set_type (second (params 60) 1283) (contract \"nat\") 1283) (set (operations 1283) (cons (transfer (getLocal \"__s163\" 1283) (literal (mutez 0) 1283) (second (params 60) 1283) 60) (operations 1283) 1283) 1283))) (getTotalSupply True ((bind \"__s164\" ((set_type (first (params 72) 1283) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 1283) (contract \"nat\") 1283) (set (operations 1283) (cons (transfer (getLocal \"__s164\" 1283) (literal (mutez 0) 1283) (second (params 72) 1283) 72) (operations 1283) 1283) 1283))) (liquidate True ((set_type (params 149) \"address\" 150) (set (operations 158) (cons (transfer (params 149) (literal (mutez 0) 158) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 155) 153) \"Some\" \"None\" 153) 158) (operations 158) 158) 158) (set (operations 171) (cons (transfer (record 161 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (attr (data) \"rewardAmount\" 164))) (literal (mutez 0) 171) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 166) \"Some\" \"None\" 166) 171) (operations 171) 171) 171) (set (operations 179) (cons (transfer (unit) (literal (mutez 0) 179) (openVariant (contract \"liquidate\" \"unit\" (params 149) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 262) \"nat\" 263) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 266) 266) (literal (string \"bad state\") 266) 266) (set (attr (data) \"state\" 191) (literal (intOrNat 2) 269) 269) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"Some\" (params 262) 270) 270) (set (attr (data) \"savedState_redeemer\" 271) (variant \"Some\" (sender) 271) 271) (set (operations 280) (cons (transfer (tuple 280 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 274)) (literal (mutez 0) 280) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 275) \"Some\" \"None\" 275) 280) (operations 280) 280) 280))) (redeem_callback True ((set_type (params 284) \"nat\" 285) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 288) (literal (string \"bad sender\") 288) 288) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 2) 291) 291) (literal (string \"bad state\") 291) 291) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 270) \"Some\" \"None\" 294) 294) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 295) (literal (intOrNat 1000000000000000000) 295) 295) (attr (data) \"totalSupply\" 96) 295) 295) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 296) (params 284) 296) (literal (intOrNat 1000000000000000000) 296) 296) 296) (set (attr (data) \"underlyingBalance\" 227) (openVariant (isNat (sub (params 284) (getLocal \"tokensToReceive\" 299) 299) 299) \"Some\" \"None\" 299) 299) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 271) \"Some\" \"None\" 302) 302) (set (operations 312) (cons (transfer (record 303 (address (getLocal \"redeemer\" 304)) (value (getLocal \"tokensToRedeem\" 305))) (literal (mutez 0) 312) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 307) \"Some\" \"None\" 307) 312) (operations 312) 312) 312) (set (operations 325) (cons (transfer (record 315 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 317)) (value (getLocal \"tokensToReceive\" 318))) (literal (mutez 0) 325) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 320) \"Some\" \"None\" 320) 325) (operations 325) 325) 325) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 328) 328) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"None\" (unit) -1) 329) (set (attr (data) \"savedState_redeemer\" 271) (variant \"None\" (unit) -1) 330))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 338) \"unit\" 339) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 342) 342) (literal (string \"bad state\") 342) 342) (set (attr (data) \"state\" 191) (literal (intOrNat 1) 345) 345) (set (operations 354) (cons (transfer (tuple 354 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 348)) (literal (mutez 0) 354) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 349) \"Some\" \"None\" 349) 354) (operations 354) 354) 354))) (updateBalance_callback True ((set_type (params 358) \"nat\" 359) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 362) (literal (string \"bad sender\") 362) 362) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 1) 365) 365) (literal (string \"bad state\") 365) 365) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 368) 368) (set (attr (data) \"underlyingBalance\" 227) (params 358) 371))) (updateContractMetadata True ((set_type (params 411) (tuple \"string\" \"bytes\") 412) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 414) (literal (string \"not governor\") 414) 414) (set (getItem (attr (data) \"metadata\" 418) (first (params 411) 416) 418) (second (params 411) 417) 418))) (updateDexterAddress True ((set_type (params 395) \"address\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"dexterAddress\" 132) (params 395) 399))) (updateGovernorAddress True ((set_type (params 379) \"address\" 380) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 382) (literal (string \"not governor\") 382) 382) (set (attr (data) \"governorAddress\" 414) (params 379) 383))) (updateOvenRegistryAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"ovenRegistryAddress\" 155) (params 403) 407))) (updateRewardAmount True ((set_type (params 387) \"nat\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"rewardAmount\" 164) (params 387) 391))) (updateTokenMetadata True ((set_type (params 422) (tuple \"nat\" (map \"string\" \"bytes\")) 423) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 425) (literal (string \"not governor\") 425) 425) (set (getItem (attr (data) \"token_metadata\" 426) (literal (intOrNat 0) 426) 426) (params 422) 426))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1283, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1288 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)) (value (literal (nat 10) 1286)))", "line_no": 1287, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1287)", "show": true, "valid": "(literal (bool True) 1287)", "voting_powers": "(map 1287 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1299 (address (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)) (value (literal (nat 40) 1297)))", "line_no": 1298, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1298)", "show": true, "valid": "(literal (bool True) 1298)", "voting_powers": "(map 1298 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 1309 (spender (literal (local-address (static_id 1 82)) 82)) (value (literal (nat 10) 1286)))", "line_no": 1308, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1308)", "show": true, "valid": "(literal (bool True) 1308)", "voting_powers": "(map 1308 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 1319 (spender (literal (local-address (static_id 1 82)) 82)) (value (literal (nat 40) 1297)))", "line_no": 1318, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1318)", "show": true, "valid": "(literal (bool True) 1318)", "voting_powers": "(map 1318 )", "export": true}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "deposit", "params": "(literal (nat 40) 1297)", "line_no": 1328, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1328)", "show": true, "valid": "(literal (bool True) 1328)", "voting_powers": "(map 1328 )", "export": true}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "deposit", "params": "(literal (nat 10) 1286)", "line_no": 1334, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1334)", "show": true, "valid": "(literal (bool True) 1334)", "voting_powers": "(map 1334 )", "export": true}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 1318) \"balances\" 1341) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 1341) \"balance\" 1341) (literal (nat 0) 1341) 1341)", "line_no": 1341}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 82) 1334) \"balances\" 1342) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 1342) \"balance\" 1342) (mul (literal (nat 10) 1286) (literal (intOrNat 1000000000000000000) 1342) 1342) 1342)", "line_no": 1342}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 1318) \"balances\" 1341) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22) 1345) \"balance\" 1345) (literal (nat 0) 1345) 1345)", "line_no": 1345}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 82) 1334) \"balances\" 1342) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22) 1346) \"balance\" 1346) (mul (mul (literal (nat 10) 1286) (literal (intOrNat 4) 1346) 1346) (literal (intOrNat 1000000000000000000) 1346) 1346) 1346)", "line_no": 1346}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 82) 1334) \"totalSupply\" 1349) (mul (add (literal (nat 10) 1286) (literal (nat 40) 1297) 1349) (literal (intOrNat 1000000000000000000) 1349) 1349) 1349)", "line_no": 1349}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 1318) \"balances\" 1341) (literal (local-address (static_id 1 82)) 82) 1352) \"balance\" 1352) (add (literal (nat 10) 1286) (literal (nat 40) 1297) 1352) 1352)", "line_no": 1352}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 82) 1334) \"underlyingBalance\" 1353) (add (literal (nat 10) 1286) (literal (nat 40) 1297) 1353) 1353)", "line_no": 1353}], "decompile": false, "kind": "test"}, {"shortname": "deposit_-_successfully_mints_LP_tokens_after_additional_liquidity_is_deposited_in_the_pool", "longname": "deposit - successfully mints LP tokens after additional liquidity is deposited in the pool", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 277) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s165\" ((set_type (first (params 89) 1363) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 1363) (contract \"address\") 1363) (set (operations 1363) (cons (transfer (getLocal \"__s165\" 1363) (literal (mutez 0) 1363) (second (params 89) 1363) 89) (operations 1363) 1363) 1363))) (getAllowance True ((bind \"__s166\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 1363) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 1363) \"spender\" 46) 46) 46))) (set_type (second (params 45) 1363) (contract \"nat\") 1363) (set (operations 1363) (cons (transfer (getLocal \"__s166\" 1363) (literal (mutez 0) 1363) (second (params 45) 1363) 45) (operations 1363) 1363) 1363))) (getBalance True ((bind \"__s167\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 1363) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 1363) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 1363) 42) \"balance\" 42) 42))) (set_type (second (params 37) 1363) (contract \"nat\") 1363) (set (operations 1363) (cons (transfer (getLocal \"__s167\" 1363) (literal (mutez 0) 1363) (second (params 37) 1363) 37) (operations 1363) 1363) 1363))) (getTotalSupply True ((bind \"__s168\" ((set_type (first (params 49) 1363) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 1363) (contract \"nat\") 1363) (set (operations 1363) (cons (transfer (getLocal \"__s168\" 1363) (literal (mutez 0) 1363) (second (params 49) 1363) 49) (operations 1363) 1363) 1363))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1363, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 82)", "export": "(storage (record 82 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 86 ) (bigmap (unknown 278) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 86)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 73 ((literal (string \"\") 1369) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 75)) ((literal (string \"data\") 1369) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 72))) (bigmap \"string\" \"bytes\") 73)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 82)) (rewardAmount (literal (intOrNat 1000000000000000000) 82)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 82)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 62 ((literal (nat 0) 49) (tuple 1369 (literal (nat 0) 49) (type_annotation (map 51 ((literal (string \"name\") 1369) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 53)) ((literal (string \"decimals\") 1369) (literal (bytes \"0x3138\") 54)) ((literal (string \"symbol\") 1369) (literal (bytes \"0x6465787465724c6b555344\") 55)) ((literal (string \"icon\") 1369) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 56))) (map \"string\" \"bytes\") 51)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 62)) (totalSupply (literal (intOrNat 0) 82)) (underlyingBalance (literal (nat 0) 103)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 119) \"unit\" 120) (set (operations 135) (cons (transfer (tuple 135 (to_address (self) \"None\") (tuple 135 (literal (intOrNat 1) 135) (add_seconds (now) (literal (int 3600) 127) 127))) (balance) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 132) 130) \"Some\" \"None\" 130) 135) (operations 135) 135) 135) (set (operations 145) (cons (transfer (unit) (literal (mutez 0) 145) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 140) \"Some\" \"None\" 140) 145) (operations 145) 145) 145))) (deposit True ((set_type (params 187) \"nat\" 188) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 191) 191) (literal (string \"bad state\") 191) 191) (set (attr (data) \"state\" 191) (literal (intOrNat 3) 194) 194) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"Some\" (params 187) 195) 195) (set (attr (data) \"savedState_depositor\" 196) (variant \"Some\" (sender) 196) 196) (set (operations 205) (cons (transfer (tuple 205 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 199)) (literal (mutez 0) 205) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 200) \"Some\" \"None\" 200) 205) (operations 205) 205) 205))) (deposit_callback True ((set_type (params 209) \"nat\" 210) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 213) (literal (string \"bad sender\") 213) 213) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 3) 216) 216) (literal (string \"bad state\") 216) 216) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 195) \"Some\" \"None\" 219) 219) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 220) (literal (intOrNat 1000000000000000000) 220) 220) 220) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 221) 221) ((defineLocal \"newUnderlyingBalance\" (add (params 209) (getLocal \"tokensToDeposit\" 222) 222) 222) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 223) (literal (intOrNat 1000000000000000000) 223) 223) (getLocal \"newUnderlyingBalance\" 223) 223) 223) (set (getLocal \"newTokens\" 1369) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 224) (attr (data) \"totalSupply\" 96) 224) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 224) (getLocal \"fractionOfPoolOwnership\" 224) 224) 224) \"Some\" \"None\" 224) 224) 224)) 221) (set (attr (data) \"underlyingBalance\" 227) (add (params 209) (getLocal \"tokensToDeposit\" 227) 227) 227) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 196) \"Some\" \"None\" 230) 230) (set (operations 241) (cons (transfer (record 231 (from_ (getLocal \"depositor\" 232)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 234))) (literal (mutez 0) 241) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 236) \"Some\" \"None\" 236) 241) (operations 241) 241) 241) (set (operations 253) (cons (transfer (record 244 (address (getLocal \"depositor\" 245)) (value (getLocal \"newTokens\" 246))) (literal (mutez 0) 253) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 248) \"Some\" \"None\" 248) 253) (operations 253) 253) 253) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 256) 256) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"None\" (unit) -1) 257) (set (attr (data) \"savedState_depositor\" 196) (variant \"None\" (unit) -1) 258))) (getAdministrator True ((bind \"__s169\" ((set_type (first (params 108) 1369) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 1369) (contract \"address\") 1369) (set (operations 1369) (cons (transfer (getLocal \"__s169\" 1369) (literal (mutez 0) 1369) (second (params 108) 1369) 108) (operations 1369) 1369) 1369))) (getAllowance True ((bind \"__s170\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 1369) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 1369) \"spender\" 69) 69) 69))) (set_type (second (params 68) 1369) (contract \"nat\") 1369) (set (operations 1369) (cons (transfer (getLocal \"__s170\" 1369) (literal (mutez 0) 1369) (second (params 68) 1369) 68) (operations 1369) 1369) 1369))) (getBalance True ((bind \"__s171\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 1369) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 1369) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 1369) 65) \"balance\" 65) 65))) (set_type (second (params 60) 1369) (contract \"nat\") 1369) (set (operations 1369) (cons (transfer (getLocal \"__s171\" 1369) (literal (mutez 0) 1369) (second (params 60) 1369) 60) (operations 1369) 1369) 1369))) (getTotalSupply True ((bind \"__s172\" ((set_type (first (params 72) 1369) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 1369) (contract \"nat\") 1369) (set (operations 1369) (cons (transfer (getLocal \"__s172\" 1369) (literal (mutez 0) 1369) (second (params 72) 1369) 72) (operations 1369) 1369) 1369))) (liquidate True ((set_type (params 149) \"address\" 150) (set (operations 158) (cons (transfer (params 149) (literal (mutez 0) 158) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 155) 153) \"Some\" \"None\" 153) 158) (operations 158) 158) 158) (set (operations 171) (cons (transfer (record 161 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (attr (data) \"rewardAmount\" 164))) (literal (mutez 0) 171) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 166) \"Some\" \"None\" 166) 171) (operations 171) 171) 171) (set (operations 179) (cons (transfer (unit) (literal (mutez 0) 179) (openVariant (contract \"liquidate\" \"unit\" (params 149) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 262) \"nat\" 263) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 266) 266) (literal (string \"bad state\") 266) 266) (set (attr (data) \"state\" 191) (literal (intOrNat 2) 269) 269) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"Some\" (params 262) 270) 270) (set (attr (data) \"savedState_redeemer\" 271) (variant \"Some\" (sender) 271) 271) (set (operations 280) (cons (transfer (tuple 280 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 274)) (literal (mutez 0) 280) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 275) \"Some\" \"None\" 275) 280) (operations 280) 280) 280))) (redeem_callback True ((set_type (params 284) \"nat\" 285) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 288) (literal (string \"bad sender\") 288) 288) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 2) 291) 291) (literal (string \"bad state\") 291) 291) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 270) \"Some\" \"None\" 294) 294) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 295) (literal (intOrNat 1000000000000000000) 295) 295) (attr (data) \"totalSupply\" 96) 295) 295) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 296) (params 284) 296) (literal (intOrNat 1000000000000000000) 296) 296) 296) (set (attr (data) \"underlyingBalance\" 227) (openVariant (isNat (sub (params 284) (getLocal \"tokensToReceive\" 299) 299) 299) \"Some\" \"None\" 299) 299) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 271) \"Some\" \"None\" 302) 302) (set (operations 312) (cons (transfer (record 303 (address (getLocal \"redeemer\" 304)) (value (getLocal \"tokensToRedeem\" 305))) (literal (mutez 0) 312) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 307) \"Some\" \"None\" 307) 312) (operations 312) 312) 312) (set (operations 325) (cons (transfer (record 315 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 317)) (value (getLocal \"tokensToReceive\" 318))) (literal (mutez 0) 325) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 320) \"Some\" \"None\" 320) 325) (operations 325) 325) 325) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 328) 328) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"None\" (unit) -1) 329) (set (attr (data) \"savedState_redeemer\" 271) (variant \"None\" (unit) -1) 330))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 338) \"unit\" 339) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 342) 342) (literal (string \"bad state\") 342) 342) (set (attr (data) \"state\" 191) (literal (intOrNat 1) 345) 345) (set (operations 354) (cons (transfer (tuple 354 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 348)) (literal (mutez 0) 354) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 349) \"Some\" \"None\" 349) 354) (operations 354) 354) 354))) (updateBalance_callback True ((set_type (params 358) \"nat\" 359) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 362) (literal (string \"bad sender\") 362) 362) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 1) 365) 365) (literal (string \"bad state\") 365) 365) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 368) 368) (set (attr (data) \"underlyingBalance\" 227) (params 358) 371))) (updateContractMetadata True ((set_type (params 411) (tuple \"string\" \"bytes\") 412) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 414) (literal (string \"not governor\") 414) 414) (set (getItem (attr (data) \"metadata\" 418) (first (params 411) 416) 418) (second (params 411) 417) 418))) (updateDexterAddress True ((set_type (params 395) \"address\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"dexterAddress\" 132) (params 395) 399))) (updateGovernorAddress True ((set_type (params 379) \"address\" 380) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 382) (literal (string \"not governor\") 382) 382) (set (attr (data) \"governorAddress\" 414) (params 379) 383))) (updateOvenRegistryAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"ovenRegistryAddress\" 155) (params 403) 407))) (updateRewardAmount True ((set_type (params 387) \"nat\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"rewardAmount\" 164) (params 387) 391))) (updateTokenMetadata True ((set_type (params 422) (tuple \"nat\" (map \"string\" \"bytes\")) 423) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 425) (literal (string \"not governor\") 425) 425) (set (getItem (attr (data) \"token_metadata\" 426) (literal (intOrNat 0) 426) 426) (params 422) 426))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1369, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1374 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)) (value (literal (nat 10) 1372)))", "line_no": 1373, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1373)", "show": true, "valid": "(literal (bool True) 1373)", "voting_powers": "(map 1373 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1385 (address (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)) (value (literal (nat 40) 1383)))", "line_no": 1384, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1384)", "show": true, "valid": "(literal (bool True) 1384)", "voting_powers": "(map 1384 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1396 (address (literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 23)) (value (literal (nat 60) 1394)))", "line_no": 1395, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1395)", "show": true, "valid": "(literal (bool True) 1395)", "voting_powers": "(map 1395 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 1406 (spender (literal (local-address (static_id 1 82)) 82)) (value (literal (nat 10) 1372)))", "line_no": 1405, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1405)", "show": true, "valid": "(literal (bool True) 1405)", "voting_powers": "(map 1405 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 1416 (spender (literal (local-address (static_id 1 82)) 82)) (value (literal (nat 40) 1383)))", "line_no": 1415, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1415)", "show": true, "valid": "(literal (bool True) 1415)", "voting_powers": "(map 1415 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 1426 (spender (literal (local-address (static_id 1 82)) 82)) (value (literal (nat 60) 1394)))", "line_no": 1425, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 23)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1425)", "show": true, "valid": "(literal (bool True) 1425)", "voting_powers": "(map 1425 )", "export": true}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "deposit", "params": "(literal (nat 10) 1372)", "line_no": 1435, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1435)", "show": true, "valid": "(literal (bool True) 1435)", "voting_powers": "(map 1435 )", "export": true}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "deposit", "params": "(literal (nat 40) 1383)", "line_no": 1441, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1441)", "show": true, "valid": "(literal (bool True) 1441)", "voting_powers": "(map 1441 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1450 (address (literal (local-address (static_id 1 82)) 82)) (value (literal (intOrNat 10) 1450)))", "line_no": 1449, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1449)", "show": true, "valid": "(literal (bool True) 1449)", "voting_powers": "(map 1449 )", "export": true}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "updateBalance", "params": "(unit)", "line_no": 1459, "title": "", "messageClass": "", "source": "none", "sender": "none", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1459)", "show": true, "valid": "(literal (bool True) 1459)", "voting_powers": "(map 1459 )", "export": true}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "deposit", "params": "(literal (nat 60) 1394)", "line_no": 1462, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 23)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1462)", "show": true, "valid": "(literal (bool True) 1462)", "voting_powers": "(map 1462 )", "export": true}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 82) 1462) \"totalSupply\" 1469) (literal (intOrNat 100000000000000000000) 1469) 1469)", "line_no": 1469}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 1449) \"balances\" 1472) (literal (local-address (static_id 1 82)) 82) 1472) \"balance\" 1472) (literal (nat 120) 1472) 1472)", "line_no": 1472}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 82) 1462) \"underlyingBalance\" 1473) (literal (nat 120) 1473) 1473)", "line_no": 1473}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 82) 1462) \"balances\" 1476) (literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 23) 1476) \"balance\" 1476) (literal (intOrNat 50000000000000000000) 1476) 1476)", "line_no": 1476}], "decompile": false, "kind": "test"}, {"shortname": "deposit_-_successfully_mints_LP_tokens_after_additional_liquidity_is_deposited_in_the_pool_with_a_small_amount_of_tokens", "longname": "deposit - successfully mints LP tokens after additional liquidity is deposited in the pool with a small amount of tokens", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 288) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s173\" ((set_type (first (params 89) 1486) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 1486) (contract \"address\") 1486) (set (operations 1486) (cons (transfer (getLocal \"__s173\" 1486) (literal (mutez 0) 1486) (second (params 89) 1486) 89) (operations 1486) 1486) 1486))) (getAllowance True ((bind \"__s174\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 1486) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 1486) \"spender\" 46) 46) 46))) (set_type (second (params 45) 1486) (contract \"nat\") 1486) (set (operations 1486) (cons (transfer (getLocal \"__s174\" 1486) (literal (mutez 0) 1486) (second (params 45) 1486) 45) (operations 1486) 1486) 1486))) (getBalance True ((bind \"__s175\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 1486) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 1486) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 1486) 42) \"balance\" 42) 42))) (set_type (second (params 37) 1486) (contract \"nat\") 1486) (set (operations 1486) (cons (transfer (getLocal \"__s175\" 1486) (literal (mutez 0) 1486) (second (params 37) 1486) 37) (operations 1486) 1486) 1486))) (getTotalSupply True ((bind \"__s176\" ((set_type (first (params 49) 1486) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 1486) (contract \"nat\") 1486) (set (operations 1486) (cons (transfer (getLocal \"__s176\" 1486) (literal (mutez 0) 1486) (second (params 49) 1486) 49) (operations 1486) 1486) 1486))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1486, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 82)", "export": "(storage (record 82 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 86 ) (bigmap (unknown 289) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 86)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 73 ((literal (string \"\") 1492) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 75)) ((literal (string \"data\") 1492) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 72))) (bigmap \"string\" \"bytes\") 73)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 82)) (rewardAmount (literal (intOrNat 1000000000000000000) 82)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 82)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 62 ((literal (nat 0) 49) (tuple 1492 (literal (nat 0) 49) (type_annotation (map 51 ((literal (string \"name\") 1492) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 53)) ((literal (string \"decimals\") 1492) (literal (bytes \"0x3138\") 54)) ((literal (string \"symbol\") 1492) (literal (bytes \"0x6465787465724c6b555344\") 55)) ((literal (string \"icon\") 1492) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 56))) (map \"string\" \"bytes\") 51)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 62)) (totalSupply (literal (intOrNat 0) 82)) (underlyingBalance (literal (nat 0) 103)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 119) \"unit\" 120) (set (operations 135) (cons (transfer (tuple 135 (to_address (self) \"None\") (tuple 135 (literal (intOrNat 1) 135) (add_seconds (now) (literal (int 3600) 127) 127))) (balance) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 132) 130) \"Some\" \"None\" 130) 135) (operations 135) 135) 135) (set (operations 145) (cons (transfer (unit) (literal (mutez 0) 145) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 140) \"Some\" \"None\" 140) 145) (operations 145) 145) 145))) (deposit True ((set_type (params 187) \"nat\" 188) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 191) 191) (literal (string \"bad state\") 191) 191) (set (attr (data) \"state\" 191) (literal (intOrNat 3) 194) 194) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"Some\" (params 187) 195) 195) (set (attr (data) \"savedState_depositor\" 196) (variant \"Some\" (sender) 196) 196) (set (operations 205) (cons (transfer (tuple 205 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 199)) (literal (mutez 0) 205) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 200) \"Some\" \"None\" 200) 205) (operations 205) 205) 205))) (deposit_callback True ((set_type (params 209) \"nat\" 210) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 213) (literal (string \"bad sender\") 213) 213) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 3) 216) 216) (literal (string \"bad state\") 216) 216) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 195) \"Some\" \"None\" 219) 219) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 220) (literal (intOrNat 1000000000000000000) 220) 220) 220) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 221) 221) ((defineLocal \"newUnderlyingBalance\" (add (params 209) (getLocal \"tokensToDeposit\" 222) 222) 222) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 223) (literal (intOrNat 1000000000000000000) 223) 223) (getLocal \"newUnderlyingBalance\" 223) 223) 223) (set (getLocal \"newTokens\" 1492) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 224) (attr (data) \"totalSupply\" 96) 224) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 224) (getLocal \"fractionOfPoolOwnership\" 224) 224) 224) \"Some\" \"None\" 224) 224) 224)) 221) (set (attr (data) \"underlyingBalance\" 227) (add (params 209) (getLocal \"tokensToDeposit\" 227) 227) 227) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 196) \"Some\" \"None\" 230) 230) (set (operations 241) (cons (transfer (record 231 (from_ (getLocal \"depositor\" 232)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 234))) (literal (mutez 0) 241) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 236) \"Some\" \"None\" 236) 241) (operations 241) 241) 241) (set (operations 253) (cons (transfer (record 244 (address (getLocal \"depositor\" 245)) (value (getLocal \"newTokens\" 246))) (literal (mutez 0) 253) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 248) \"Some\" \"None\" 248) 253) (operations 253) 253) 253) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 256) 256) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"None\" (unit) -1) 257) (set (attr (data) \"savedState_depositor\" 196) (variant \"None\" (unit) -1) 258))) (getAdministrator True ((bind \"__s177\" ((set_type (first (params 108) 1492) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 1492) (contract \"address\") 1492) (set (operations 1492) (cons (transfer (getLocal \"__s177\" 1492) (literal (mutez 0) 1492) (second (params 108) 1492) 108) (operations 1492) 1492) 1492))) (getAllowance True ((bind \"__s178\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 1492) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 1492) \"spender\" 69) 69) 69))) (set_type (second (params 68) 1492) (contract \"nat\") 1492) (set (operations 1492) (cons (transfer (getLocal \"__s178\" 1492) (literal (mutez 0) 1492) (second (params 68) 1492) 68) (operations 1492) 1492) 1492))) (getBalance True ((bind \"__s179\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 1492) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 1492) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 1492) 65) \"balance\" 65) 65))) (set_type (second (params 60) 1492) (contract \"nat\") 1492) (set (operations 1492) (cons (transfer (getLocal \"__s179\" 1492) (literal (mutez 0) 1492) (second (params 60) 1492) 60) (operations 1492) 1492) 1492))) (getTotalSupply True ((bind \"__s180\" ((set_type (first (params 72) 1492) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 1492) (contract \"nat\") 1492) (set (operations 1492) (cons (transfer (getLocal \"__s180\" 1492) (literal (mutez 0) 1492) (second (params 72) 1492) 72) (operations 1492) 1492) 1492))) (liquidate True ((set_type (params 149) \"address\" 150) (set (operations 158) (cons (transfer (params 149) (literal (mutez 0) 158) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 155) 153) \"Some\" \"None\" 153) 158) (operations 158) 158) 158) (set (operations 171) (cons (transfer (record 161 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (attr (data) \"rewardAmount\" 164))) (literal (mutez 0) 171) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 166) \"Some\" \"None\" 166) 171) (operations 171) 171) 171) (set (operations 179) (cons (transfer (unit) (literal (mutez 0) 179) (openVariant (contract \"liquidate\" \"unit\" (params 149) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 262) \"nat\" 263) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 266) 266) (literal (string \"bad state\") 266) 266) (set (attr (data) \"state\" 191) (literal (intOrNat 2) 269) 269) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"Some\" (params 262) 270) 270) (set (attr (data) \"savedState_redeemer\" 271) (variant \"Some\" (sender) 271) 271) (set (operations 280) (cons (transfer (tuple 280 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 274)) (literal (mutez 0) 280) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 275) \"Some\" \"None\" 275) 280) (operations 280) 280) 280))) (redeem_callback True ((set_type (params 284) \"nat\" 285) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 288) (literal (string \"bad sender\") 288) 288) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 2) 291) 291) (literal (string \"bad state\") 291) 291) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 270) \"Some\" \"None\" 294) 294) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 295) (literal (intOrNat 1000000000000000000) 295) 295) (attr (data) \"totalSupply\" 96) 295) 295) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 296) (params 284) 296) (literal (intOrNat 1000000000000000000) 296) 296) 296) (set (attr (data) \"underlyingBalance\" 227) (openVariant (isNat (sub (params 284) (getLocal \"tokensToReceive\" 299) 299) 299) \"Some\" \"None\" 299) 299) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 271) \"Some\" \"None\" 302) 302) (set (operations 312) (cons (transfer (record 303 (address (getLocal \"redeemer\" 304)) (value (getLocal \"tokensToRedeem\" 305))) (literal (mutez 0) 312) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 307) \"Some\" \"None\" 307) 312) (operations 312) 312) 312) (set (operations 325) (cons (transfer (record 315 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 317)) (value (getLocal \"tokensToReceive\" 318))) (literal (mutez 0) 325) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 320) \"Some\" \"None\" 320) 325) (operations 325) 325) 325) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 328) 328) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"None\" (unit) -1) 329) (set (attr (data) \"savedState_redeemer\" 271) (variant \"None\" (unit) -1) 330))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 338) \"unit\" 339) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 342) 342) (literal (string \"bad state\") 342) 342) (set (attr (data) \"state\" 191) (literal (intOrNat 1) 345) 345) (set (operations 354) (cons (transfer (tuple 354 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 348)) (literal (mutez 0) 354) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 349) \"Some\" \"None\" 349) 354) (operations 354) 354) 354))) (updateBalance_callback True ((set_type (params 358) \"nat\" 359) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 362) (literal (string \"bad sender\") 362) 362) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 1) 365) 365) (literal (string \"bad state\") 365) 365) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 368) 368) (set (attr (data) \"underlyingBalance\" 227) (params 358) 371))) (updateContractMetadata True ((set_type (params 411) (tuple \"string\" \"bytes\") 412) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 414) (literal (string \"not governor\") 414) 414) (set (getItem (attr (data) \"metadata\" 418) (first (params 411) 416) 418) (second (params 411) 417) 418))) (updateDexterAddress True ((set_type (params 395) \"address\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"dexterAddress\" 132) (params 395) 399))) (updateGovernorAddress True ((set_type (params 379) \"address\" 380) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 382) (literal (string \"not governor\") 382) 382) (set (attr (data) \"governorAddress\" 414) (params 379) 383))) (updateOvenRegistryAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"ovenRegistryAddress\" 155) (params 403) 407))) (updateRewardAmount True ((set_type (params 387) \"nat\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"rewardAmount\" 164) (params 387) 391))) (updateTokenMetadata True ((set_type (params 422) (tuple \"nat\" (map \"string\" \"bytes\")) 423) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 425) (literal (string \"not governor\") 425) 425) (set (getItem (attr (data) \"token_metadata\" 426) (literal (intOrNat 0) 426) 426) (params 422) 426))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1492, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1497 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)) (value (literal (nat 10) 1495)))", "line_no": 1496, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1496)", "show": true, "valid": "(literal (bool True) 1496)", "voting_powers": "(map 1496 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1508 (address (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)) (value (literal (nat 40) 1506)))", "line_no": 1507, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1507)", "show": true, "valid": "(literal (bool True) 1507)", "voting_powers": "(map 1507 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1519 (address (literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 23)) (value (literal (nat 20) 1517)))", "line_no": 1518, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1518)", "show": true, "valid": "(literal (bool True) 1518)", "voting_powers": "(map 1518 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 1529 (spender (literal (local-address (static_id 1 82)) 82)) (value (literal (nat 10) 1495)))", "line_no": 1528, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1528)", "show": true, "valid": "(literal (bool True) 1528)", "voting_powers": "(map 1528 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 1539 (spender (literal (local-address (static_id 1 82)) 82)) (value (literal (nat 40) 1506)))", "line_no": 1538, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1538)", "show": true, "valid": "(literal (bool True) 1538)", "voting_powers": "(map 1538 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 1549 (spender (literal (local-address (static_id 1 82)) 82)) (value (literal (nat 20) 1517)))", "line_no": 1548, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 23)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1548)", "show": true, "valid": "(literal (bool True) 1548)", "voting_powers": "(map 1548 )", "export": true}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "deposit", "params": "(literal (nat 10) 1495)", "line_no": 1558, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1558)", "show": true, "valid": "(literal (bool True) 1558)", "voting_powers": "(map 1558 )", "export": true}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "deposit", "params": "(literal (nat 40) 1506)", "line_no": 1564, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1564)", "show": true, "valid": "(literal (bool True) 1564)", "voting_powers": "(map 1564 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1573 (address (literal (local-address (static_id 1 82)) 82)) (value (literal (intOrNat 10) 1573)))", "line_no": 1572, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1572)", "show": true, "valid": "(literal (bool True) 1572)", "voting_powers": "(map 1572 )", "export": true}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "updateBalance", "params": "(unit)", "line_no": 1582, "title": "", "messageClass": "", "source": "none", "sender": "none", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1582)", "show": true, "valid": "(literal (bool True) 1582)", "voting_powers": "(map 1582 )", "export": true}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "deposit", "params": "(literal (nat 20) 1517)", "line_no": 1585, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 23)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1585)", "show": true, "valid": "(literal (bool True) 1585)", "voting_powers": "(map 1585 )", "export": true}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 82) 1585) \"totalSupply\" 1592) (literal (intOrNat 66666666666666666666) 1592) 1592)", "line_no": 1592}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 1572) \"balances\" 1595) (literal (local-address (static_id 1 82)) 82) 1595) \"balance\" 1595) (literal (nat 80) 1595) 1595)", "line_no": 1595}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 82) 1585) \"underlyingBalance\" 1596) (literal (nat 80) 1596) 1596)", "line_no": 1596}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 82) 1585) \"balances\" 1599) (literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 23) 1599) \"balance\" 1599) (literal (intOrNat 16666666666666666666) 1599) 1599)", "line_no": 1599}], "decompile": false, "kind": "test"}, {"shortname": "deposit_callback_-_can_finish_deposit", "longname": "deposit_callback - can finish deposit", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 299) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s181\" ((set_type (first (params 89) 1613) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 1613) (contract \"address\") 1613) (set (operations 1613) (cons (transfer (getLocal \"__s181\" 1613) (literal (mutez 0) 1613) (second (params 89) 1613) 89) (operations 1613) 1613) 1613))) (getAllowance True ((bind \"__s182\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 1613) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 1613) \"spender\" 46) 46) 46))) (set_type (second (params 45) 1613) (contract \"nat\") 1613) (set (operations 1613) (cons (transfer (getLocal \"__s182\" 1613) (literal (mutez 0) 1613) (second (params 45) 1613) 45) (operations 1613) 1613) 1613))) (getBalance True ((bind \"__s183\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 1613) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 1613) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 1613) 42) \"balance\" 42) 42))) (set_type (second (params 37) 1613) (contract \"nat\") 1613) (set (operations 1613) (cons (transfer (getLocal \"__s183\" 1613) (literal (mutez 0) 1613) (second (params 37) 1613) 37) (operations 1613) 1613) 1613))) (getTotalSupply True ((bind \"__s184\" ((set_type (first (params 49) 1613) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 1613) (contract \"nat\") 1613) (set (operations 1613) (cons (transfer (getLocal \"__s184\" 1613) (literal (mutez 0) 1613) (second (params 49) 1613) 49) (operations 1613) 1613) 1613))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1613, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1618 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)) (value (literal (nat 10) 1616)))", "line_no": 1617, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1617)", "show": true, "valid": "(literal (bool True) 1617)", "voting_powers": "(map 1617 )", "export": true}, {"action": "newContract", "id": "(static_id 1 82)", "export": "(storage (record 82 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 86 ) (bigmap (unknown 300) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 86)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 73 ((literal (string \"\") 1634) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 75)) ((literal (string \"data\") 1634) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 72))) (bigmap \"string\" \"bytes\") 73)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 82)) (rewardAmount (literal (intOrNat 1000000000000000000) 82)) (savedState_depositor (variant \"Some\" (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 1629)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"Some\" (literal (nat 10) 1616) 1630)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 3) 82)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 62 ((literal (nat 0) 49) (tuple 1634 (literal (nat 0) 49) (type_annotation (map 51 ((literal (string \"name\") 1634) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 53)) ((literal (string \"decimals\") 1634) (literal (bytes \"0x3138\") 54)) ((literal (string \"symbol\") 1634) (literal (bytes \"0x6465787465724c6b555344\") 55)) ((literal (string \"icon\") 1634) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 56))) (map \"string\" \"bytes\") 51)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 62)) (totalSupply (literal (intOrNat 0) 82)) (underlyingBalance (literal (nat 0) 103)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 119) \"unit\" 120) (set (operations 135) (cons (transfer (tuple 135 (to_address (self) \"None\") (tuple 135 (literal (intOrNat 1) 135) (add_seconds (now) (literal (int 3600) 127) 127))) (balance) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 132) 130) \"Some\" \"None\" 130) 135) (operations 135) 135) 135) (set (operations 145) (cons (transfer (unit) (literal (mutez 0) 145) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 140) \"Some\" \"None\" 140) 145) (operations 145) 145) 145))) (deposit True ((set_type (params 187) \"nat\" 188) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 191) 191) (literal (string \"bad state\") 191) 191) (set (attr (data) \"state\" 191) (literal (intOrNat 3) 194) 194) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"Some\" (params 187) 195) 195) (set (attr (data) \"savedState_depositor\" 196) (variant \"Some\" (sender) 196) 196) (set (operations 205) (cons (transfer (tuple 205 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 199)) (literal (mutez 0) 205) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 200) \"Some\" \"None\" 200) 205) (operations 205) 205) 205))) (deposit_callback True ((set_type (params 209) \"nat\" 210) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 213) (literal (string \"bad sender\") 213) 213) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 3) 216) 216) (literal (string \"bad state\") 216) 216) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 195) \"Some\" \"None\" 219) 219) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 220) (literal (intOrNat 1000000000000000000) 220) 220) 220) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 221) 221) ((defineLocal \"newUnderlyingBalance\" (add (params 209) (getLocal \"tokensToDeposit\" 222) 222) 222) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 223) (literal (intOrNat 1000000000000000000) 223) 223) (getLocal \"newUnderlyingBalance\" 223) 223) 223) (set (getLocal \"newTokens\" 1634) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 224) (attr (data) \"totalSupply\" 96) 224) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 224) (getLocal \"fractionOfPoolOwnership\" 224) 224) 224) \"Some\" \"None\" 224) 224) 224)) 221) (set (attr (data) \"underlyingBalance\" 227) (add (params 209) (getLocal \"tokensToDeposit\" 227) 227) 227) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 196) \"Some\" \"None\" 230) 230) (set (operations 241) (cons (transfer (record 231 (from_ (getLocal \"depositor\" 232)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 234))) (literal (mutez 0) 241) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 236) \"Some\" \"None\" 236) 241) (operations 241) 241) 241) (set (operations 253) (cons (transfer (record 244 (address (getLocal \"depositor\" 245)) (value (getLocal \"newTokens\" 246))) (literal (mutez 0) 253) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 248) \"Some\" \"None\" 248) 253) (operations 253) 253) 253) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 256) 256) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"None\" (unit) -1) 257) (set (attr (data) \"savedState_depositor\" 196) (variant \"None\" (unit) -1) 258))) (getAdministrator True ((bind \"__s185\" ((set_type (first (params 108) 1634) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 1634) (contract \"address\") 1634) (set (operations 1634) (cons (transfer (getLocal \"__s185\" 1634) (literal (mutez 0) 1634) (second (params 108) 1634) 108) (operations 1634) 1634) 1634))) (getAllowance True ((bind \"__s186\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 1634) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 1634) \"spender\" 69) 69) 69))) (set_type (second (params 68) 1634) (contract \"nat\") 1634) (set (operations 1634) (cons (transfer (getLocal \"__s186\" 1634) (literal (mutez 0) 1634) (second (params 68) 1634) 68) (operations 1634) 1634) 1634))) (getBalance True ((bind \"__s187\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 1634) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 1634) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 1634) 65) \"balance\" 65) 65))) (set_type (second (params 60) 1634) (contract \"nat\") 1634) (set (operations 1634) (cons (transfer (getLocal \"__s187\" 1634) (literal (mutez 0) 1634) (second (params 60) 1634) 60) (operations 1634) 1634) 1634))) (getTotalSupply True ((bind \"__s188\" ((set_type (first (params 72) 1634) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 1634) (contract \"nat\") 1634) (set (operations 1634) (cons (transfer (getLocal \"__s188\" 1634) (literal (mutez 0) 1634) (second (params 72) 1634) 72) (operations 1634) 1634) 1634))) (liquidate True ((set_type (params 149) \"address\" 150) (set (operations 158) (cons (transfer (params 149) (literal (mutez 0) 158) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 155) 153) \"Some\" \"None\" 153) 158) (operations 158) 158) 158) (set (operations 171) (cons (transfer (record 161 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (attr (data) \"rewardAmount\" 164))) (literal (mutez 0) 171) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 166) \"Some\" \"None\" 166) 171) (operations 171) 171) 171) (set (operations 179) (cons (transfer (unit) (literal (mutez 0) 179) (openVariant (contract \"liquidate\" \"unit\" (params 149) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 262) \"nat\" 263) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 266) 266) (literal (string \"bad state\") 266) 266) (set (attr (data) \"state\" 191) (literal (intOrNat 2) 269) 269) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"Some\" (params 262) 270) 270) (set (attr (data) \"savedState_redeemer\" 271) (variant \"Some\" (sender) 271) 271) (set (operations 280) (cons (transfer (tuple 280 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 274)) (literal (mutez 0) 280) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 275) \"Some\" \"None\" 275) 280) (operations 280) 280) 280))) (redeem_callback True ((set_type (params 284) \"nat\" 285) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 288) (literal (string \"bad sender\") 288) 288) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 2) 291) 291) (literal (string \"bad state\") 291) 291) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 270) \"Some\" \"None\" 294) 294) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 295) (literal (intOrNat 1000000000000000000) 295) 295) (attr (data) \"totalSupply\" 96) 295) 295) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 296) (params 284) 296) (literal (intOrNat 1000000000000000000) 296) 296) 296) (set (attr (data) \"underlyingBalance\" 227) (openVariant (isNat (sub (params 284) (getLocal \"tokensToReceive\" 299) 299) 299) \"Some\" \"None\" 299) 299) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 271) \"Some\" \"None\" 302) 302) (set (operations 312) (cons (transfer (record 303 (address (getLocal \"redeemer\" 304)) (value (getLocal \"tokensToRedeem\" 305))) (literal (mutez 0) 312) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 307) \"Some\" \"None\" 307) 312) (operations 312) 312) 312) (set (operations 325) (cons (transfer (record 315 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 317)) (value (getLocal \"tokensToReceive\" 318))) (literal (mutez 0) 325) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 320) \"Some\" \"None\" 320) 325) (operations 325) 325) 325) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 328) 328) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"None\" (unit) -1) 329) (set (attr (data) \"savedState_redeemer\" 271) (variant \"None\" (unit) -1) 330))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 338) \"unit\" 339) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 342) 342) (literal (string \"bad state\") 342) 342) (set (attr (data) \"state\" 191) (literal (intOrNat 1) 345) 345) (set (operations 354) (cons (transfer (tuple 354 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 348)) (literal (mutez 0) 354) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 349) \"Some\" \"None\" 349) 354) (operations 354) 354) 354))) (updateBalance_callback True ((set_type (params 358) \"nat\" 359) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 362) (literal (string \"bad sender\") 362) 362) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 1) 365) 365) (literal (string \"bad state\") 365) 365) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 368) 368) (set (attr (data) \"underlyingBalance\" 227) (params 358) 371))) (updateContractMetadata True ((set_type (params 411) (tuple \"string\" \"bytes\") 412) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 414) (literal (string \"not governor\") 414) 414) (set (getItem (attr (data) \"metadata\" 418) (first (params 411) 416) 418) (second (params 411) 417) 418))) (updateDexterAddress True ((set_type (params 395) \"address\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"dexterAddress\" 132) (params 395) 399))) (updateGovernorAddress True ((set_type (params 379) \"address\" 380) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 382) (literal (string \"not governor\") 382) 382) (set (attr (data) \"governorAddress\" 414) (params 379) 383))) (updateOvenRegistryAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"ovenRegistryAddress\" 155) (params 403) 407))) (updateRewardAmount True ((set_type (params 387) \"nat\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"rewardAmount\" 164) (params 387) 391))) (updateTokenMetadata True ((set_type (params 422) (tuple \"nat\" (map \"string\" \"bytes\")) 423) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 425) (literal (string \"not governor\") 425) 425) (set (getItem (attr (data) \"token_metadata\" 426) (literal (intOrNat 0) 426) 426) (params 422) 426))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1634, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 1638 (spender (literal (local-address (static_id 1 82)) 82)) (value (literal (nat 10) 1616)))", "line_no": 1637, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1637)", "show": true, "valid": "(literal (bool True) 1637)", "voting_powers": "(map 1637 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1649 (address (literal (local-address (static_id 1 82)) 82)) (value (literal (intOrNat 200000000000000000000) 1649)))", "line_no": 1648, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1648)", "show": true, "valid": "(literal (bool True) 1648)", "voting_powers": "(map 1648 )", "export": true}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "deposit_callback", "params": "(literal (intOrNat 200000000000000000000) 1658)", "line_no": 1658, "title": "", "messageClass": "", "source": "none", "sender": "(literal (local-address (static_id 0 8)) 8)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1658)", "show": true, "valid": "(literal (bool True) 1658)", "voting_powers": "(map 1658 )", "export": true}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 82) 1658) \"state\" 1667) (literal (intOrNat 0) 1667) 1667)", "line_no": 1667}], "decompile": false, "kind": "test"}, {"shortname": "deposit_callback_-_fails_in_bad_state", "longname": "deposit_callback - fails in bad state", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 310) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s189\" ((set_type (first (params 89) 1677) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 1677) (contract \"address\") 1677) (set (operations 1677) (cons (transfer (getLocal \"__s189\" 1677) (literal (mutez 0) 1677) (second (params 89) 1677) 89) (operations 1677) 1677) 1677))) (getAllowance True ((bind \"__s190\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 1677) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 1677) \"spender\" 46) 46) 46))) (set_type (second (params 45) 1677) (contract \"nat\") 1677) (set (operations 1677) (cons (transfer (getLocal \"__s190\" 1677) (literal (mutez 0) 1677) (second (params 45) 1677) 45) (operations 1677) 1677) 1677))) (getBalance True ((bind \"__s191\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 1677) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 1677) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 1677) 42) \"balance\" 42) 42))) (set_type (second (params 37) 1677) (contract \"nat\") 1677) (set (operations 1677) (cons (transfer (getLocal \"__s191\" 1677) (literal (mutez 0) 1677) (second (params 37) 1677) 37) (operations 1677) 1677) 1677))) (getTotalSupply True ((bind \"__s192\" ((set_type (first (params 49) 1677) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 1677) (contract \"nat\") 1677) (set (operations 1677) (cons (transfer (getLocal \"__s192\" 1677) (literal (mutez 0) 1677) (second (params 49) 1677) 49) (operations 1677) 1677) 1677))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1677, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1682 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)) (value (literal (nat 10) 1680)))", "line_no": 1681, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1681)", "show": true, "valid": "(literal (bool True) 1681)", "voting_powers": "(map 1681 )", "export": true}, {"action": "newContract", "id": "(static_id 1 82)", "export": "(storage (record 82 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 86 ) (bigmap (unknown 311) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 86)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 73 ((literal (string \"\") 1698) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 75)) ((literal (string \"data\") 1698) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 72))) (bigmap \"string\" \"bytes\") 73)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 82)) (rewardAmount (literal (intOrNat 1000000000000000000) 82)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 82)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 62 ((literal (nat 0) 49) (tuple 1698 (literal (nat 0) 49) (type_annotation (map 51 ((literal (string \"name\") 1698) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 53)) ((literal (string \"decimals\") 1698) (literal (bytes \"0x3138\") 54)) ((literal (string \"symbol\") 1698) (literal (bytes \"0x6465787465724c6b555344\") 55)) ((literal (string \"icon\") 1698) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 56))) (map \"string\" \"bytes\") 51)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 62)) (totalSupply (literal (intOrNat 0) 82)) (underlyingBalance (literal (nat 0) 103)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 119) \"unit\" 120) (set (operations 135) (cons (transfer (tuple 135 (to_address (self) \"None\") (tuple 135 (literal (intOrNat 1) 135) (add_seconds (now) (literal (int 3600) 127) 127))) (balance) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 132) 130) \"Some\" \"None\" 130) 135) (operations 135) 135) 135) (set (operations 145) (cons (transfer (unit) (literal (mutez 0) 145) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 140) \"Some\" \"None\" 140) 145) (operations 145) 145) 145))) (deposit True ((set_type (params 187) \"nat\" 188) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 191) 191) (literal (string \"bad state\") 191) 191) (set (attr (data) \"state\" 191) (literal (intOrNat 3) 194) 194) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"Some\" (params 187) 195) 195) (set (attr (data) \"savedState_depositor\" 196) (variant \"Some\" (sender) 196) 196) (set (operations 205) (cons (transfer (tuple 205 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 199)) (literal (mutez 0) 205) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 200) \"Some\" \"None\" 200) 205) (operations 205) 205) 205))) (deposit_callback True ((set_type (params 209) \"nat\" 210) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 213) (literal (string \"bad sender\") 213) 213) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 3) 216) 216) (literal (string \"bad state\") 216) 216) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 195) \"Some\" \"None\" 219) 219) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 220) (literal (intOrNat 1000000000000000000) 220) 220) 220) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 221) 221) ((defineLocal \"newUnderlyingBalance\" (add (params 209) (getLocal \"tokensToDeposit\" 222) 222) 222) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 223) (literal (intOrNat 1000000000000000000) 223) 223) (getLocal \"newUnderlyingBalance\" 223) 223) 223) (set (getLocal \"newTokens\" 1698) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 224) (attr (data) \"totalSupply\" 96) 224) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 224) (getLocal \"fractionOfPoolOwnership\" 224) 224) 224) \"Some\" \"None\" 224) 224) 224)) 221) (set (attr (data) \"underlyingBalance\" 227) (add (params 209) (getLocal \"tokensToDeposit\" 227) 227) 227) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 196) \"Some\" \"None\" 230) 230) (set (operations 241) (cons (transfer (record 231 (from_ (getLocal \"depositor\" 232)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 234))) (literal (mutez 0) 241) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 236) \"Some\" \"None\" 236) 241) (operations 241) 241) 241) (set (operations 253) (cons (transfer (record 244 (address (getLocal \"depositor\" 245)) (value (getLocal \"newTokens\" 246))) (literal (mutez 0) 253) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 248) \"Some\" \"None\" 248) 253) (operations 253) 253) 253) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 256) 256) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"None\" (unit) -1) 257) (set (attr (data) \"savedState_depositor\" 196) (variant \"None\" (unit) -1) 258))) (getAdministrator True ((bind \"__s193\" ((set_type (first (params 108) 1698) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 1698) (contract \"address\") 1698) (set (operations 1698) (cons (transfer (getLocal \"__s193\" 1698) (literal (mutez 0) 1698) (second (params 108) 1698) 108) (operations 1698) 1698) 1698))) (getAllowance True ((bind \"__s194\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 1698) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 1698) \"spender\" 69) 69) 69))) (set_type (second (params 68) 1698) (contract \"nat\") 1698) (set (operations 1698) (cons (transfer (getLocal \"__s194\" 1698) (literal (mutez 0) 1698) (second (params 68) 1698) 68) (operations 1698) 1698) 1698))) (getBalance True ((bind \"__s195\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 1698) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 1698) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 1698) 65) \"balance\" 65) 65))) (set_type (second (params 60) 1698) (contract \"nat\") 1698) (set (operations 1698) (cons (transfer (getLocal \"__s195\" 1698) (literal (mutez 0) 1698) (second (params 60) 1698) 60) (operations 1698) 1698) 1698))) (getTotalSupply True ((bind \"__s196\" ((set_type (first (params 72) 1698) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 1698) (contract \"nat\") 1698) (set (operations 1698) (cons (transfer (getLocal \"__s196\" 1698) (literal (mutez 0) 1698) (second (params 72) 1698) 72) (operations 1698) 1698) 1698))) (liquidate True ((set_type (params 149) \"address\" 150) (set (operations 158) (cons (transfer (params 149) (literal (mutez 0) 158) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 155) 153) \"Some\" \"None\" 153) 158) (operations 158) 158) 158) (set (operations 171) (cons (transfer (record 161 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (attr (data) \"rewardAmount\" 164))) (literal (mutez 0) 171) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 166) \"Some\" \"None\" 166) 171) (operations 171) 171) 171) (set (operations 179) (cons (transfer (unit) (literal (mutez 0) 179) (openVariant (contract \"liquidate\" \"unit\" (params 149) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 262) \"nat\" 263) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 266) 266) (literal (string \"bad state\") 266) 266) (set (attr (data) \"state\" 191) (literal (intOrNat 2) 269) 269) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"Some\" (params 262) 270) 270) (set (attr (data) \"savedState_redeemer\" 271) (variant \"Some\" (sender) 271) 271) (set (operations 280) (cons (transfer (tuple 280 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 274)) (literal (mutez 0) 280) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 275) \"Some\" \"None\" 275) 280) (operations 280) 280) 280))) (redeem_callback True ((set_type (params 284) \"nat\" 285) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 288) (literal (string \"bad sender\") 288) 288) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 2) 291) 291) (literal (string \"bad state\") 291) 291) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 270) \"Some\" \"None\" 294) 294) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 295) (literal (intOrNat 1000000000000000000) 295) 295) (attr (data) \"totalSupply\" 96) 295) 295) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 296) (params 284) 296) (literal (intOrNat 1000000000000000000) 296) 296) 296) (set (attr (data) \"underlyingBalance\" 227) (openVariant (isNat (sub (params 284) (getLocal \"tokensToReceive\" 299) 299) 299) \"Some\" \"None\" 299) 299) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 271) \"Some\" \"None\" 302) 302) (set (operations 312) (cons (transfer (record 303 (address (getLocal \"redeemer\" 304)) (value (getLocal \"tokensToRedeem\" 305))) (literal (mutez 0) 312) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 307) \"Some\" \"None\" 307) 312) (operations 312) 312) 312) (set (operations 325) (cons (transfer (record 315 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 317)) (value (getLocal \"tokensToReceive\" 318))) (literal (mutez 0) 325) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 320) \"Some\" \"None\" 320) 325) (operations 325) 325) 325) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 328) 328) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"None\" (unit) -1) 329) (set (attr (data) \"savedState_redeemer\" 271) (variant \"None\" (unit) -1) 330))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 338) \"unit\" 339) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 342) 342) (literal (string \"bad state\") 342) 342) (set (attr (data) \"state\" 191) (literal (intOrNat 1) 345) 345) (set (operations 354) (cons (transfer (tuple 354 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 348)) (literal (mutez 0) 354) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 349) \"Some\" \"None\" 349) 354) (operations 354) 354) 354))) (updateBalance_callback True ((set_type (params 358) \"nat\" 359) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 362) (literal (string \"bad sender\") 362) 362) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 1) 365) 365) (literal (string \"bad state\") 365) 365) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 368) 368) (set (attr (data) \"underlyingBalance\" 227) (params 358) 371))) (updateContractMetadata True ((set_type (params 411) (tuple \"string\" \"bytes\") 412) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 414) (literal (string \"not governor\") 414) 414) (set (getItem (attr (data) \"metadata\" 418) (first (params 411) 416) 418) (second (params 411) 417) 418))) (updateDexterAddress True ((set_type (params 395) \"address\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"dexterAddress\" 132) (params 395) 399))) (updateGovernorAddress True ((set_type (params 379) \"address\" 380) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 382) (literal (string \"not governor\") 382) 382) (set (attr (data) \"governorAddress\" 414) (params 379) 383))) (updateOvenRegistryAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"ovenRegistryAddress\" 155) (params 403) 407))) (updateRewardAmount True ((set_type (params 387) \"nat\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"rewardAmount\" 164) (params 387) 391))) (updateTokenMetadata True ((set_type (params 422) (tuple \"nat\" (map \"string\" \"bytes\")) 423) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 425) (literal (string \"not governor\") 425) 425) (set (getItem (attr (data) \"token_metadata\" 426) (literal (intOrNat 0) 426) 426) (params 422) 426))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1698, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 1702 (spender (literal (local-address (static_id 1 82)) 82)) (value (literal (nat 10) 1680)))", "line_no": 1701, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1701)", "show": true, "valid": "(literal (bool True) 1701)", "voting_powers": "(map 1701 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1713 (address (literal (local-address (static_id 1 82)) 82)) (value (literal (intOrNat 200000000000000000000) 1713)))", "line_no": 1712, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1712)", "show": true, "valid": "(literal (bool True) 1712)", "voting_powers": "(map 1712 )", "export": true}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "deposit_callback", "params": "(literal (intOrNat 200000000000000000000) 1723)", "line_no": 1723, "title": "", "messageClass": "", "source": "none", "sender": "(literal (local-address (static_id 0 8)) 8)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1723)", "show": true, "valid": "(literal (bool False) 1723)", "voting_powers": "(map 1723 )", "export": true}], "decompile": false, "kind": "test"}, {"shortname": "deposit_callback_-_fails_with_bad_sender", "longname": "deposit_callback - fails with bad sender", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 321) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s197\" ((set_type (first (params 89) 1738) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 1738) (contract \"address\") 1738) (set (operations 1738) (cons (transfer (getLocal \"__s197\" 1738) (literal (mutez 0) 1738) (second (params 89) 1738) 89) (operations 1738) 1738) 1738))) (getAllowance True ((bind \"__s198\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 1738) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 1738) \"spender\" 46) 46) 46))) (set_type (second (params 45) 1738) (contract \"nat\") 1738) (set (operations 1738) (cons (transfer (getLocal \"__s198\" 1738) (literal (mutez 0) 1738) (second (params 45) 1738) 45) (operations 1738) 1738) 1738))) (getBalance True ((bind \"__s199\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 1738) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 1738) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 1738) 42) \"balance\" 42) 42))) (set_type (second (params 37) 1738) (contract \"nat\") 1738) (set (operations 1738) (cons (transfer (getLocal \"__s199\" 1738) (literal (mutez 0) 1738) (second (params 37) 1738) 37) (operations 1738) 1738) 1738))) (getTotalSupply True ((bind \"__s200\" ((set_type (first (params 49) 1738) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 1738) (contract \"nat\") 1738) (set (operations 1738) (cons (transfer (getLocal \"__s200\" 1738) (literal (mutez 0) 1738) (second (params 49) 1738) 49) (operations 1738) 1738) 1738))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1738, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1743 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)) (value (literal (nat 10) 1741)))", "line_no": 1742, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1742)", "show": true, "valid": "(literal (bool True) 1742)", "voting_powers": "(map 1742 )", "export": true}, {"action": "newContract", "id": "(static_id 1 82)", "export": "(storage (record 82 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 86 ) (bigmap (unknown 322) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 86)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 73 ((literal (string \"\") 1759) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 75)) ((literal (string \"data\") 1759) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 72))) (bigmap \"string\" \"bytes\") 73)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 82)) (rewardAmount (literal (intOrNat 1000000000000000000) 82)) (savedState_depositor (variant \"Some\" (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 1754)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"Some\" (literal (nat 10) 1741) 1755)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 3) 82)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 62 ((literal (nat 0) 49) (tuple 1759 (literal (nat 0) 49) (type_annotation (map 51 ((literal (string \"name\") 1759) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 53)) ((literal (string \"decimals\") 1759) (literal (bytes \"0x3138\") 54)) ((literal (string \"symbol\") 1759) (literal (bytes \"0x6465787465724c6b555344\") 55)) ((literal (string \"icon\") 1759) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 56))) (map \"string\" \"bytes\") 51)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 62)) (totalSupply (literal (intOrNat 0) 82)) (underlyingBalance (literal (nat 0) 103)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 119) \"unit\" 120) (set (operations 135) (cons (transfer (tuple 135 (to_address (self) \"None\") (tuple 135 (literal (intOrNat 1) 135) (add_seconds (now) (literal (int 3600) 127) 127))) (balance) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 132) 130) \"Some\" \"None\" 130) 135) (operations 135) 135) 135) (set (operations 145) (cons (transfer (unit) (literal (mutez 0) 145) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 140) \"Some\" \"None\" 140) 145) (operations 145) 145) 145))) (deposit True ((set_type (params 187) \"nat\" 188) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 191) 191) (literal (string \"bad state\") 191) 191) (set (attr (data) \"state\" 191) (literal (intOrNat 3) 194) 194) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"Some\" (params 187) 195) 195) (set (attr (data) \"savedState_depositor\" 196) (variant \"Some\" (sender) 196) 196) (set (operations 205) (cons (transfer (tuple 205 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 199)) (literal (mutez 0) 205) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 200) \"Some\" \"None\" 200) 205) (operations 205) 205) 205))) (deposit_callback True ((set_type (params 209) \"nat\" 210) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 213) (literal (string \"bad sender\") 213) 213) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 3) 216) 216) (literal (string \"bad state\") 216) 216) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 195) \"Some\" \"None\" 219) 219) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 220) (literal (intOrNat 1000000000000000000) 220) 220) 220) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 221) 221) ((defineLocal \"newUnderlyingBalance\" (add (params 209) (getLocal \"tokensToDeposit\" 222) 222) 222) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 223) (literal (intOrNat 1000000000000000000) 223) 223) (getLocal \"newUnderlyingBalance\" 223) 223) 223) (set (getLocal \"newTokens\" 1759) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 224) (attr (data) \"totalSupply\" 96) 224) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 224) (getLocal \"fractionOfPoolOwnership\" 224) 224) 224) \"Some\" \"None\" 224) 224) 224)) 221) (set (attr (data) \"underlyingBalance\" 227) (add (params 209) (getLocal \"tokensToDeposit\" 227) 227) 227) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 196) \"Some\" \"None\" 230) 230) (set (operations 241) (cons (transfer (record 231 (from_ (getLocal \"depositor\" 232)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 234))) (literal (mutez 0) 241) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 236) \"Some\" \"None\" 236) 241) (operations 241) 241) 241) (set (operations 253) (cons (transfer (record 244 (address (getLocal \"depositor\" 245)) (value (getLocal \"newTokens\" 246))) (literal (mutez 0) 253) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 248) \"Some\" \"None\" 248) 253) (operations 253) 253) 253) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 256) 256) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"None\" (unit) -1) 257) (set (attr (data) \"savedState_depositor\" 196) (variant \"None\" (unit) -1) 258))) (getAdministrator True ((bind \"__s201\" ((set_type (first (params 108) 1759) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 1759) (contract \"address\") 1759) (set (operations 1759) (cons (transfer (getLocal \"__s201\" 1759) (literal (mutez 0) 1759) (second (params 108) 1759) 108) (operations 1759) 1759) 1759))) (getAllowance True ((bind \"__s202\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 1759) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 1759) \"spender\" 69) 69) 69))) (set_type (second (params 68) 1759) (contract \"nat\") 1759) (set (operations 1759) (cons (transfer (getLocal \"__s202\" 1759) (literal (mutez 0) 1759) (second (params 68) 1759) 68) (operations 1759) 1759) 1759))) (getBalance True ((bind \"__s203\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 1759) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 1759) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 1759) 65) \"balance\" 65) 65))) (set_type (second (params 60) 1759) (contract \"nat\") 1759) (set (operations 1759) (cons (transfer (getLocal \"__s203\" 1759) (literal (mutez 0) 1759) (second (params 60) 1759) 60) (operations 1759) 1759) 1759))) (getTotalSupply True ((bind \"__s204\" ((set_type (first (params 72) 1759) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 1759) (contract \"nat\") 1759) (set (operations 1759) (cons (transfer (getLocal \"__s204\" 1759) (literal (mutez 0) 1759) (second (params 72) 1759) 72) (operations 1759) 1759) 1759))) (liquidate True ((set_type (params 149) \"address\" 150) (set (operations 158) (cons (transfer (params 149) (literal (mutez 0) 158) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 155) 153) \"Some\" \"None\" 153) 158) (operations 158) 158) 158) (set (operations 171) (cons (transfer (record 161 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (attr (data) \"rewardAmount\" 164))) (literal (mutez 0) 171) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 166) \"Some\" \"None\" 166) 171) (operations 171) 171) 171) (set (operations 179) (cons (transfer (unit) (literal (mutez 0) 179) (openVariant (contract \"liquidate\" \"unit\" (params 149) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 262) \"nat\" 263) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 266) 266) (literal (string \"bad state\") 266) 266) (set (attr (data) \"state\" 191) (literal (intOrNat 2) 269) 269) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"Some\" (params 262) 270) 270) (set (attr (data) \"savedState_redeemer\" 271) (variant \"Some\" (sender) 271) 271) (set (operations 280) (cons (transfer (tuple 280 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 274)) (literal (mutez 0) 280) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 275) \"Some\" \"None\" 275) 280) (operations 280) 280) 280))) (redeem_callback True ((set_type (params 284) \"nat\" 285) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 288) (literal (string \"bad sender\") 288) 288) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 2) 291) 291) (literal (string \"bad state\") 291) 291) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 270) \"Some\" \"None\" 294) 294) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 295) (literal (intOrNat 1000000000000000000) 295) 295) (attr (data) \"totalSupply\" 96) 295) 295) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 296) (params 284) 296) (literal (intOrNat 1000000000000000000) 296) 296) 296) (set (attr (data) \"underlyingBalance\" 227) (openVariant (isNat (sub (params 284) (getLocal \"tokensToReceive\" 299) 299) 299) \"Some\" \"None\" 299) 299) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 271) \"Some\" \"None\" 302) 302) (set (operations 312) (cons (transfer (record 303 (address (getLocal \"redeemer\" 304)) (value (getLocal \"tokensToRedeem\" 305))) (literal (mutez 0) 312) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 307) \"Some\" \"None\" 307) 312) (operations 312) 312) 312) (set (operations 325) (cons (transfer (record 315 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 317)) (value (getLocal \"tokensToReceive\" 318))) (literal (mutez 0) 325) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 320) \"Some\" \"None\" 320) 325) (operations 325) 325) 325) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 328) 328) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"None\" (unit) -1) 329) (set (attr (data) \"savedState_redeemer\" 271) (variant \"None\" (unit) -1) 330))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 338) \"unit\" 339) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 342) 342) (literal (string \"bad state\") 342) 342) (set (attr (data) \"state\" 191) (literal (intOrNat 1) 345) 345) (set (operations 354) (cons (transfer (tuple 354 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 348)) (literal (mutez 0) 354) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 349) \"Some\" \"None\" 349) 354) (operations 354) 354) 354))) (updateBalance_callback True ((set_type (params 358) \"nat\" 359) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 362) (literal (string \"bad sender\") 362) 362) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 1) 365) 365) (literal (string \"bad state\") 365) 365) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 368) 368) (set (attr (data) \"underlyingBalance\" 227) (params 358) 371))) (updateContractMetadata True ((set_type (params 411) (tuple \"string\" \"bytes\") 412) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 414) (literal (string \"not governor\") 414) 414) (set (getItem (attr (data) \"metadata\" 418) (first (params 411) 416) 418) (second (params 411) 417) 418))) (updateDexterAddress True ((set_type (params 395) \"address\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"dexterAddress\" 132) (params 395) 399))) (updateGovernorAddress True ((set_type (params 379) \"address\" 380) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 382) (literal (string \"not governor\") 382) 382) (set (attr (data) \"governorAddress\" 414) (params 379) 383))) (updateOvenRegistryAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"ovenRegistryAddress\" 155) (params 403) 407))) (updateRewardAmount True ((set_type (params 387) \"nat\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"rewardAmount\" 164) (params 387) 391))) (updateTokenMetadata True ((set_type (params 422) (tuple \"nat\" (map \"string\" \"bytes\")) 423) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 425) (literal (string \"not governor\") 425) 425) (set (getItem (attr (data) \"token_metadata\" 426) (literal (intOrNat 0) 426) 426) (params 422) 426))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1759, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 1763 (spender (literal (local-address (static_id 1 82)) 82)) (value (literal (nat 10) 1741)))", "line_no": 1762, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1762)", "show": true, "valid": "(literal (bool True) 1762)", "voting_powers": "(map 1762 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1774 (address (literal (local-address (static_id 1 82)) 82)) (value (literal (intOrNat 200000000000000000000) 1774)))", "line_no": 1773, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1773)", "show": true, "valid": "(literal (bool True) 1773)", "voting_powers": "(map 1773 )", "export": true}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "deposit_callback", "params": "(literal (intOrNat 200000000000000000000) 1784)", "line_no": 1784, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1bTpviNnyx2PXsNmGpCQTMQsGoYordkUoA\") 26)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1784)", "show": true, "valid": "(literal (bool False) 1784)", "voting_powers": "(map 1784 )", "export": true}], "decompile": false, "kind": "test"}, {"shortname": "redeem_-_fails_in_bad_state", "longname": "redeem - fails in bad state", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 332) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s205\" ((set_type (first (params 89) 1803) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 1803) (contract \"address\") 1803) (set (operations 1803) (cons (transfer (getLocal \"__s205\" 1803) (literal (mutez 0) 1803) (second (params 89) 1803) 89) (operations 1803) 1803) 1803))) (getAllowance True ((bind \"__s206\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 1803) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 1803) \"spender\" 46) 46) 46))) (set_type (second (params 45) 1803) (contract \"nat\") 1803) (set (operations 1803) (cons (transfer (getLocal \"__s206\" 1803) (literal (mutez 0) 1803) (second (params 45) 1803) 45) (operations 1803) 1803) 1803))) (getBalance True ((bind \"__s207\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 1803) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 1803) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 1803) 42) \"balance\" 42) 42))) (set_type (second (params 37) 1803) (contract \"nat\") 1803) (set (operations 1803) (cons (transfer (getLocal \"__s207\" 1803) (literal (mutez 0) 1803) (second (params 37) 1803) 37) (operations 1803) 1803) 1803))) (getTotalSupply True ((bind \"__s208\" ((set_type (first (params 49) 1803) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 1803) (contract \"nat\") 1803) (set (operations 1803) (cons (transfer (getLocal \"__s208\" 1803) (literal (mutez 0) 1803) (second (params 49) 1803) 49) (operations 1803) 1803) 1803))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1803, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 82)", "export": "(storage (record 82 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 86 ) (bigmap (unknown 333) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 86)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 73 ((literal (string \"\") 1810) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 75)) ((literal (string \"data\") 1810) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 72))) (bigmap \"string\" \"bytes\") 73)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 82)) (rewardAmount (literal (intOrNat 1000000000000000000) 82)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 2) 82)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 62 ((literal (nat 0) 49) (tuple 1810 (literal (nat 0) 49) (type_annotation (map 51 ((literal (string \"name\") 1810) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 53)) ((literal (string \"decimals\") 1810) (literal (bytes \"0x3138\") 54)) ((literal (string \"symbol\") 1810) (literal (bytes \"0x6465787465724c6b555344\") 55)) ((literal (string \"icon\") 1810) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 56))) (map \"string\" \"bytes\") 51)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 62)) (totalSupply (literal (intOrNat 0) 82)) (underlyingBalance (literal (nat 0) 103)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 119) \"unit\" 120) (set (operations 135) (cons (transfer (tuple 135 (to_address (self) \"None\") (tuple 135 (literal (intOrNat 1) 135) (add_seconds (now) (literal (int 3600) 127) 127))) (balance) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 132) 130) \"Some\" \"None\" 130) 135) (operations 135) 135) 135) (set (operations 145) (cons (transfer (unit) (literal (mutez 0) 145) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 140) \"Some\" \"None\" 140) 145) (operations 145) 145) 145))) (deposit True ((set_type (params 187) \"nat\" 188) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 191) 191) (literal (string \"bad state\") 191) 191) (set (attr (data) \"state\" 191) (literal (intOrNat 3) 194) 194) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"Some\" (params 187) 195) 195) (set (attr (data) \"savedState_depositor\" 196) (variant \"Some\" (sender) 196) 196) (set (operations 205) (cons (transfer (tuple 205 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 199)) (literal (mutez 0) 205) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 200) \"Some\" \"None\" 200) 205) (operations 205) 205) 205))) (deposit_callback True ((set_type (params 209) \"nat\" 210) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 213) (literal (string \"bad sender\") 213) 213) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 3) 216) 216) (literal (string \"bad state\") 216) 216) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 195) \"Some\" \"None\" 219) 219) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 220) (literal (intOrNat 1000000000000000000) 220) 220) 220) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 221) 221) ((defineLocal \"newUnderlyingBalance\" (add (params 209) (getLocal \"tokensToDeposit\" 222) 222) 222) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 223) (literal (intOrNat 1000000000000000000) 223) 223) (getLocal \"newUnderlyingBalance\" 223) 223) 223) (set (getLocal \"newTokens\" 1810) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 224) (attr (data) \"totalSupply\" 96) 224) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 224) (getLocal \"fractionOfPoolOwnership\" 224) 224) 224) \"Some\" \"None\" 224) 224) 224)) 221) (set (attr (data) \"underlyingBalance\" 227) (add (params 209) (getLocal \"tokensToDeposit\" 227) 227) 227) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 196) \"Some\" \"None\" 230) 230) (set (operations 241) (cons (transfer (record 231 (from_ (getLocal \"depositor\" 232)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 234))) (literal (mutez 0) 241) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 236) \"Some\" \"None\" 236) 241) (operations 241) 241) 241) (set (operations 253) (cons (transfer (record 244 (address (getLocal \"depositor\" 245)) (value (getLocal \"newTokens\" 246))) (literal (mutez 0) 253) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 248) \"Some\" \"None\" 248) 253) (operations 253) 253) 253) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 256) 256) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"None\" (unit) -1) 257) (set (attr (data) \"savedState_depositor\" 196) (variant \"None\" (unit) -1) 258))) (getAdministrator True ((bind \"__s209\" ((set_type (first (params 108) 1810) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 1810) (contract \"address\") 1810) (set (operations 1810) (cons (transfer (getLocal \"__s209\" 1810) (literal (mutez 0) 1810) (second (params 108) 1810) 108) (operations 1810) 1810) 1810))) (getAllowance True ((bind \"__s210\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 1810) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 1810) \"spender\" 69) 69) 69))) (set_type (second (params 68) 1810) (contract \"nat\") 1810) (set (operations 1810) (cons (transfer (getLocal \"__s210\" 1810) (literal (mutez 0) 1810) (second (params 68) 1810) 68) (operations 1810) 1810) 1810))) (getBalance True ((bind \"__s211\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 1810) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 1810) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 1810) 65) \"balance\" 65) 65))) (set_type (second (params 60) 1810) (contract \"nat\") 1810) (set (operations 1810) (cons (transfer (getLocal \"__s211\" 1810) (literal (mutez 0) 1810) (second (params 60) 1810) 60) (operations 1810) 1810) 1810))) (getTotalSupply True ((bind \"__s212\" ((set_type (first (params 72) 1810) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 1810) (contract \"nat\") 1810) (set (operations 1810) (cons (transfer (getLocal \"__s212\" 1810) (literal (mutez 0) 1810) (second (params 72) 1810) 72) (operations 1810) 1810) 1810))) (liquidate True ((set_type (params 149) \"address\" 150) (set (operations 158) (cons (transfer (params 149) (literal (mutez 0) 158) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 155) 153) \"Some\" \"None\" 153) 158) (operations 158) 158) 158) (set (operations 171) (cons (transfer (record 161 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (attr (data) \"rewardAmount\" 164))) (literal (mutez 0) 171) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 166) \"Some\" \"None\" 166) 171) (operations 171) 171) 171) (set (operations 179) (cons (transfer (unit) (literal (mutez 0) 179) (openVariant (contract \"liquidate\" \"unit\" (params 149) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 262) \"nat\" 263) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 266) 266) (literal (string \"bad state\") 266) 266) (set (attr (data) \"state\" 191) (literal (intOrNat 2) 269) 269) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"Some\" (params 262) 270) 270) (set (attr (data) \"savedState_redeemer\" 271) (variant \"Some\" (sender) 271) 271) (set (operations 280) (cons (transfer (tuple 280 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 274)) (literal (mutez 0) 280) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 275) \"Some\" \"None\" 275) 280) (operations 280) 280) 280))) (redeem_callback True ((set_type (params 284) \"nat\" 285) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 288) (literal (string \"bad sender\") 288) 288) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 2) 291) 291) (literal (string \"bad state\") 291) 291) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 270) \"Some\" \"None\" 294) 294) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 295) (literal (intOrNat 1000000000000000000) 295) 295) (attr (data) \"totalSupply\" 96) 295) 295) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 296) (params 284) 296) (literal (intOrNat 1000000000000000000) 296) 296) 296) (set (attr (data) \"underlyingBalance\" 227) (openVariant (isNat (sub (params 284) (getLocal \"tokensToReceive\" 299) 299) 299) \"Some\" \"None\" 299) 299) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 271) \"Some\" \"None\" 302) 302) (set (operations 312) (cons (transfer (record 303 (address (getLocal \"redeemer\" 304)) (value (getLocal \"tokensToRedeem\" 305))) (literal (mutez 0) 312) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 307) \"Some\" \"None\" 307) 312) (operations 312) 312) 312) (set (operations 325) (cons (transfer (record 315 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 317)) (value (getLocal \"tokensToReceive\" 318))) (literal (mutez 0) 325) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 320) \"Some\" \"None\" 320) 325) (operations 325) 325) 325) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 328) 328) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"None\" (unit) -1) 329) (set (attr (data) \"savedState_redeemer\" 271) (variant \"None\" (unit) -1) 330))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 338) \"unit\" 339) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 342) 342) (literal (string \"bad state\") 342) 342) (set (attr (data) \"state\" 191) (literal (intOrNat 1) 345) 345) (set (operations 354) (cons (transfer (tuple 354 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 348)) (literal (mutez 0) 354) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 349) \"Some\" \"None\" 349) 354) (operations 354) 354) 354))) (updateBalance_callback True ((set_type (params 358) \"nat\" 359) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 362) (literal (string \"bad sender\") 362) 362) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 1) 365) 365) (literal (string \"bad state\") 365) 365) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 368) 368) (set (attr (data) \"underlyingBalance\" 227) (params 358) 371))) (updateContractMetadata True ((set_type (params 411) (tuple \"string\" \"bytes\") 412) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 414) (literal (string \"not governor\") 414) 414) (set (getItem (attr (data) \"metadata\" 418) (first (params 411) 416) 418) (second (params 411) 417) 418))) (updateDexterAddress True ((set_type (params 395) \"address\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"dexterAddress\" 132) (params 395) 399))) (updateGovernorAddress True ((set_type (params 379) \"address\" 380) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 382) (literal (string \"not governor\") 382) 382) (set (attr (data) \"governorAddress\" 414) (params 379) 383))) (updateOvenRegistryAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"ovenRegistryAddress\" 155) (params 403) 407))) (updateRewardAmount True ((set_type (params 387) \"nat\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"rewardAmount\" 164) (params 387) 391))) (updateTokenMetadata True ((set_type (params 422) (tuple \"nat\" (map \"string\" \"bytes\")) 423) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 425) (literal (string \"not governor\") 425) 425) (set (getItem (attr (data) \"token_metadata\" 426) (literal (intOrNat 0) 426) 426) (params 422) 426))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1810, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1815 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)) (value (literal (nat 10) 1813)))", "line_no": 1814, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1814)", "show": true, "valid": "(literal (bool True) 1814)", "voting_powers": "(map 1814 )", "export": true}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "mint", "params": "(record 1825 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)) (value (mul (literal (nat 10) 1813) (literal (intOrNat 1000000000000000000) 1827) 1827)))", "line_no": 1824, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1824)", "show": true, "valid": "(literal (bool True) 1824)", "voting_powers": "(map 1824 )", "export": true}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "redeem", "params": "(mul (literal (nat 10) 1813) (literal (intOrNat 1000000000000000000) 1836) 1836)", "line_no": 1835, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1835)", "show": true, "valid": "(literal (bool False) 1835)", "voting_powers": "(map 1835 )", "export": true}], "decompile": false, "kind": "test"}, {"shortname": "redeem_-_clears_state", "longname": "redeem - clears state", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 343) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s213\" ((set_type (first (params 89) 1850) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 1850) (contract \"address\") 1850) (set (operations 1850) (cons (transfer (getLocal \"__s213\" 1850) (literal (mutez 0) 1850) (second (params 89) 1850) 89) (operations 1850) 1850) 1850))) (getAllowance True ((bind \"__s214\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 1850) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 1850) \"spender\" 46) 46) 46))) (set_type (second (params 45) 1850) (contract \"nat\") 1850) (set (operations 1850) (cons (transfer (getLocal \"__s214\" 1850) (literal (mutez 0) 1850) (second (params 45) 1850) 45) (operations 1850) 1850) 1850))) (getBalance True ((bind \"__s215\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 1850) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 1850) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 1850) 42) \"balance\" 42) 42))) (set_type (second (params 37) 1850) (contract \"nat\") 1850) (set (operations 1850) (cons (transfer (getLocal \"__s215\" 1850) (literal (mutez 0) 1850) (second (params 37) 1850) 37) (operations 1850) 1850) 1850))) (getTotalSupply True ((bind \"__s216\" ((set_type (first (params 49) 1850) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 1850) (contract \"nat\") 1850) (set (operations 1850) (cons (transfer (getLocal \"__s216\" 1850) (literal (mutez 0) 1850) (second (params 49) 1850) 49) (operations 1850) 1850) 1850))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1850, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 82)", "export": "(storage (record 82 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 86 ) (bigmap (unknown 344) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 86)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 73 ((literal (string \"\") 1856) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 75)) ((literal (string \"data\") 1856) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 72))) (bigmap \"string\" \"bytes\") 73)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 82)) (rewardAmount (literal (intOrNat 1000000000000000000) 82)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 82)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 62 ((literal (nat 0) 49) (tuple 1856 (literal (nat 0) 49) (type_annotation (map 51 ((literal (string \"name\") 1856) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 53)) ((literal (string \"decimals\") 1856) (literal (bytes \"0x3138\") 54)) ((literal (string \"symbol\") 1856) (literal (bytes \"0x6465787465724c6b555344\") 55)) ((literal (string \"icon\") 1856) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 56))) (map \"string\" \"bytes\") 51)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 62)) (totalSupply (literal (intOrNat 0) 82)) (underlyingBalance (literal (nat 0) 103)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 119) \"unit\" 120) (set (operations 135) (cons (transfer (tuple 135 (to_address (self) \"None\") (tuple 135 (literal (intOrNat 1) 135) (add_seconds (now) (literal (int 3600) 127) 127))) (balance) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 132) 130) \"Some\" \"None\" 130) 135) (operations 135) 135) 135) (set (operations 145) (cons (transfer (unit) (literal (mutez 0) 145) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 140) \"Some\" \"None\" 140) 145) (operations 145) 145) 145))) (deposit True ((set_type (params 187) \"nat\" 188) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 191) 191) (literal (string \"bad state\") 191) 191) (set (attr (data) \"state\" 191) (literal (intOrNat 3) 194) 194) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"Some\" (params 187) 195) 195) (set (attr (data) \"savedState_depositor\" 196) (variant \"Some\" (sender) 196) 196) (set (operations 205) (cons (transfer (tuple 205 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 199)) (literal (mutez 0) 205) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 200) \"Some\" \"None\" 200) 205) (operations 205) 205) 205))) (deposit_callback True ((set_type (params 209) \"nat\" 210) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 213) (literal (string \"bad sender\") 213) 213) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 3) 216) 216) (literal (string \"bad state\") 216) 216) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 195) \"Some\" \"None\" 219) 219) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 220) (literal (intOrNat 1000000000000000000) 220) 220) 220) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 221) 221) ((defineLocal \"newUnderlyingBalance\" (add (params 209) (getLocal \"tokensToDeposit\" 222) 222) 222) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 223) (literal (intOrNat 1000000000000000000) 223) 223) (getLocal \"newUnderlyingBalance\" 223) 223) 223) (set (getLocal \"newTokens\" 1856) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 224) (attr (data) \"totalSupply\" 96) 224) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 224) (getLocal \"fractionOfPoolOwnership\" 224) 224) 224) \"Some\" \"None\" 224) 224) 224)) 221) (set (attr (data) \"underlyingBalance\" 227) (add (params 209) (getLocal \"tokensToDeposit\" 227) 227) 227) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 196) \"Some\" \"None\" 230) 230) (set (operations 241) (cons (transfer (record 231 (from_ (getLocal \"depositor\" 232)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 234))) (literal (mutez 0) 241) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 236) \"Some\" \"None\" 236) 241) (operations 241) 241) 241) (set (operations 253) (cons (transfer (record 244 (address (getLocal \"depositor\" 245)) (value (getLocal \"newTokens\" 246))) (literal (mutez 0) 253) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 248) \"Some\" \"None\" 248) 253) (operations 253) 253) 253) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 256) 256) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"None\" (unit) -1) 257) (set (attr (data) \"savedState_depositor\" 196) (variant \"None\" (unit) -1) 258))) (getAdministrator True ((bind \"__s217\" ((set_type (first (params 108) 1856) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 1856) (contract \"address\") 1856) (set (operations 1856) (cons (transfer (getLocal \"__s217\" 1856) (literal (mutez 0) 1856) (second (params 108) 1856) 108) (operations 1856) 1856) 1856))) (getAllowance True ((bind \"__s218\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 1856) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 1856) \"spender\" 69) 69) 69))) (set_type (second (params 68) 1856) (contract \"nat\") 1856) (set (operations 1856) (cons (transfer (getLocal \"__s218\" 1856) (literal (mutez 0) 1856) (second (params 68) 1856) 68) (operations 1856) 1856) 1856))) (getBalance True ((bind \"__s219\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 1856) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 1856) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 1856) 65) \"balance\" 65) 65))) (set_type (second (params 60) 1856) (contract \"nat\") 1856) (set (operations 1856) (cons (transfer (getLocal \"__s219\" 1856) (literal (mutez 0) 1856) (second (params 60) 1856) 60) (operations 1856) 1856) 1856))) (getTotalSupply True ((bind \"__s220\" ((set_type (first (params 72) 1856) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 1856) (contract \"nat\") 1856) (set (operations 1856) (cons (transfer (getLocal \"__s220\" 1856) (literal (mutez 0) 1856) (second (params 72) 1856) 72) (operations 1856) 1856) 1856))) (liquidate True ((set_type (params 149) \"address\" 150) (set (operations 158) (cons (transfer (params 149) (literal (mutez 0) 158) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 155) 153) \"Some\" \"None\" 153) 158) (operations 158) 158) 158) (set (operations 171) (cons (transfer (record 161 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (attr (data) \"rewardAmount\" 164))) (literal (mutez 0) 171) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 166) \"Some\" \"None\" 166) 171) (operations 171) 171) 171) (set (operations 179) (cons (transfer (unit) (literal (mutez 0) 179) (openVariant (contract \"liquidate\" \"unit\" (params 149) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 262) \"nat\" 263) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 266) 266) (literal (string \"bad state\") 266) 266) (set (attr (data) \"state\" 191) (literal (intOrNat 2) 269) 269) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"Some\" (params 262) 270) 270) (set (attr (data) \"savedState_redeemer\" 271) (variant \"Some\" (sender) 271) 271) (set (operations 280) (cons (transfer (tuple 280 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 274)) (literal (mutez 0) 280) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 275) \"Some\" \"None\" 275) 280) (operations 280) 280) 280))) (redeem_callback True ((set_type (params 284) \"nat\" 285) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 288) (literal (string \"bad sender\") 288) 288) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 2) 291) 291) (literal (string \"bad state\") 291) 291) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 270) \"Some\" \"None\" 294) 294) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 295) (literal (intOrNat 1000000000000000000) 295) 295) (attr (data) \"totalSupply\" 96) 295) 295) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 296) (params 284) 296) (literal (intOrNat 1000000000000000000) 296) 296) 296) (set (attr (data) \"underlyingBalance\" 227) (openVariant (isNat (sub (params 284) (getLocal \"tokensToReceive\" 299) 299) 299) \"Some\" \"None\" 299) 299) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 271) \"Some\" \"None\" 302) 302) (set (operations 312) (cons (transfer (record 303 (address (getLocal \"redeemer\" 304)) (value (getLocal \"tokensToRedeem\" 305))) (literal (mutez 0) 312) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 307) \"Some\" \"None\" 307) 312) (operations 312) 312) 312) (set (operations 325) (cons (transfer (record 315 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 317)) (value (getLocal \"tokensToReceive\" 318))) (literal (mutez 0) 325) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 320) \"Some\" \"None\" 320) 325) (operations 325) 325) 325) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 328) 328) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"None\" (unit) -1) 329) (set (attr (data) \"savedState_redeemer\" 271) (variant \"None\" (unit) -1) 330))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 338) \"unit\" 339) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 342) 342) (literal (string \"bad state\") 342) 342) (set (attr (data) \"state\" 191) (literal (intOrNat 1) 345) 345) (set (operations 354) (cons (transfer (tuple 354 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 348)) (literal (mutez 0) 354) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 349) \"Some\" \"None\" 349) 354) (operations 354) 354) 354))) (updateBalance_callback True ((set_type (params 358) \"nat\" 359) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 362) (literal (string \"bad sender\") 362) 362) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 1) 365) 365) (literal (string \"bad state\") 365) 365) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 368) 368) (set (attr (data) \"underlyingBalance\" 227) (params 358) 371))) (updateContractMetadata True ((set_type (params 411) (tuple \"string\" \"bytes\") 412) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 414) (literal (string \"not governor\") 414) 414) (set (getItem (attr (data) \"metadata\" 418) (first (params 411) 416) 418) (second (params 411) 417) 418))) (updateDexterAddress True ((set_type (params 395) \"address\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"dexterAddress\" 132) (params 395) 399))) (updateGovernorAddress True ((set_type (params 379) \"address\" 380) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 382) (literal (string \"not governor\") 382) 382) (set (attr (data) \"governorAddress\" 414) (params 379) 383))) (updateOvenRegistryAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"ovenRegistryAddress\" 155) (params 403) 407))) (updateRewardAmount True ((set_type (params 387) \"nat\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"rewardAmount\" 164) (params 387) 391))) (updateTokenMetadata True ((set_type (params 422) (tuple \"nat\" (map \"string\" \"bytes\")) 423) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 425) (literal (string \"not governor\") 425) 425) (set (getItem (attr (data) \"token_metadata\" 426) (literal (intOrNat 0) 426) 426) (params 422) 426))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1856, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1861 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)) (value (literal (nat 10) 1859)))", "line_no": 1860, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1860)", "show": true, "valid": "(literal (bool True) 1860)", "voting_powers": "(map 1860 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 1871 (spender (literal (local-address (static_id 1 82)) 82)) (value (literal (nat 10) 1859)))", "line_no": 1870, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1870)", "show": true, "valid": "(literal (bool True) 1870)", "voting_powers": "(map 1870 )", "export": true}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "deposit", "params": "(literal (nat 10) 1859)", "line_no": 1880, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1880)", "show": true, "valid": "(literal (bool True) 1880)", "voting_powers": "(map 1880 )", "export": true}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "redeem", "params": "(mul (literal (nat 10) 1859) (literal (intOrNat 1000000000000000000) 1888) 1888)", "line_no": 1887, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1887)", "show": true, "valid": "(literal (bool True) 1887)", "voting_powers": "(map 1887 )", "export": true}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 82) 1887) \"state\" 1894) (literal (intOrNat 0) 1894) 1894)", "line_no": 1894}, {"action": "verify", "condition": "(eq (isVariant (attr (contractData (static_id 1 82) 1887) \"savedState_tokensToRedeem\" 1895) \"Some\" 1895) (literal (bool False) 1895) 1895)", "line_no": 1895}, {"action": "verify", "condition": "(eq (isVariant (attr (contractData (static_id 1 82) 1887) \"savedState_redeemer\" 1896) \"Some\" 1896) (literal (bool False) 1896) 1896)", "line_no": 1896}], "decompile": false, "kind": "test"}, {"shortname": "redeem_-_can_deposit_and_withdraw_from_one_account", "longname": "redeem - can deposit and withdraw from one account", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 354) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s221\" ((set_type (first (params 89) 1906) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 1906) (contract \"address\") 1906) (set (operations 1906) (cons (transfer (getLocal \"__s221\" 1906) (literal (mutez 0) 1906) (second (params 89) 1906) 89) (operations 1906) 1906) 1906))) (getAllowance True ((bind \"__s222\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 1906) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 1906) \"spender\" 46) 46) 46))) (set_type (second (params 45) 1906) (contract \"nat\") 1906) (set (operations 1906) (cons (transfer (getLocal \"__s222\" 1906) (literal (mutez 0) 1906) (second (params 45) 1906) 45) (operations 1906) 1906) 1906))) (getBalance True ((bind \"__s223\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 1906) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 1906) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 1906) 42) \"balance\" 42) 42))) (set_type (second (params 37) 1906) (contract \"nat\") 1906) (set (operations 1906) (cons (transfer (getLocal \"__s223\" 1906) (literal (mutez 0) 1906) (second (params 37) 1906) 37) (operations 1906) 1906) 1906))) (getTotalSupply True ((bind \"__s224\" ((set_type (first (params 49) 1906) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 1906) (contract \"nat\") 1906) (set (operations 1906) (cons (transfer (getLocal \"__s224\" 1906) (literal (mutez 0) 1906) (second (params 49) 1906) 49) (operations 1906) 1906) 1906))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1906, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 82)", "export": "(storage (record 82 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 86 ) (bigmap (unknown 355) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 86)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 73 ((literal (string \"\") 1912) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 75)) ((literal (string \"data\") 1912) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 72))) (bigmap \"string\" \"bytes\") 73)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 82)) (rewardAmount (literal (intOrNat 1000000000000000000) 82)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 82)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 62 ((literal (nat 0) 49) (tuple 1912 (literal (nat 0) 49) (type_annotation (map 51 ((literal (string \"name\") 1912) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 53)) ((literal (string \"decimals\") 1912) (literal (bytes \"0x3138\") 54)) ((literal (string \"symbol\") 1912) (literal (bytes \"0x6465787465724c6b555344\") 55)) ((literal (string \"icon\") 1912) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 56))) (map \"string\" \"bytes\") 51)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 62)) (totalSupply (literal (intOrNat 0) 82)) (underlyingBalance (literal (nat 0) 103)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 119) \"unit\" 120) (set (operations 135) (cons (transfer (tuple 135 (to_address (self) \"None\") (tuple 135 (literal (intOrNat 1) 135) (add_seconds (now) (literal (int 3600) 127) 127))) (balance) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 132) 130) \"Some\" \"None\" 130) 135) (operations 135) 135) 135) (set (operations 145) (cons (transfer (unit) (literal (mutez 0) 145) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 140) \"Some\" \"None\" 140) 145) (operations 145) 145) 145))) (deposit True ((set_type (params 187) \"nat\" 188) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 191) 191) (literal (string \"bad state\") 191) 191) (set (attr (data) \"state\" 191) (literal (intOrNat 3) 194) 194) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"Some\" (params 187) 195) 195) (set (attr (data) \"savedState_depositor\" 196) (variant \"Some\" (sender) 196) 196) (set (operations 205) (cons (transfer (tuple 205 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 199)) (literal (mutez 0) 205) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 200) \"Some\" \"None\" 200) 205) (operations 205) 205) 205))) (deposit_callback True ((set_type (params 209) \"nat\" 210) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 213) (literal (string \"bad sender\") 213) 213) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 3) 216) 216) (literal (string \"bad state\") 216) 216) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 195) \"Some\" \"None\" 219) 219) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 220) (literal (intOrNat 1000000000000000000) 220) 220) 220) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 221) 221) ((defineLocal \"newUnderlyingBalance\" (add (params 209) (getLocal \"tokensToDeposit\" 222) 222) 222) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 223) (literal (intOrNat 1000000000000000000) 223) 223) (getLocal \"newUnderlyingBalance\" 223) 223) 223) (set (getLocal \"newTokens\" 1912) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 224) (attr (data) \"totalSupply\" 96) 224) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 224) (getLocal \"fractionOfPoolOwnership\" 224) 224) 224) \"Some\" \"None\" 224) 224) 224)) 221) (set (attr (data) \"underlyingBalance\" 227) (add (params 209) (getLocal \"tokensToDeposit\" 227) 227) 227) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 196) \"Some\" \"None\" 230) 230) (set (operations 241) (cons (transfer (record 231 (from_ (getLocal \"depositor\" 232)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 234))) (literal (mutez 0) 241) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 236) \"Some\" \"None\" 236) 241) (operations 241) 241) 241) (set (operations 253) (cons (transfer (record 244 (address (getLocal \"depositor\" 245)) (value (getLocal \"newTokens\" 246))) (literal (mutez 0) 253) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 248) \"Some\" \"None\" 248) 253) (operations 253) 253) 253) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 256) 256) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"None\" (unit) -1) 257) (set (attr (data) \"savedState_depositor\" 196) (variant \"None\" (unit) -1) 258))) (getAdministrator True ((bind \"__s225\" ((set_type (first (params 108) 1912) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 1912) (contract \"address\") 1912) (set (operations 1912) (cons (transfer (getLocal \"__s225\" 1912) (literal (mutez 0) 1912) (second (params 108) 1912) 108) (operations 1912) 1912) 1912))) (getAllowance True ((bind \"__s226\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 1912) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 1912) \"spender\" 69) 69) 69))) (set_type (second (params 68) 1912) (contract \"nat\") 1912) (set (operations 1912) (cons (transfer (getLocal \"__s226\" 1912) (literal (mutez 0) 1912) (second (params 68) 1912) 68) (operations 1912) 1912) 1912))) (getBalance True ((bind \"__s227\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 1912) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 1912) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 1912) 65) \"balance\" 65) 65))) (set_type (second (params 60) 1912) (contract \"nat\") 1912) (set (operations 1912) (cons (transfer (getLocal \"__s227\" 1912) (literal (mutez 0) 1912) (second (params 60) 1912) 60) (operations 1912) 1912) 1912))) (getTotalSupply True ((bind \"__s228\" ((set_type (first (params 72) 1912) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 1912) (contract \"nat\") 1912) (set (operations 1912) (cons (transfer (getLocal \"__s228\" 1912) (literal (mutez 0) 1912) (second (params 72) 1912) 72) (operations 1912) 1912) 1912))) (liquidate True ((set_type (params 149) \"address\" 150) (set (operations 158) (cons (transfer (params 149) (literal (mutez 0) 158) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 155) 153) \"Some\" \"None\" 153) 158) (operations 158) 158) 158) (set (operations 171) (cons (transfer (record 161 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (attr (data) \"rewardAmount\" 164))) (literal (mutez 0) 171) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 166) \"Some\" \"None\" 166) 171) (operations 171) 171) 171) (set (operations 179) (cons (transfer (unit) (literal (mutez 0) 179) (openVariant (contract \"liquidate\" \"unit\" (params 149) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 262) \"nat\" 263) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 266) 266) (literal (string \"bad state\") 266) 266) (set (attr (data) \"state\" 191) (literal (intOrNat 2) 269) 269) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"Some\" (params 262) 270) 270) (set (attr (data) \"savedState_redeemer\" 271) (variant \"Some\" (sender) 271) 271) (set (operations 280) (cons (transfer (tuple 280 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 274)) (literal (mutez 0) 280) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 275) \"Some\" \"None\" 275) 280) (operations 280) 280) 280))) (redeem_callback True ((set_type (params 284) \"nat\" 285) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 288) (literal (string \"bad sender\") 288) 288) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 2) 291) 291) (literal (string \"bad state\") 291) 291) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 270) \"Some\" \"None\" 294) 294) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 295) (literal (intOrNat 1000000000000000000) 295) 295) (attr (data) \"totalSupply\" 96) 295) 295) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 296) (params 284) 296) (literal (intOrNat 1000000000000000000) 296) 296) 296) (set (attr (data) \"underlyingBalance\" 227) (openVariant (isNat (sub (params 284) (getLocal \"tokensToReceive\" 299) 299) 299) \"Some\" \"None\" 299) 299) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 271) \"Some\" \"None\" 302) 302) (set (operations 312) (cons (transfer (record 303 (address (getLocal \"redeemer\" 304)) (value (getLocal \"tokensToRedeem\" 305))) (literal (mutez 0) 312) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 307) \"Some\" \"None\" 307) 312) (operations 312) 312) 312) (set (operations 325) (cons (transfer (record 315 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 317)) (value (getLocal \"tokensToReceive\" 318))) (literal (mutez 0) 325) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 320) \"Some\" \"None\" 320) 325) (operations 325) 325) 325) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 328) 328) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"None\" (unit) -1) 329) (set (attr (data) \"savedState_redeemer\" 271) (variant \"None\" (unit) -1) 330))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 338) \"unit\" 339) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 342) 342) (literal (string \"bad state\") 342) 342) (set (attr (data) \"state\" 191) (literal (intOrNat 1) 345) 345) (set (operations 354) (cons (transfer (tuple 354 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 348)) (literal (mutez 0) 354) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 349) \"Some\" \"None\" 349) 354) (operations 354) 354) 354))) (updateBalance_callback True ((set_type (params 358) \"nat\" 359) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 362) (literal (string \"bad sender\") 362) 362) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 1) 365) 365) (literal (string \"bad state\") 365) 365) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 368) 368) (set (attr (data) \"underlyingBalance\" 227) (params 358) 371))) (updateContractMetadata True ((set_type (params 411) (tuple \"string\" \"bytes\") 412) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 414) (literal (string \"not governor\") 414) 414) (set (getItem (attr (data) \"metadata\" 418) (first (params 411) 416) 418) (second (params 411) 417) 418))) (updateDexterAddress True ((set_type (params 395) \"address\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"dexterAddress\" 132) (params 395) 399))) (updateGovernorAddress True ((set_type (params 379) \"address\" 380) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 382) (literal (string \"not governor\") 382) 382) (set (attr (data) \"governorAddress\" 414) (params 379) 383))) (updateOvenRegistryAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"ovenRegistryAddress\" 155) (params 403) 407))) (updateRewardAmount True ((set_type (params 387) \"nat\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"rewardAmount\" 164) (params 387) 391))) (updateTokenMetadata True ((set_type (params 422) (tuple \"nat\" (map \"string\" \"bytes\")) 423) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 425) (literal (string \"not governor\") 425) 425) (set (getItem (attr (data) \"token_metadata\" 426) (literal (intOrNat 0) 426) 426) (params 422) 426))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1912, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1917 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)) (value (literal (nat 10) 1915)))", "line_no": 1916, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1916)", "show": true, "valid": "(literal (bool True) 1916)", "voting_powers": "(map 1916 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 1927 (spender (literal (local-address (static_id 1 82)) 82)) (value (literal (nat 10) 1915)))", "line_no": 1926, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1926)", "show": true, "valid": "(literal (bool True) 1926)", "voting_powers": "(map 1926 )", "export": true}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "deposit", "params": "(literal (nat 10) 1915)", "line_no": 1936, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1936)", "show": true, "valid": "(literal (bool True) 1936)", "voting_powers": "(map 1936 )", "export": true}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "redeem", "params": "(mul (literal (nat 10) 1915) (literal (intOrNat 1000000000000000000) 1944) 1944)", "line_no": 1943, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1943)", "show": true, "valid": "(literal (bool True) 1943)", "voting_powers": "(map 1943 )", "export": true}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 1926) \"balances\" 1950) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 1950) \"balance\" 1950) (literal (nat 10) 1915) 1950)", "line_no": 1950}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 82) 1943) \"balances\" 1951) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 1951) \"balance\" 1951) (literal (nat 0) 1951) 1951)", "line_no": 1951}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 82) 1943) \"totalSupply\" 1954) (literal (nat 0) 1954) 1954)", "line_no": 1954}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 1926) \"balances\" 1950) (literal (local-address (static_id 1 82)) 82) 1957) \"balance\" 1957) (literal (nat 0) 1957) 1957)", "line_no": 1957}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 82) 1943) \"underlyingBalance\" 1958) (literal (nat 0) 1958) 1958)", "line_no": 1958}], "decompile": false, "kind": "test"}, {"shortname": "redeem_-_can_redeem_from_two_accounts", "longname": "redeem - can redeem from two accounts", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 365) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s229\" ((set_type (first (params 89) 1968) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 1968) (contract \"address\") 1968) (set (operations 1968) (cons (transfer (getLocal \"__s229\" 1968) (literal (mutez 0) 1968) (second (params 89) 1968) 89) (operations 1968) 1968) 1968))) (getAllowance True ((bind \"__s230\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 1968) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 1968) \"spender\" 46) 46) 46))) (set_type (second (params 45) 1968) (contract \"nat\") 1968) (set (operations 1968) (cons (transfer (getLocal \"__s230\" 1968) (literal (mutez 0) 1968) (second (params 45) 1968) 45) (operations 1968) 1968) 1968))) (getBalance True ((bind \"__s231\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 1968) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 1968) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 1968) 42) \"balance\" 42) 42))) (set_type (second (params 37) 1968) (contract \"nat\") 1968) (set (operations 1968) (cons (transfer (getLocal \"__s231\" 1968) (literal (mutez 0) 1968) (second (params 37) 1968) 37) (operations 1968) 1968) 1968))) (getTotalSupply True ((bind \"__s232\" ((set_type (first (params 49) 1968) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 1968) (contract \"nat\") 1968) (set (operations 1968) (cons (transfer (getLocal \"__s232\" 1968) (literal (mutez 0) 1968) (second (params 49) 1968) 49) (operations 1968) 1968) 1968))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1968, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 82)", "export": "(storage (record 82 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 86 ) (bigmap (unknown 366) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 86)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 73 ((literal (string \"\") 1974) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 75)) ((literal (string \"data\") 1974) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 72))) (bigmap \"string\" \"bytes\") 73)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 82)) (rewardAmount (literal (intOrNat 1000000000000000000) 82)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 82)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 62 ((literal (nat 0) 49) (tuple 1974 (literal (nat 0) 49) (type_annotation (map 51 ((literal (string \"name\") 1974) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 53)) ((literal (string \"decimals\") 1974) (literal (bytes \"0x3138\") 54)) ((literal (string \"symbol\") 1974) (literal (bytes \"0x6465787465724c6b555344\") 55)) ((literal (string \"icon\") 1974) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 56))) (map \"string\" \"bytes\") 51)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 62)) (totalSupply (literal (intOrNat 0) 82)) (underlyingBalance (literal (nat 0) 103)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 119) \"unit\" 120) (set (operations 135) (cons (transfer (tuple 135 (to_address (self) \"None\") (tuple 135 (literal (intOrNat 1) 135) (add_seconds (now) (literal (int 3600) 127) 127))) (balance) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 132) 130) \"Some\" \"None\" 130) 135) (operations 135) 135) 135) (set (operations 145) (cons (transfer (unit) (literal (mutez 0) 145) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 140) \"Some\" \"None\" 140) 145) (operations 145) 145) 145))) (deposit True ((set_type (params 187) \"nat\" 188) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 191) 191) (literal (string \"bad state\") 191) 191) (set (attr (data) \"state\" 191) (literal (intOrNat 3) 194) 194) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"Some\" (params 187) 195) 195) (set (attr (data) \"savedState_depositor\" 196) (variant \"Some\" (sender) 196) 196) (set (operations 205) (cons (transfer (tuple 205 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 199)) (literal (mutez 0) 205) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 200) \"Some\" \"None\" 200) 205) (operations 205) 205) 205))) (deposit_callback True ((set_type (params 209) \"nat\" 210) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 213) (literal (string \"bad sender\") 213) 213) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 3) 216) 216) (literal (string \"bad state\") 216) 216) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 195) \"Some\" \"None\" 219) 219) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 220) (literal (intOrNat 1000000000000000000) 220) 220) 220) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 221) 221) ((defineLocal \"newUnderlyingBalance\" (add (params 209) (getLocal \"tokensToDeposit\" 222) 222) 222) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 223) (literal (intOrNat 1000000000000000000) 223) 223) (getLocal \"newUnderlyingBalance\" 223) 223) 223) (set (getLocal \"newTokens\" 1974) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 224) (attr (data) \"totalSupply\" 96) 224) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 224) (getLocal \"fractionOfPoolOwnership\" 224) 224) 224) \"Some\" \"None\" 224) 224) 224)) 221) (set (attr (data) \"underlyingBalance\" 227) (add (params 209) (getLocal \"tokensToDeposit\" 227) 227) 227) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 196) \"Some\" \"None\" 230) 230) (set (operations 241) (cons (transfer (record 231 (from_ (getLocal \"depositor\" 232)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 234))) (literal (mutez 0) 241) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 236) \"Some\" \"None\" 236) 241) (operations 241) 241) 241) (set (operations 253) (cons (transfer (record 244 (address (getLocal \"depositor\" 245)) (value (getLocal \"newTokens\" 246))) (literal (mutez 0) 253) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 248) \"Some\" \"None\" 248) 253) (operations 253) 253) 253) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 256) 256) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"None\" (unit) -1) 257) (set (attr (data) \"savedState_depositor\" 196) (variant \"None\" (unit) -1) 258))) (getAdministrator True ((bind \"__s233\" ((set_type (first (params 108) 1974) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 1974) (contract \"address\") 1974) (set (operations 1974) (cons (transfer (getLocal \"__s233\" 1974) (literal (mutez 0) 1974) (second (params 108) 1974) 108) (operations 1974) 1974) 1974))) (getAllowance True ((bind \"__s234\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 1974) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 1974) \"spender\" 69) 69) 69))) (set_type (second (params 68) 1974) (contract \"nat\") 1974) (set (operations 1974) (cons (transfer (getLocal \"__s234\" 1974) (literal (mutez 0) 1974) (second (params 68) 1974) 68) (operations 1974) 1974) 1974))) (getBalance True ((bind \"__s235\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 1974) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 1974) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 1974) 65) \"balance\" 65) 65))) (set_type (second (params 60) 1974) (contract \"nat\") 1974) (set (operations 1974) (cons (transfer (getLocal \"__s235\" 1974) (literal (mutez 0) 1974) (second (params 60) 1974) 60) (operations 1974) 1974) 1974))) (getTotalSupply True ((bind \"__s236\" ((set_type (first (params 72) 1974) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 1974) (contract \"nat\") 1974) (set (operations 1974) (cons (transfer (getLocal \"__s236\" 1974) (literal (mutez 0) 1974) (second (params 72) 1974) 72) (operations 1974) 1974) 1974))) (liquidate True ((set_type (params 149) \"address\" 150) (set (operations 158) (cons (transfer (params 149) (literal (mutez 0) 158) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 155) 153) \"Some\" \"None\" 153) 158) (operations 158) 158) 158) (set (operations 171) (cons (transfer (record 161 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (attr (data) \"rewardAmount\" 164))) (literal (mutez 0) 171) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 166) \"Some\" \"None\" 166) 171) (operations 171) 171) 171) (set (operations 179) (cons (transfer (unit) (literal (mutez 0) 179) (openVariant (contract \"liquidate\" \"unit\" (params 149) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 262) \"nat\" 263) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 266) 266) (literal (string \"bad state\") 266) 266) (set (attr (data) \"state\" 191) (literal (intOrNat 2) 269) 269) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"Some\" (params 262) 270) 270) (set (attr (data) \"savedState_redeemer\" 271) (variant \"Some\" (sender) 271) 271) (set (operations 280) (cons (transfer (tuple 280 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 274)) (literal (mutez 0) 280) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 275) \"Some\" \"None\" 275) 280) (operations 280) 280) 280))) (redeem_callback True ((set_type (params 284) \"nat\" 285) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 288) (literal (string \"bad sender\") 288) 288) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 2) 291) 291) (literal (string \"bad state\") 291) 291) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 270) \"Some\" \"None\" 294) 294) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 295) (literal (intOrNat 1000000000000000000) 295) 295) (attr (data) \"totalSupply\" 96) 295) 295) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 296) (params 284) 296) (literal (intOrNat 1000000000000000000) 296) 296) 296) (set (attr (data) \"underlyingBalance\" 227) (openVariant (isNat (sub (params 284) (getLocal \"tokensToReceive\" 299) 299) 299) \"Some\" \"None\" 299) 299) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 271) \"Some\" \"None\" 302) 302) (set (operations 312) (cons (transfer (record 303 (address (getLocal \"redeemer\" 304)) (value (getLocal \"tokensToRedeem\" 305))) (literal (mutez 0) 312) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 307) \"Some\" \"None\" 307) 312) (operations 312) 312) 312) (set (operations 325) (cons (transfer (record 315 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 317)) (value (getLocal \"tokensToReceive\" 318))) (literal (mutez 0) 325) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 320) \"Some\" \"None\" 320) 325) (operations 325) 325) 325) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 328) 328) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"None\" (unit) -1) 329) (set (attr (data) \"savedState_redeemer\" 271) (variant \"None\" (unit) -1) 330))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 338) \"unit\" 339) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 342) 342) (literal (string \"bad state\") 342) 342) (set (attr (data) \"state\" 191) (literal (intOrNat 1) 345) 345) (set (operations 354) (cons (transfer (tuple 354 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 348)) (literal (mutez 0) 354) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 349) \"Some\" \"None\" 349) 354) (operations 354) 354) 354))) (updateBalance_callback True ((set_type (params 358) \"nat\" 359) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 362) (literal (string \"bad sender\") 362) 362) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 1) 365) 365) (literal (string \"bad state\") 365) 365) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 368) 368) (set (attr (data) \"underlyingBalance\" 227) (params 358) 371))) (updateContractMetadata True ((set_type (params 411) (tuple \"string\" \"bytes\") 412) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 414) (literal (string \"not governor\") 414) 414) (set (getItem (attr (data) \"metadata\" 418) (first (params 411) 416) 418) (second (params 411) 417) 418))) (updateDexterAddress True ((set_type (params 395) \"address\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"dexterAddress\" 132) (params 395) 399))) (updateGovernorAddress True ((set_type (params 379) \"address\" 380) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 382) (literal (string \"not governor\") 382) 382) (set (attr (data) \"governorAddress\" 414) (params 379) 383))) (updateOvenRegistryAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"ovenRegistryAddress\" 155) (params 403) 407))) (updateRewardAmount True ((set_type (params 387) \"nat\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"rewardAmount\" 164) (params 387) 391))) (updateTokenMetadata True ((set_type (params 422) (tuple \"nat\" (map \"string\" \"bytes\")) 423) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 425) (literal (string \"not governor\") 425) 425) (set (getItem (attr (data) \"token_metadata\" 426) (literal (intOrNat 0) 426) 426) (params 422) 426))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1974, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1979 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)) (value (literal (nat 10) 1977)))", "line_no": 1978, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1978)", "show": true, "valid": "(literal (bool True) 1978)", "voting_powers": "(map 1978 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1990 (address (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)) (value (literal (nat 40) 1988)))", "line_no": 1989, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1989)", "show": true, "valid": "(literal (bool True) 1989)", "voting_powers": "(map 1989 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 2000 (spender (literal (local-address (static_id 1 82)) 82)) (value (literal (nat 10) 1977)))", "line_no": 1999, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1999)", "show": true, "valid": "(literal (bool True) 1999)", "voting_powers": "(map 1999 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 2010 (spender (literal (local-address (static_id 1 82)) 82)) (value (literal (nat 40) 1988)))", "line_no": 2009, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2009)", "show": true, "valid": "(literal (bool True) 2009)", "voting_powers": "(map 2009 )", "export": true}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "deposit", "params": "(literal (nat 10) 1977)", "line_no": 2019, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2019)", "show": true, "valid": "(literal (bool True) 2019)", "voting_powers": "(map 2019 )", "export": true}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "deposit", "params": "(literal (nat 40) 1988)", "line_no": 2025, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2025)", "show": true, "valid": "(literal (bool True) 2025)", "voting_powers": "(map 2025 )", "export": true}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "redeem", "params": "(mul (literal (nat 10) 1977) (literal (intOrNat 1000000000000000000) 2033) 2033)", "line_no": 2032, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2032)", "show": true, "valid": "(literal (bool True) 2032)", "voting_powers": "(map 2032 )", "export": true}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2009) \"balances\" 2039) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 2039) \"balance\" 2039) (literal (nat 10) 1977) 2039)", "line_no": 2039}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 82) 2032) \"balances\" 2040) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 2040) \"balance\" 2040) (literal (nat 0) 2040) 2040)", "line_no": 2040}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2009) \"balances\" 2039) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22) 2043) \"balance\" 2043) (literal (nat 0) 2043) 2043)", "line_no": 2043}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 82) 2032) \"balances\" 2040) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22) 2044) \"balance\" 2044) (mul (mul (literal (nat 10) 1977) (literal (intOrNat 4) 2044) 2044) (literal (intOrNat 1000000000000000000) 2044) 2044) 2044)", "line_no": 2044}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 82) 2032) \"totalSupply\" 2047) (mul (literal (nat 40) 1988) (literal (intOrNat 1000000000000000000) 2047) 2047) 2047)", "line_no": 2047}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2009) \"balances\" 2039) (literal (local-address (static_id 1 82)) 82) 2050) \"balance\" 2050) (literal (nat 40) 1988) 2050)", "line_no": 2050}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 82) 2032) \"underlyingBalance\" 2051) (literal (nat 40) 1988) 2051)", "line_no": 2051}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "redeem", "params": "(mul (literal (nat 40) 1988) (literal (intOrNat 1000000000000000000) 2055) 2055)", "line_no": 2054, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2054)", "show": true, "valid": "(literal (bool True) 2054)", "voting_powers": "(map 2054 )", "export": true}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2009) \"balances\" 2039) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 2061) \"balance\" 2061) (literal (nat 10) 1977) 2061)", "line_no": 2061}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 82) 2054) \"balances\" 2062) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 2062) \"balance\" 2062) (literal (nat 0) 2062) 2062)", "line_no": 2062}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2009) \"balances\" 2039) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22) 2065) \"balance\" 2065) (literal (nat 40) 1988) 2065)", "line_no": 2065}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 82) 2054) \"balances\" 2062) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22) 2066) \"balance\" 2066) (literal (nat 0) 2066) 2066)", "line_no": 2066}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 82) 2054) \"totalSupply\" 2069) (literal (nat 0) 2069) 2069)", "line_no": 2069}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2009) \"balances\" 2039) (literal (local-address (static_id 1 82)) 82) 2072) \"balance\" 2072) (literal (nat 0) 2072) 2072)", "line_no": 2072}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 82) 2054) \"underlyingBalance\" 2073) (literal (nat 0) 2073) 2073)", "line_no": 2073}], "decompile": false, "kind": "test"}, {"shortname": "redeem_-_can_redeem_from_two_accounts_-_reversed", "longname": "redeem - can redeem from two accounts - reversed", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 376) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s237\" ((set_type (first (params 89) 2083) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 2083) (contract \"address\") 2083) (set (operations 2083) (cons (transfer (getLocal \"__s237\" 2083) (literal (mutez 0) 2083) (second (params 89) 2083) 89) (operations 2083) 2083) 2083))) (getAllowance True ((bind \"__s238\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 2083) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 2083) \"spender\" 46) 46) 46))) (set_type (second (params 45) 2083) (contract \"nat\") 2083) (set (operations 2083) (cons (transfer (getLocal \"__s238\" 2083) (literal (mutez 0) 2083) (second (params 45) 2083) 45) (operations 2083) 2083) 2083))) (getBalance True ((bind \"__s239\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 2083) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 2083) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 2083) 42) \"balance\" 42) 42))) (set_type (second (params 37) 2083) (contract \"nat\") 2083) (set (operations 2083) (cons (transfer (getLocal \"__s239\" 2083) (literal (mutez 0) 2083) (second (params 37) 2083) 37) (operations 2083) 2083) 2083))) (getTotalSupply True ((bind \"__s240\" ((set_type (first (params 49) 2083) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 2083) (contract \"nat\") 2083) (set (operations 2083) (cons (transfer (getLocal \"__s240\" 2083) (literal (mutez 0) 2083) (second (params 49) 2083) 49) (operations 2083) 2083) 2083))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 2083, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 82)", "export": "(storage (record 82 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 86 ) (bigmap (unknown 377) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 86)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 73 ((literal (string \"\") 2089) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 75)) ((literal (string \"data\") 2089) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 72))) (bigmap \"string\" \"bytes\") 73)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 82)) (rewardAmount (literal (intOrNat 1000000000000000000) 82)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 82)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 62 ((literal (nat 0) 49) (tuple 2089 (literal (nat 0) 49) (type_annotation (map 51 ((literal (string \"name\") 2089) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 53)) ((literal (string \"decimals\") 2089) (literal (bytes \"0x3138\") 54)) ((literal (string \"symbol\") 2089) (literal (bytes \"0x6465787465724c6b555344\") 55)) ((literal (string \"icon\") 2089) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 56))) (map \"string\" \"bytes\") 51)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 62)) (totalSupply (literal (intOrNat 0) 82)) (underlyingBalance (literal (nat 0) 103)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 119) \"unit\" 120) (set (operations 135) (cons (transfer (tuple 135 (to_address (self) \"None\") (tuple 135 (literal (intOrNat 1) 135) (add_seconds (now) (literal (int 3600) 127) 127))) (balance) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 132) 130) \"Some\" \"None\" 130) 135) (operations 135) 135) 135) (set (operations 145) (cons (transfer (unit) (literal (mutez 0) 145) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 140) \"Some\" \"None\" 140) 145) (operations 145) 145) 145))) (deposit True ((set_type (params 187) \"nat\" 188) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 191) 191) (literal (string \"bad state\") 191) 191) (set (attr (data) \"state\" 191) (literal (intOrNat 3) 194) 194) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"Some\" (params 187) 195) 195) (set (attr (data) \"savedState_depositor\" 196) (variant \"Some\" (sender) 196) 196) (set (operations 205) (cons (transfer (tuple 205 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 199)) (literal (mutez 0) 205) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 200) \"Some\" \"None\" 200) 205) (operations 205) 205) 205))) (deposit_callback True ((set_type (params 209) \"nat\" 210) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 213) (literal (string \"bad sender\") 213) 213) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 3) 216) 216) (literal (string \"bad state\") 216) 216) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 195) \"Some\" \"None\" 219) 219) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 220) (literal (intOrNat 1000000000000000000) 220) 220) 220) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 221) 221) ((defineLocal \"newUnderlyingBalance\" (add (params 209) (getLocal \"tokensToDeposit\" 222) 222) 222) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 223) (literal (intOrNat 1000000000000000000) 223) 223) (getLocal \"newUnderlyingBalance\" 223) 223) 223) (set (getLocal \"newTokens\" 2089) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 224) (attr (data) \"totalSupply\" 96) 224) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 224) (getLocal \"fractionOfPoolOwnership\" 224) 224) 224) \"Some\" \"None\" 224) 224) 224)) 221) (set (attr (data) \"underlyingBalance\" 227) (add (params 209) (getLocal \"tokensToDeposit\" 227) 227) 227) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 196) \"Some\" \"None\" 230) 230) (set (operations 241) (cons (transfer (record 231 (from_ (getLocal \"depositor\" 232)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 234))) (literal (mutez 0) 241) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 236) \"Some\" \"None\" 236) 241) (operations 241) 241) 241) (set (operations 253) (cons (transfer (record 244 (address (getLocal \"depositor\" 245)) (value (getLocal \"newTokens\" 246))) (literal (mutez 0) 253) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 248) \"Some\" \"None\" 248) 253) (operations 253) 253) 253) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 256) 256) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"None\" (unit) -1) 257) (set (attr (data) \"savedState_depositor\" 196) (variant \"None\" (unit) -1) 258))) (getAdministrator True ((bind \"__s241\" ((set_type (first (params 108) 2089) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 2089) (contract \"address\") 2089) (set (operations 2089) (cons (transfer (getLocal \"__s241\" 2089) (literal (mutez 0) 2089) (second (params 108) 2089) 108) (operations 2089) 2089) 2089))) (getAllowance True ((bind \"__s242\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 2089) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 2089) \"spender\" 69) 69) 69))) (set_type (second (params 68) 2089) (contract \"nat\") 2089) (set (operations 2089) (cons (transfer (getLocal \"__s242\" 2089) (literal (mutez 0) 2089) (second (params 68) 2089) 68) (operations 2089) 2089) 2089))) (getBalance True ((bind \"__s243\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 2089) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 2089) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 2089) 65) \"balance\" 65) 65))) (set_type (second (params 60) 2089) (contract \"nat\") 2089) (set (operations 2089) (cons (transfer (getLocal \"__s243\" 2089) (literal (mutez 0) 2089) (second (params 60) 2089) 60) (operations 2089) 2089) 2089))) (getTotalSupply True ((bind \"__s244\" ((set_type (first (params 72) 2089) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 2089) (contract \"nat\") 2089) (set (operations 2089) (cons (transfer (getLocal \"__s244\" 2089) (literal (mutez 0) 2089) (second (params 72) 2089) 72) (operations 2089) 2089) 2089))) (liquidate True ((set_type (params 149) \"address\" 150) (set (operations 158) (cons (transfer (params 149) (literal (mutez 0) 158) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 155) 153) \"Some\" \"None\" 153) 158) (operations 158) 158) 158) (set (operations 171) (cons (transfer (record 161 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (attr (data) \"rewardAmount\" 164))) (literal (mutez 0) 171) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 166) \"Some\" \"None\" 166) 171) (operations 171) 171) 171) (set (operations 179) (cons (transfer (unit) (literal (mutez 0) 179) (openVariant (contract \"liquidate\" \"unit\" (params 149) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 262) \"nat\" 263) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 266) 266) (literal (string \"bad state\") 266) 266) (set (attr (data) \"state\" 191) (literal (intOrNat 2) 269) 269) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"Some\" (params 262) 270) 270) (set (attr (data) \"savedState_redeemer\" 271) (variant \"Some\" (sender) 271) 271) (set (operations 280) (cons (transfer (tuple 280 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 274)) (literal (mutez 0) 280) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 275) \"Some\" \"None\" 275) 280) (operations 280) 280) 280))) (redeem_callback True ((set_type (params 284) \"nat\" 285) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 288) (literal (string \"bad sender\") 288) 288) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 2) 291) 291) (literal (string \"bad state\") 291) 291) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 270) \"Some\" \"None\" 294) 294) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 295) (literal (intOrNat 1000000000000000000) 295) 295) (attr (data) \"totalSupply\" 96) 295) 295) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 296) (params 284) 296) (literal (intOrNat 1000000000000000000) 296) 296) 296) (set (attr (data) \"underlyingBalance\" 227) (openVariant (isNat (sub (params 284) (getLocal \"tokensToReceive\" 299) 299) 299) \"Some\" \"None\" 299) 299) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 271) \"Some\" \"None\" 302) 302) (set (operations 312) (cons (transfer (record 303 (address (getLocal \"redeemer\" 304)) (value (getLocal \"tokensToRedeem\" 305))) (literal (mutez 0) 312) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 307) \"Some\" \"None\" 307) 312) (operations 312) 312) 312) (set (operations 325) (cons (transfer (record 315 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 317)) (value (getLocal \"tokensToReceive\" 318))) (literal (mutez 0) 325) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 320) \"Some\" \"None\" 320) 325) (operations 325) 325) 325) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 328) 328) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"None\" (unit) -1) 329) (set (attr (data) \"savedState_redeemer\" 271) (variant \"None\" (unit) -1) 330))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 338) \"unit\" 339) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 342) 342) (literal (string \"bad state\") 342) 342) (set (attr (data) \"state\" 191) (literal (intOrNat 1) 345) 345) (set (operations 354) (cons (transfer (tuple 354 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 348)) (literal (mutez 0) 354) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 349) \"Some\" \"None\" 349) 354) (operations 354) 354) 354))) (updateBalance_callback True ((set_type (params 358) \"nat\" 359) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 362) (literal (string \"bad sender\") 362) 362) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 1) 365) 365) (literal (string \"bad state\") 365) 365) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 368) 368) (set (attr (data) \"underlyingBalance\" 227) (params 358) 371))) (updateContractMetadata True ((set_type (params 411) (tuple \"string\" \"bytes\") 412) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 414) (literal (string \"not governor\") 414) 414) (set (getItem (attr (data) \"metadata\" 418) (first (params 411) 416) 418) (second (params 411) 417) 418))) (updateDexterAddress True ((set_type (params 395) \"address\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"dexterAddress\" 132) (params 395) 399))) (updateGovernorAddress True ((set_type (params 379) \"address\" 380) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 382) (literal (string \"not governor\") 382) 382) (set (attr (data) \"governorAddress\" 414) (params 379) 383))) (updateOvenRegistryAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"ovenRegistryAddress\" 155) (params 403) 407))) (updateRewardAmount True ((set_type (params 387) \"nat\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"rewardAmount\" 164) (params 387) 391))) (updateTokenMetadata True ((set_type (params 422) (tuple \"nat\" (map \"string\" \"bytes\")) 423) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 425) (literal (string \"not governor\") 425) 425) (set (getItem (attr (data) \"token_metadata\" 426) (literal (intOrNat 0) 426) 426) (params 422) 426))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 2089, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 2094 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)) (value (literal (nat 10) 2092)))", "line_no": 2093, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2093)", "show": true, "valid": "(literal (bool True) 2093)", "voting_powers": "(map 2093 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 2105 (address (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)) (value (literal (nat 40) 2103)))", "line_no": 2104, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2104)", "show": true, "valid": "(literal (bool True) 2104)", "voting_powers": "(map 2104 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 2115 (spender (literal (local-address (static_id 1 82)) 82)) (value (literal (nat 10) 2092)))", "line_no": 2114, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2114)", "show": true, "valid": "(literal (bool True) 2114)", "voting_powers": "(map 2114 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 2125 (spender (literal (local-address (static_id 1 82)) 82)) (value (literal (nat 40) 2103)))", "line_no": 2124, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2124)", "show": true, "valid": "(literal (bool True) 2124)", "voting_powers": "(map 2124 )", "export": true}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "deposit", "params": "(literal (nat 10) 2092)", "line_no": 2134, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2134)", "show": true, "valid": "(literal (bool True) 2134)", "voting_powers": "(map 2134 )", "export": true}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "deposit", "params": "(literal (nat 40) 2103)", "line_no": 2140, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2140)", "show": true, "valid": "(literal (bool True) 2140)", "voting_powers": "(map 2140 )", "export": true}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "redeem", "params": "(mul (literal (nat 40) 2103) (literal (intOrNat 1000000000000000000) 2148) 2148)", "line_no": 2147, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2147)", "show": true, "valid": "(literal (bool True) 2147)", "voting_powers": "(map 2147 )", "export": true}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2124) \"balances\" 2154) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 2154) \"balance\" 2154) (literal (nat 0) 2154) 2154)", "line_no": 2154}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 82) 2147) \"balances\" 2155) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 2155) \"balance\" 2155) (mul (literal (nat 10) 2092) (literal (intOrNat 1000000000000000000) 2155) 2155) 2155)", "line_no": 2155}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2124) \"balances\" 2154) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22) 2158) \"balance\" 2158) (literal (nat 40) 2103) 2158)", "line_no": 2158}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 82) 2147) \"balances\" 2155) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22) 2159) \"balance\" 2159) (literal (nat 0) 2159) 2159)", "line_no": 2159}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 82) 2147) \"totalSupply\" 2162) (mul (literal (nat 10) 2092) (literal (intOrNat 1000000000000000000) 2162) 2162) 2162)", "line_no": 2162}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2124) \"balances\" 2154) (literal (local-address (static_id 1 82)) 82) 2165) \"balance\" 2165) (literal (nat 10) 2092) 2165)", "line_no": 2165}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 82) 2147) \"underlyingBalance\" 2166) (literal (nat 10) 2092) 2166)", "line_no": 2166}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "redeem", "params": "(mul (literal (nat 10) 2092) (literal (intOrNat 1000000000000000000) 2170) 2170)", "line_no": 2169, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2169)", "show": true, "valid": "(literal (bool True) 2169)", "voting_powers": "(map 2169 )", "export": true}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2124) \"balances\" 2154) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 2176) \"balance\" 2176) (literal (nat 10) 2092) 2176)", "line_no": 2176}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 82) 2169) \"balances\" 2177) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 2177) \"balance\" 2177) (literal (nat 0) 2177) 2177)", "line_no": 2177}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2124) \"balances\" 2154) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22) 2180) \"balance\" 2180) (literal (nat 40) 2103) 2180)", "line_no": 2180}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 82) 2169) \"balances\" 2177) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22) 2181) \"balance\" 2181) (literal (nat 0) 2181) 2181)", "line_no": 2181}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 82) 2169) \"totalSupply\" 2184) (literal (nat 0) 2184) 2184)", "line_no": 2184}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2124) \"balances\" 2154) (literal (local-address (static_id 1 82)) 82) 2187) \"balance\" 2187) (literal (nat 0) 2187) 2187)", "line_no": 2187}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 82) 2169) \"underlyingBalance\" 2188) (literal (nat 0) 2188) 2188)", "line_no": 2188}], "decompile": false, "kind": "test"}, {"shortname": "redeem_-_can_redeem_partially_from_two_accounts", "longname": "redeem - can redeem partially from two accounts", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 387) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s245\" ((set_type (first (params 89) 2198) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 2198) (contract \"address\") 2198) (set (operations 2198) (cons (transfer (getLocal \"__s245\" 2198) (literal (mutez 0) 2198) (second (params 89) 2198) 89) (operations 2198) 2198) 2198))) (getAllowance True ((bind \"__s246\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 2198) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 2198) \"spender\" 46) 46) 46))) (set_type (second (params 45) 2198) (contract \"nat\") 2198) (set (operations 2198) (cons (transfer (getLocal \"__s246\" 2198) (literal (mutez 0) 2198) (second (params 45) 2198) 45) (operations 2198) 2198) 2198))) (getBalance True ((bind \"__s247\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 2198) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 2198) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 2198) 42) \"balance\" 42) 42))) (set_type (second (params 37) 2198) (contract \"nat\") 2198) (set (operations 2198) (cons (transfer (getLocal \"__s247\" 2198) (literal (mutez 0) 2198) (second (params 37) 2198) 37) (operations 2198) 2198) 2198))) (getTotalSupply True ((bind \"__s248\" ((set_type (first (params 49) 2198) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 2198) (contract \"nat\") 2198) (set (operations 2198) (cons (transfer (getLocal \"__s248\" 2198) (literal (mutez 0) 2198) (second (params 49) 2198) 49) (operations 2198) 2198) 2198))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 2198, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 82)", "export": "(storage (record 82 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 86 ) (bigmap (unknown 388) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 86)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 73 ((literal (string \"\") 2204) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 75)) ((literal (string \"data\") 2204) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 72))) (bigmap \"string\" \"bytes\") 73)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 82)) (rewardAmount (literal (intOrNat 1000000000000000000) 82)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 82)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 62 ((literal (nat 0) 49) (tuple 2204 (literal (nat 0) 49) (type_annotation (map 51 ((literal (string \"name\") 2204) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 53)) ((literal (string \"decimals\") 2204) (literal (bytes \"0x3138\") 54)) ((literal (string \"symbol\") 2204) (literal (bytes \"0x6465787465724c6b555344\") 55)) ((literal (string \"icon\") 2204) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 56))) (map \"string\" \"bytes\") 51)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 62)) (totalSupply (literal (intOrNat 0) 82)) (underlyingBalance (literal (nat 0) 103)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 119) \"unit\" 120) (set (operations 135) (cons (transfer (tuple 135 (to_address (self) \"None\") (tuple 135 (literal (intOrNat 1) 135) (add_seconds (now) (literal (int 3600) 127) 127))) (balance) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 132) 130) \"Some\" \"None\" 130) 135) (operations 135) 135) 135) (set (operations 145) (cons (transfer (unit) (literal (mutez 0) 145) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 140) \"Some\" \"None\" 140) 145) (operations 145) 145) 145))) (deposit True ((set_type (params 187) \"nat\" 188) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 191) 191) (literal (string \"bad state\") 191) 191) (set (attr (data) \"state\" 191) (literal (intOrNat 3) 194) 194) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"Some\" (params 187) 195) 195) (set (attr (data) \"savedState_depositor\" 196) (variant \"Some\" (sender) 196) 196) (set (operations 205) (cons (transfer (tuple 205 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 199)) (literal (mutez 0) 205) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 200) \"Some\" \"None\" 200) 205) (operations 205) 205) 205))) (deposit_callback True ((set_type (params 209) \"nat\" 210) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 213) (literal (string \"bad sender\") 213) 213) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 3) 216) 216) (literal (string \"bad state\") 216) 216) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 195) \"Some\" \"None\" 219) 219) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 220) (literal (intOrNat 1000000000000000000) 220) 220) 220) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 221) 221) ((defineLocal \"newUnderlyingBalance\" (add (params 209) (getLocal \"tokensToDeposit\" 222) 222) 222) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 223) (literal (intOrNat 1000000000000000000) 223) 223) (getLocal \"newUnderlyingBalance\" 223) 223) 223) (set (getLocal \"newTokens\" 2204) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 224) (attr (data) \"totalSupply\" 96) 224) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 224) (getLocal \"fractionOfPoolOwnership\" 224) 224) 224) \"Some\" \"None\" 224) 224) 224)) 221) (set (attr (data) \"underlyingBalance\" 227) (add (params 209) (getLocal \"tokensToDeposit\" 227) 227) 227) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 196) \"Some\" \"None\" 230) 230) (set (operations 241) (cons (transfer (record 231 (from_ (getLocal \"depositor\" 232)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 234))) (literal (mutez 0) 241) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 236) \"Some\" \"None\" 236) 241) (operations 241) 241) 241) (set (operations 253) (cons (transfer (record 244 (address (getLocal \"depositor\" 245)) (value (getLocal \"newTokens\" 246))) (literal (mutez 0) 253) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 248) \"Some\" \"None\" 248) 253) (operations 253) 253) 253) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 256) 256) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"None\" (unit) -1) 257) (set (attr (data) \"savedState_depositor\" 196) (variant \"None\" (unit) -1) 258))) (getAdministrator True ((bind \"__s249\" ((set_type (first (params 108) 2204) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 2204) (contract \"address\") 2204) (set (operations 2204) (cons (transfer (getLocal \"__s249\" 2204) (literal (mutez 0) 2204) (second (params 108) 2204) 108) (operations 2204) 2204) 2204))) (getAllowance True ((bind \"__s250\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 2204) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 2204) \"spender\" 69) 69) 69))) (set_type (second (params 68) 2204) (contract \"nat\") 2204) (set (operations 2204) (cons (transfer (getLocal \"__s250\" 2204) (literal (mutez 0) 2204) (second (params 68) 2204) 68) (operations 2204) 2204) 2204))) (getBalance True ((bind \"__s251\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 2204) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 2204) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 2204) 65) \"balance\" 65) 65))) (set_type (second (params 60) 2204) (contract \"nat\") 2204) (set (operations 2204) (cons (transfer (getLocal \"__s251\" 2204) (literal (mutez 0) 2204) (second (params 60) 2204) 60) (operations 2204) 2204) 2204))) (getTotalSupply True ((bind \"__s252\" ((set_type (first (params 72) 2204) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 2204) (contract \"nat\") 2204) (set (operations 2204) (cons (transfer (getLocal \"__s252\" 2204) (literal (mutez 0) 2204) (second (params 72) 2204) 72) (operations 2204) 2204) 2204))) (liquidate True ((set_type (params 149) \"address\" 150) (set (operations 158) (cons (transfer (params 149) (literal (mutez 0) 158) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 155) 153) \"Some\" \"None\" 153) 158) (operations 158) 158) 158) (set (operations 171) (cons (transfer (record 161 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (attr (data) \"rewardAmount\" 164))) (literal (mutez 0) 171) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 166) \"Some\" \"None\" 166) 171) (operations 171) 171) 171) (set (operations 179) (cons (transfer (unit) (literal (mutez 0) 179) (openVariant (contract \"liquidate\" \"unit\" (params 149) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 262) \"nat\" 263) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 266) 266) (literal (string \"bad state\") 266) 266) (set (attr (data) \"state\" 191) (literal (intOrNat 2) 269) 269) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"Some\" (params 262) 270) 270) (set (attr (data) \"savedState_redeemer\" 271) (variant \"Some\" (sender) 271) 271) (set (operations 280) (cons (transfer (tuple 280 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 274)) (literal (mutez 0) 280) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 275) \"Some\" \"None\" 275) 280) (operations 280) 280) 280))) (redeem_callback True ((set_type (params 284) \"nat\" 285) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 288) (literal (string \"bad sender\") 288) 288) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 2) 291) 291) (literal (string \"bad state\") 291) 291) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 270) \"Some\" \"None\" 294) 294) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 295) (literal (intOrNat 1000000000000000000) 295) 295) (attr (data) \"totalSupply\" 96) 295) 295) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 296) (params 284) 296) (literal (intOrNat 1000000000000000000) 296) 296) 296) (set (attr (data) \"underlyingBalance\" 227) (openVariant (isNat (sub (params 284) (getLocal \"tokensToReceive\" 299) 299) 299) \"Some\" \"None\" 299) 299) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 271) \"Some\" \"None\" 302) 302) (set (operations 312) (cons (transfer (record 303 (address (getLocal \"redeemer\" 304)) (value (getLocal \"tokensToRedeem\" 305))) (literal (mutez 0) 312) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 307) \"Some\" \"None\" 307) 312) (operations 312) 312) 312) (set (operations 325) (cons (transfer (record 315 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 317)) (value (getLocal \"tokensToReceive\" 318))) (literal (mutez 0) 325) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 320) \"Some\" \"None\" 320) 325) (operations 325) 325) 325) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 328) 328) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"None\" (unit) -1) 329) (set (attr (data) \"savedState_redeemer\" 271) (variant \"None\" (unit) -1) 330))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 338) \"unit\" 339) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 342) 342) (literal (string \"bad state\") 342) 342) (set (attr (data) \"state\" 191) (literal (intOrNat 1) 345) 345) (set (operations 354) (cons (transfer (tuple 354 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 348)) (literal (mutez 0) 354) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 349) \"Some\" \"None\" 349) 354) (operations 354) 354) 354))) (updateBalance_callback True ((set_type (params 358) \"nat\" 359) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 362) (literal (string \"bad sender\") 362) 362) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 1) 365) 365) (literal (string \"bad state\") 365) 365) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 368) 368) (set (attr (data) \"underlyingBalance\" 227) (params 358) 371))) (updateContractMetadata True ((set_type (params 411) (tuple \"string\" \"bytes\") 412) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 414) (literal (string \"not governor\") 414) 414) (set (getItem (attr (data) \"metadata\" 418) (first (params 411) 416) 418) (second (params 411) 417) 418))) (updateDexterAddress True ((set_type (params 395) \"address\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"dexterAddress\" 132) (params 395) 399))) (updateGovernorAddress True ((set_type (params 379) \"address\" 380) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 382) (literal (string \"not governor\") 382) 382) (set (attr (data) \"governorAddress\" 414) (params 379) 383))) (updateOvenRegistryAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"ovenRegistryAddress\" 155) (params 403) 407))) (updateRewardAmount True ((set_type (params 387) \"nat\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"rewardAmount\" 164) (params 387) 391))) (updateTokenMetadata True ((set_type (params 422) (tuple \"nat\" (map \"string\" \"bytes\")) 423) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 425) (literal (string \"not governor\") 425) 425) (set (getItem (attr (data) \"token_metadata\" 426) (literal (intOrNat 0) 426) 426) (params 422) 426))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 2204, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 2209 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)) (value (literal (nat 10) 2207)))", "line_no": 2208, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2208)", "show": true, "valid": "(literal (bool True) 2208)", "voting_powers": "(map 2208 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 2220 (address (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)) (value (literal (nat 40) 2218)))", "line_no": 2219, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2219)", "show": true, "valid": "(literal (bool True) 2219)", "voting_powers": "(map 2219 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 2230 (spender (literal (local-address (static_id 1 82)) 82)) (value (literal (nat 10) 2207)))", "line_no": 2229, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2229)", "show": true, "valid": "(literal (bool True) 2229)", "voting_powers": "(map 2229 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 2240 (spender (literal (local-address (static_id 1 82)) 82)) (value (literal (nat 40) 2218)))", "line_no": 2239, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2239)", "show": true, "valid": "(literal (bool True) 2239)", "voting_powers": "(map 2239 )", "export": true}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "deposit", "params": "(literal (nat 10) 2207)", "line_no": 2249, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2249)", "show": true, "valid": "(literal (bool True) 2249)", "voting_powers": "(map 2249 )", "export": true}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "deposit", "params": "(literal (nat 40) 2218)", "line_no": 2255, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2255)", "show": true, "valid": "(literal (bool True) 2255)", "voting_powers": "(map 2255 )", "export": true}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "redeem", "params": "(mul (truediv (literal (nat 10) 2207) (literal (intOrNat 2) 2263) 2263) (literal (intOrNat 1000000000000000000) 2263) 2263)", "line_no": 2262, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2262)", "show": true, "valid": "(literal (bool True) 2262)", "voting_powers": "(map 2262 )", "export": true}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2239) \"balances\" 2269) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 2269) \"balance\" 2269) (truediv (literal (nat 10) 2207) (literal (intOrNat 2) 2269) 2269) 2269)", "line_no": 2269}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 82) 2262) \"balances\" 2270) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 2270) \"balance\" 2270) (mul (truediv (literal (nat 10) 2207) (literal (intOrNat 2) 2270) 2270) (literal (intOrNat 1000000000000000000) 2270) 2270) 2270)", "line_no": 2270}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2239) \"balances\" 2269) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22) 2273) \"balance\" 2273) (literal (nat 0) 2273) 2273)", "line_no": 2273}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 82) 2262) \"balances\" 2270) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22) 2274) \"balance\" 2274) (mul (mul (literal (nat 10) 2207) (literal (intOrNat 4) 2274) 2274) (literal (intOrNat 1000000000000000000) 2274) 2274) 2274)", "line_no": 2274}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 82) 2262) \"totalSupply\" 2277) (mul (add (literal (nat 40) 2218) (truediv (literal (nat 10) 2207) (literal (intOrNat 2) 2277) 2277) 2277) (literal (intOrNat 1000000000000000000) 2277) 2277) 2277)", "line_no": 2277}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2239) \"balances\" 2269) (literal (local-address (static_id 1 82)) 82) 2280) \"balance\" 2280) (add (literal (nat 40) 2218) (truediv (literal (nat 10) 2207) (literal (intOrNat 2) 2280) 2280) 2280) 2280)", "line_no": 2280}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 82) 2262) \"underlyingBalance\" 2281) (add (literal (nat 40) 2218) (truediv (literal (nat 10) 2207) (literal (intOrNat 2) 2281) 2281) 2281) 2281)", "line_no": 2281}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "redeem", "params": "(mul (truediv (literal (nat 40) 2218) (literal (intOrNat 4) 2285) 2285) (literal (intOrNat 1000000000000000000) 2285) 2285)", "line_no": 2284, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2284)", "show": true, "valid": "(literal (bool True) 2284)", "voting_powers": "(map 2284 )", "export": true}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2239) \"balances\" 2269) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 2291) \"balance\" 2291) (truediv (literal (nat 10) 2207) (literal (intOrNat 2) 2291) 2291) 2291)", "line_no": 2291}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 82) 2284) \"balances\" 2292) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 2292) \"balance\" 2292) (mul (truediv (literal (nat 10) 2207) (literal (intOrNat 2) 2292) 2292) (literal (intOrNat 1000000000000000000) 2292) 2292) 2292)", "line_no": 2292}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2239) \"balances\" 2269) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22) 2295) \"balance\" 2295) (literal (intOrNat 9) 2295) 2295)", "line_no": 2295}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 82) 2284) \"balances\" 2292) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22) 2296) \"balance\" 2296) (literal (intOrNat 30000000000000000000) 2296) 2296)", "line_no": 2296}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 82) 2284) \"totalSupply\" 2300) (mul (literal (nat 35) 2300) (literal (intOrNat 1000000000000000000) 2300) 2300) 2300)", "line_no": 2300}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2239) \"balances\" 2269) (literal (local-address (static_id 1 82)) 82) 2306) \"balance\" 2306) (literal (nat 36) 2305) 2306)", "line_no": 2306}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 82) 2284) \"underlyingBalance\" 2307) (literal (nat 36) 2305) 2307)", "line_no": 2307}], "decompile": false, "kind": "test"}, {"shortname": "redeem_-_can_redeem_from_two_accounts_with_liquidity_added", "longname": "redeem - can redeem from two accounts with liquidity added", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 398) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s253\" ((set_type (first (params 89) 2317) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 2317) (contract \"address\") 2317) (set (operations 2317) (cons (transfer (getLocal \"__s253\" 2317) (literal (mutez 0) 2317) (second (params 89) 2317) 89) (operations 2317) 2317) 2317))) (getAllowance True ((bind \"__s254\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 2317) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 2317) \"spender\" 46) 46) 46))) (set_type (second (params 45) 2317) (contract \"nat\") 2317) (set (operations 2317) (cons (transfer (getLocal \"__s254\" 2317) (literal (mutez 0) 2317) (second (params 45) 2317) 45) (operations 2317) 2317) 2317))) (getBalance True ((bind \"__s255\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 2317) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 2317) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 2317) 42) \"balance\" 42) 42))) (set_type (second (params 37) 2317) (contract \"nat\") 2317) (set (operations 2317) (cons (transfer (getLocal \"__s255\" 2317) (literal (mutez 0) 2317) (second (params 37) 2317) 37) (operations 2317) 2317) 2317))) (getTotalSupply True ((bind \"__s256\" ((set_type (first (params 49) 2317) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 2317) (contract \"nat\") 2317) (set (operations 2317) (cons (transfer (getLocal \"__s256\" 2317) (literal (mutez 0) 2317) (second (params 49) 2317) 49) (operations 2317) 2317) 2317))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 2317, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 82)", "export": "(storage (record 82 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 86 ) (bigmap (unknown 399) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 86)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 73 ((literal (string \"\") 2323) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 75)) ((literal (string \"data\") 2323) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 72))) (bigmap \"string\" \"bytes\") 73)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 82)) (rewardAmount (literal (intOrNat 1000000000000000000) 82)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 82)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 62 ((literal (nat 0) 49) (tuple 2323 (literal (nat 0) 49) (type_annotation (map 51 ((literal (string \"name\") 2323) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 53)) ((literal (string \"decimals\") 2323) (literal (bytes \"0x3138\") 54)) ((literal (string \"symbol\") 2323) (literal (bytes \"0x6465787465724c6b555344\") 55)) ((literal (string \"icon\") 2323) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 56))) (map \"string\" \"bytes\") 51)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 62)) (totalSupply (literal (intOrNat 0) 82)) (underlyingBalance (literal (nat 0) 103)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 119) \"unit\" 120) (set (operations 135) (cons (transfer (tuple 135 (to_address (self) \"None\") (tuple 135 (literal (intOrNat 1) 135) (add_seconds (now) (literal (int 3600) 127) 127))) (balance) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 132) 130) \"Some\" \"None\" 130) 135) (operations 135) 135) 135) (set (operations 145) (cons (transfer (unit) (literal (mutez 0) 145) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 140) \"Some\" \"None\" 140) 145) (operations 145) 145) 145))) (deposit True ((set_type (params 187) \"nat\" 188) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 191) 191) (literal (string \"bad state\") 191) 191) (set (attr (data) \"state\" 191) (literal (intOrNat 3) 194) 194) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"Some\" (params 187) 195) 195) (set (attr (data) \"savedState_depositor\" 196) (variant \"Some\" (sender) 196) 196) (set (operations 205) (cons (transfer (tuple 205 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 199)) (literal (mutez 0) 205) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 200) \"Some\" \"None\" 200) 205) (operations 205) 205) 205))) (deposit_callback True ((set_type (params 209) \"nat\" 210) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 213) (literal (string \"bad sender\") 213) 213) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 3) 216) 216) (literal (string \"bad state\") 216) 216) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 195) \"Some\" \"None\" 219) 219) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 220) (literal (intOrNat 1000000000000000000) 220) 220) 220) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 221) 221) ((defineLocal \"newUnderlyingBalance\" (add (params 209) (getLocal \"tokensToDeposit\" 222) 222) 222) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 223) (literal (intOrNat 1000000000000000000) 223) 223) (getLocal \"newUnderlyingBalance\" 223) 223) 223) (set (getLocal \"newTokens\" 2323) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 224) (attr (data) \"totalSupply\" 96) 224) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 224) (getLocal \"fractionOfPoolOwnership\" 224) 224) 224) \"Some\" \"None\" 224) 224) 224)) 221) (set (attr (data) \"underlyingBalance\" 227) (add (params 209) (getLocal \"tokensToDeposit\" 227) 227) 227) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 196) \"Some\" \"None\" 230) 230) (set (operations 241) (cons (transfer (record 231 (from_ (getLocal \"depositor\" 232)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 234))) (literal (mutez 0) 241) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 236) \"Some\" \"None\" 236) 241) (operations 241) 241) 241) (set (operations 253) (cons (transfer (record 244 (address (getLocal \"depositor\" 245)) (value (getLocal \"newTokens\" 246))) (literal (mutez 0) 253) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 248) \"Some\" \"None\" 248) 253) (operations 253) 253) 253) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 256) 256) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"None\" (unit) -1) 257) (set (attr (data) \"savedState_depositor\" 196) (variant \"None\" (unit) -1) 258))) (getAdministrator True ((bind \"__s257\" ((set_type (first (params 108) 2323) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 2323) (contract \"address\") 2323) (set (operations 2323) (cons (transfer (getLocal \"__s257\" 2323) (literal (mutez 0) 2323) (second (params 108) 2323) 108) (operations 2323) 2323) 2323))) (getAllowance True ((bind \"__s258\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 2323) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 2323) \"spender\" 69) 69) 69))) (set_type (second (params 68) 2323) (contract \"nat\") 2323) (set (operations 2323) (cons (transfer (getLocal \"__s258\" 2323) (literal (mutez 0) 2323) (second (params 68) 2323) 68) (operations 2323) 2323) 2323))) (getBalance True ((bind \"__s259\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 2323) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 2323) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 2323) 65) \"balance\" 65) 65))) (set_type (second (params 60) 2323) (contract \"nat\") 2323) (set (operations 2323) (cons (transfer (getLocal \"__s259\" 2323) (literal (mutez 0) 2323) (second (params 60) 2323) 60) (operations 2323) 2323) 2323))) (getTotalSupply True ((bind \"__s260\" ((set_type (first (params 72) 2323) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 2323) (contract \"nat\") 2323) (set (operations 2323) (cons (transfer (getLocal \"__s260\" 2323) (literal (mutez 0) 2323) (second (params 72) 2323) 72) (operations 2323) 2323) 2323))) (liquidate True ((set_type (params 149) \"address\" 150) (set (operations 158) (cons (transfer (params 149) (literal (mutez 0) 158) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 155) 153) \"Some\" \"None\" 153) 158) (operations 158) 158) 158) (set (operations 171) (cons (transfer (record 161 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (attr (data) \"rewardAmount\" 164))) (literal (mutez 0) 171) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 166) \"Some\" \"None\" 166) 171) (operations 171) 171) 171) (set (operations 179) (cons (transfer (unit) (literal (mutez 0) 179) (openVariant (contract \"liquidate\" \"unit\" (params 149) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 262) \"nat\" 263) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 266) 266) (literal (string \"bad state\") 266) 266) (set (attr (data) \"state\" 191) (literal (intOrNat 2) 269) 269) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"Some\" (params 262) 270) 270) (set (attr (data) \"savedState_redeemer\" 271) (variant \"Some\" (sender) 271) 271) (set (operations 280) (cons (transfer (tuple 280 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 274)) (literal (mutez 0) 280) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 275) \"Some\" \"None\" 275) 280) (operations 280) 280) 280))) (redeem_callback True ((set_type (params 284) \"nat\" 285) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 288) (literal (string \"bad sender\") 288) 288) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 2) 291) 291) (literal (string \"bad state\") 291) 291) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 270) \"Some\" \"None\" 294) 294) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 295) (literal (intOrNat 1000000000000000000) 295) 295) (attr (data) \"totalSupply\" 96) 295) 295) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 296) (params 284) 296) (literal (intOrNat 1000000000000000000) 296) 296) 296) (set (attr (data) \"underlyingBalance\" 227) (openVariant (isNat (sub (params 284) (getLocal \"tokensToReceive\" 299) 299) 299) \"Some\" \"None\" 299) 299) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 271) \"Some\" \"None\" 302) 302) (set (operations 312) (cons (transfer (record 303 (address (getLocal \"redeemer\" 304)) (value (getLocal \"tokensToRedeem\" 305))) (literal (mutez 0) 312) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 307) \"Some\" \"None\" 307) 312) (operations 312) 312) 312) (set (operations 325) (cons (transfer (record 315 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 317)) (value (getLocal \"tokensToReceive\" 318))) (literal (mutez 0) 325) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 320) \"Some\" \"None\" 320) 325) (operations 325) 325) 325) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 328) 328) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"None\" (unit) -1) 329) (set (attr (data) \"savedState_redeemer\" 271) (variant \"None\" (unit) -1) 330))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 338) \"unit\" 339) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 342) 342) (literal (string \"bad state\") 342) 342) (set (attr (data) \"state\" 191) (literal (intOrNat 1) 345) 345) (set (operations 354) (cons (transfer (tuple 354 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 348)) (literal (mutez 0) 354) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 349) \"Some\" \"None\" 349) 354) (operations 354) 354) 354))) (updateBalance_callback True ((set_type (params 358) \"nat\" 359) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 362) (literal (string \"bad sender\") 362) 362) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 1) 365) 365) (literal (string \"bad state\") 365) 365) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 368) 368) (set (attr (data) \"underlyingBalance\" 227) (params 358) 371))) (updateContractMetadata True ((set_type (params 411) (tuple \"string\" \"bytes\") 412) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 414) (literal (string \"not governor\") 414) 414) (set (getItem (attr (data) \"metadata\" 418) (first (params 411) 416) 418) (second (params 411) 417) 418))) (updateDexterAddress True ((set_type (params 395) \"address\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"dexterAddress\" 132) (params 395) 399))) (updateGovernorAddress True ((set_type (params 379) \"address\" 380) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 382) (literal (string \"not governor\") 382) 382) (set (attr (data) \"governorAddress\" 414) (params 379) 383))) (updateOvenRegistryAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"ovenRegistryAddress\" 155) (params 403) 407))) (updateRewardAmount True ((set_type (params 387) \"nat\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"rewardAmount\" 164) (params 387) 391))) (updateTokenMetadata True ((set_type (params 422) (tuple \"nat\" (map \"string\" \"bytes\")) 423) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 425) (literal (string \"not governor\") 425) 425) (set (getItem (attr (data) \"token_metadata\" 426) (literal (intOrNat 0) 426) 426) (params 422) 426))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 2323, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 2328 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)) (value (literal (nat 10) 2326)))", "line_no": 2327, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2327)", "show": true, "valid": "(literal (bool True) 2327)", "voting_powers": "(map 2327 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 2339 (address (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)) (value (literal (nat 40) 2337)))", "line_no": 2338, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2338)", "show": true, "valid": "(literal (bool True) 2338)", "voting_powers": "(map 2338 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 2349 (spender (literal (local-address (static_id 1 82)) 82)) (value (literal (nat 10) 2326)))", "line_no": 2348, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2348)", "show": true, "valid": "(literal (bool True) 2348)", "voting_powers": "(map 2348 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 2359 (spender (literal (local-address (static_id 1 82)) 82)) (value (literal (nat 40) 2337)))", "line_no": 2358, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2358)", "show": true, "valid": "(literal (bool True) 2358)", "voting_powers": "(map 2358 )", "export": true}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "deposit", "params": "(literal (nat 10) 2326)", "line_no": 2368, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2368)", "show": true, "valid": "(literal (bool True) 2368)", "voting_powers": "(map 2368 )", "export": true}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "deposit", "params": "(literal (nat 40) 2337)", "line_no": 2374, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2374)", "show": true, "valid": "(literal (bool True) 2374)", "voting_powers": "(map 2374 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 2383 (address (literal (local-address (static_id 1 82)) 82)) (value (literal (intOrNat 10) 2383)))", "line_no": 2382, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2382)", "show": true, "valid": "(literal (bool True) 2382)", "voting_powers": "(map 2382 )", "export": true}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "updateBalance", "params": "(unit)", "line_no": 2392, "title": "", "messageClass": "", "source": "none", "sender": "none", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2392)", "show": true, "valid": "(literal (bool True) 2392)", "voting_powers": "(map 2392 )", "export": true}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "redeem", "params": "(mul (literal (nat 10) 2326) (literal (intOrNat 1000000000000000000) 2396) 2396)", "line_no": 2395, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2395)", "show": true, "valid": "(literal (bool True) 2395)", "voting_powers": "(map 2395 )", "export": true}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2382) \"balances\" 2404) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 2404) \"balance\" 2404) (add (literal (nat 10) 2326) (literal (nat 2) 2403) 2404) 2404)", "line_no": 2404}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 82) 2395) \"balances\" 2405) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 2405) \"balance\" 2405) (literal (nat 0) 2405) 2405)", "line_no": 2405}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2382) \"balances\" 2404) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22) 2408) \"balance\" 2408) (literal (nat 0) 2408) 2408)", "line_no": 2408}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 82) 2395) \"balances\" 2405) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22) 2409) \"balance\" 2409) (mul (mul (literal (nat 10) 2326) (literal (intOrNat 4) 2409) 2409) (literal (intOrNat 1000000000000000000) 2409) 2409) 2409)", "line_no": 2409}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 82) 2395) \"totalSupply\" 2412) (mul (literal (nat 40) 2337) (literal (intOrNat 1000000000000000000) 2412) 2412) 2412)", "line_no": 2412}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2382) \"balances\" 2404) (literal (local-address (static_id 1 82)) 82) 2416) \"balance\" 2416) (add (literal (nat 40) 2337) (openVariant (isNat (sub (literal (intOrNat 10) 2416) (literal (nat 2) 2403) 2416) 2416) \"Some\" \"None\" 2416) 2416) 2416)", "line_no": 2416}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 82) 2395) \"underlyingBalance\" 2417) (add (literal (nat 40) 2337) (openVariant (isNat (sub (literal (intOrNat 10) 2417) (literal (nat 2) 2403) 2417) 2417) \"Some\" \"None\" 2417) 2417) 2417)", "line_no": 2417}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "redeem", "params": "(mul (literal (nat 40) 2337) (literal (intOrNat 1000000000000000000) 2421) 2421)", "line_no": 2420, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2420)", "show": true, "valid": "(literal (bool True) 2420)", "voting_powers": "(map 2420 )", "export": true}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2382) \"balances\" 2404) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 2427) \"balance\" 2427) (add (literal (nat 10) 2326) (literal (nat 2) 2403) 2427) 2427)", "line_no": 2427}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 82) 2420) \"balances\" 2428) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 2428) \"balance\" 2428) (literal (nat 0) 2428) 2428)", "line_no": 2428}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2382) \"balances\" 2404) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22) 2433) \"balance\" 2433) (add (literal (nat 40) 2337) (literal (nat 8) 2432) 2433) 2433)", "line_no": 2433}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 82) 2420) \"balances\" 2428) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22) 2434) \"balance\" 2434) (literal (nat 0) 2434) 2434)", "line_no": 2434}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 82) 2420) \"totalSupply\" 2437) (literal (nat 0) 2437) 2437)", "line_no": 2437}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2382) \"balances\" 2404) (literal (local-address (static_id 1 82)) 82) 2440) \"balance\" 2440) (literal (nat 0) 2440) 2440)", "line_no": 2440}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 82) 2420) \"underlyingBalance\" 2441) (literal (nat 0) 2441) 2441)", "line_no": 2441}], "decompile": false, "kind": "test"}, {"shortname": "redeem_-_can_redeem_correctly_from_accounts_joining_after_liquidity_is_added", "longname": "redeem - can redeem correctly from accounts joining after liquidity is added", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 409) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s261\" ((set_type (first (params 89) 2451) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 2451) (contract \"address\") 2451) (set (operations 2451) (cons (transfer (getLocal \"__s261\" 2451) (literal (mutez 0) 2451) (second (params 89) 2451) 89) (operations 2451) 2451) 2451))) (getAllowance True ((bind \"__s262\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 2451) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 2451) \"spender\" 46) 46) 46))) (set_type (second (params 45) 2451) (contract \"nat\") 2451) (set (operations 2451) (cons (transfer (getLocal \"__s262\" 2451) (literal (mutez 0) 2451) (second (params 45) 2451) 45) (operations 2451) 2451) 2451))) (getBalance True ((bind \"__s263\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 2451) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 2451) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 2451) 42) \"balance\" 42) 42))) (set_type (second (params 37) 2451) (contract \"nat\") 2451) (set (operations 2451) (cons (transfer (getLocal \"__s263\" 2451) (literal (mutez 0) 2451) (second (params 37) 2451) 37) (operations 2451) 2451) 2451))) (getTotalSupply True ((bind \"__s264\" ((set_type (first (params 49) 2451) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 2451) (contract \"nat\") 2451) (set (operations 2451) (cons (transfer (getLocal \"__s264\" 2451) (literal (mutez 0) 2451) (second (params 49) 2451) 49) (operations 2451) 2451) 2451))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 2451, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 82)", "export": "(storage (record 82 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 86 ) (bigmap (unknown 410) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 86)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 73 ((literal (string \"\") 2457) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 75)) ((literal (string \"data\") 2457) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 72))) (bigmap \"string\" \"bytes\") 73)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 82)) (rewardAmount (literal (intOrNat 1000000000000000000) 82)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 82)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 62 ((literal (nat 0) 49) (tuple 2457 (literal (nat 0) 49) (type_annotation (map 51 ((literal (string \"name\") 2457) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 53)) ((literal (string \"decimals\") 2457) (literal (bytes \"0x3138\") 54)) ((literal (string \"symbol\") 2457) (literal (bytes \"0x6465787465724c6b555344\") 55)) ((literal (string \"icon\") 2457) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 56))) (map \"string\" \"bytes\") 51)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 62)) (totalSupply (literal (intOrNat 0) 82)) (underlyingBalance (literal (nat 0) 103)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 119) \"unit\" 120) (set (operations 135) (cons (transfer (tuple 135 (to_address (self) \"None\") (tuple 135 (literal (intOrNat 1) 135) (add_seconds (now) (literal (int 3600) 127) 127))) (balance) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 132) 130) \"Some\" \"None\" 130) 135) (operations 135) 135) 135) (set (operations 145) (cons (transfer (unit) (literal (mutez 0) 145) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 140) \"Some\" \"None\" 140) 145) (operations 145) 145) 145))) (deposit True ((set_type (params 187) \"nat\" 188) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 191) 191) (literal (string \"bad state\") 191) 191) (set (attr (data) \"state\" 191) (literal (intOrNat 3) 194) 194) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"Some\" (params 187) 195) 195) (set (attr (data) \"savedState_depositor\" 196) (variant \"Some\" (sender) 196) 196) (set (operations 205) (cons (transfer (tuple 205 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 199)) (literal (mutez 0) 205) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 200) \"Some\" \"None\" 200) 205) (operations 205) 205) 205))) (deposit_callback True ((set_type (params 209) \"nat\" 210) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 213) (literal (string \"bad sender\") 213) 213) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 3) 216) 216) (literal (string \"bad state\") 216) 216) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 195) \"Some\" \"None\" 219) 219) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 220) (literal (intOrNat 1000000000000000000) 220) 220) 220) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 221) 221) ((defineLocal \"newUnderlyingBalance\" (add (params 209) (getLocal \"tokensToDeposit\" 222) 222) 222) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 223) (literal (intOrNat 1000000000000000000) 223) 223) (getLocal \"newUnderlyingBalance\" 223) 223) 223) (set (getLocal \"newTokens\" 2457) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 224) (attr (data) \"totalSupply\" 96) 224) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 224) (getLocal \"fractionOfPoolOwnership\" 224) 224) 224) \"Some\" \"None\" 224) 224) 224)) 221) (set (attr (data) \"underlyingBalance\" 227) (add (params 209) (getLocal \"tokensToDeposit\" 227) 227) 227) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 196) \"Some\" \"None\" 230) 230) (set (operations 241) (cons (transfer (record 231 (from_ (getLocal \"depositor\" 232)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 234))) (literal (mutez 0) 241) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 236) \"Some\" \"None\" 236) 241) (operations 241) 241) 241) (set (operations 253) (cons (transfer (record 244 (address (getLocal \"depositor\" 245)) (value (getLocal \"newTokens\" 246))) (literal (mutez 0) 253) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 248) \"Some\" \"None\" 248) 253) (operations 253) 253) 253) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 256) 256) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"None\" (unit) -1) 257) (set (attr (data) \"savedState_depositor\" 196) (variant \"None\" (unit) -1) 258))) (getAdministrator True ((bind \"__s265\" ((set_type (first (params 108) 2457) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 2457) (contract \"address\") 2457) (set (operations 2457) (cons (transfer (getLocal \"__s265\" 2457) (literal (mutez 0) 2457) (second (params 108) 2457) 108) (operations 2457) 2457) 2457))) (getAllowance True ((bind \"__s266\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 2457) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 2457) \"spender\" 69) 69) 69))) (set_type (second (params 68) 2457) (contract \"nat\") 2457) (set (operations 2457) (cons (transfer (getLocal \"__s266\" 2457) (literal (mutez 0) 2457) (second (params 68) 2457) 68) (operations 2457) 2457) 2457))) (getBalance True ((bind \"__s267\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 2457) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 2457) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 2457) 65) \"balance\" 65) 65))) (set_type (second (params 60) 2457) (contract \"nat\") 2457) (set (operations 2457) (cons (transfer (getLocal \"__s267\" 2457) (literal (mutez 0) 2457) (second (params 60) 2457) 60) (operations 2457) 2457) 2457))) (getTotalSupply True ((bind \"__s268\" ((set_type (first (params 72) 2457) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 2457) (contract \"nat\") 2457) (set (operations 2457) (cons (transfer (getLocal \"__s268\" 2457) (literal (mutez 0) 2457) (second (params 72) 2457) 72) (operations 2457) 2457) 2457))) (liquidate True ((set_type (params 149) \"address\" 150) (set (operations 158) (cons (transfer (params 149) (literal (mutez 0) 158) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 155) 153) \"Some\" \"None\" 153) 158) (operations 158) 158) 158) (set (operations 171) (cons (transfer (record 161 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (attr (data) \"rewardAmount\" 164))) (literal (mutez 0) 171) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 166) \"Some\" \"None\" 166) 171) (operations 171) 171) 171) (set (operations 179) (cons (transfer (unit) (literal (mutez 0) 179) (openVariant (contract \"liquidate\" \"unit\" (params 149) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 262) \"nat\" 263) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 266) 266) (literal (string \"bad state\") 266) 266) (set (attr (data) \"state\" 191) (literal (intOrNat 2) 269) 269) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"Some\" (params 262) 270) 270) (set (attr (data) \"savedState_redeemer\" 271) (variant \"Some\" (sender) 271) 271) (set (operations 280) (cons (transfer (tuple 280 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 274)) (literal (mutez 0) 280) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 275) \"Some\" \"None\" 275) 280) (operations 280) 280) 280))) (redeem_callback True ((set_type (params 284) \"nat\" 285) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 288) (literal (string \"bad sender\") 288) 288) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 2) 291) 291) (literal (string \"bad state\") 291) 291) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 270) \"Some\" \"None\" 294) 294) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 295) (literal (intOrNat 1000000000000000000) 295) 295) (attr (data) \"totalSupply\" 96) 295) 295) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 296) (params 284) 296) (literal (intOrNat 1000000000000000000) 296) 296) 296) (set (attr (data) \"underlyingBalance\" 227) (openVariant (isNat (sub (params 284) (getLocal \"tokensToReceive\" 299) 299) 299) \"Some\" \"None\" 299) 299) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 271) \"Some\" \"None\" 302) 302) (set (operations 312) (cons (transfer (record 303 (address (getLocal \"redeemer\" 304)) (value (getLocal \"tokensToRedeem\" 305))) (literal (mutez 0) 312) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 307) \"Some\" \"None\" 307) 312) (operations 312) 312) 312) (set (operations 325) (cons (transfer (record 315 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 317)) (value (getLocal \"tokensToReceive\" 318))) (literal (mutez 0) 325) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 320) \"Some\" \"None\" 320) 325) (operations 325) 325) 325) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 328) 328) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"None\" (unit) -1) 329) (set (attr (data) \"savedState_redeemer\" 271) (variant \"None\" (unit) -1) 330))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 338) \"unit\" 339) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 342) 342) (literal (string \"bad state\") 342) 342) (set (attr (data) \"state\" 191) (literal (intOrNat 1) 345) 345) (set (operations 354) (cons (transfer (tuple 354 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 348)) (literal (mutez 0) 354) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 349) \"Some\" \"None\" 349) 354) (operations 354) 354) 354))) (updateBalance_callback True ((set_type (params 358) \"nat\" 359) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 362) (literal (string \"bad sender\") 362) 362) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 1) 365) 365) (literal (string \"bad state\") 365) 365) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 368) 368) (set (attr (data) \"underlyingBalance\" 227) (params 358) 371))) (updateContractMetadata True ((set_type (params 411) (tuple \"string\" \"bytes\") 412) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 414) (literal (string \"not governor\") 414) 414) (set (getItem (attr (data) \"metadata\" 418) (first (params 411) 416) 418) (second (params 411) 417) 418))) (updateDexterAddress True ((set_type (params 395) \"address\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"dexterAddress\" 132) (params 395) 399))) (updateGovernorAddress True ((set_type (params 379) \"address\" 380) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 382) (literal (string \"not governor\") 382) 382) (set (attr (data) \"governorAddress\" 414) (params 379) 383))) (updateOvenRegistryAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"ovenRegistryAddress\" 155) (params 403) 407))) (updateRewardAmount True ((set_type (params 387) \"nat\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"rewardAmount\" 164) (params 387) 391))) (updateTokenMetadata True ((set_type (params 422) (tuple \"nat\" (map \"string\" \"bytes\")) 423) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 425) (literal (string \"not governor\") 425) 425) (set (getItem (attr (data) \"token_metadata\" 426) (literal (intOrNat 0) 426) 426) (params 422) 426))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 2457, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 2462 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)) (value (literal (nat 10) 2460)))", "line_no": 2461, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2461)", "show": true, "valid": "(literal (bool True) 2461)", "voting_powers": "(map 2461 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 2473 (address (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)) (value (literal (nat 40) 2471)))", "line_no": 2472, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2472)", "show": true, "valid": "(literal (bool True) 2472)", "voting_powers": "(map 2472 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 2484 (address (literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 23)) (value (literal (nat 60) 2482)))", "line_no": 2483, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2483)", "show": true, "valid": "(literal (bool True) 2483)", "voting_powers": "(map 2483 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 2494 (spender (literal (local-address (static_id 1 82)) 82)) (value (literal (nat 10) 2460)))", "line_no": 2493, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2493)", "show": true, "valid": "(literal (bool True) 2493)", "voting_powers": "(map 2493 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 2504 (spender (literal (local-address (static_id 1 82)) 82)) (value (literal (nat 40) 2471)))", "line_no": 2503, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2503)", "show": true, "valid": "(literal (bool True) 2503)", "voting_powers": "(map 2503 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 2514 (spender (literal (local-address (static_id 1 82)) 82)) (value (literal (nat 60) 2482)))", "line_no": 2513, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 23)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2513)", "show": true, "valid": "(literal (bool True) 2513)", "voting_powers": "(map 2513 )", "export": true}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "deposit", "params": "(literal (nat 10) 2460)", "line_no": 2523, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2523)", "show": true, "valid": "(literal (bool True) 2523)", "voting_powers": "(map 2523 )", "export": true}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "deposit", "params": "(literal (nat 40) 2471)", "line_no": 2529, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2529)", "show": true, "valid": "(literal (bool True) 2529)", "voting_powers": "(map 2529 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 2538 (address (literal (local-address (static_id 1 82)) 82)) (value (literal (intOrNat 10) 2538)))", "line_no": 2537, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2537)", "show": true, "valid": "(literal (bool True) 2537)", "voting_powers": "(map 2537 )", "export": true}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "updateBalance", "params": "(unit)", "line_no": 2547, "title": "", "messageClass": "", "source": "none", "sender": "none", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2547)", "show": true, "valid": "(literal (bool True) 2547)", "voting_powers": "(map 2547 )", "export": true}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "deposit", "params": "(literal (nat 60) 2482)", "line_no": 2550, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 23)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2550)", "show": true, "valid": "(literal (bool True) 2550)", "voting_powers": "(map 2550 )", "export": true}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "redeem", "params": "(mul (literal (nat 10) 2460) (literal (intOrNat 1000000000000000000) 2558) 2558)", "line_no": 2557, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2557)", "show": true, "valid": "(literal (bool True) 2557)", "voting_powers": "(map 2557 )", "export": true}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "redeem", "params": "(mul (literal (nat 40) 2471) (literal (intOrNat 1000000000000000000) 2564) 2564)", "line_no": 2563, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2563)", "show": true, "valid": "(literal (bool True) 2563)", "voting_powers": "(map 2563 )", "export": true}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "redeem", "params": "(attr (getItem (attr (contractData (static_id 1 82) 2563) \"balances\" 2570) (literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 23) 2570) \"balance\" 2570)", "line_no": 2569, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 23)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2569)", "show": true, "valid": "(literal (bool True) 2569)", "voting_powers": "(map 2569 )", "export": true}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 82) 2569) \"totalSupply\" 2576) (literal (nat 0) 2576) 2576)", "line_no": 2576}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 82) 2569) \"balances\" 2577) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 2577) \"balance\" 2577) (literal (nat 0) 2577) 2577)", "line_no": 2577}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 82) 2569) \"balances\" 2577) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22) 2578) \"balance\" 2578) (literal (nat 0) 2578) 2578)", "line_no": 2578}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 82) 2569) \"balances\" 2577) (literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 23) 2579) \"balance\" 2579) (literal (nat 0) 2579) 2579)", "line_no": 2579}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2537) \"balances\" 2582) (literal (local-address (static_id 1 82)) 82) 2582) \"balance\" 2582) (literal (nat 0) 2582) 2582)", "line_no": 2582}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 82) 2569) \"underlyingBalance\" 2583) (literal (nat 0) 2583) 2583)", "line_no": 2583}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2537) \"balances\" 2582) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 2587) \"balance\" 2587) (literal (nat 12) 2587) 2587)", "line_no": 2587}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2537) \"balances\" 2582) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22) 2588) \"balance\" 2588) (literal (nat 47) 2588) 2588)", "line_no": 2588}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2537) \"balances\" 2582) (literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 23) 2589) \"balance\" 2589) (literal (nat 61) 2589) 2589)", "line_no": 2589}], "decompile": false, "kind": "test"}, {"shortname": "redeem_-_can_redeem_correctly_from_accounts_joining_after_liquidity_is_added_with_fraction_of_pool", "longname": "redeem - can redeem correctly from accounts joining after liquidity is added with fraction of pool", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 420) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s269\" ((set_type (first (params 89) 2599) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 2599) (contract \"address\") 2599) (set (operations 2599) (cons (transfer (getLocal \"__s269\" 2599) (literal (mutez 0) 2599) (second (params 89) 2599) 89) (operations 2599) 2599) 2599))) (getAllowance True ((bind \"__s270\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 2599) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 2599) \"spender\" 46) 46) 46))) (set_type (second (params 45) 2599) (contract \"nat\") 2599) (set (operations 2599) (cons (transfer (getLocal \"__s270\" 2599) (literal (mutez 0) 2599) (second (params 45) 2599) 45) (operations 2599) 2599) 2599))) (getBalance True ((bind \"__s271\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 2599) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 2599) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 2599) 42) \"balance\" 42) 42))) (set_type (second (params 37) 2599) (contract \"nat\") 2599) (set (operations 2599) (cons (transfer (getLocal \"__s271\" 2599) (literal (mutez 0) 2599) (second (params 37) 2599) 37) (operations 2599) 2599) 2599))) (getTotalSupply True ((bind \"__s272\" ((set_type (first (params 49) 2599) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 2599) (contract \"nat\") 2599) (set (operations 2599) (cons (transfer (getLocal \"__s272\" 2599) (literal (mutez 0) 2599) (second (params 49) 2599) 49) (operations 2599) 2599) 2599))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 2599, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 82)", "export": "(storage (record 82 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 86 ) (bigmap (unknown 421) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 86)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 73 ((literal (string \"\") 2605) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 75)) ((literal (string \"data\") 2605) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 72))) (bigmap \"string\" \"bytes\") 73)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 82)) (rewardAmount (literal (intOrNat 1000000000000000000) 82)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 82)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 62 ((literal (nat 0) 49) (tuple 2605 (literal (nat 0) 49) (type_annotation (map 51 ((literal (string \"name\") 2605) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 53)) ((literal (string \"decimals\") 2605) (literal (bytes \"0x3138\") 54)) ((literal (string \"symbol\") 2605) (literal (bytes \"0x6465787465724c6b555344\") 55)) ((literal (string \"icon\") 2605) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 56))) (map \"string\" \"bytes\") 51)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 62)) (totalSupply (literal (intOrNat 0) 82)) (underlyingBalance (literal (nat 0) 103)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 119) \"unit\" 120) (set (operations 135) (cons (transfer (tuple 135 (to_address (self) \"None\") (tuple 135 (literal (intOrNat 1) 135) (add_seconds (now) (literal (int 3600) 127) 127))) (balance) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 132) 130) \"Some\" \"None\" 130) 135) (operations 135) 135) 135) (set (operations 145) (cons (transfer (unit) (literal (mutez 0) 145) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 140) \"Some\" \"None\" 140) 145) (operations 145) 145) 145))) (deposit True ((set_type (params 187) \"nat\" 188) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 191) 191) (literal (string \"bad state\") 191) 191) (set (attr (data) \"state\" 191) (literal (intOrNat 3) 194) 194) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"Some\" (params 187) 195) 195) (set (attr (data) \"savedState_depositor\" 196) (variant \"Some\" (sender) 196) 196) (set (operations 205) (cons (transfer (tuple 205 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 199)) (literal (mutez 0) 205) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 200) \"Some\" \"None\" 200) 205) (operations 205) 205) 205))) (deposit_callback True ((set_type (params 209) \"nat\" 210) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 213) (literal (string \"bad sender\") 213) 213) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 3) 216) 216) (literal (string \"bad state\") 216) 216) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 195) \"Some\" \"None\" 219) 219) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 220) (literal (intOrNat 1000000000000000000) 220) 220) 220) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 221) 221) ((defineLocal \"newUnderlyingBalance\" (add (params 209) (getLocal \"tokensToDeposit\" 222) 222) 222) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 223) (literal (intOrNat 1000000000000000000) 223) 223) (getLocal \"newUnderlyingBalance\" 223) 223) 223) (set (getLocal \"newTokens\" 2605) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 224) (attr (data) \"totalSupply\" 96) 224) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 224) (getLocal \"fractionOfPoolOwnership\" 224) 224) 224) \"Some\" \"None\" 224) 224) 224)) 221) (set (attr (data) \"underlyingBalance\" 227) (add (params 209) (getLocal \"tokensToDeposit\" 227) 227) 227) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 196) \"Some\" \"None\" 230) 230) (set (operations 241) (cons (transfer (record 231 (from_ (getLocal \"depositor\" 232)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 234))) (literal (mutez 0) 241) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 236) \"Some\" \"None\" 236) 241) (operations 241) 241) 241) (set (operations 253) (cons (transfer (record 244 (address (getLocal \"depositor\" 245)) (value (getLocal \"newTokens\" 246))) (literal (mutez 0) 253) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 248) \"Some\" \"None\" 248) 253) (operations 253) 253) 253) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 256) 256) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"None\" (unit) -1) 257) (set (attr (data) \"savedState_depositor\" 196) (variant \"None\" (unit) -1) 258))) (getAdministrator True ((bind \"__s273\" ((set_type (first (params 108) 2605) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 2605) (contract \"address\") 2605) (set (operations 2605) (cons (transfer (getLocal \"__s273\" 2605) (literal (mutez 0) 2605) (second (params 108) 2605) 108) (operations 2605) 2605) 2605))) (getAllowance True ((bind \"__s274\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 2605) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 2605) \"spender\" 69) 69) 69))) (set_type (second (params 68) 2605) (contract \"nat\") 2605) (set (operations 2605) (cons (transfer (getLocal \"__s274\" 2605) (literal (mutez 0) 2605) (second (params 68) 2605) 68) (operations 2605) 2605) 2605))) (getBalance True ((bind \"__s275\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 2605) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 2605) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 2605) 65) \"balance\" 65) 65))) (set_type (second (params 60) 2605) (contract \"nat\") 2605) (set (operations 2605) (cons (transfer (getLocal \"__s275\" 2605) (literal (mutez 0) 2605) (second (params 60) 2605) 60) (operations 2605) 2605) 2605))) (getTotalSupply True ((bind \"__s276\" ((set_type (first (params 72) 2605) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 2605) (contract \"nat\") 2605) (set (operations 2605) (cons (transfer (getLocal \"__s276\" 2605) (literal (mutez 0) 2605) (second (params 72) 2605) 72) (operations 2605) 2605) 2605))) (liquidate True ((set_type (params 149) \"address\" 150) (set (operations 158) (cons (transfer (params 149) (literal (mutez 0) 158) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 155) 153) \"Some\" \"None\" 153) 158) (operations 158) 158) 158) (set (operations 171) (cons (transfer (record 161 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (attr (data) \"rewardAmount\" 164))) (literal (mutez 0) 171) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 166) \"Some\" \"None\" 166) 171) (operations 171) 171) 171) (set (operations 179) (cons (transfer (unit) (literal (mutez 0) 179) (openVariant (contract \"liquidate\" \"unit\" (params 149) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 262) \"nat\" 263) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 266) 266) (literal (string \"bad state\") 266) 266) (set (attr (data) \"state\" 191) (literal (intOrNat 2) 269) 269) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"Some\" (params 262) 270) 270) (set (attr (data) \"savedState_redeemer\" 271) (variant \"Some\" (sender) 271) 271) (set (operations 280) (cons (transfer (tuple 280 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 274)) (literal (mutez 0) 280) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 275) \"Some\" \"None\" 275) 280) (operations 280) 280) 280))) (redeem_callback True ((set_type (params 284) \"nat\" 285) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 288) (literal (string \"bad sender\") 288) 288) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 2) 291) 291) (literal (string \"bad state\") 291) 291) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 270) \"Some\" \"None\" 294) 294) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 295) (literal (intOrNat 1000000000000000000) 295) 295) (attr (data) \"totalSupply\" 96) 295) 295) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 296) (params 284) 296) (literal (intOrNat 1000000000000000000) 296) 296) 296) (set (attr (data) \"underlyingBalance\" 227) (openVariant (isNat (sub (params 284) (getLocal \"tokensToReceive\" 299) 299) 299) \"Some\" \"None\" 299) 299) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 271) \"Some\" \"None\" 302) 302) (set (operations 312) (cons (transfer (record 303 (address (getLocal \"redeemer\" 304)) (value (getLocal \"tokensToRedeem\" 305))) (literal (mutez 0) 312) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 307) \"Some\" \"None\" 307) 312) (operations 312) 312) 312) (set (operations 325) (cons (transfer (record 315 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 317)) (value (getLocal \"tokensToReceive\" 318))) (literal (mutez 0) 325) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 320) \"Some\" \"None\" 320) 325) (operations 325) 325) 325) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 328) 328) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"None\" (unit) -1) 329) (set (attr (data) \"savedState_redeemer\" 271) (variant \"None\" (unit) -1) 330))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 338) \"unit\" 339) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 342) 342) (literal (string \"bad state\") 342) 342) (set (attr (data) \"state\" 191) (literal (intOrNat 1) 345) 345) (set (operations 354) (cons (transfer (tuple 354 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 348)) (literal (mutez 0) 354) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 349) \"Some\" \"None\" 349) 354) (operations 354) 354) 354))) (updateBalance_callback True ((set_type (params 358) \"nat\" 359) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 362) (literal (string \"bad sender\") 362) 362) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 1) 365) 365) (literal (string \"bad state\") 365) 365) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 368) 368) (set (attr (data) \"underlyingBalance\" 227) (params 358) 371))) (updateContractMetadata True ((set_type (params 411) (tuple \"string\" \"bytes\") 412) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 414) (literal (string \"not governor\") 414) 414) (set (getItem (attr (data) \"metadata\" 418) (first (params 411) 416) 418) (second (params 411) 417) 418))) (updateDexterAddress True ((set_type (params 395) \"address\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"dexterAddress\" 132) (params 395) 399))) (updateGovernorAddress True ((set_type (params 379) \"address\" 380) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 382) (literal (string \"not governor\") 382) 382) (set (attr (data) \"governorAddress\" 414) (params 379) 383))) (updateOvenRegistryAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"ovenRegistryAddress\" 155) (params 403) 407))) (updateRewardAmount True ((set_type (params 387) \"nat\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"rewardAmount\" 164) (params 387) 391))) (updateTokenMetadata True ((set_type (params 422) (tuple \"nat\" (map \"string\" \"bytes\")) 423) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 425) (literal (string \"not governor\") 425) 425) (set (getItem (attr (data) \"token_metadata\" 426) (literal (intOrNat 0) 426) 426) (params 422) 426))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 2605, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 2610 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)) (value (literal (nat 10) 2608)))", "line_no": 2609, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2609)", "show": true, "valid": "(literal (bool True) 2609)", "voting_powers": "(map 2609 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 2621 (address (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)) (value (literal (nat 40) 2619)))", "line_no": 2620, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2620)", "show": true, "valid": "(literal (bool True) 2620)", "voting_powers": "(map 2620 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 2632 (address (literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 23)) (value (literal (nat 20) 2630)))", "line_no": 2631, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2631)", "show": true, "valid": "(literal (bool True) 2631)", "voting_powers": "(map 2631 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 2642 (spender (literal (local-address (static_id 1 82)) 82)) (value (literal (nat 10) 2608)))", "line_no": 2641, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2641)", "show": true, "valid": "(literal (bool True) 2641)", "voting_powers": "(map 2641 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 2652 (spender (literal (local-address (static_id 1 82)) 82)) (value (literal (nat 40) 2619)))", "line_no": 2651, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2651)", "show": true, "valid": "(literal (bool True) 2651)", "voting_powers": "(map 2651 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 2662 (spender (literal (local-address (static_id 1 82)) 82)) (value (literal (nat 20) 2630)))", "line_no": 2661, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 23)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2661)", "show": true, "valid": "(literal (bool True) 2661)", "voting_powers": "(map 2661 )", "export": true}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "deposit", "params": "(literal (nat 10) 2608)", "line_no": 2671, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2671)", "show": true, "valid": "(literal (bool True) 2671)", "voting_powers": "(map 2671 )", "export": true}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "deposit", "params": "(literal (nat 40) 2619)", "line_no": 2677, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2677)", "show": true, "valid": "(literal (bool True) 2677)", "voting_powers": "(map 2677 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 2686 (address (literal (local-address (static_id 1 82)) 82)) (value (literal (intOrNat 10) 2686)))", "line_no": 2685, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2685)", "show": true, "valid": "(literal (bool True) 2685)", "voting_powers": "(map 2685 )", "export": true}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "updateBalance", "params": "(unit)", "line_no": 2695, "title": "", "messageClass": "", "source": "none", "sender": "none", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2695)", "show": true, "valid": "(literal (bool True) 2695)", "voting_powers": "(map 2695 )", "export": true}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "deposit", "params": "(literal (nat 20) 2630)", "line_no": 2698, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 23)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2698)", "show": true, "valid": "(literal (bool True) 2698)", "voting_powers": "(map 2698 )", "export": true}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "redeem", "params": "(mul (literal (nat 10) 2608) (literal (intOrNat 1000000000000000000) 2706) 2706)", "line_no": 2705, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2705)", "show": true, "valid": "(literal (bool True) 2705)", "voting_powers": "(map 2705 )", "export": true}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "redeem", "params": "(mul (literal (nat 40) 2619) (literal (intOrNat 1000000000000000000) 2712) 2712)", "line_no": 2711, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2711)", "show": true, "valid": "(literal (bool True) 2711)", "voting_powers": "(map 2711 )", "export": true}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "redeem", "params": "(attr (getItem (attr (contractData (static_id 1 82) 2711) \"balances\" 2718) (literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 23) 2718) \"balance\" 2718)", "line_no": 2717, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 23)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2717)", "show": true, "valid": "(literal (bool True) 2717)", "voting_powers": "(map 2717 )", "export": true}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 82) 2717) \"totalSupply\" 2724) (literal (nat 0) 2724) 2724)", "line_no": 2724}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 82) 2717) \"balances\" 2725) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 2725) \"balance\" 2725) (literal (nat 0) 2725) 2725)", "line_no": 2725}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 82) 2717) \"balances\" 2725) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22) 2726) \"balance\" 2726) (literal (nat 0) 2726) 2726)", "line_no": 2726}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 82) 2717) \"balances\" 2725) (literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 23) 2727) \"balance\" 2727) (literal (nat 0) 2727) 2727)", "line_no": 2727}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2685) \"balances\" 2730) (literal (local-address (static_id 1 82)) 82) 2730) \"balance\" 2730) (literal (nat 0) 2730) 2730)", "line_no": 2730}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 82) 2717) \"underlyingBalance\" 2731) (literal (nat 0) 2731) 2731)", "line_no": 2731}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2685) \"balances\" 2730) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 2735) \"balance\" 2735) (literal (nat 12) 2735) 2735)", "line_no": 2735}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2685) \"balances\" 2730) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 22) 2736) \"balance\" 2736) (literal (nat 47) 2736) 2736)", "line_no": 2736}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 2685) \"balances\" 2730) (literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 23) 2737) \"balance\" 2737) (literal (nat 21) 2737) 2737)", "line_no": 2737}], "decompile": false, "kind": "test"}, {"shortname": "redeem_callback_-_can_finish_redeem", "longname": "redeem_callback - can finish redeem", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 431) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s277\" ((set_type (first (params 89) 2751) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 2751) (contract \"address\") 2751) (set (operations 2751) (cons (transfer (getLocal \"__s277\" 2751) (literal (mutez 0) 2751) (second (params 89) 2751) 89) (operations 2751) 2751) 2751))) (getAllowance True ((bind \"__s278\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 2751) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 2751) \"spender\" 46) 46) 46))) (set_type (second (params 45) 2751) (contract \"nat\") 2751) (set (operations 2751) (cons (transfer (getLocal \"__s278\" 2751) (literal (mutez 0) 2751) (second (params 45) 2751) 45) (operations 2751) 2751) 2751))) (getBalance True ((bind \"__s279\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 2751) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 2751) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 2751) 42) \"balance\" 42) 42))) (set_type (second (params 37) 2751) (contract \"nat\") 2751) (set (operations 2751) (cons (transfer (getLocal \"__s279\" 2751) (literal (mutez 0) 2751) (second (params 37) 2751) 37) (operations 2751) 2751) 2751))) (getTotalSupply True ((bind \"__s280\" ((set_type (first (params 49) 2751) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 2751) (contract \"nat\") 2751) (set (operations 2751) (cons (transfer (getLocal \"__s280\" 2751) (literal (mutez 0) 2751) (second (params 49) 2751) 49) (operations 2751) 2751) 2751))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 2751, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 2756 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)) (value (literal (nat 10) 2754)))", "line_no": 2755, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2755)", "show": true, "valid": "(literal (bool True) 2755)", "voting_powers": "(map 2755 )", "export": true}, {"action": "newContract", "id": "(static_id 1 82)", "export": "(storage (record 82 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 86 ) (bigmap (unknown 432) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 86)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 73 ((literal (string \"\") 2772) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 75)) ((literal (string \"data\") 2772) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 72))) (bigmap \"string\" \"bytes\") 73)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 82)) (rewardAmount (literal (intOrNat 1000000000000000000) 82)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"Some\" (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 2767)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"Some\" (mul (literal (nat 10) 2754) (literal (intOrNat 1000000000000000000) 2768) 2768) 2768)) (state (literal (intOrNat 2) 82)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 62 ((literal (nat 0) 49) (tuple 2772 (literal (nat 0) 49) (type_annotation (map 51 ((literal (string \"name\") 2772) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 53)) ((literal (string \"decimals\") 2772) (literal (bytes \"0x3138\") 54)) ((literal (string \"symbol\") 2772) (literal (bytes \"0x6465787465724c6b555344\") 55)) ((literal (string \"icon\") 2772) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 56))) (map \"string\" \"bytes\") 51)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 62)) (totalSupply (literal (intOrNat 0) 82)) (underlyingBalance (literal (nat 0) 103)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 119) \"unit\" 120) (set (operations 135) (cons (transfer (tuple 135 (to_address (self) \"None\") (tuple 135 (literal (intOrNat 1) 135) (add_seconds (now) (literal (int 3600) 127) 127))) (balance) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 132) 130) \"Some\" \"None\" 130) 135) (operations 135) 135) 135) (set (operations 145) (cons (transfer (unit) (literal (mutez 0) 145) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 140) \"Some\" \"None\" 140) 145) (operations 145) 145) 145))) (deposit True ((set_type (params 187) \"nat\" 188) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 191) 191) (literal (string \"bad state\") 191) 191) (set (attr (data) \"state\" 191) (literal (intOrNat 3) 194) 194) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"Some\" (params 187) 195) 195) (set (attr (data) \"savedState_depositor\" 196) (variant \"Some\" (sender) 196) 196) (set (operations 205) (cons (transfer (tuple 205 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 199)) (literal (mutez 0) 205) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 200) \"Some\" \"None\" 200) 205) (operations 205) 205) 205))) (deposit_callback True ((set_type (params 209) \"nat\" 210) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 213) (literal (string \"bad sender\") 213) 213) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 3) 216) 216) (literal (string \"bad state\") 216) 216) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 195) \"Some\" \"None\" 219) 219) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 220) (literal (intOrNat 1000000000000000000) 220) 220) 220) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 221) 221) ((defineLocal \"newUnderlyingBalance\" (add (params 209) (getLocal \"tokensToDeposit\" 222) 222) 222) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 223) (literal (intOrNat 1000000000000000000) 223) 223) (getLocal \"newUnderlyingBalance\" 223) 223) 223) (set (getLocal \"newTokens\" 2772) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 224) (attr (data) \"totalSupply\" 96) 224) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 224) (getLocal \"fractionOfPoolOwnership\" 224) 224) 224) \"Some\" \"None\" 224) 224) 224)) 221) (set (attr (data) \"underlyingBalance\" 227) (add (params 209) (getLocal \"tokensToDeposit\" 227) 227) 227) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 196) \"Some\" \"None\" 230) 230) (set (operations 241) (cons (transfer (record 231 (from_ (getLocal \"depositor\" 232)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 234))) (literal (mutez 0) 241) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 236) \"Some\" \"None\" 236) 241) (operations 241) 241) 241) (set (operations 253) (cons (transfer (record 244 (address (getLocal \"depositor\" 245)) (value (getLocal \"newTokens\" 246))) (literal (mutez 0) 253) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 248) \"Some\" \"None\" 248) 253) (operations 253) 253) 253) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 256) 256) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"None\" (unit) -1) 257) (set (attr (data) \"savedState_depositor\" 196) (variant \"None\" (unit) -1) 258))) (getAdministrator True ((bind \"__s281\" ((set_type (first (params 108) 2772) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 2772) (contract \"address\") 2772) (set (operations 2772) (cons (transfer (getLocal \"__s281\" 2772) (literal (mutez 0) 2772) (second (params 108) 2772) 108) (operations 2772) 2772) 2772))) (getAllowance True ((bind \"__s282\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 2772) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 2772) \"spender\" 69) 69) 69))) (set_type (second (params 68) 2772) (contract \"nat\") 2772) (set (operations 2772) (cons (transfer (getLocal \"__s282\" 2772) (literal (mutez 0) 2772) (second (params 68) 2772) 68) (operations 2772) 2772) 2772))) (getBalance True ((bind \"__s283\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 2772) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 2772) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 2772) 65) \"balance\" 65) 65))) (set_type (second (params 60) 2772) (contract \"nat\") 2772) (set (operations 2772) (cons (transfer (getLocal \"__s283\" 2772) (literal (mutez 0) 2772) (second (params 60) 2772) 60) (operations 2772) 2772) 2772))) (getTotalSupply True ((bind \"__s284\" ((set_type (first (params 72) 2772) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 2772) (contract \"nat\") 2772) (set (operations 2772) (cons (transfer (getLocal \"__s284\" 2772) (literal (mutez 0) 2772) (second (params 72) 2772) 72) (operations 2772) 2772) 2772))) (liquidate True ((set_type (params 149) \"address\" 150) (set (operations 158) (cons (transfer (params 149) (literal (mutez 0) 158) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 155) 153) \"Some\" \"None\" 153) 158) (operations 158) 158) 158) (set (operations 171) (cons (transfer (record 161 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (attr (data) \"rewardAmount\" 164))) (literal (mutez 0) 171) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 166) \"Some\" \"None\" 166) 171) (operations 171) 171) 171) (set (operations 179) (cons (transfer (unit) (literal (mutez 0) 179) (openVariant (contract \"liquidate\" \"unit\" (params 149) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 262) \"nat\" 263) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 266) 266) (literal (string \"bad state\") 266) 266) (set (attr (data) \"state\" 191) (literal (intOrNat 2) 269) 269) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"Some\" (params 262) 270) 270) (set (attr (data) \"savedState_redeemer\" 271) (variant \"Some\" (sender) 271) 271) (set (operations 280) (cons (transfer (tuple 280 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 274)) (literal (mutez 0) 280) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 275) \"Some\" \"None\" 275) 280) (operations 280) 280) 280))) (redeem_callback True ((set_type (params 284) \"nat\" 285) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 288) (literal (string \"bad sender\") 288) 288) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 2) 291) 291) (literal (string \"bad state\") 291) 291) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 270) \"Some\" \"None\" 294) 294) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 295) (literal (intOrNat 1000000000000000000) 295) 295) (attr (data) \"totalSupply\" 96) 295) 295) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 296) (params 284) 296) (literal (intOrNat 1000000000000000000) 296) 296) 296) (set (attr (data) \"underlyingBalance\" 227) (openVariant (isNat (sub (params 284) (getLocal \"tokensToReceive\" 299) 299) 299) \"Some\" \"None\" 299) 299) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 271) \"Some\" \"None\" 302) 302) (set (operations 312) (cons (transfer (record 303 (address (getLocal \"redeemer\" 304)) (value (getLocal \"tokensToRedeem\" 305))) (literal (mutez 0) 312) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 307) \"Some\" \"None\" 307) 312) (operations 312) 312) 312) (set (operations 325) (cons (transfer (record 315 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 317)) (value (getLocal \"tokensToReceive\" 318))) (literal (mutez 0) 325) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 320) \"Some\" \"None\" 320) 325) (operations 325) 325) 325) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 328) 328) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"None\" (unit) -1) 329) (set (attr (data) \"savedState_redeemer\" 271) (variant \"None\" (unit) -1) 330))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 338) \"unit\" 339) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 342) 342) (literal (string \"bad state\") 342) 342) (set (attr (data) \"state\" 191) (literal (intOrNat 1) 345) 345) (set (operations 354) (cons (transfer (tuple 354 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 348)) (literal (mutez 0) 354) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 349) \"Some\" \"None\" 349) 354) (operations 354) 354) 354))) (updateBalance_callback True ((set_type (params 358) \"nat\" 359) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 362) (literal (string \"bad sender\") 362) 362) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 1) 365) 365) (literal (string \"bad state\") 365) 365) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 368) 368) (set (attr (data) \"underlyingBalance\" 227) (params 358) 371))) (updateContractMetadata True ((set_type (params 411) (tuple \"string\" \"bytes\") 412) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 414) (literal (string \"not governor\") 414) 414) (set (getItem (attr (data) \"metadata\" 418) (first (params 411) 416) 418) (second (params 411) 417) 418))) (updateDexterAddress True ((set_type (params 395) \"address\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"dexterAddress\" 132) (params 395) 399))) (updateGovernorAddress True ((set_type (params 379) \"address\" 380) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 382) (literal (string \"not governor\") 382) 382) (set (attr (data) \"governorAddress\" 414) (params 379) 383))) (updateOvenRegistryAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"ovenRegistryAddress\" 155) (params 403) 407))) (updateRewardAmount True ((set_type (params 387) \"nat\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"rewardAmount\" 164) (params 387) 391))) (updateTokenMetadata True ((set_type (params 422) (tuple \"nat\" (map \"string\" \"bytes\")) 423) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 425) (literal (string \"not governor\") 425) 425) (set (getItem (attr (data) \"token_metadata\" 426) (literal (intOrNat 0) 426) 426) (params 422) 426))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 2772, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "mint", "params": "(record 2776 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)) (value (mul (literal (nat 10) 2754) (literal (intOrNat 1000000000000000000) 2778) 2778)))", "line_no": 2775, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2775)", "show": true, "valid": "(literal (bool True) 2775)", "voting_powers": "(map 2775 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 2787 (address (literal (local-address (static_id 1 82)) 82)) (value (literal (intOrNat 200000000000000000000) 2787)))", "line_no": 2786, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2786)", "show": true, "valid": "(literal (bool True) 2786)", "voting_powers": "(map 2786 )", "export": true}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "redeem_callback", "params": "(literal (intOrNat 200000000000000000000) 2796)", "line_no": 2796, "title": "", "messageClass": "", "source": "none", "sender": "(literal (local-address (static_id 0 8)) 8)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2796)", "show": true, "valid": "(literal (bool True) 2796)", "voting_powers": "(map 2796 )", "export": true}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 82) 2796) \"state\" 2805) (literal (intOrNat 0) 2805) 2805)", "line_no": 2805}], "decompile": false, "kind": "test"}, {"shortname": "redeem_callback_-_fails_in_bad_state", "longname": "redeem_callback - fails in bad state", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 442) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s285\" ((set_type (first (params 89) 2815) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 2815) (contract \"address\") 2815) (set (operations 2815) (cons (transfer (getLocal \"__s285\" 2815) (literal (mutez 0) 2815) (second (params 89) 2815) 89) (operations 2815) 2815) 2815))) (getAllowance True ((bind \"__s286\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 2815) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 2815) \"spender\" 46) 46) 46))) (set_type (second (params 45) 2815) (contract \"nat\") 2815) (set (operations 2815) (cons (transfer (getLocal \"__s286\" 2815) (literal (mutez 0) 2815) (second (params 45) 2815) 45) (operations 2815) 2815) 2815))) (getBalance True ((bind \"__s287\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 2815) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 2815) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 2815) 42) \"balance\" 42) 42))) (set_type (second (params 37) 2815) (contract \"nat\") 2815) (set (operations 2815) (cons (transfer (getLocal \"__s287\" 2815) (literal (mutez 0) 2815) (second (params 37) 2815) 37) (operations 2815) 2815) 2815))) (getTotalSupply True ((bind \"__s288\" ((set_type (first (params 49) 2815) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 2815) (contract \"nat\") 2815) (set (operations 2815) (cons (transfer (getLocal \"__s288\" 2815) (literal (mutez 0) 2815) (second (params 49) 2815) 49) (operations 2815) 2815) 2815))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 2815, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 2820 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)) (value (literal (nat 10) 2818)))", "line_no": 2819, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2819)", "show": true, "valid": "(literal (bool True) 2819)", "voting_powers": "(map 2819 )", "export": true}, {"action": "newContract", "id": "(static_id 1 82)", "export": "(storage (record 82 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 86 ) (bigmap (unknown 443) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 86)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 73 ((literal (string \"\") 2836) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 75)) ((literal (string \"data\") 2836) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 72))) (bigmap \"string\" \"bytes\") 73)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 82)) (rewardAmount (literal (intOrNat 1000000000000000000) 82)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 82)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 62 ((literal (nat 0) 49) (tuple 2836 (literal (nat 0) 49) (type_annotation (map 51 ((literal (string \"name\") 2836) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 53)) ((literal (string \"decimals\") 2836) (literal (bytes \"0x3138\") 54)) ((literal (string \"symbol\") 2836) (literal (bytes \"0x6465787465724c6b555344\") 55)) ((literal (string \"icon\") 2836) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 56))) (map \"string\" \"bytes\") 51)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 62)) (totalSupply (literal (intOrNat 0) 82)) (underlyingBalance (literal (nat 0) 103)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 119) \"unit\" 120) (set (operations 135) (cons (transfer (tuple 135 (to_address (self) \"None\") (tuple 135 (literal (intOrNat 1) 135) (add_seconds (now) (literal (int 3600) 127) 127))) (balance) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 132) 130) \"Some\" \"None\" 130) 135) (operations 135) 135) 135) (set (operations 145) (cons (transfer (unit) (literal (mutez 0) 145) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 140) \"Some\" \"None\" 140) 145) (operations 145) 145) 145))) (deposit True ((set_type (params 187) \"nat\" 188) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 191) 191) (literal (string \"bad state\") 191) 191) (set (attr (data) \"state\" 191) (literal (intOrNat 3) 194) 194) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"Some\" (params 187) 195) 195) (set (attr (data) \"savedState_depositor\" 196) (variant \"Some\" (sender) 196) 196) (set (operations 205) (cons (transfer (tuple 205 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 199)) (literal (mutez 0) 205) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 200) \"Some\" \"None\" 200) 205) (operations 205) 205) 205))) (deposit_callback True ((set_type (params 209) \"nat\" 210) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 213) (literal (string \"bad sender\") 213) 213) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 3) 216) 216) (literal (string \"bad state\") 216) 216) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 195) \"Some\" \"None\" 219) 219) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 220) (literal (intOrNat 1000000000000000000) 220) 220) 220) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 221) 221) ((defineLocal \"newUnderlyingBalance\" (add (params 209) (getLocal \"tokensToDeposit\" 222) 222) 222) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 223) (literal (intOrNat 1000000000000000000) 223) 223) (getLocal \"newUnderlyingBalance\" 223) 223) 223) (set (getLocal \"newTokens\" 2836) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 224) (attr (data) \"totalSupply\" 96) 224) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 224) (getLocal \"fractionOfPoolOwnership\" 224) 224) 224) \"Some\" \"None\" 224) 224) 224)) 221) (set (attr (data) \"underlyingBalance\" 227) (add (params 209) (getLocal \"tokensToDeposit\" 227) 227) 227) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 196) \"Some\" \"None\" 230) 230) (set (operations 241) (cons (transfer (record 231 (from_ (getLocal \"depositor\" 232)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 234))) (literal (mutez 0) 241) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 236) \"Some\" \"None\" 236) 241) (operations 241) 241) 241) (set (operations 253) (cons (transfer (record 244 (address (getLocal \"depositor\" 245)) (value (getLocal \"newTokens\" 246))) (literal (mutez 0) 253) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 248) \"Some\" \"None\" 248) 253) (operations 253) 253) 253) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 256) 256) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"None\" (unit) -1) 257) (set (attr (data) \"savedState_depositor\" 196) (variant \"None\" (unit) -1) 258))) (getAdministrator True ((bind \"__s289\" ((set_type (first (params 108) 2836) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 2836) (contract \"address\") 2836) (set (operations 2836) (cons (transfer (getLocal \"__s289\" 2836) (literal (mutez 0) 2836) (second (params 108) 2836) 108) (operations 2836) 2836) 2836))) (getAllowance True ((bind \"__s290\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 2836) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 2836) \"spender\" 69) 69) 69))) (set_type (second (params 68) 2836) (contract \"nat\") 2836) (set (operations 2836) (cons (transfer (getLocal \"__s290\" 2836) (literal (mutez 0) 2836) (second (params 68) 2836) 68) (operations 2836) 2836) 2836))) (getBalance True ((bind \"__s291\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 2836) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 2836) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 2836) 65) \"balance\" 65) 65))) (set_type (second (params 60) 2836) (contract \"nat\") 2836) (set (operations 2836) (cons (transfer (getLocal \"__s291\" 2836) (literal (mutez 0) 2836) (second (params 60) 2836) 60) (operations 2836) 2836) 2836))) (getTotalSupply True ((bind \"__s292\" ((set_type (first (params 72) 2836) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 2836) (contract \"nat\") 2836) (set (operations 2836) (cons (transfer (getLocal \"__s292\" 2836) (literal (mutez 0) 2836) (second (params 72) 2836) 72) (operations 2836) 2836) 2836))) (liquidate True ((set_type (params 149) \"address\" 150) (set (operations 158) (cons (transfer (params 149) (literal (mutez 0) 158) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 155) 153) \"Some\" \"None\" 153) 158) (operations 158) 158) 158) (set (operations 171) (cons (transfer (record 161 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (attr (data) \"rewardAmount\" 164))) (literal (mutez 0) 171) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 166) \"Some\" \"None\" 166) 171) (operations 171) 171) 171) (set (operations 179) (cons (transfer (unit) (literal (mutez 0) 179) (openVariant (contract \"liquidate\" \"unit\" (params 149) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 262) \"nat\" 263) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 266) 266) (literal (string \"bad state\") 266) 266) (set (attr (data) \"state\" 191) (literal (intOrNat 2) 269) 269) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"Some\" (params 262) 270) 270) (set (attr (data) \"savedState_redeemer\" 271) (variant \"Some\" (sender) 271) 271) (set (operations 280) (cons (transfer (tuple 280 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 274)) (literal (mutez 0) 280) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 275) \"Some\" \"None\" 275) 280) (operations 280) 280) 280))) (redeem_callback True ((set_type (params 284) \"nat\" 285) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 288) (literal (string \"bad sender\") 288) 288) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 2) 291) 291) (literal (string \"bad state\") 291) 291) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 270) \"Some\" \"None\" 294) 294) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 295) (literal (intOrNat 1000000000000000000) 295) 295) (attr (data) \"totalSupply\" 96) 295) 295) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 296) (params 284) 296) (literal (intOrNat 1000000000000000000) 296) 296) 296) (set (attr (data) \"underlyingBalance\" 227) (openVariant (isNat (sub (params 284) (getLocal \"tokensToReceive\" 299) 299) 299) \"Some\" \"None\" 299) 299) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 271) \"Some\" \"None\" 302) 302) (set (operations 312) (cons (transfer (record 303 (address (getLocal \"redeemer\" 304)) (value (getLocal \"tokensToRedeem\" 305))) (literal (mutez 0) 312) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 307) \"Some\" \"None\" 307) 312) (operations 312) 312) 312) (set (operations 325) (cons (transfer (record 315 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 317)) (value (getLocal \"tokensToReceive\" 318))) (literal (mutez 0) 325) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 320) \"Some\" \"None\" 320) 325) (operations 325) 325) 325) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 328) 328) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"None\" (unit) -1) 329) (set (attr (data) \"savedState_redeemer\" 271) (variant \"None\" (unit) -1) 330))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 338) \"unit\" 339) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 342) 342) (literal (string \"bad state\") 342) 342) (set (attr (data) \"state\" 191) (literal (intOrNat 1) 345) 345) (set (operations 354) (cons (transfer (tuple 354 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 348)) (literal (mutez 0) 354) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 349) \"Some\" \"None\" 349) 354) (operations 354) 354) 354))) (updateBalance_callback True ((set_type (params 358) \"nat\" 359) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 362) (literal (string \"bad sender\") 362) 362) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 1) 365) 365) (literal (string \"bad state\") 365) 365) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 368) 368) (set (attr (data) \"underlyingBalance\" 227) (params 358) 371))) (updateContractMetadata True ((set_type (params 411) (tuple \"string\" \"bytes\") 412) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 414) (literal (string \"not governor\") 414) 414) (set (getItem (attr (data) \"metadata\" 418) (first (params 411) 416) 418) (second (params 411) 417) 418))) (updateDexterAddress True ((set_type (params 395) \"address\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"dexterAddress\" 132) (params 395) 399))) (updateGovernorAddress True ((set_type (params 379) \"address\" 380) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 382) (literal (string \"not governor\") 382) 382) (set (attr (data) \"governorAddress\" 414) (params 379) 383))) (updateOvenRegistryAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"ovenRegistryAddress\" 155) (params 403) 407))) (updateRewardAmount True ((set_type (params 387) \"nat\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"rewardAmount\" 164) (params 387) 391))) (updateTokenMetadata True ((set_type (params 422) (tuple \"nat\" (map \"string\" \"bytes\")) 423) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 425) (literal (string \"not governor\") 425) 425) (set (getItem (attr (data) \"token_metadata\" 426) (literal (intOrNat 0) 426) 426) (params 422) 426))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 2836, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "mint", "params": "(record 2840 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)) (value (mul (literal (nat 10) 2818) (literal (intOrNat 1000000000000000000) 2842) 2842)))", "line_no": 2839, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2839)", "show": true, "valid": "(literal (bool True) 2839)", "voting_powers": "(map 2839 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 2851 (address (literal (local-address (static_id 1 82)) 82)) (value (literal (intOrNat 200000000000000000000) 2851)))", "line_no": 2850, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2850)", "show": true, "valid": "(literal (bool True) 2850)", "voting_powers": "(map 2850 )", "export": true}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "redeem_callback", "params": "(literal (intOrNat 200000000000000000000) 2861)", "line_no": 2861, "title": "", "messageClass": "", "source": "none", "sender": "(literal (local-address (static_id 0 8)) 8)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2861)", "show": true, "valid": "(literal (bool False) 2861)", "voting_powers": "(map 2861 )", "export": true}], "decompile": false, "kind": "test"}, {"shortname": "redeem_callback_-_fails_with_bad_sender", "longname": "redeem_callback - fails with bad sender", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 453) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 95) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 71) (record ((address \"address\") (value \"nat\")) None) 72) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 73) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 74) \"balance\" 74) (attr (params 71) \"value\" 74) 74) 74) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 71) \"address\" 74) 75) \"balance\" 75) (attr (params 71) \"value\" 74) 75) 75) \"Some\" \"None\" 75) 75) (set (attr (data) \"totalSupply\" 76) (openVariant (isNat (sub (attr (data) \"totalSupply\" 76) (attr (params 71) \"value\" 74) 76) 76) \"Some\" \"None\" 76) 76))) (getAdministrator True ((bind \"__s293\" ((set_type (first (params 89) 2876) \"unit\" 90) (result (attr (data) \"administrator\" 80) 91))) (set_type (second (params 89) 2876) (contract \"address\") 2876) (set (operations 2876) (cons (transfer (getLocal \"__s293\" 2876) (literal (mutez 0) 2876) (second (params 89) 2876) 89) (operations 2876) 2876) 2876))) (getAllowance True ((bind \"__s294\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 45) 2876) \"owner\" 46) 46) \"approvals\" 46) (attr (first (params 45) 2876) \"spender\" 46) 46) 46))) (set_type (second (params 45) 2876) (contract \"nat\") 2876) (set (operations 2876) (cons (transfer (getLocal \"__s294\" 2876) (literal (mutez 0) 2876) (second (params 45) 2876) 45) (operations 2876) 2876) 2876))) (getBalance True ((bind \"__s295\" ((ifBlock (invert (contains (attr (data) \"balances\" 28) (first (params 37) 2876) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (first (params 37) 2876) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 2876) 42) \"balance\" 42) 42))) (set_type (second (params 37) 2876) (contract \"nat\") 2876) (set (operations 2876) (cons (transfer (getLocal \"__s295\" 2876) (literal (mutez 0) 2876) (second (params 37) 2876) 37) (operations 2876) 2876) 2876))) (getTotalSupply True ((bind \"__s296\" ((set_type (first (params 49) 2876) \"unit\" 50) (result (attr (data) \"totalSupply\" 76) 51))) (set_type (second (params 49) 2876) (contract \"nat\") 2876) (set (operations 2876) (cons (transfer (getLocal \"__s296\" 2876) (literal (mutez 0) 2876) (second (params 49) 2876) 49) (operations 2876) 2876) 2876))) (mint True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 65) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 67) 67) 67) (set (attr (data) \"totalSupply\" 76) (add (attr (data) \"totalSupply\" 76) (attr (params 63) \"value\" 67) 68) 68))) (setAdministrator True ((set_type (params 83) \"address\" 84) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 85) (set (attr (data) \"administrator\" 80) (params 83) 86))) (setPause True ((set_type (params 98) \"bool\" 99) (verify (eq (sender) (attr (data) \"administrator\" 80) 80) 100) (set (attr (data) \"paused\" 95) (params 98) 101))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 80) 80) (and (invert (attr (data) \"paused\" 95) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 80) 80) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 2876, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 2881 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)) (value (literal (nat 10) 2879)))", "line_no": 2880, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2880)", "show": true, "valid": "(literal (bool True) 2880)", "voting_powers": "(map 2880 )", "export": true}, {"action": "newContract", "id": "(static_id 1 82)", "export": "(storage (record 82 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 86 ) (bigmap (unknown 454) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 86)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 73 ((literal (string \"\") 2897) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 75)) ((literal (string \"data\") 2897) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 72))) (bigmap \"string\" \"bytes\") 73)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 82)) (rewardAmount (literal (intOrNat 1000000000000000000) 82)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"Some\" (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21) 2892)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"Some\" (mul (literal (nat 10) 2879) (literal (intOrNat 1000000000000000000) 2893) 2893) 2893)) (state (literal (intOrNat 2) 82)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (token_metadata (type_annotation (big_map 62 ((literal (nat 0) 49) (tuple 2897 (literal (nat 0) 49) (type_annotation (map 51 ((literal (string \"name\") 2897) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 53)) ((literal (string \"decimals\") 2897) (literal (bytes \"0x3138\") 54)) ((literal (string \"symbol\") 2897) (literal (bytes \"0x6465787465724c6b555344\") 55)) ((literal (string \"icon\") 2897) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 56))) (map \"string\" \"bytes\") 51)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 62)) (totalSupply (literal (intOrNat 0) 82)) (underlyingBalance (literal (nat 0) 103)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 119) \"unit\" 120) (set (operations 135) (cons (transfer (tuple 135 (to_address (self) \"None\") (tuple 135 (literal (intOrNat 1) 135) (add_seconds (now) (literal (int 3600) 127) 127))) (balance) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 132) 130) \"Some\" \"None\" 130) 135) (operations 135) 135) 135) (set (operations 145) (cons (transfer (unit) (literal (mutez 0) 145) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 140) \"Some\" \"None\" 140) 145) (operations 145) 145) 145))) (deposit True ((set_type (params 187) \"nat\" 188) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 191) 191) (literal (string \"bad state\") 191) 191) (set (attr (data) \"state\" 191) (literal (intOrNat 3) 194) 194) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"Some\" (params 187) 195) 195) (set (attr (data) \"savedState_depositor\" 196) (variant \"Some\" (sender) 196) 196) (set (operations 205) (cons (transfer (tuple 205 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 199)) (literal (mutez 0) 205) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 200) \"Some\" \"None\" 200) 205) (operations 205) 205) 205))) (deposit_callback True ((set_type (params 209) \"nat\" 210) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 213) (literal (string \"bad sender\") 213) 213) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 3) 216) 216) (literal (string \"bad state\") 216) 216) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 195) \"Some\" \"None\" 219) 219) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 220) (literal (intOrNat 1000000000000000000) 220) 220) 220) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 221) 221) ((defineLocal \"newUnderlyingBalance\" (add (params 209) (getLocal \"tokensToDeposit\" 222) 222) 222) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 223) (literal (intOrNat 1000000000000000000) 223) 223) (getLocal \"newUnderlyingBalance\" 223) 223) 223) (set (getLocal \"newTokens\" 2897) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 224) (attr (data) \"totalSupply\" 96) 224) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 224) (getLocal \"fractionOfPoolOwnership\" 224) 224) 224) \"Some\" \"None\" 224) 224) 224)) 221) (set (attr (data) \"underlyingBalance\" 227) (add (params 209) (getLocal \"tokensToDeposit\" 227) 227) 227) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 196) \"Some\" \"None\" 230) 230) (set (operations 241) (cons (transfer (record 231 (from_ (getLocal \"depositor\" 232)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 234))) (literal (mutez 0) 241) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 236) \"Some\" \"None\" 236) 241) (operations 241) 241) 241) (set (operations 253) (cons (transfer (record 244 (address (getLocal \"depositor\" 245)) (value (getLocal \"newTokens\" 246))) (literal (mutez 0) 253) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 248) \"Some\" \"None\" 248) 253) (operations 253) 253) 253) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 256) 256) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"None\" (unit) -1) 257) (set (attr (data) \"savedState_depositor\" 196) (variant \"None\" (unit) -1) 258))) (getAdministrator True ((bind \"__s297\" ((set_type (first (params 108) 2897) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) 2897) (contract \"address\") 2897) (set (operations 2897) (cons (transfer (getLocal \"__s297\" 2897) (literal (mutez 0) 2897) (second (params 108) 2897) 108) (operations 2897) 2897) 2897))) (getAllowance True ((bind \"__s298\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) 2897) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) 2897) \"spender\" 69) 69) 69))) (set_type (second (params 68) 2897) (contract \"nat\") 2897) (set (operations 2897) (cons (transfer (getLocal \"__s298\" 2897) (literal (mutez 0) 2897) (second (params 68) 2897) 68) (operations 2897) 2897) 2897))) (getBalance True ((bind \"__s299\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) 2897) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) 2897) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) 2897) 65) \"balance\" 65) 65))) (set_type (second (params 60) 2897) (contract \"nat\") 2897) (set (operations 2897) (cons (transfer (getLocal \"__s299\" 2897) (literal (mutez 0) 2897) (second (params 60) 2897) 60) (operations 2897) 2897) 2897))) (getTotalSupply True ((bind \"__s300\" ((set_type (first (params 72) 2897) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) 2897) (contract \"nat\") 2897) (set (operations 2897) (cons (transfer (getLocal \"__s300\" 2897) (literal (mutez 0) 2897) (second (params 72) 2897) 72) (operations 2897) 2897) 2897))) (liquidate True ((set_type (params 149) \"address\" 150) (set (operations 158) (cons (transfer (params 149) (literal (mutez 0) 158) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 155) 153) \"Some\" \"None\" 153) 158) (operations 158) 158) 158) (set (operations 171) (cons (transfer (record 161 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (attr (data) \"rewardAmount\" 164))) (literal (mutez 0) 171) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 166) \"Some\" \"None\" 166) 171) (operations 171) 171) 171) (set (operations 179) (cons (transfer (unit) (literal (mutez 0) 179) (openVariant (contract \"liquidate\" \"unit\" (params 149) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 262) \"nat\" 263) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 266) 266) (literal (string \"bad state\") 266) 266) (set (attr (data) \"state\" 191) (literal (intOrNat 2) 269) 269) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"Some\" (params 262) 270) 270) (set (attr (data) \"savedState_redeemer\" 271) (variant \"Some\" (sender) 271) 271) (set (operations 280) (cons (transfer (tuple 280 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 274)) (literal (mutez 0) 280) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 275) \"Some\" \"None\" 275) 280) (operations 280) 280) 280))) (redeem_callback True ((set_type (params 284) \"nat\" 285) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 288) (literal (string \"bad sender\") 288) 288) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 2) 291) 291) (literal (string \"bad state\") 291) 291) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 270) \"Some\" \"None\" 294) 294) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 295) (literal (intOrNat 1000000000000000000) 295) 295) (attr (data) \"totalSupply\" 96) 295) 295) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 296) (params 284) 296) (literal (intOrNat 1000000000000000000) 296) 296) 296) (set (attr (data) \"underlyingBalance\" 227) (openVariant (isNat (sub (params 284) (getLocal \"tokensToReceive\" 299) 299) 299) \"Some\" \"None\" 299) 299) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 271) \"Some\" \"None\" 302) 302) (set (operations 312) (cons (transfer (record 303 (address (getLocal \"redeemer\" 304)) (value (getLocal \"tokensToRedeem\" 305))) (literal (mutez 0) 312) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 307) \"Some\" \"None\" 307) 312) (operations 312) 312) 312) (set (operations 325) (cons (transfer (record 315 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 317)) (value (getLocal \"tokensToReceive\" 318))) (literal (mutez 0) 325) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 320) \"Some\" \"None\" 320) 325) (operations 325) 325) 325) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 328) 328) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"None\" (unit) -1) 329) (set (attr (data) \"savedState_redeemer\" 271) (variant \"None\" (unit) -1) 330))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 338) \"unit\" 339) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 342) 342) (literal (string \"bad state\") 342) 342) (set (attr (data) \"state\" 191) (literal (intOrNat 1) 345) 345) (set (operations 354) (cons (transfer (tuple 354 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 348)) (literal (mutez 0) 354) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 349) \"Some\" \"None\" 349) 354) (operations 354) 354) 354))) (updateBalance_callback True ((set_type (params 358) \"nat\" 359) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 362) (literal (string \"bad sender\") 362) 362) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 1) 365) 365) (literal (string \"bad state\") 365) 365) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 368) 368) (set (attr (data) \"underlyingBalance\" 227) (params 358) 371))) (updateContractMetadata True ((set_type (params 411) (tuple \"string\" \"bytes\") 412) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 414) (literal (string \"not governor\") 414) 414) (set (getItem (attr (data) \"metadata\" 418) (first (params 411) 416) 418) (second (params 411) 417) 418))) (updateDexterAddress True ((set_type (params 395) \"address\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"dexterAddress\" 132) (params 395) 399))) (updateGovernorAddress True ((set_type (params 379) \"address\" 380) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 382) (literal (string \"not governor\") 382) 382) (set (attr (data) \"governorAddress\" 414) (params 379) 383))) (updateOvenRegistryAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"ovenRegistryAddress\" 155) (params 403) 407))) (updateRewardAmount True ((set_type (params 387) \"nat\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"rewardAmount\" 164) (params 387) 391))) (updateTokenMetadata True ((set_type (params 422) (tuple \"nat\" (map \"string\" \"bytes\")) 423) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 425) (literal (string \"not governor\") 425) 425) (set (getItem (attr (data) \"token_metadata\" 426) (literal (intOrNat 0) 426) 426) (params 422) 426))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 2897, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "mint", "params": "(record 2901 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 21)) (value (mul (literal (nat 10) 2879) (literal (intOrNat 1000000000000000000) 2903) 2903)))", "line_no": 2900, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2900)", "show": true, "valid": "(literal (bool True) 2900)", "voting_powers": "(map 2900 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 2912 (address (literal (local-address (static_id 1 82)) 82)) (value (literal (intOrNat 200000000000000000000) 2912)))", "line_no": 2911, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2911)", "show": true, "valid": "(literal (bool True) 2911)", "voting_powers": "(map 2911 )", "export": true}, {"action": "message", "id": "(static_id 1 82)", "dynamic": false, "message": "redeem_callback", "params": "(literal (intOrNat 200000000000000000000) 2922)", "line_no": 2922, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1bTpviNnyx2PXsNmGpCQTMQsGoYordkUoA\") 26)", "chain_id": "", "time": "(literal (timestamp 0) 82)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 2922)", "show": true, "valid": "(literal (bool False) 2922)", "voting_powers": "(map 2922 )", "export": true}], "decompile": false, "kind": "test"}, {"shortname": "pool", "longname": "pool", "scenario": [{"action": "newContract", "id": "(static_id 0 82)", "export": "(storage (record 82 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 86 ) (bigmap (unknown 1) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 86)) (dexterAddress (literal (address \"tz1aRoaRhSpRYvFdyvgWLL6TGyRoGF51wDjM\") 15)) (governorAddress (literal (address \"tz1NoYvKjXTzTk54VpLxBfouJ33J8jwKPPvw\") 9)) (metadata (type_annotation (big_map 73 ((literal (string \"\") -1) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 75)) ((literal (string \"data\") -1) (literal (bytes \"0x7b20226e616d65223a2022446578746572204c69717569646174696e67206b555344222c2020226465736372697074696f6e223a20225374616b6564206b55534420696e206120446578746572206c69717569646174696f6e2073797374656d222c202022617574686f7273223a205b22486f766572204c616273203c68656c6c6f40686f7665722e656e67696e656572696e673e225d2c202022686f6d6570616765223a20202268747470733a2f2f6b6f6c696272692e66696e616e636522207d0a\") 72))) (bigmap \"string\" \"bytes\") 73)) (ovenRegistryAddress (literal (address \"tz1VQnqCCqX4K5sP3FNkVSNKTdCAMJDd3E1n\") 16)) (paused (literal (bool False) 82)) (rewardAmount (literal (intOrNat 1000000000000000000) 82)) (savedState_depositor (variant \"None\" (unit) -1)) (savedState_redeemer (variant \"None\" (unit) -1)) (savedState_tokensToDeposit (variant \"None\" (unit) -1)) (savedState_tokensToRedeem (variant \"None\" (unit) -1)) (state (literal (intOrNat 0) 82)) (tokenAddress (literal (address \"tz1aJS7Pk9uWR3wWyFf1i3RwhYxN84G7stom\") 17)) (token_metadata (type_annotation (big_map 62 ((literal (nat 0) 49) (tuple -1 (literal (nat 0) 49) (type_annotation (map 51 ((literal (string \"name\") -1) (literal (bytes \"0x446578746572204c69717569646174696e67206b555344\") 53)) ((literal (string \"decimals\") -1) (literal (bytes \"0x3138\") 54)) ((literal (string \"symbol\") -1) (literal (bytes \"0x6465787465724c6b555344\") 55)) ((literal (string \"icon\") -1) (literal (bytes \"0x2068747470733a2f2f6b6f6c696272692d646174612e73332e616d617a6f6e6177732e636f6d2f6c6f676f2e706e67\") 56))) (map \"string\" \"bytes\") 51)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 62)) (totalSupply (literal (intOrNat 0) 82)) (underlyingBalance (literal (nat 0) 103)))\nstorage_type (())\nmessages ((approve True ((set_type (params 43) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 44) (ifBlock (invert (contains (attr (data) \"balances\" 56) (sender) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (sender) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (invert (attr (data) \"paused\" 113) 50) 50) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 56) (sender) 51) \"approvals\" 51) (attr (params 43) \"spender\" 51) (literal (intOrNat 0) 51) 51) (literal (intOrNat 0) 52) 52) (eq (attr (params 43) \"value\" 52) (literal (intOrNat 0) 52) 52) 52) (literal (string \"UnsafeAllowanceChange\") 52) 52) (set (getItem (attr (getItem (attr (data) \"balances\" 56) (sender) 53) \"approvals\" 53) (attr (params 43) \"spender\" 51) 53) (attr (params 43) \"value\" 52) 53))) (burn True ((set_type (params 88) (record ((address \"address\") (value \"nat\")) None) 89) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 92) 92) 92) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 94) \"balance\" 94) (attr (params 88) \"value\" 94) 94) 94) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 88) \"address\" 94) 95) \"balance\" 95) (attr (params 88) \"value\" 94) 95) 95) \"Some\" \"None\" 95) 95) (set (attr (data) \"totalSupply\" 96) (openVariant (isNat (sub (attr (data) \"totalSupply\" 96) (attr (params 88) \"value\" 94) 96) 96) \"Some\" \"None\" 96) 96))) (default True ((set_type (params 119) \"unit\" 120) (set (operations 135) (cons (transfer (tuple 135 (to_address (self) \"None\") (tuple 135 (literal (intOrNat 1) 135) (add_seconds (now) (literal (int 3600) 127) 127))) (balance) (openVariant (contract \"xtzToToken\" (tuple \"address\" (tuple \"nat\" \"timestamp\")) (attr (data) \"dexterAddress\" 132) 130) \"Some\" \"None\" 130) 135) (operations 135) 135) 135) (set (operations 145) (cons (transfer (unit) (literal (mutez 0) 145) (openVariant (contract \"updateBalance\" \"unit\" (to_address (self) \"None\") 140) \"Some\" \"None\" 140) 145) (operations 145) 145) 145))) (deposit True ((set_type (params 187) \"nat\" 188) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 191) 191) (literal (string \"bad state\") 191) 191) (set (attr (data) \"state\" 191) (literal (intOrNat 3) 194) 194) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"Some\" (params 187) 195) 195) (set (attr (data) \"savedState_depositor\" 196) (variant \"Some\" (sender) 196) 196) (set (operations 205) (cons (transfer (tuple 205 (to_address (self) \"None\") (self_entry_point \"deposit_callback\" 199)) (literal (mutez 0) 205) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 200) \"Some\" \"None\" 200) 205) (operations 205) 205) 205))) (deposit_callback True ((set_type (params 209) \"nat\" 210) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 213) (literal (string \"bad sender\") 213) 213) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 3) 216) 216) (literal (string \"bad state\") 216) 216) (defineLocal \"tokensToDeposit\" (openVariant (attr (data) \"savedState_tokensToDeposit\" 195) \"Some\" \"None\" 219) 219) (defineLocal \"newTokens\" (mul (getLocal \"tokensToDeposit\" 220) (literal (intOrNat 1000000000000000000) 220) 220) 220) (ifBlock (neq (attr (data) \"totalSupply\" 96) (literal (nat 0) 221) 221) ((defineLocal \"newUnderlyingBalance\" (add (params 209) (getLocal \"tokensToDeposit\" 222) 222) 222) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToDeposit\" 223) (literal (intOrNat 1000000000000000000) 223) 223) (getLocal \"newUnderlyingBalance\" 223) 223) 223) (set (getLocal \"newTokens\" -1) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 224) (attr (data) \"totalSupply\" 96) 224) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 224) (getLocal \"fractionOfPoolOwnership\" 224) 224) 224) \"Some\" \"None\" 224) 224) 224)) 221) (set (attr (data) \"underlyingBalance\" 227) (add (params 209) (getLocal \"tokensToDeposit\" 227) 227) 227) (defineLocal \"depositor\" (openVariant (attr (data) \"savedState_depositor\" 196) \"Some\" \"None\" 230) 230) (set (operations 241) (cons (transfer (record 231 (from_ (getLocal \"depositor\" 232)) (to_ (to_address (self) \"None\")) (value (getLocal \"tokensToDeposit\" 234))) (literal (mutez 0) 241) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 236) \"Some\" \"None\" 236) 241) (operations 241) 241) 241) (set (operations 253) (cons (transfer (record 244 (address (getLocal \"depositor\" 245)) (value (getLocal \"newTokens\" 246))) (literal (mutez 0) 253) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 248) \"Some\" \"None\" 248) 253) (operations 253) 253) 253) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 256) 256) (set (attr (data) \"savedState_tokensToDeposit\" 195) (variant \"None\" (unit) -1) 257) (set (attr (data) \"savedState_depositor\" 196) (variant \"None\" (unit) -1) 258))) (getAdministrator True ((bind \"__s301\" ((set_type (first (params 108) -1) \"unit\" 109) (result (attr (data) \"administrator\" 99) 110))) (set_type (second (params 108) -1) (contract \"address\") -1) (set (operations -1) (cons (transfer (getLocal \"__s301\" -1) (literal (mutez 0) -1) (second (params 108) -1) 108) (operations -1) -1) -1))) (getAllowance True ((bind \"__s302\" ((result (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (first (params 68) -1) \"owner\" 69) 69) \"approvals\" 69) (attr (first (params 68) -1) \"spender\" 69) 69) 69))) (set_type (second (params 68) -1) (contract \"nat\") -1) (set (operations -1) (cons (transfer (getLocal \"__s302\" -1) (literal (mutez 0) -1) (second (params 68) -1) 68) (operations -1) -1) -1))) (getBalance True ((bind \"__s303\" ((ifBlock (invert (contains (attr (data) \"balances\" 56) (first (params 60) -1) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (first (params 60) -1) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (result (attr (getItem (attr (data) \"balances\" 56) (first (params 60) -1) 65) \"balance\" 65) 65))) (set_type (second (params 60) -1) (contract \"nat\") -1) (set (operations -1) (cons (transfer (getLocal \"__s303\" -1) (literal (mutez 0) -1) (second (params 60) -1) 60) (operations -1) -1) -1))) (getTotalSupply True ((bind \"__s304\" ((set_type (first (params 72) -1) \"unit\" 73) (result (attr (data) \"totalSupply\" 96) 74))) (set_type (second (params 72) -1) (contract \"nat\") -1) (set (operations -1) (cons (transfer (getLocal \"__s304\" -1) (literal (mutez 0) -1) (second (params 72) -1) 72) (operations -1) -1) -1))) (liquidate True ((set_type (params 149) \"address\" 150) (set (operations 158) (cons (transfer (params 149) (literal (mutez 0) 158) (openVariant (contract \"isOven\" \"address\" (attr (data) \"ovenRegistryAddress\" 155) 153) \"Some\" \"None\" 153) 158) (operations 158) 158) 158) (set (operations 171) (cons (transfer (record 161 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (attr (data) \"rewardAmount\" 164))) (literal (mutez 0) 171) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 166) \"Some\" \"None\" 166) 171) (operations 171) 171) 171) (set (operations 179) (cons (transfer (unit) (literal (mutez 0) 179) (openVariant (contract \"liquidate\" \"unit\" (params 149) 174) \"Some\" \"None\" 174) 179) (operations 179) 179) 179))) (mint True ((set_type (params 77) (record ((address \"address\") (value \"nat\")) None) 78) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (eq (sender) (to_address (self) \"None\") 81) 81) 81) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 77) \"address\" 83) 84) \"balance\" 84) (attr (params 77) \"value\" 84) 84) 84) (set (attr (data) \"totalSupply\" 96) (add (attr (data) \"totalSupply\" 96) (attr (params 77) \"value\" 84) 85) 85))) (redeem True ((set_type (params 262) \"nat\" 263) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 266) 266) (literal (string \"bad state\") 266) 266) (set (attr (data) \"state\" 191) (literal (intOrNat 2) 269) 269) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"Some\" (params 262) 270) 270) (set (attr (data) \"savedState_redeemer\" 271) (variant \"Some\" (sender) 271) 271) (set (operations 280) (cons (transfer (tuple 280 (to_address (self) \"None\") (self_entry_point \"redeem_callback\" 274)) (literal (mutez 0) 280) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 275) \"Some\" \"None\" 275) 280) (operations 280) 280) 280))) (redeem_callback True ((set_type (params 284) \"nat\" 285) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 288) (literal (string \"bad sender\") 288) 288) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 2) 291) 291) (literal (string \"bad state\") 291) 291) (defineLocal \"tokensToRedeem\" (openVariant (attr (data) \"savedState_tokensToRedeem\" 270) \"Some\" \"None\" 294) 294) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (getLocal \"tokensToRedeem\" 295) (literal (intOrNat 1000000000000000000) 295) 295) (attr (data) \"totalSupply\" 96) 295) 295) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 296) (params 284) 296) (literal (intOrNat 1000000000000000000) 296) 296) 296) (set (attr (data) \"underlyingBalance\" 227) (openVariant (isNat (sub (params 284) (getLocal \"tokensToReceive\" 299) 299) 299) \"Some\" \"None\" 299) 299) (defineLocal \"redeemer\" (openVariant (attr (data) \"savedState_redeemer\" 271) \"Some\" \"None\" 302) 302) (set (operations 312) (cons (transfer (record 303 (address (getLocal \"redeemer\" 304)) (value (getLocal \"tokensToRedeem\" 305))) (literal (mutez 0) 312) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 307) \"Some\" \"None\" 307) 312) (operations 312) 312) 312) (set (operations 325) (cons (transfer (record 315 (from_ (to_address (self) \"None\")) (to_ (getLocal \"redeemer\" 317)) (value (getLocal \"tokensToReceive\" 318))) (literal (mutez 0) 325) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 202) 320) \"Some\" \"None\" 320) 325) (operations 325) 325) 325) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 328) 328) (set (attr (data) \"savedState_tokensToRedeem\" 270) (variant \"None\" (unit) -1) 329) (set (attr (data) \"savedState_redeemer\" 271) (variant \"None\" (unit) -1) 330))) (setAdministrator True ((set_type (params 102) \"address\" 103) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 104) (set (attr (data) \"administrator\" 99) (params 102) 105))) (setPause True ((set_type (params 116) \"bool\" 117) (verify (eq (sender) (attr (data) \"administrator\" 99) 99) 118) (set (attr (data) \"paused\" 113) (params 116) 119))) (transfer True ((set_type (params 29) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 30) (verify (or (eq (sender) (attr (data) \"administrator\" 99) 99) (and (invert (attr (data) \"paused\" 113) 32) (or (eq (attr (params 29) \"from_\" 33) (sender) 33) (ge (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 34) \"approvals\" 34) (sender) 34) (attr (params 29) \"value\" 34) 34) 33) 32) 31) 31) (ifBlock (invert (contains (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 56) 56) ((set (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 57) (record 57 (approvals (map 57 )) (balance (literal (intOrNat 0) 57))) 57)) 56) (verify (ge (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 36) \"balance\" 36) (attr (params 29) \"value\" 34) 36) 36) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 37) \"balance\" 37) (attr (params 29) \"value\" 34) 37) 37) \"Some\" \"None\" 37) 37) (set (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (add (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"to_\" 35) 38) \"balance\" 38) (attr (params 29) \"value\" 34) 38) 38) (ifBlock (and (neq (attr (params 29) \"from_\" 33) (sender) 39) (invert (eq (sender) (attr (data) \"administrator\" 99) 99) 39) 39) ((set (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 56) (attr (params 29) \"from_\" 33) 40) \"approvals\" 40) (sender) 40) (attr (params 29) \"value\" 34) 40) 40) \"Some\" \"None\" 40) 40)) 39))) (updateBalance True ((set_type (params 338) \"unit\" 339) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 0) 342) 342) (literal (string \"bad state\") 342) 342) (set (attr (data) \"state\" 191) (literal (intOrNat 1) 345) 345) (set (operations 354) (cons (transfer (tuple 354 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 348)) (literal (mutez 0) 354) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 202) 349) \"Some\" \"None\" 349) 354) (operations 354) 354) 354))) (updateBalance_callback True ((set_type (params 358) \"nat\" 359) (verify (eq (sender) (attr (data) \"tokenAddress\" 202) 362) (literal (string \"bad sender\") 362) 362) (verify (eq (attr (data) \"state\" 191) (literal (intOrNat 1) 365) 365) (literal (string \"bad state\") 365) 365) (set (attr (data) \"state\" 191) (literal (intOrNat 0) 368) 368) (set (attr (data) \"underlyingBalance\" 227) (params 358) 371))) (updateContractMetadata True ((set_type (params 411) (tuple \"string\" \"bytes\") 412) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 414) (literal (string \"not governor\") 414) 414) (set (getItem (attr (data) \"metadata\" 418) (first (params 411) 416) 418) (second (params 411) 417) 418))) (updateDexterAddress True ((set_type (params 395) \"address\" 396) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 398) (literal (string \"not governor\") 398) 398) (set (attr (data) \"dexterAddress\" 132) (params 395) 399))) (updateGovernorAddress True ((set_type (params 379) \"address\" 380) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 382) (literal (string \"not governor\") 382) 382) (set (attr (data) \"governorAddress\" 414) (params 379) 383))) (updateOvenRegistryAddress True ((set_type (params 403) \"address\" 404) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 406) (literal (string \"not governor\") 406) 406) (set (attr (data) \"ovenRegistryAddress\" 155) (params 403) 407))) (updateRewardAmount True ((set_type (params 387) \"nat\" 388) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 390) (literal (string \"not governor\") 390) 390) (set (attr (data) \"rewardAmount\" 164) (params 387) 391))) (updateTokenMetadata True ((set_type (params 422) (tuple \"nat\" (map \"string\" \"bytes\")) 423) (verify (eq (sender) (attr (data) \"governorAddress\" 414) 425) (literal (string \"not governor\") 425) 425) (set (getItem (attr (data) \"token_metadata\" 426) (literal (intOrNat 0) 426) 426) (params 422) 426))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": -1, "show": true, "accept_unknown_types": false}], "decompile": false, "kind": "compilation"}]